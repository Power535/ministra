/*! playkey: v0.0.1 (webpack: v1.12.0) */
!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){try{return decodeURIComponent(escape(atob(e)))}catch(t){}}var s,o=n(2),a=n(3),r=(n(20),n(5)),c=window.location.href;if(c.indexOf("?")>=0){for(var l,d=c.substr(c.indexOf("?")+1).split("&"),u={},h=0;h<d.length;h++)l=d[h],u[l.substr(0,l.indexOf("="))]=l.substr(l.indexOf("=")+1);r.referrer=i(u.referrer)}else r.referrer=document.referrer;o.addListeners({load:function(){gSTB.LoadUserData("playkey.json");s=n(8),s.readConfig(function(e){s.user.loginByMail({login:e.login,pass:e.pass},function(e,t){t&&n(31).load({name:r.user.lang},function(e){window._=window.gettext,a.init([n(23),n(24),n(9),n(17),n(13),n(19),n(18)]),a.pages.forEach(function(e){e.emit("load")}),r.authorize&&o.emit("login",{load:!0}),n(22)})})})},done:function(){}})},function(e,t,n){"use strict";e.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(e,t,n){"use strict";var i,s,o=n(32),a=n(3),r=n(1),c={};n(34),i=new o({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),i.setScreen=function(e){var t;return e?(e.availHeight=e.height-(e.availTop+e.availBottom),e.availWidth=e.width-(e.availLeft+e.availRight),window.moveTo(0,0),window.resizeTo(e.width,e.height),t=document.querySelector("link[rel=stylesheet]"),t&&t instanceof HTMLLinkElement&&document.head.removeChild(t),t=document.createElement("link"),t.rel="stylesheet",t.href="css/release."+e.height+".css?"+ +new Date,document.head.appendChild(t),this.data.metrics=e,!0):!1},i.EVENT_END_OF_FILE=1,i.EVENT_GET_MEDIA_INFO=2,i.EVENT_PLAYBACK_BEGIN=4,i.EVENT_CONTENT_ERROR=5,i.EVENT_DUAL_MONO_DETECT=6,i.EVENT_INFO_GET=7,i.EVENT_SUBTITLE_LOAD_ERROR=8,i.EVENT_SUBTITLE_FIND=9,i.EVENT_HDMI_CONNECT=32,i.EVENT_HDMI_DISCONNECT=33,i.EVENT_RECORD_FINISH_SUCCESSFULL=34,i.EVENT_RECORD_FINISH_ERROR=35,i.EVENT_DVB_SCANING=40,i.EVENT_DVB_FOUND=41,i.EVENT_DVB_CHANELL_EPG_UPDATE=42,i.EVENT_DVB_ANTENNA_OFF=43,i.setScreen(n(38)[screen.height]);for(s in r)"volumeUp"!==s&&"volumeDown"!==s&&(c[r[s]]=!0);i.defaultEvents={load:function(e){i.data.time.load=e.timeStamp,i.events[e.type]&&i.emit(e.type,e),a.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)}),i.data.time.done=+new Date,i.events.done&&i.emit("done",e)},unload:function(e){i.events[e.type]&&i.emit(e.type,e),a.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)})},error:function(e){},keydown:function(e){var t,n=a.current;0!==e.keyCode&&(e.code=e.keyCode,e.shiftKey&&(e.code+=1e3),e.altKey&&(e.code+=2e3),t=n.activeComponent,t&&t!==n&&(t.events[e.type]&&t.emit(e.type,e),!e.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,e)),e.stop||(n.events[e.type]&&n.emit(e.type,e),e.stop||i.events[e.type]&&i.emit(e.type,e)),i.data.host&&c[e.code]&&e.preventDefault())},keypress:function(e){var t=a.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},click:function(e){},contextmenu:function(e){e.preventDefault()},mousewheel:function(e){var t=a.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}};for(s in i.defaultEvents)window.addEventListener(s,i.defaultEvents[s]);window.stbEvent={},window.stbEvent.onEvent=function(e,t){if(i.events.media){if(t)try{t=JSON.parse(t)}catch(n){}i.emit("media",{code:parseInt(e,10),info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,n){i.events.message&&i.emit("message",{broadcast:!0,windowId:e,message:t,data:n})},window.stbEvent.onMessage=function(e,t,n){i.events.message&&i.emit("message",{broadcast:!1,windowId:e,message:t,data:n})},window.stbEvent.onMount=function(e){i.events["device:mount"]&&i.emit("device:mount",{state:e})},window.stbEvent.onMediaAvailable=function(){i.events["media:available"]&&i.emit("media:available")},window.stbEvent.onNetworkStateChange=function(e){i.events["internet:state"]&&i.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){i.events["browser:progress"]&&i.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){i.events["window:focus"]&&i.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),e.exports=i},function(e,t,n){"use strict";var i,s=n(12);i=new s,i.current=null,i.history=[],i.pages=[],i.ids={},i.init=function(e){var t,n,i;if(e){for(this.pages=[],this.pages=e,t=0,n=e.length;n>t;t++)i=e[t],this.ids[i.id]=i,i.active&&(this.current=i);return this.events.init&&this.emit("init",{pages:e}),!0}return!1},i.parse=function(e){var t={name:"",data:[]};return t.data=e.split("/").map(decodeURIComponent),t.name=t.data.shift().slice(1),t},i.stringify=function(e,t){return t=Array.isArray(t)?t:[],e=encodeURIComponent(e),t=t.map(encodeURIComponent),t.unshift(e),t.join("/")},i.show=function(e,t){return e&&!e.active?(e.$node.classList.add("active"),e.active=!0,this.current=e,e.events.show&&e.emit("show",{page:e,data:t}),!0):!1},i.hide=function(e){return e&&e.active?(e.$node.classList.remove("active"),e.active=!1,this.current=null,e.events.hide&&e.emit("hide",{page:e}),!0):!1},i.navigate=function(e,t){var n=this.current,i=this.ids[e];return i&&!i.active?(location.hash=this.stringify(e,t),this.hide(this.current),this.show(i,t),this.events.navigate&&this.emit("navigate",{from:n,to:i}),this.history.push(i),!0):!1},i.back=function(){var e,t;return this.history.length>1&&(e=this.history.pop(),t=this.history[this.history.length-1],t&&!t.active)?(location.hash=t.id,this.hide(this.current),this.show(t),this.events.navigate&&this.emit("navigate",{from:e,to:t}),!0):!1},e.exports=i},function(e,t,n){"use strict";function i(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&this.addListeners(e.events),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){0===e.button&&(n.focus(),n.events.click&&n.emit("click",{event:e})),e.stopPropagation()})}var s=n(12),o=n(3),a=0;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.defaultEvents=null,i.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events.add&&this.emit("add",{item:e})},i.prototype.remove=function(){this.parent&&(o.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},i.prototype.focus=function(e){var t=o.current,n=t.activeComponent;return this.focusable&&this!==n?(n&&n.blur(),t.activeComponent=n=this,n.$node.classList.add("focus"),n.events.focus&&n.emit("focus",e),!0):!1},i.prototype.blur=function(){var e=o.current,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},i.prototype.show=function(e){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",e),!0)},i.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},e.exports=i},function(e,t){"use strict";e.exports={authorize:!1,user:{subscribe:!1,login:"",pass:"",token:"",lang:"en"},MENU_TYPE_SEARCH:0,MENU_TYPE_CATEGORY:1,MENU_TYPE_GENRE:2,MENU_TYPE_ALL_GAMES:3,MENU_TYPE_PROFILE:4,MENU_TYPE_LOGIN:5,MENU_TYPE_SPEED_TEST:6}},function(e,t,n){"use strict";function i(e){e=e||{},e.className="button "+(e.className||""),s.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}var s=n(4),o=n(1);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.clickDuration=200,i.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===o.ok&&this.events.click&&this.emit("click",{event:e})}},e.exports=i},function(e,t,n){"use strict";function i(e){e=e||{},e.focusable=e.focusable||!1,e.className="panel "+(e.className||""),s.call(this,e)}var s=n(4);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";var i={beta:!1,user:{},games:{},genres:{},categories:{}},s=n(2),o=n(5),a=n(20),r=n(5),c=o.user.lang,l=i.beta?"https://apibeta.playkey.net/rest/PlaykeyAPI.svc":"https://api.playkey.net/rest/PlaykeyAPI.svc",d={login:"aleynikov.boris@gmail.com",pass:"ybrbnfgjw1161"};i.genres.getAll=function(e){a.ajax(l+"/genres",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,n.genres)},onerror:function(){e(!0,null)}})},i.genres.getGames=function(e,t){a.ajax(l+"/games/all",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,filter_genres:[e]},onload:function(e){var n;try{n=JSON.parse(e)}catch(i){return void t(!0,null)}t(!1,n.games)},onerror:function(){t(!0,null)}})},i.categories.getAll=function(e){a.ajax(l+"/category/all",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,n.categories)},onerror:function(){e(!0,null)}})},i.categories.getGames=function(e,t){a.ajax(l+"/games/category",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,code_caregory:e,max_result:1336592494},onload:function(e){var n;try{n=JSON.parse(e)}catch(i){return void t(!0,null)}t(!1,n.games)},onerror:function(){t(!0,null)}})},i.games.getAll=function(e){a.ajax(l+"/games/all",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,n.games)},onerror:function(){e(!0,null)}})},i.games.playUrl=function(e,t){a.ajax(l+"/games/play",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,token:o.user.token,code_game:e},onload:function(e){var n;try{n=JSON.parse(e)}catch(i){return void t(!0,null)}t(!1,n.play_url)},onerror:function(){t(!0,null)}})},i.user.loginByMail=function(e,t){e=e||d,a.ajax(l+"/user/auth",{method:"POST",headers:{"content-type":"application/json"},data:{lang:null,login:e.login,pass:e.pass},onload:function(n){var i;try{i=JSON.parse(n)}catch(s){return void t(!0,null)}r.authorize=!0,r.user.token=i.access_token,r.user.login=e.login,r.user.pass=e.pass,t(!1,!0)},onerror:function(){t(!0,null)}})},i.user.getInfo=function(e){return o.authorize?void a.ajax(l+"/user/info",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,token:o.user.token},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,{email:n.email,login:n.login,id:n.id,confirmed:n.is_confirmed})},onerror:function(){e(!0,null)}}):void e(!0,null)},i.user.getPayments=function(e){return o.authorize?void a.ajax(l+"/user/ps",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,token:o.user.token},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,n.payments)},onerror:function(){e(!0,null)}}):void e(!0,null)},i.user.getSubscriptions=function(e){return o.authorize?void a.ajax(l+"/user/subscriptions",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,token:o.user.token},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}e(!1,n.subscriptions)},onerror:function(){e(!0,null)}}):void e(!0,null)},i.user.getSummary=function(e){return o.authorize?void a.ajax(l+"/user/summary",{method:"POST",headers:{"content-type":"application/json"},data:{lang:c,token:o.user.token},onload:function(t){var n;try{n=JSON.parse(t)}catch(i){return void e(!0,null)}n.error&&100===n.error.code?e({code:100},null):e(!1,n)},onerror:function(){e(!0,null)}}):void e(!0,null)},i.mapImg=function(e){var t="";return e.content?(e.content.forEach(function(e){e.type===s.data.metrics.menuPreviewSize&&(t=e.links[0])}),t):void 0},i.readConfig=function(e){a.ajax("config.json",{method:"GET",onload:function(t){var n;try{n=JSON.parse(t),e&&e(n)}catch(i){}}})},e.exports=i},function(e,t,n){"use strict";var i,s="pageSystem",o=n(10),a=new o({$node:document.getElementById(s)}),r=n(3),c=n(1),l=n(6),d={login:n(27),loginByMail:n(25),loginByPhone:n(26),profile:n(28),profileSettings:n(29),subscribeSettings:n(30)},u=new l({$node:document.getElementById("pSystemBackBtn"),value:_("back")}),h=document.getElementById("pSystemTitle");a.PANEL_LOGIN=0,a.PANEL_LOGIN_BY_MAIL=1,a.PANEL_LOGIN_BY_PHONE=2,a.PANEL_ACCOUNT=3,a.PANEL_PROFILE_SETTINGS=4,a.PANEL_SUBSCRIBE_SETTINGS=5,a.initSystem=function(e){switch(i&&i.hide(),u.events.click=[],e){case this.PANEL_LOGIN:u.once("click",function(){r.back()}),i=d.login;break;case this.PANEL_LOGIN_BY_MAIL:i=d.loginByMail,u.once("click",function(){i.hide(),r.back()});break;case this.PANEL_LOGIN_BY_PHONE:i=d.loginByPhone,u.once("click",function(){i.hide(),a.initSystem(a.PANEL_LOGIN)});break;case this.PANEL_ACCOUNT:i=d.profile,u.once("click",function(){i.hide(),r.back()});break;case this.PANEL_PROFILE_SETTINGS:i=d.profileSettings,u.once("click",function(){a.initSystem(a.PANEL_ACCOUNT)});break;case this.PANEL_SUBSCRIBE_SETTINGS:i=d.subscribeSettings,u.once("click",function(){a.initSystem(a.PANEL_ACCOUNT)})}r.navigate("pageSystem"),i.show(),i.emit("focus-content"),h.innerText=i.title},a.addListener("load",function(){var e;for(e in d)a.add(d[e]),d[e].addListener("out",function(){u.focus()});u.addListener("keydown",function(e){e.code===c.down&&i.emit("focus-content")})}),a.addListener("keydown",function(e){switch(e.code){case c.back:u.emit("click");break;case c.exit:r.navigate("pageMain")}}),a.addListener("hide",function(){i.hide()}),e.exports=a},function(e,t,n){"use strict";function i(e){e=e||{},this.active=!1,this.activeComponent=null,e.className="page "+(e.className||""),s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var s=n(4);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";function i(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),e.className="list "+(e.className||""),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),o.call(this,e),this.init(e)}function s(e){var t,n;for(t=0;t<e.length;t++)n=e[t],"object"!=typeof n&&(n=e[t]={value:e[t]});return e}var o=n(4),a=n(1);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.TYPE_VERTICAL=1,i.prototype.TYPE_HORIZONTAL=2,i.prototype.renderItemDefault=function(e,t){e.innerText=t.value},i.prototype.renderItem=i.prototype.renderItemDefault,i.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},i.prototype.init=function(e){var t,n,i=this,o=this.$body.children.length,a=function(e){this.data&&(i.focusItem(this),i.events["click:item"]&&i.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.data&&(this.data=s(e.data)),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==o)for(o>0&&(this.$body.innerText=null),n=0;n<this.size;n++)t=document.createElement("div"),t.index=n,t.className="item",t.addEventListener("click",a),this.$body.appendChild(t);void 0!==e.viewIndex,this.viewIndex=null,void 0!==e.focusIndex?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},i.prototype.renderView=function(e){var t,n,i,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,n=0;n<this.size;n++)t=this.$body.children[n],i=this.data[e],i?(t.data=i,t.index=e,this.renderItem(t,i),i.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;"),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.viewIndex),!0}return!1},i.prototype.move=function(e){(e===a.up&&this.type===this.TYPE_VERTICAL||e===a.left&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.cycle?(this.move(a.end),this.events.cycle&&this.emit("cycle",{direction:e})):this.events.overflow&&this.emit("overflow",{direction:e})),(e===a.down&&this.type===this.TYPE_VERTICAL||e===a.right&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.cycle?(this.move(a.home),this.events.cycle&&this.emit("cycle",{direction:e})):this.events.overflow&&this.emit("overflow",{direction:e})),e===a.pageUp&&(this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild)),e===a.pageDown&&(this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])),e===a.home&&(this.renderView(0),this.focusItem(this.$body.firstChild)),e===a.end&&(this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]))},i.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0):!1},i.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):t>e?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},i.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=i},function(e,t,n){"use strict";function i(){this.events={}}i.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function i(s){t(s),n.removeListener(e,i)})},addListeners:function(e){var t;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},removeAllListeners:function(e){0===arguments.length?this.events={}:e&&(this.events[e]=void 0)},emit:function(e,t){var n,i=this.events[e];if(i)for(n=0;n<i.length;n++)i[n].call(this,t)}},i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";function i(){var e;T.games.playUrl(c.code,function(t,n){e=JSON.parse(gSTB.ServiceControl("playkey","start",JSON.stringify({url:n,menuKey:{code:122,ctrl:!1,alt:!1,shift:!1}})))})}var s,o,a,r,c,l,d,u="pG",h=n(10),p=new h({$node:document.getElementById(u)}),m=n(2),v=n(3),f=n(1),g=n(6),y=n(11),E=n(7),w=n(15),b=n(18),T=n(8),S=n(5),I=n(9),k=new g({$node:document.getElementById("pGHeaderBackBtn"),value:_("back")}),x=new g({$node:document.getElementById("pGReadMore"),value:_("read more")}),N=document.getElementById("pGPoster"),P=new g({$node:N,value:""}),C=new y({$node:document.getElementById("pGScreenshots"),data:[{}],type:y.prototype.TYPE_HORIZONTAL,focusIndex:0,render:function(e,t){var n=document.createElement("div"),i=document.createElement("img");e.innerHTML="",t.value&&t.value.url&&(n.className="wrapper",n.appendChild(i),e.appendChild(n),i.src=t.value.preview,t.value.type?e.classList.add("video"):e.classList.remove("video"))},events:{}}),L=new E({$node:document.getElementById("pGFullCard")}),$=new E({$node:document.getElementById("pGFullDescription"),visible:!1,focusable:!0,events:{keydown:function(e){switch(e.code){case f.up:k.focus();break;case f.back:this.hide(),L.show(),e.stop=!0,x.focus()}}}}),B=document.getElementById("pGTitle"),M=document.getElementById("pGLeftInfo"),O=document.getElementById("pGRightInfo"),A=document.getElementById("pGSystemWrapper"),D=document.getElementById("pGDescription"),H={keyboard:document.getElementById("pGKeyboard"),mouse:document.getElementById("pGMouse"),gamepad:document.getElementById("pGGamepad"),multiplayer:document.getElementById("pGMultiplayer")},R={date:document.createElement("div"),rightholder:document.createElement("div"),author:document.createElement("div"),genre:document.createElement("div"),rating:document.createElement("div")};p.showGame=function(e){var t,n,u,h=document.createElement("div"),y=document.createElement("span"),E=[];for(e||void 0===c||(e=c),t=[e].map(T.mapImg),c=e,l=[],d=0,B.innerText=c.title,P.$node.style.backgroundImage="url("+t[0]+")",R.date.innerText=c.year||"",R.rightholder.innerText=c.rightholder,R.author.innerText=c.writer,R.genre.innerText="",c.genres.forEach(function(e){R.genre.innerText+=e.name+" "}),R.rating.innerText=c.top250||"?",h.innerHTML=c.description,$.$node.innerHTML=c.description,e.description=h.innerText,e.description=e.description.slice(0,m.data.metrics.previewTextCount)+" ... ",D.innerText=e.description,u=0;u<c.content.length;u++)"screenshot"===c.content[u].type?c.content[u].links.forEach(function(e){l.push({type:0,url:e,preview:e.slice(0,e.lastIndexOf("/"))+"/preview/"+m.data.metrics.screenshotSize+"/"+e.slice(e.lastIndexOf("/")+1)})}):"trailer"===c.content[u].type&&(n=c.content[u].links[0]);n&&(l[0].videoUrl=n,l[0].type=1),C.init({data:l.slice(0,2).map(function(e){return{value:e}}),size:l.slice(0,2).length,focusIndex:0}),a&&(a.remove(),a=void 0),o&&(o.remove(),o=void 0),r&&(r.remove(),r=void 0),s&&(s.remove(),s=void 0),S.authorize?S.user.subscribe?(a=new g({value:_("Play"),className:"playBtn",events:{click:i,keydown:function(e){switch(g.prototype.defaultEvents.keydown.call(this,e),e.code){case f.up:P.focus();break;case f.right:C.focus()}}}}),A.appendChild(a.$node),p.add(a)):(o=new g({value:_("Play for free")+" "+c.demo_time/60+" "+_("min"),className:"playFreeBtn",events:{click:i,keydown:function(e){switch(g.prototype.defaultEvents.keydown.call(this,e),e.code){case f.up:P.focus();break;case f.right:C.focus();break;case f.down:r.focus()}}}}),A.appendChild(o.$node),p.add(o),r=new g({value:_("Subscribe"),className:"subscribeBtn",events:{click:function(){},keydown:function(e){switch(g.prototype.defaultEvents.keydown.call(this,e),e.code){case f.up:o.focus();break;case f.right:C.focus()}}}}),A.appendChild(r.$node),p.add(r)):(s=new g({value:_("Play"),className:"authPlayBtn",events:{keydown:function(e){switch(g.prototype.defaultEvents.keydown.call(this,e),e.code){case f.up:P.focus();break;case f.right:C.focus()}},click:function(){I.initSystem(I.PANEL_LOGIN)}}}),A.appendChild(s.$node),p.add(s),y.innerText=_("Sign in profile"),s.$node.appendChild(y)),c.input_devices.forEach(function(e){E.push(e.code)}),E.indexOf("mouse")>-1?H.mouse.style.display="inline-block":H.mouse.style.display="none",E.indexOf("keyboard")>-1?H.keyboard.style.display="inline-block":H.keyboard.style.display="none",E.indexOf("gamepad")>-1?H.gamepad.style.display="inline-block":H.gamepad.style.display="none",c.count_players>1?H.multiplayer.style.display="inline-block":H.multiplayer.style.display="none",v.navigate("pG"),P.focus(),w.add([l[0].preview]),l[1]&&w.add([l[1].preview])},p.addListener("load",function(){var e={date:document.createElement("div"),rightholder:document.createElement("div"),author:document.createElement("div"),genre:document.createElement("div"),rating:document.createElement("div")};e.date.innerText=_("Release date")+": ",e.rightholder.innerText=_("Rightholder")+": ",e.author.innerText=_("Developers")+": ",e.genre.innerText=_("Genre")+": ",e.rating.innerText=_("Rating")+": ",M.appendChild(e.date),M.appendChild(R.date),M.appendChild(e.rightholder),M.appendChild(R.rightholder),M.appendChild(e.author),M.appendChild(R.author),O.appendChild(e.genre),O.appendChild(R.genre),O.appendChild(e.rating),O.appendChild(R.rating),H.keyboard.innerText=_("Keyboard"),H.mouse.innerText=_("Mouse"),H.gamepad.innerText=_("Gamepad"),H.multiplayer.innerText=_("Multiplayer"),p.add($),p.add(P),p.add(C),p.add(k),P.addListeners({keydown:function(e){switch(e.code){case f.up:k.focus();break;case f.right:C.focus();break;case f.down:S.authorize?S.user.subscribe?a.focus():o.focus():s.focus()}}}),x.addListeners({keydown:function(e){switch(e.code){case f.up:C.focus();break;case f.left:P.focus()}},click:function(){L.hide(),$.show(),$.focus()}}),k.addListeners({keydown:function(e){e.code===f.down&&P.focus()},click:function(){L.visible?"pSearch"===v.history[v.history.length-2].id?v.navigate("pSearch"):v.navigate("pageCatalog"):$.visible&&($.hide(),L.show(),x.focus())}}),C.events.keydown=[],C.addListeners({keydown:function(e){switch(e.code){case f.down:x.focus();break;case f.ok:b.showPreview(l,d);break;case f.right:d<l.length-1&&(d++,C.init({data:l.slice(d,d+2).map(function(e){return{value:e}}),size:2,focusIndex:0})),d<l.length-2&&(w.add([l[d+2].url]),w.add([l[d+2].preview]));break;case f.left:d>0?(d--,C.init({data:l.slice(d,d+2).map(function(e){return{value:e}}),size:2,focusIndex:0})):P.focus()}}}),b.addListener("screenshot",function(e){e.index<l.length-1&&(e.index++,C.init({data:l.slice(e.index,e.index+2).map(function(e){return{value:e}}),size:2,focusIndex:0}),d=e.index),e.index<l.length-2&&(w.add([l[e.index+2].url]),w.add([l[e.index+2].preview]))})}),p.addListener("keydown",function(e){switch(e.code){case f.back:k.emit("click");break;case f.exit:v.navigate("pageMain")}}),e.exports=p},function(e,t){"use strict";e.exports={layouts:{enFull:[[1,2,3,4,5,6,7,8,9,0],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l",{value:"",button:0,sClass:"backSpace"}],[{value:"Рус",sClass:"changeLang",button:1},"z","x","c","v","b","n","m",{value:" ",sClass:"space",colSpan:2}]],en:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l",{value:"",button:0,sClass:"backSpace"}],[{value:"Рус",sClass:"changeLang",button:1},"z","x","c","v","b","n","m",{value:" ",sClass:"space",colSpan:2}]],ruFull:[[1,2,3,4,5,6,7,8,9,0],["й","ц","у","к","е","н","г","ш","щ","з","х","ъ"],["ф","ы","в","а","п","р","о","л","д","ж","э",{value:"",button:0,sClass:"backSpace"}],[{value:"Eng",sClass:"changeLang",button:1},"я","ч","с","м","и","т","ь","б","ю",{value:" ",sClass:"space",colSpan:2}]],ru:[["й","ц","у","к","е","н","г","ш","щ","з","х","ъ"],["ф","ы","в","а","п","р","о","л","д","ж","э",{value:"",button:0,sClass:"backSpace"}],[{value:"Eng",sClass:"changeLang",button:1},"я","ч","с","м","и","т","ь","б","ю",{value:" ",sClass:"space",colSpan:2}]],numbers:[[7,8,9],[4,5,6],[1,2,3],[{value:"+",sClass:"plus"},0,{value:"",button:0,sClass:"backSpace"}]]},BUTTON_BACKSPACE:0,BUTTON_CHANGE_LANG:1,render:{full:function(e,t){var n=document.createElement("div");n.classList.add("button"),t.sClass&&n.classList.add(t.sClass),n.innerText=t.value,e.appendChild(n)}}}},function(e,t,n){"use strict";function i(e){"error"===e.type,a--,r[this.group]--,o.events.link&&o.emit("link",{url:this.src,group:this.group}),0===r[this.group]&&o.events.group&&o.emit("group",{name:this.group}),0===a&&o.events.done&&o.emit("done")}var s=n(12),o=new s,a=0,r={};o.add=function(e){e.forEach(function(e){var t=new Image,n=e.url||e,s=e.group||"";a++,r[s]=void 0===r[s]?1:r[s]+1,t.src=n,t.group=s,t.onload=t.onerror=t.ontimeout=i})},e.exports=o},function(e,t,n){"use strict";function i(e){e=e||{},this.map=[],this.$focusItem=null,this.data=[],this.cycleX=!0,this.cycleY=!0,this.focusX=0,this.focusY=0,e.className="grid "+(e.className||""),r.call(this,e),this.init(e)}function s(e){var t,n,i;for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)i=e[t][n],"object"!=typeof i?i=e[t][n]={value:e[t][n],colSpan:1,rowSpan:1}:(i.colSpan=i.colSpan||1,i.rowSpan=i.rowSpan||1);return e}function o(e,t,n,i,s,o){var a,r;for(a=n;n+s>a;a++){for(e.length<a+1&&e.push([]);void 0!==e[a][t];)t++;for(r=t;t+i>r;r++)e[a].length<r+1&&e[a].push(),e[a][r]=o,void 0===o.x&&(o.x=r),void 0===o.y&&(o.y=a)}}function a(e){var t,n,i,s=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)i=e[t][n],o(s,n,t,i.colSpan,i.rowSpan,i.$item),delete i.$item;return s}var r=n(4),c=n(1);i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.renderItemDefault=function(e,t){e.innerText=t.value},i.prototype.renderItem=i.prototype.renderItemDefault,i.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaY&&this.move(e.wheelDeltaY>0?c.up:c.down),e.wheelDeltaX&&this.move(e.wheelDeltaX>0?c.left:c.right)},keydown:function(e){switch(e.code){case c.up:case c.down:case c.right:case c.left:this.move(e.code);break;case c.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},i.prototype.init=function(e){var t,n,i,o,r,c,l,d=this,u=!1,h=function(e){this.data.disable!==!0&&(d.focusItem(this),d.events["click:item"]&&d.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycleX&&(this.cycleX=e.cycleX),void 0!==e.cycleY&&(this.cycleY=e.cycleY),e.data&&this.data!==e.data&&(this.data=e.data,u=!0),e.render&&this.renderItem!==e.render&&(this.renderItem=e.render,u=!0),u){for(this.$table=document.createElement("table"),r=document.createElement("tbody"),this.data=s(this.data),t=0;t<this.data.length;t++){for(i=r.insertRow(),n=0;n<this.data[t].length;n++)o=i.insertCell(-1),o.className="item",l=this.data[t][n],l.$item=o,o.colSpan=l.colSpan,o.rowSpan=l.rowSpan,l.focus&&(c=o),l.disable&&o.classList.add("disable"),l.mark&&o.classList.add("mark"),this.renderItem(o,l),o.data=l,o.addEventListener("click",h);r.appendChild(i)}this.map=a(this.data),this.$body.innerText=null,
this.$table.appendChild(r),this.$body.appendChild(this.$table),c?this.focusItem(c):this.focusItem(this.map[0][0])}},i.prototype.move=function(e){for(var t=this.focusX,n=this.focusY,i=!0,s=!1,o=!1;i;){switch(e){case c.up:n>0?n--:this.cycleY?(n=this.map.length-1,o=!0):s=!0;break;case c.down:n<this.map.length-1?n++:this.cycleY?(n=0,o=!0):s=!0;break;case c.right:t<this.map[n].length-1?t++:this.cycleX?(t=0,o=!0):s=!0;break;case c.left:t>0?t--:this.cycleX?(t=this.map[n].length-1,o=!0):s=!0}t===this.focusX&&n===this.focusY&&(i=!1),this.map[n][t]!==this.map[this.focusY][this.focusX]&&this.map[n][t].data.disable!==!0&&(i=!1),s&&(i=!1,this.map[n][t].data.disable===!0&&(t=this.focusX,n=this.focusY))}o&&this.events.cycle&&this.emit("cycle",{direction:e}),s&&this.events.overflow&&this.emit("overflow",{direction:e}),this.focusItem(this.map[n][t]),this.focusX=t,this.focusY=n},i.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e&&e.data.disable!==!0?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.focusX=e.x,this.focusY=e.y,this.$focusItem=e,e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),!0):!1},i.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=i},function(e,t,n){"use strict";function i(e,t){if(0===t){if(1>a)return;return a--,w.init({data:T.slice(a,a+6).map(f.mapImg).map(function(e){return{value:{url:e}}}),size:6,focusIndex:1}),N.innerText=a+1+" "+_("from")+" "+(T.length-1),I.ganre.innerText="",T[a+1].genres.forEach(function(e){I.ganre.innerText+=e.name+" "}),I.rating=T[a+1].rating,k.innerText=T[a+1].title,"0"!==T[a+1].plot_outline?x.innerHTML=T[a+1].plot_outline:x.innerHTML=T[a+1].description,void E.showGame(T[a+1])}if(t&&t>1){if(a>=T.length-2)return;return a+=t-1,w.init({data:T.slice(a,a+6).map(f.mapImg).map(function(e){return{value:{url:e}}}),size:6,focusIndex:1}),N.innerText=a+1+" "+_("from")+" "+(T.length-1),I.ganre.innerText="",T[a+1].genres.forEach(function(e){I.ganre.innerText+=e.name+" "}),I.rating=T[a+1].rating,k.innerText=T[a+1].title,"0"!==T[a+1].plot_outline?x.innerHTML=T[a+1].plot_outline:x.innerHTML=T[a+1].description,a+10<T.length-1&&v.add(T.slice(a+8,a+10).map(f.mapImg)),void E.showGame(T[a+1])}switch(e=e.code){case h.right:if(a>=T.length-2)return;a++,w.init({data:T.slice(a,a+6).map(f.mapImg).map(function(e){return{value:{url:e}}}),size:6,focusIndex:1}),N.innerText=a+1+" "+_("from")+" "+(T.length-1),I.ganre.innerText="",T[a+1].genres.forEach(function(e){I.ganre.innerText+=e.name+" "}),I.rating=T[a+1].rating,k.innerText=T[a+1].title,"0"!==T[a+1].plot_outline?x.innerHTML=T[a+1].plot_outline:x.innerHTML=T[a+1].description,a+10<T.length-1&&v.add(T.slice(a+8,a+10).map(f.mapImg));break;case h.left:if(1>a)return void b.emit("click");a--,w.init({data:T.slice(a,a+6).map(f.mapImg).map(function(e){return{value:{url:e}}}),size:6,focusIndex:1}),N.innerText=a+1+" "+_("from")+" "+(T.length-1),I.ganre.innerText="",T[a+1].genres.forEach(function(e){I.ganre.innerText+=e.name+" "}),I.rating=T[a+1].rating,k.innerText=T[a+1].title,"0"!==T[a+1].plot_outline?x.innerHTML=T[a+1].plot_outline:x.innerHTML=T[a+1].description;break;case h.ok:E.showGame(T[a+1]);break;case h.up:b.focus();break;case h.down:o.focus()}}function s(e){var t;f.games.playUrl(e.code,function(e,n){t=JSON.parse(gSTB.ServiceControl("playkey","start",JSON.stringify({url:n,menuKey:{code:122,ctrl:!1,alt:!1,shift:!1}})))})}var o,a,r="pageCatalog",c=n(10),l=new c({$node:document.getElementById(r)}),d=n(3),u=n(2),h=n(1),p=n(6),m=n(11),v=n(15),f=n(8),g=n(5),y=n(9),E=n(13),w=new m({$node:document.getElementById("pCatalogList"),size:6,type:m.prototype.TYPE_HORIZONTAL,data:[{value:{url:null}}],render:function(e,t){var n=document.createElement("img");t.value.url?e.classList.remove("empty"):e.classList.add("empty"),e.innerHTML="",n.src=t.value.url,e.appendChild(n)},events:{keydown:i,"click:item":function(e){var t=e.$item.index;1===t?i({code:h.ok}):i(null,t)}}}),b=new p({$node:document.getElementById("pCatalogHeaderBackBtn"),value:_("back"),events:{keydown:function(e){p.prototype.defaultEvents.keydown.call(this,e),e.code===h.down&&w.focus()},click:function(){d.navigate("pageMain")}}}),T=[{value:{},disabled:!0}],S=document.getElementById("pCatalogPlayBtn"),I=document.getElementById("pCatalogInfo"),k=document.getElementById("pcatalogGameTitle"),x=document.getElementById("pcatalogGameDescription"),N=document.getElementById("pCatalogNumber"),P=document.getElementById("pCatalogTitle");l.loadGames=function(e){function t(t,n){return t?void e.onerror():(n=n.filter(function(e){return e.title?!0:!1}),T=[{value:{},disabled:!0}].concat(n),a=0,w.init({data:T.slice(0,6).map(f.mapImg).map(function(e){return{value:{url:e}}}),size:6,focusIndex:1}),v.add(T.slice(1,6).map(f.mapImg).map(function(e){return{url:e,group:"preview"}})),T.length>6&&v.add(T.slice(6,9).map(f.mapImg)),N.innerText="1 "+_("from")+" "+(T.length-1),T[1].genres.forEach(function(e){I.ganre.innerText+=e.name+" "}),I.rating=T[1].rating,k.innerText=T[1].title,"0"!==T[1].plot_outline?x.innerHTML=T[1].plot_outline:x.innerHTML=T[1].description,e.onsuccess(),void w.focus())}switch(e=e||{},e.type){case g.MENU_TYPE_ALL_GAMES:f.games.getAll(t);break;case g.MENU_TYPE_CATEGORY:f.categories.getGames(e.code,t);break;case g.MENU_TYPE_GENRE:f.genres.getGames(e.code,t)}P.innerText=e.title||""},l.addListener("load",function(){var e=document.createElement("span"),t=document.createElement("span"),n=document.createElement("span");l.add(w),l.add(b),l.add(o=new p({$node:S,value:_("Play")})),n.innerText=_("Sign in profile"),S.appendChild(n),g.authorize?S.classList.remove("notAuth"):S.classList.add("notAuth"),o.addListeners({keydown:function(e){e.code===h.up&&w.focus()},click:function(){g.authorize?s(T[a+1]):y.initSystem(y.PANEL_LOGIN)}}),e.innerText=_("Genre")+": ",t.innerText=_("Rating")+": ",I.ganre=document.createElement("span"),I.rating=document.createElement("span"),I.ganre.className="infoSpan",I.rating.className="infoSpan",I.appendChild(e),I.appendChild(I.ganre),I.appendChild(t),I.appendChild(I.rating),u.addListener("login",function(){S.classList.remove("notAuth")})}),l.addListener("keydown",function(e){switch(e.code){case h.back:d.navigate("pageMain");break;case h.exit:d.navigate("pageMain")}}),e.exports=l},function(e,t,n){"use strict";var i,s="pScreenshotPreview",o=n(10),a=new o({$node:document.getElementById(s)}),r=n(33),c=n(3),l=n(1),d=n(36),u={current:0,array:[]},h=document.getElementById("pScreenshotPreviewImg"),p=new r({$node:document.getElementById("pScreenshotPlayer"),events:{keydown:function(e){if(i)switch(e.code){case l.playPause:p.playPause()}}}}),m=new d({$node:document.getElementById("pScreenshotPreviewProgress")});a.showPreview=function(e,t){u.current=t,u.array=e,i=!1,h.src=u.array[u.current].url,u.array[u.current].type?p.$node.classList.add("video"):p.$node.classList.remove("video"),c.navigate("pScreenshotPreview"),u.array[u.current].type&&p.play(u.array[u.current].videoUrl),p.focus()},a.addListener("keydown",function(e){switch(e.code){case l.back:p.stop(),c.back();break;case l.ok:u.array[u.current].type&&!i&&(p.play(u.array[u.current].videoUrl),i=!0,p.$node.classList.remove("video"));break;case l.right:p.isPLaying&&(p.stop(),m.set(0)),u.current<u.array.length-1&&(h.style.visibility="visible",i=!1,u.current++,h.src=u.array[u.current].url,u.array[u.current].type?p.$node.classList.add("video"):p.$node.classList.remove("video"),a.emit("screenshot",{index:u.current}));break;case l.left:u.current>0&&(p.isPLaying&&(p.stop(),m.set(0)),h.style.visibility="visible",i=!1,u.current--,h.src=u.array[u.current].url,u.array[u.current].type?p.$node.classList.add("video"):p.$node.classList.remove("video"),a.emit("screenshot",{index:u.current}));break;case l.exit:p.stop(),c.navigate("pageMain")}}),p.addListeners({"get:info":function(e){i=!0,p.$node.classList.remove("video"),h.style.visibility="hidden",m.init({value:0,max:e.totalDurationSec})},duration:function(e){m.set(e.sec)},pause:function(e){e.state?p.$node.classList.add("video"):p.$node.classList.remove("video")},"content:end":function(){i&&(i=!1,p.$node.classList.add("video")),h.style.visibility="visible"}}),a.addListener("load",function(){var e=document.createElement("div");e.innerText=_("Back")+"\n"+_("Pause"),document.getElementById("pScreenshotPreviewControl").appendChild(e)}),e.exports=a},function(e,t,n){"use strict";function i(e,t){if(null===e&&void 0!==t)return t>3?r<a.length-4&&(r+=t-3,b.init({data:a.slice(r,7+r).map(g.mapImg).map(function(e){return{value:{url:e}}}),size:7,focusIndex:3})):3>t&&r>0&&(r-=3-t,b.init({data:a.slice(r,7+r).map(g.mapImg).map(function(e){return{value:{url:e}}}),size:7,focusIndex:3})),void E.showGame(a[r+3]);switch(e.code){case h.up:T.focus();break;case h.down:s.focus();break;case h.right:r<a.length-4&&(r++,b.init({data:a.slice(r,7+r).map(g.mapImg).map(function(e){return{value:{url:e}}}),size:7,focusIndex:3}));break;case h.left:r>0&&(r--,b.init({data:a.slice(r,7+r).map(g.mapImg).map(function(e){return{value:{url:e}}}),size:7,focusIndex:3}));break;case h.ok:v.prototype.defaultEvents.keydown.call(this,e)}}var s,o,a,r,c="pSearch",l=n(10),d=new l({$node:document.getElementById(c)}),u=n(3),h=n(1),p=n(6),m=n(16),v=n(11),f=n(21),g=n(8),y=n(14),E=n(13),w=new m({$node:document.getElementById("pSearchKeyboard"),data:y.layouts.en,render:y.render.full,className:"keyboardFull",cycleX:!1,cycleY:!1}),b=new v({$node:document.getElementById("pSearchList"),size:7,type:v.prototype.TYPE_HORIZONTAL,data:[{value:{url:null}}],focusIndex:0,render:function(e,t){var n=document.createElement("img");t.value.url?e.classList.remove("empty"):e.classList.add("empty"),e.innerHTML="",n.src=t.value.url,e.appendChild(n)},events:{keydown:i,"click:item":function(e){var t=e.$item.index;i(null,t)}}}),T=new p({$node:document.getElementById("pSearchHeaderBackBtn"),value:_("back"),events:{keydown:function(e){p.prototype.defaultEvents.keydown.call(this,e),e.code===h.down&&b.focus()},click:function(){u.navigate("pageMain")}}}),S=document.getElementById("pSearchMessage");d.initSearch=function(){g.games.getAll(function(e,t){o=t,u.navigate("pSearch"),s.focus()})},d.addListener("load",function(){var e;s=new f({$node:document.getElementById("pSearchInput"),className:"playKeyInput",events:{keydown:function(e){switch(e.code){case h.back:f.prototype.defaultEvents.keydown.call(this,e),e.stop=!0;break;case h.down:w.focus();break;case h.up:b.focus();break;default:f.prototype.defaultEvents.keydown.call(this,e)}},input:function(t){var n=[{value:{url:null}},{value:{url:null}},{value:{url:null}}];clearTimeout(e),t.value.length<2||(e=setTimeout(function(){return S.innerText="",a=o.filter(function(e){return new RegExp(t.value,"i").test(e.title)||new RegExp(t.value,"i").test(e.description)?t:void 0}),0===a.length?(S.innerText=_("For your request")+': "'+t.value+'" '+_("was found nothing")+" :(",void b.init({data:[{value:{url:null}}],size:4,focusIndex:0})):(a=n.concat(a),b.init({data:a.slice(0,7).map(g.mapImg).map(function(e){return{value:{url:e}}}),size:7,focusIndex:3}),void(r=0))},600))}}}),w.ru=!1,w.addListeners({overflow:function(e){switch(e.direction){case h.up:s.focus()}},"click:item":function(e){void 0===e.$item.data.button?s.addChar(e.$item.data.value.toString()):e.$item.data.button===y.BUTTON_BACKSPACE?s.removeChar(s.$caret.index-1):e.$item.data.button===y.BUTTON_CHANGE_LANG&&(w.ru?(w.init({data:y.layouts.en}),w.ru=!1):(w.init({data:y.layouts.ru}),w.ru=!0))}}),d.add(T),d.add(s),d.add(b),d.add(w)}),d.addListener("keydown",function(e){switch(e.code){case h.back:u.navigate("pageMain");break;case h.exit:u.navigate("pageMain")}}),e.exports=d},function(e,t,n){"use strict";var i={},s={method:"GET",async:!0,headers:{},type:"text",data:null,timeout:3e4,onload:null,onerror:null,ontimeout:null},o=Object.keys(s);i.ajax=function(e,t){var n,i,a;if(t=t||{},e&&("string"==typeof e||e instanceof String)&&e.length>0){if(t&&"object"==typeof t)for(n=0;n<o.length;n++)void 0===t[o[n]]&&(t[o[n]]=s[o[n]]);if(a=new XMLHttpRequest,a.open(t.method,e,t.async),t.headers&&"object"==typeof t.headers)for(i=Object.keys(t.headers),n=0;n<i.length;n++)a.setRequestHeader(i[n],t.headers[i[n]]);return a.responseType=t.type,a.timeout=t.timeout,t.onload&&"function"==typeof t.onload&&(a.onload=function(){t.onload.call(this,this.response||this.responseText,this.status)}),a.onerror=t.onerror,a.ontimeout=t.ontimeout,a.send(t.data?JSON.stringify(t.data):null),a}return!1},i.encode=function(e){var t,n,i=[];if(e&&"object"==typeof e){for(n=Object.keys(e),t=0;t<n.length;t++)i.push(encodeURIComponent(n[t])+"="+encodeURIComponent(e[n[t]]));if(i.length>0)return i.join("&")}return null},e.exports=i},function(e,t,n){"use strict";function i(e){e=e||{},this.value="",this.type=this.TYPE_TEXT,e.className="input "+(e.className||""),s.call(this,e),this.$line=this.$body.appendChild(document.createElement("div")),this.$line.className="line",this.$caret=this.$line.appendChild(document.createElement("div")),this.$caret.className="caret",this.$placeholder=this.$line.appendChild(document.createElement("div")),this.$placeholder.className="placeholder",this.$caret.index=0,this.init(e)}var s=n(4),o=n(1);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.TYPE_TEXT=0,i.prototype.TYPE_PASSWORD=1,i.prototype.defaultEvents={keypress:function(e){this.addChar(String.fromCharCode(e.keyCode),this.$caret.index)},keydown:function(e){switch(e.code){case o["delete"]:this.removeChar(this.$caret.index);break;case o.back:this.removeChar(this.$caret.index-1);break;case o.left:this.setCaretPosition(this.$caret.index-1);break;case o.right:this.setCaretPosition(this.$caret.index+1);break;case o.end:case o.down:this.setCaretPosition(this.value.length);break;case o.home:case o.up:this.setCaretPosition(0)}}},i.prototype.init=function(e){e.type&&(this.type=e.type),e.value&&this.setValue(e.value),e.placeholder&&(this.$placeholder.innerText=e.placeholder),this.$line.dir=e.direction||"ltr"},i.prototype.addChar=function(e,t){var n=document.createElement("div");t=void 0===t?this.$caret.index:t,0===this.value.length&&this.$line.removeChild(this.$placeholder),n.className="char",this.value=this.value.substring(0,t)+e+this.value.substring(t,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?n.innerText="*":" "===e?n.innerHTML="&nbsp;":n.innerText=e,t>=this.value.length?(this.$line.appendChild(n),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$line.insertBefore(n,this.$caret)),this.events.input&&this.emit("input",{value:this.value})},i.prototype.removeChar=function(e){var t=this.value;e=void 0===e?this.$caret.index-1:e,this.value.length>0&&(this.$caret.index===e&&e<this.value.length?this.$line.removeChild(this.$line.children[e+1]):this.$caret.index>e&&(--this.$caret.index,this.$line.removeChild(this.$line.children[e])),this.value=this.value.substring(0,e)+this.value.substring(e+1,this.value.length),this.events.input&&t!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},i.prototype.setCaretPosition=function(e){e>=0&&e<=this.value.length&&this.$caret.index!==e&&(this.$line.removeChild(this.$caret),e===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$caret.index=e)},i.prototype.setValue=function(e){var t,n,i=this.value.length,s=e.length,o=0;if(e!==this.value){if(s>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),s!==i)if(n=s-i,n>0)for(o=0;n>o;o++)t=this.$line.appendChild(document.createElement("div")),t.className="char";else for(o=0;o>n;o--)this.$line.removeChild(this.$line.lastChild);for(o=0;s>o;o++)t=this.$line.children[o],this.type===this.TYPE_PASSWORD?t.innerHTML="*":" "===e[o]?t.innerHTML="&nbsp;":t.innerText=e[o];this.value=e,this.$caret.index=s,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder);this.events.input&&this.emit("input",{value:this.value})}},e.exports=i},function(e,t,n){"use strict";var i,s,o=n(37),a=n(6),r=n(7),c=n(3),l=n(1),d=(n(2),new o({$node:document.getElementById("modalPopUp"),events:{show:function(){i=c.current.activeComponent,d.resumeBtn.focus()}}})),u=document.createElement("div"),h=0,p=1,m=2,v=3;d.add(d.panel=new r),u.innerText=_("Game menu"),d.panel.$node.appendChild(u),d.panel.add(d.resumeBtn=new a({value:_("Resume game"),className:"orangeBtn",events:{keydown:function(e){switch(a.prototype.defaultEvents.keydown.call(this,e),e.code){case l.right:d.closeBtn.focus()}},click:function(){var e;d.hide(),i.focus(),c.navigate("pageInit"),e=JSON.parse(gSTB.ServiceControl("playkey","show"))}}})),d.panel.add(d.closeBtn=new a({value:_("Close game"),className:"blueBtn",events:{keydown:function(e){switch(a.prototype.defaultEvents.keydown.call(this,e),e.code){case l.left:d.resumeBtn.focus()}},click:function(){JSON.parse(gSTB.ServiceControl("playkey","stop"));d.hide(),i.focus()}}})),window.stbEvent.onPlaykeyMessage=function(e){switch(e=parseInt(e,10)){case m:gSTB.ServiceControl("playkey","hide"),c.back(),d.show();break;case h:s=c.current,c.navigate("pageInit");break;case p:c.navigate(s.id);break;case v:}},e.exports=d},function(e,t,n){"use strict";var i="pageInit",s=n(10),o=new s({$node:document.getElementById(i)});e.exports=o},function(e,t,n){"use strict";function i(){var e;E.categories.getAll(function(t,n){n.forEach(function(e){P.push({value:{name:e.name,code:e.code,type:w.MENU_TYPE_CATEGORY}})}),E.genres.getAll(function(t,n){n.forEach(function(e){P.push({value:{name:e.name,code:e.code,type:w.MENU_TYPE_GENRE}})}),P.push({value:{name:_("Speed test"),type:w.MENU_TYPE_SPEED_TEST}}),w.authorize?P.push({value:{name:_("Account Settings"),type:w.MENU_TYPE_PROFILE}}):P.push({value:{name:_("Sign in"),type:w.MENU_TYPE_LOGIN}}),r=new p({$node:document.getElementById("pMainMenu"),data:P,size:P.length,focusIndex:1,render:function(e,t){e.innerText=t.value.name||t.value.code}}),u.add(r),r.addListeners({"focus:item":function(t){switch(r.$node.style.top=N-(t.$curr.index-1)*t.$curr.offsetHeight*.8+"px",clearTimeout(e),t.$curr.data.value.type){case w.MENU_TYPE_CATEGORY:e=setTimeout(function(){var e;E.categories.getGames(t.$curr.data.value.code,function(n,i){for(i=i.slice(0,4).map(E.mapImg),e=0;e<i.length;e++)i[e]&&(v.add([{url:i[e],group:t.$curr.data.value.code}]),c=t.$curr.data.value.code);v.once("group",function(e){e.name===c&&o(i)})}),k.style.display="block"},600);break;case w.MENU_TYPE_GENRE:e=setTimeout(function(){var e;E.genres.getGames(t.$curr.data.value.code,function(n,i){for(i=i.slice(0,4).map(E.mapImg),e=0;e<i.length;e++)i[e]&&v.add([{url:i[e],group:t.$curr.data.value.code}]);c=t.$curr.data.value.code,v.once("group",function(e){e.name===c&&o(i)})}),k.style.display="block"},600);break;case w.MENU_TYPE_ALL_GAMES:e=setTimeout(function(){var e;E.games.getAll(function(t,n){for(n=n.slice(0,4).map(E.mapImg),e=0;e<n.length;e++)n[e]&&v.add([{url:n[e],group:"allGames"}]);c="allGames",v.once("group",function(e){e.name===c&&o(n)})}),k.style.display="block"},600)}},"click:item":s,keydown:function(e){e.code===m.right&&s({$item:r.$focusItem})}}),E.games.getAll(function(e,t){var n;for(t=t.slice(0,4).map(E.mapImg),n=0;n<t.length;n++)t[n]&&(x.children[n].src=t[n],v.add([{url:t[n],group:"preview"}]));v.once("group",function(e){"preview"===e.name&&(h.navigate("pageMain"),r.focus())})})})})}function s(e){switch(e=e.$item.data.value,e.type){case w.MENU_TYPE_LOGIN:b.initSystem(b.PANEL_LOGIN);break;case w.MENU_TYPE_ALL_GAMES:case w.MENU_TYPE_CATEGORY:case w.MENU_TYPE_GENRE:k.style.display="block",S.loadGames({type:e.type,code:e.code,title:e.name,onsuccess:function(){k.style.display="none",h.navigate("pageCatalog")},onerror:function(){k.style.display="none",r.focus()}}),r.blur();break;case w.MENU_TYPE_SEARCH:T.initSearch();break;case w.MENU_TYPE_PROFILE:b.initSystem(b.PANEL_ACCOUNT)}}function o(e){var t;for(t=0;t<e.length;t++)e[t]&&(x.children[t].src=e[t]);for(t=1;4>t;t++)e[t]?x.children[t].style.display="inline-block":x.children[t].style.display="none";k.style.display="none"}function a(){var e,t,n,i=window.location.href,s={};if(i.indexOf("?")>=0){for(t=i.split("#")[0].split("?")[1].split("&"),e=0;e<t.length;e++)n=t[e].split("="),s[n[0]]=n[1];s.referrer?window.location=decodeURIComponent(s.referrer):window.location="file:///home/web/services.html"}else document.referrer&&document.referrer.length>4?i.split("#")[0]===document.referrer?window.location="file:///home/web/services.html":window.location=document.referrer:window.location="file:///home/web/services.html"}var r,c,l="pageMain",d=n(10),u=new d({$node:document.getElementById(l)}),h=n(3),p=n(11),m=n(1),v=n(15),f=n(2),g=n(35),y=n(6),E=n(8),w=n(5),b=n(9),T=n(19),S=n(17),I=new g({className:"playkeyModal",visible:!1}),k=document.getElementById("pMainLoader"),x=document.getElementById("pMainRight"),N=document.getElementById("pMainHeader").offsetHeight,P=[{value:{name:_("Search"),type:w.MENU_TYPE_SEARCH}},{value:{name:_("All games"),type:w.MENU_TYPE_ALL_GAMES}}];u.addListener("load",function(){i(),f.addListener("login",function(e){e.load||(P.pop(),P.push({value:{name:_("Account Settings"),type:w.MENU_TYPE_PROFILE}}),r.init({data:P,size:P.length}))})}),u.addListener("show",function(){r.focus()}),I.$title=document.createElement("div"),I.$title.innerText=_("Are you sure you want to exit?"),I.$body.appendChild(I.$title),u.add(I),I.add(I.okBtn=new y({value:_("Exit"),className:"blueBtn",propagate:!0,events:{keydown:function(e){y.prototype.defaultEvents.keydown.call(this,e),e.code===m.right&&I.cancelBtn.focus()},click:a}})),I.add(I.cancelBtn=new y({value:_("Cancel"),className:"orangeBtn",propagate:!0,events:{keydown:function(e){y.prototype.defaultEvents.keydown.call(this,e),e.code===m.left&&I.okBtn.focus()},click:function(){I.hide()}}})),I.addListener("keydown",function(e){switch(e.code){case m.back:case m.exit:I.hide(),e.stop=!0}}),I.addListeners({show:function(){I.okBtn.focus()},hide:function(){r.focus()}}),u.addListener("keydown",function(e){switch(e.code){case m.exit:I.show()}}),e.exports=u},function(e,t,n){"use strict";var i=n(7),s=new i({$node:document.getElementById("pSystemLoginMail"),visible:!1,events:{show:function(){s.keyboard.focus()},"focus-content":function(){s.keyboard.focus()}}}),o=n(16),a=n(14);s.add(s.keyboard=new o({data:a.layouts.en,className:"keyboardFull",render:a.render.full})),s.title=_("Sign in by mail"),e.exports=s},function(e,t,n){"use strict";var i,s,o=n(7),a=new o({$node:document.getElementById("pSystemLoginPhone"),visible:!1,events:{show:function(){a.numberInput.focus(),i=a.numberInput},"focus-content":function(){a.numberInput.focus(),i=a.numberInput}}}),r=n(5),c=n(2),l=n(3),d=n(8),u=n(1),h=n(16),p=n(21),m=n(14),v=n(6);a.add(a.numberInput=new p({placeholder:_("Input your phone number"),className:"playKeyInput"}),a.confirmCodeInput=new p({placeholder:_("Input confirmation code"),className:"playKeyInput"}),a.keyboard=new h({data:m.layouts.numbers,render:m.render.full,className:"keyboardFull",cycleX:!1,cycleY:!1}),a.getCodeBtn=new v({value:_("Get code"),className:"blueBtn code"}),a.loginBtn=new v({value:_("Login"),className:"blueBtn login"})),a.numberInput.addListener("keydown",function(e){switch(e.code){case u.ok:i=a.numberInput,a.keyboard.focus();break;case u.down:a.getCodeBtn.focus();break;case u.right:a.confirmCodeInput.focus();break;case u.up:a.emit("out");break;case u.back:e.stop=!0}}),a.getCodeBtn.addListeners({keydown:function(e){switch(e.code){case u.up:a.numberInput.focus();break;case u.right:a.keyboard.focus()}},click:function(){}}),a.confirmCodeInput.addListeners({keydown:function(e){switch(e.code){case u.up:a.emit("out");break;case u.ok:i=a.confirmCodeInput,a.keyboard.focus();break;case u.down:a.loginBtn.focus();break;case u.left:a.numberInput.focus();break;case u.back:e.stop=!0}}}),a.loginBtn.addListeners({keydown:function(e){switch(e.code){case u.up:a.confirmCodeInput.focus();break;case u.left:a.keyboard.focus()}},click:function(){a.confirmCodeInput.value>0&&d.user.loginByMail(null,function(e,t){var i={};if(t)switch(i.token=r.user.token,i.login=r.user.login,i.pass=r.user.pass,i.lang=r.user.lang,gSTB.SaveUserData("playkey.json",JSON.stringify(i)),c.emit("login",{}),l.history[l.history.length-2].id){case"pageCatalog":l.navigate("pageCatalog");break;case"pG":s=n(13),s.showGame();break;default:l.navigate("pageMain")}})}}),a.keyboard.addListeners({overflow:function(e){switch(e.direction){case u.up:break;case u.left:a.getCodeBtn.focus();break;case u.right:a.loginBtn.focus()}},"click:item":function(e){void 0===e.$item.data.button?i.addChar(e.$item.data.value.toString()):i.removeChar(i.$caret.index-1)}}),a.title=_("Sign in by phone number"),e.exports=a},function(e,t,n){"use strict";var i,s=n(7),o=new s({$node:document.getElementById("pSystemLoginPanel"),visible:!1,events:{show:function(){o.menu.focus(),i=n(9)},"focus-content":function(){o.menu.focus()}}}),a=n(11),r=n(1),c=[{value:{type:1,title:"Использовать телефон",description:"Тебе будет отплавлен код доступа на телефон"}}];o.add(o.menu=new a({data:c,size:c.length,type:a.prototype.TYPE_HORIZONTAL,focusIndex:0,className:"systemList",render:function(e,t){var n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div");n.className="wrapper",i.className="elem",s.className="title",o.className="description",i.appendChild(s),i.appendChild(o),a.className="elemFocus",r.className="title",c.className="description",a.appendChild(r),a.appendChild(c),s.innerText=r.innerText=t.value.title||"",o.innerText=c.innerText=t.value.description||"",n.appendChild(i),n.appendChild(a),e.appendChild(n)},events:{keydown:function(e){this.defaultEvents.keydown.call(this,e),e.code===r.up&&o.emit("out")},"click:item":function(e){switch(e.$item.data.value.type){case 0:o.hide(),i.initSystem(i.PANEL_LOGIN_BY_MAIL);break;case 1:o.hide(),i.initSystem(i.PANEL_LOGIN_BY_PHONE)}}}})),o.title=_("Sign in"),e.exports=o},function(e,t,n){"use strict";function i(){var e,t=l.user.login.split("@"),n=[{value:{title:_("Profile Settings"),description:_("Connect to account"),text:(t[0].length>6?t[0].slice(0,6)+"...":t[0])+"@"+t[1],action:p.MENU_PROFILE}}];u.user.getSubscriptions(function(t,i){i.length?(l.user.subscribe=!0,e=i[0].active_to.split("-"),e=e[0]+" "+h[e[1]-1]+" "+e[2].slice(0,4),c.emit("get:subscribe",{date:e}),n.push({value:{title:_("Subscribe Settings"),description:_("Subscribe active to"),text:e,action:p.MENU_SUBSCRIBE}})):n.push({value:{title:_("Subscribe Settings"),description:_("You haven't subscribes"),text:"",action:p.MENU_SUBSCRIBE}}),u.user.getPayments(function(e,t){t.length||n.push({value:{title:_("Payment"),description:"",text:"",action:p.MENU_PAYMENT}}),n.push({value:{title:_("Payment history"),description:"",text:"",action:p.MENU_PAYMENT_HISTORY}}),a.menu&&(a.menu.remove(),a.menu=void 0),a.add(a.menu=new r({data:n,size:4,className:"systemList",type:r.prototype.TYPE_HORIZONTAL,focusIndex:0,render:function(e,t){var n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div");n.className="wrapper",i.className="elem",s.className="elemTitle",o.className="elemDescription",a.className="elemText",i.appendChild(s),i.appendChild(o),i.appendChild(a),r.className="elemFocus",c.className="elemTitle",l.className="elemDescription",d.className="elemText",r.appendChild(c),r.appendChild(l),r.appendChild(d),s.innerText=c.innerText=t.value.title||"",o.innerText=l.innerText=t.value.description||"",a.innerText=d.innerText=t.value.text||"",n.appendChild(i),n.appendChild(r),e.appendChild(n)},events:{keydown:function(e){r.prototype.defaultEvents.keydown.call(this,e),e.code===d.up&&a.emit("out")},"click:item":function(e){switch(e.$item.data.value.action){case p.MENU_PROFILE:s.initSystem(s.PANEL_PROFILE_SETTINGS);break;case p.MENU_SUBSCRIBE:s.initSystem(s.PANEL_SUBSCRIBE_SETTINGS)}}}}))})})}var s,o=n(7),a=new o({$node:document.getElementById("pSystemProfile"),visible:!1,events:{show:function(){a.menu.focus(),s=n(9)},"focus-content":function(){a.menu.focus()}}}),r=n(11),c=n(2),l=n(5),d=n(1),u=n(8),h=[_("january"),_("february"),_("march"),_("april"),_("may"),_("june"),_("july"),_("august"),_("september"),_("october"),_("november"),_("december")],p={MENU_PROFILE:0,MENU_SUBSCRIBE:1,MENU_PAYMENT:2,MENU_PAYMENT_HISTORY:3};c.addListener("login",function(){i()}),a.title=_("Account Settings"),e.exports=a},function(e,t,n){"use strict";function i(){c.innerText=u.user.login}var s,o=n(7),a=new o({$node:document.getElementById("pSystemProfileSettings"),visible:!1,events:{show:function(){a.exitBtn.focus(),s=n(9)},"focus-content":function(){a.exitBtn.focus()}}}),r=document.createElement("div"),c=document.createElement("div"),l=n(6),d=n(2),u=n(5),h=n(1);r.innerText=_("Your tv is connected to account"),r.className="title",a.$node.appendChild(r),c.className="mail",a.$node.appendChild(c),a.add(a.exitBtn=new l({value:_("Exit"),className:"blueBtn",events:{keydown:function(e){l.prototype.defaultEvents.keydown.call(this,e),e.code===h.up&&a.emit("out")},click:function(){gSTB.SaveUserData("playkey.json",""),location.reload()}}})),d.addListener("login",function(){i()}),a.title=_("Profile Settings"),e.exports=a},function(e,t,n){"use strict";var i=n(7),s=new i({$node:document.getElementById("pSystemSubscribeSettings"),visible:!1,events:{show:function(){s.cancelBtn.focus()},"focus-content":function(){s.cancelBtn.focus()}}}),o=document.createElement("div"),a=document.createElement("div"),r=n(6),c=n(2),l=(n(5),n(1));o.innerText=_("Subscribe active to"),o.className="title",s.$node.appendChild(o),a.className="date",s.$node.appendChild(a),s.add(s.cancelBtn=new r({value:_("Suspend"),className:"blueBtn",events:{keydown:function(e){r.prototype.defaultEvents.keydown.call(this,e),e.code===l.up&&s.emit("out")},click:function(){}}})),c.addListener("get:subscribe",function(e){a.innerText=e.date}),s.title=_("Subscribe Settings"),e.exports=s},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(12),gettext=new Emitter,meta=null,data=null;gettext.load=function(e,t){var n=new XMLHttpRequest;e.ext=e.ext||"json",e.path=e.path||"lang",n.responseType="text",n.onload=function(){var e;try{e=JSON.parse(n.responseText),meta=e.meta,data=e.data,t(null,data)}catch(i){meta=null,data=null,n.onerror(i)}gettext.events.load&&gettext.emit("load")},n.onerror=function(e){t(e),gettext.events.error&&gettext.emit("error")},n.open("GET",e.path+"/"+e.name+"."+e.ext,!0),n.send(null)},window.gettext=function(e){return data&&data[""][e]?data[""][e]:e},window.pgettext=function(e,t){return data&&data[e][t]?data[e][t]:t},window.ngettext=function(msgId,plural,value){return data&&meta?data[""][msgId][eval("var n = "+value+"; "+meta.plural)]:1===value?msgId:plural},module.exports=gettext},function(e,t,n){"use strict";function i(e){s.call(this),this.data=e||{}}var s=n(12);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.idName="id",i.prototype.clear=function(){var e=this.data;return Object.keys(e).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:e}),!0):!1},i.prototype.init=function(e){return e?(this.clear(),this.data=e,this.events.init&&this.emit("init",{data:e}),!0):!1},i.prototype.has=function(e){return this.data.hasOwnProperty(e)},i.prototype.get=function(e){return this.data[e]},i.prototype.set=function(e,t){var n=e in this.data,i={name:e,curr:t};return n?(i.prev=this.data[e],
t!==i.prev?(this.data[e]=t,this.events.change&&this.emit("change",i),!0):!1):(this.data[e]=t,this.events.change&&this.emit("change",i),!0)},i.prototype.unset=function(e){var t,n=e in this.data;return n?(t={name:e,prev:this.data[e]},delete this.data[e],this.events.change&&this.emit("change",t),!0):!1},e.exports=i},function(e,t,n){"use strict";function i(e){var t=this;this.isPLaying=!1,this.isPause=!1,this.totalDuration="",this.totalDurationSec=0,this.currentTime="",this.currentSec=0,this.rewindHelper={isActive:!1,startTime:0,time:0,timeout:0,duration:void 0,timeoutDuration:!1},this.setModeHelper={active:!1,timeout:0,time:0,timeStr:"",count:0,length:0,sec:0,timeoutDuration:0},this.audioPIDs=[],this.currentAudioPID=0,this.activeAspect=0,this.subtitlePIDs=[],this.currentSubtitle=null,this.durationInterval=0,this.allowInputPosition=!0,e=e||{},a.call(this,e),this.$node.classList.add("player"),this.init(e),s.addListener("media",function(e){i.prototype.mediaListener.call(t,e)})}var s=n(2),o=n(1),a=n(4);i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.ASPECT_TYPE_FIT=16,i.prototype.ASPECT_TYPE_BIG=64,i.prototype.ASPECT_TYPE_OPTIMAL=80,i.prototype.ASPECT_TYPE_ZOOM=0,i.prototype.aspects=[{name:"fit",mode:i.prototype.ASPECT_TYPE_FIT},{name:"big",mode:i.prototype.ASPECT_TYPE_BIG},{name:"opt",mode:i.prototype.ASPECT_TYPE_OPTIMAL},{name:"exp",mode:i.prototype.ASPECT_TYPE_ZOOM}],i.prototype.STEREO_MODE_OFF=0,i.prototype.STEREO_MODE_OVER_UNDER=1,i.prototype.STEREO_MODE_OVER_UNDER_HD=2,i.prototype.STEREO_MODE_SIDE_BY_SIDE=3,i.prototype.stereoModes=[{mode:i.prototype.STEREO_MODE_OFF,name:"Off"},{mode:i.prototype.STEREO_MODE_OVER_UNDER,name:"Over-Under"},{mode:i.prototype.STEREO_MODE_OVER_UNDER_HD,name:"Over-Under HD"},{mode:i.prototype.STEREO_MODE_SIDE_BY_SIDE,name:"Side-by-side"}],i.prototype.defaultEvents={keydown:function(e){switch(e.code){case o.ok:case o.playPause:this.playPause();break;case o.stop:this.stop();break;case o.forward:case o.right:this.rewind(!0);break;case o.rewind:case o.left:this.rewind(!1);break;case o.f4:case 117:this.nextAspect();break;case o.f1:this.nextAudioTrack();break;case o.f2:this.nextSubtitle();break;case o.f3:this.nextViewMode();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:this.inputPosition(e.code)}}},i.prototype.mediaListener=function(e){var t,n,i,o,a=this,r={};switch(e.code){case s.EVENT_PLAYBACK_BEGIN:a.isPLaying=!0,a.durationInterval&&(clearInterval(a.durationInterval),a.durationInterval=0),a.durationInterval=setInterval(function(){a.currentSec=gSTB.GetPosTime(),n=a.parseTime(a.currentSec),a.currentTime=(n.hour>0?n.hour+":":"")+n.min+":"+n.sec,a.emit("duration",{sec:a.currentSec,time:a.currentTime})},1e3);break;case s.EVENT_GET_MEDIA_INFO:a.totalDurationSec=gSTB.GetMediaLen(),a.totalDurationSec>3600?a.setModeHelper.length=6:a.setModeHelper.length=4,t=a.parseTime(gSTB.GetMediaLen()),a.totalDuration=(t.hour>0?t.hour+":":"")+t.min+":"+t.sec,r.totalDuration=a.totalDuration,r.totalDurationSec=a.totalDurationSec;try{i=gSTB.GetAudioPIDs().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":'),a.audioPIDs=JSON.parse(i)}catch(c){}try{o=gSTB.GetSubtitlePIDs().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":'),a.subtitlePIDs=JSON.parse(o)}catch(c){}a.currentAudioPID=0,""!==a.audioPIDs[0].lang[0]?r.audioPid=a.audioPIDs[0].lang[0]:r.audioPid=void 0,a.currentSubtitle=null,r.subtitles=null,r.stereoMode={type:gSTB.Get3DConversionMode(),name:a.stereoModes[gSTB.Get3DConversionMode()].name},a.emit("get:info",r);break;case s.EVENT_CONTENT_ERROR:a.isPLaying=!1,a.emit("content:error");break;case s.EVENT_END_OF_FILE:a.currentSec=a.totalDurationSec,a.isPLaying=!1,a.emit("content:end");break;case s.EVENT_SUBTITLE_LOAD_ERROR:a.subtitlePIDs.pop()}},i.prototype.init=function(e){e.allowInputPosition&&(this.allowInputPosition=e.allowInputPosition),e.rewindDuration&&(this.rewindHelper.duration=e.rewindDuration),e.rewindTimeout&&(this.rewindHelper.timeoutDuration=e.rewindTimeout),e.inputPositionTimeout&&(this.setModeHelper.timeoutDuration=e.inputPositionTimeout),gSTB.InitPlayer(),gSTB.SetAspect(16),gSTB.SetVideoControl(0),gSTB.SetVideoState(0),gSTB.SetMode(0),gSTB.SetWinAlphaLevel(0,255),gSTB.SetWinAlphaLevel(1,255),gSTB.SetPIG(1,0,0,0),gSTB.Set3DConversionMode(0),gSTB.SetTopWin(0)},i.prototype.play=function(e,t){var n,i;this.totalDurationSec=0,this.currentSec=0,t=t||{},n=t.solution?t.solution:"auto",i=" position:"+t.position,gSTB.Play(n+" "+e,t.proxy)},i.prototype.stop=function(){gSTB.Stop(),clearInterval(this.durationInterval),this.isPLaying=!1,this.isPause=!1},i.prototype.playPause=function(){this.isPause?gSTB.Continue():gSTB.Pause(),this.isPause=!this.isPause,this.emit("pause",{state:this.isPause})},i.prototype.rewind=function(e,t){var n=this;t=t||this.rewindHelper.duration||15,this.rewindHelper.isActive||(this.rewindHelper.isActive=!0,this.rewindHelper.startTime=this.currentSec,this.rewindHelper.time=this.currentSec,this.emit("rewind:start")),e?this.rewindHelper.time+t<this.totalDurationSec?this.rewindHelper.time+=t:this.rewindHelper.time=this.totalDurationSec:this.rewindHelper.time-t>0?this.rewindHelper.time-=t:this.rewindHelper.time=0,this.rewindHelper.timeout&&clearTimeout(this.rewindHelper.timeout),this.emit("rewind",{time:this.rewindHelper.time,shift:this.rewindHelper.time-this.rewindHelper.startTime}),this.rewindHelper.timeoutDuration?this.rewindHelper.timeout=setTimeout(function(){return clearInterval(n.durationInterval),n.durationInterval=0,n.rewindHelper.isActive=!1,n.emit("rewind:apply"),n.currentSec=n.rewindHelper.time,n.rewindHelper.timeout=0,n.rewindHelper.time===n.totalDurationSec?void n.emit("content:end"):void gSTB.SetPosTime(n.rewindHelper.time)},this.rewindHelper.timeoutDuration):(clearInterval(n.durationInterval),n.durationInterval=0,gSTB.SetPosTime(n.rewindHelper.time),n.currentSec=n.rewindHelper.time,n.rewindHelper.isActive=!1,n.emit("rewind:apply"))},i.prototype.nextAudioTrack=function(){var e=this;return this.audioPIDs.length<=1?!1:(this.currentAudioPID<this.audioPIDs.length-1?this.currentAudioPID++:this.currentAudioPID=0,gSTB.SetAudioPID(this.audioPIDs[this.currentAudioPID].pid),e.emit("audio:track",{lang:this.audioPIDs[this.currentAudioPID].lang[0],pid:this.audioPIDs[this.currentAudioPID].pid}),!0)},i.prototype.setAudioTrack=function(e){gSTB.SetAudioPID(this.audioPIDs[e].pid),this.currentAudioPID=e,this.emit("audio:track",{lang:this.audioPIDs[this.currentAudioPID].lang[0],pid:this.audioPIDs[this.currentAudioPID].pid})},i.prototype.nextAspect=function(){this.activeAspect++,this.activeAspect>this.aspects.length-1&&(this.activeAspect=0),gSTB.SetAspect(this.aspects[this.activeAspect].mode),this.emit("aspect:change",{type:this.aspects[this.activeAspect].mode,name:this.aspects[this.activeAspect].name})},i.prototype.setAspect=function(e){this.activeAspect=e,gSTB.SetAspect(this.aspects[this.activeAspect].mode),this.emit("aspect:change",{type:this.aspects[this.activeAspect].type,name:this.aspects[this.activeAspect].name})},i.prototype.nextSubtitle=function(){return this.subtitlePIDs.length<=0?(this.emit("subtitles:change",null),!1):(null===this.currentSubtitle?this.currentSubtitle=0:this.currentSubtitle<this.subtitlePIDs.length-1?this.currentSubtitle++:this.currentSubtitle=null,null!==this.currentSubtitle?(gSTB.SetSubtitlePID(this.subtitlePIDs[this.currentSubtitle].pid),gSTB.SetSubtitles(!0),this.emit("subtitles:change",{lang:this.subtitlePIDs[this.currentSubtitle].lang[0],pid:this.subtitlePIDs[this.currentSubtitle].pid})):(gSTB.SetSubtitles(!1),this.emit("subtitles:change",null)),!0)},i.prototype.setSubtitle=function(e){gSTB.SetSubtitlePID(this.subtitlePIDs[e].pid),gSTB.SetSubtitles(!0),this.currentSubtitle=e,this.emit("subtitles:change",{lang:this.subtitlePIDs[this.currentSubtitle].lang[0],pid:this.subtitlePIDs[this.currentSubtitle].pid})},i.prototype.hideSubtitles=function(){gSTB.SetSubtitles(!1),this.emit("subtitles:change",null)},i.prototype.loadExternalSubtitle=function(e){e&&"string"==typeof e&&(gSTB.LoadExternalSubtitles(e),this.subtitlePIDs.push({pid:8192}),this.emit("subtitles:load",null))},i.prototype.nextViewMode=function(){var e=gSTB.Get3DConversionMode();3>e?e++:e=0,this.emit("viewmode:change",{type:this.stereoModes[e].mode,name:this.stereoModes[e].name}),gSTB.Set3DConversionMode(e)},i.prototype.setViewMode=function(e){e>0&&3>=e&&(gSTB.Set3DConversionMode(e),this.emit("viewmode:change",{type:this.stereoModes[e].mode,name:this.stereoModes[e].name}))},i.prototype.inputPosition=function(e){var t,n,i,s,o=this,a=parseInt(e,10)-48,r=[],c=0;this.allowInputPosition&&(this.setModeHelper.active||(6===this.setModeHelper.length?this.setModeHelper.time=[0,0,0,0,0,0]:this.setModeHelper.time=[0,0,0,0],this.setModeHelper.count=0,this.setModeHelper.active=!0,6===this.setModeHelper.length?this.emit("position:input",{time:"00:00:00",start:!0,sec:0}):this.emit("position:input",{time:"00:00",start:!0,sec:0})),this.setModeHelper.count<=this.setModeHelper.length&&(this.setModeHelper.time.shift(),this.setModeHelper.time.push(a),r=this.setModeHelper.time.slice(0,this.setModeHelper.length+1),6===this.setModeHelper.length?this.setModeHelper.timeStr=r[0].toString()+r[1].toString()+":"+r[2].toString()+r[3].toString()+":"+r[4].toString()+r[5].toString():this.setModeHelper.timeStr=r[0].toString()+r[1].toString()+":"+r[2].toString()+r[3].toString(),this.setModeHelper.count++,6===this.setModeHelper.length&&(n=r.shift()+r.shift().toString(),c+=3600*parseInt(n,10)),i=r.shift()+r.shift().toString(),c+=60*parseInt(i,10),s=r.shift()+r.shift().toString(),c+=parseInt(s,10),c>this.totalDurationSec&&(c=this.totalDurationSec),this.setModeHelper.sec=c,this.emit("position:input",{time:o.setModeHelper.timeStr,sec:c})),clearTimeout(this.setModeHelper.timeout),t=this.setModeHelper.timeoutDuration?this.setModeHelper.timeoutDuration:2e3,this.setModeHelper.timeout=setTimeout(function(){o.setModeHelper.active=!1,clearInterval(o.durationInterval),o.durationInterval=0,gSTB.SetPosTime(o.setModeHelper.sec),o.emit("position:input",{time:o.setModeHelper.timeStr,sec:o.setModeHelper.sec,end:!0})},t))},i.prototype.setPosition=function(e){gSTB.SetPosTime(e),this.emit("position:set",{sec:e})},i.prototype.parseTime=function(e){var t,n,i;return e>=0?(t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=e-3600*t-60*n,10>t&&(t="0"+t),10>i&&(i="0"+i),10>n&&(n="0"+n)):(e=Math.abs(e),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=e-3600*t-60*n,10>t&&(t="0"+t),10>i&&(i="0"+i),10>n&&(n="0"+n),t="-"+t),{hour:t,min:n,sec:i}},e.exports=i},function(e,t){"use strict";if(!("classList"in document.documentElement)){var n=Array.prototype,i=n.indexOf,s=n.slice,o=n.push,a=n.splice,r=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)o.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=s.call(this,0).join(" "))},contains:function(e){return-1!==i.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=i.call(this,e);-1!==t&&(a.call(this,t,1),this._element.className=s.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";function i(e){e=e||{},e.className="modalBox "+(e.className||""),e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}var s=n(4);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";function i(e){e=e||{},this.max=100,this.min=0,this.value=0,this.step=1,e.focusable=e.focusable||!1,e.className="progressBar "+(e.className||""),s.call(this,e),this.$value=this.$body.appendChild(document.createElement("div")),this.$value.className="value",this.init(e)}var s=n(4);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.set=function(e){var t=this.value;return this.value!==e&&e<=this.max&&e>=this.min?(this.value=e,e=Math.abs(this.value-this.min)/this.step,100===e&&this.events.done&&this.emit("done"),this.$value.style.width=e+"%",this.events.change&&this.emit("change",{curr:this.value,prev:t}),!0):!1},i.prototype.init=function(e){void 0!==e.max&&(this.max=e.max),void 0!==e.min&&(this.min=e.min),void 0!==e.value&&(this.value=e.value),this.step=Math.abs(this.max-this.min)/100,this.$value.style.width=Math.abs(this.min-this.value)/this.step+"%"},e.exports=i},function(e,t,n){"use strict";function i(e){e=e||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.className="widget "+(e.className||""),s.call(this,e)}var s=n(4);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,menuPreviewSize:"cover_440x592",previewTextCount:80,screenshotSize:"588x332"},576:{height:576,width:720,availTop:24,availBottom:24,availRight:28,availLeft:54,menuPreviewSize:"cover_440x592",previewTextCount:200,screenshotSize:"588x332"},720:{height:720,width:1280,availTop:10,availBottom:10,availRight:10,availLeft:10,menuPreviewSize:"cover_440x592",previewTextCount:280,screenshotSize:"588x332"},1080:{height:1080,width:1920,availTop:15,availBottom:15,availRight:15,availLeft:15,menuPreviewSize:"cover_440x592",previewTextCount:300,screenshotSize:"880x495"}}}]);