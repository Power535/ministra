!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=13)}([function(e,t,i){"use strict";var s=i(8);s.back=s.backspace,s.channelNext=s.tab,s.channelPrev=s.tab+"s",s.ok=s.enter,s.exit=s.escape,s.volumeUp=107,s.volumeDown=109,s.f1="112c",s.f2="113c",s.f3="114c",s.f4="115c",s.refresh="116c",s.frame="117c",s.phone="119c",s.set="120c",s.tv="121c",s.menu="122c",s.app="123c",s.rewind="66a",s.forward="70a",s.audio="71a",s.standby="74a",s.keyboard="76a",s.usbMounted="80a",s.usbUnmounted="81a",s.playPause="82a",s.play=-1,s.pause=-1,s.stop="83a",s.power="85a",s.record="87a",s.info="89a",s.mute="192a",s.digit0=48,s.digit1=49,s.digit2=50,s.digit3=51,s.digit4=52,s.digit5=53,s.digit6=54,s.digit7=55,s.digit8=56,s.digit9=57,e.exports=s},function(e,t,i){"use strict";var s=i(3),a=i(5),n=0;function o(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,a.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+n++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(s.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},o.prototype.focus=function(e){var t=s.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},o.prototype.blur=function(){var e=s.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},o.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},o.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=o},function(e,t,i){"use strict";e.exports=i(1)},function(e,t,i){"use strict";var s=i(5),a=i(15).parse,n=new s;n.query=a(document.location.search.substring(1)),n.config=i(16),n.activePage=null,n.route=function(e,t){var i,s=n.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=n.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,n.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,n.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:s,to:e}),!0)},e.exports=n},function(e,t,i){"use strict";var s=i(14);e.exports=s},function(e,t,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function s(){i.removeListener(e,s),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s=i(3);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+s.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";var s={tag:function(e,t,i){var s,a,n=null;if(e){if(n=document.createElement(e),t&&"object"==typeof t)for(a in t)n[a]=t[a];for(s=2;s<arguments.length;s++)arguments[s]&&n.appendChild("object"==typeof arguments[s]?arguments[s]:document.createTextNode(arguments[s]))}return n},fragment:function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)(e=arguments[t])&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},add:function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},remove:function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},clear:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}};e.exports=s},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var s=i(10),a=i(31);function n(e){var t=this;e=e||{},this.handlers={},this.links={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",s.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-layout-list",n.prototype.renderItemDefault=function(e,t){var i,s,n,o,c;if(e.ready&&this.fixedData)for(c=0;c<t.items.length;c++)"string"!=typeof(o=t.items[c]).value&&void 0!==o.value||((n=e.layout.$node.childNodes[c]).innerText=o.value||"",n.className=o.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);s={focusable:!1,data:t.items},t.className&&(s.className=t.className),i=new a(s),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},n.prototype.setData=function(e){this.links={},s.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.init=function(e){var t;s.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.renderItem=n.prototype.renderItemDefault,e.exports=n},function(e,t,i){"use strict";var s=i(2),a=i(0);function n(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-list",n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.renderItemDefault=function(e,t){e.innerText=t.value},n.prototype.renderItem=n.prototype.renderItemDefault,n.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},n.prototype.init=function(e){var t,i,s=this,a=this.$body.children.length,n=function(e){this.data&&(s.focusItem(this),s.events["click:item"]&&s.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){s.events[t]=null,s.addListener(t,e.events[t])}),this.size!==a)for(a>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",n),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?s.events["data:error"]&&s.emit("data:error",t):(i&&(e.data=i,s.setData(e),s.scroll&&s.scroll.init({realSize:s.provider.maxCount,viewSize:s.provider.size,value:s.provider.head+s.provider.pos})),s.events["data:get"]&&s.emit("data:get"))})}else e.data&&this.setData(e)},n.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},n.prototype.renderView=function(e){var t,i,s,a,n;if(this.viewIndex!==e){for(a=this.viewIndex,this.viewIndex=n=e,i=0;i<this.size;i++)t=this.$body.children[i],(s=this.data[e])?(t.data=s,t.index=e,this.renderItem(t,s),s.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:a,currIndex:n}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},n.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})})}else this.cycle&&this.move(a.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})})}else this.cycle&&this.move(a.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},n.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},n.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},n.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},n.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=n},function(e,t,i){"use strict";var s=i(33),a=i(2),n=i(0);function o(e){var t,i,a,o=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){o.hide()},a=e.events.keydown,e.events.keydown=function(e){a&&a.call(this,e),e.code!==n.back&&e.code!==n.menu||(e.stop=!0,o.hide())},s.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-modal",o.prototype.focus=function(){this.$node.classList.add("active"),s.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof a&&this.children[0].focus()},o.prototype.blur=function(){this.$node.classList.remove("active"),s.prototype.blur.call(this)},e.exports=o},function(e,t,i){"use strict";e.exports=i(37),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";var s=i(4);s.once("load",function(){s.network=core.plugins.network,s.api=core.plugins.audioBackend,i(22).load({name:core.environment.language},function(e){s.pages={main:i(24)},s.route(s.pages.main)})})},function(e,t,i){"use strict";var s=i(3),a=i(17);window.core=window.parent.getCoreInstance(window,s),i(18),i(19),i(6)("sdk"),i(21),i(6)("app"),s.platform="mag",s.ready=function(){window.core.call("app:ready")},s.exit=function(){s.events["exit"]&&s.emit("exit"),core.call("exit")},a.load=function(e){document.body.setAttribute("platform",s.platform),core.ready?s.events["load"]&&s.emit("load",{}):core.once("load",function(){s.events[e.type]&&s.emit(e.type,e)})},a.contextmenu=function(e){e.preventDefault()},Object.keys(a).forEach(function(e){window.addEventListener(e,a[e])}),e.exports=s},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={artists:{search:"",offset:0,limit:7},albums:{genreId:"",artistId:"",yearId:"",search:"",sortby:"",offset:0,limit:7},tracks:{albumId:"",genreId:"",artistId:"",yearId:"",search:"",sortby:"",offset:0,limit:7},playlist:{search:"",offset:0,limit:7},playlistTrack:{config:{search:"",offset:0,limit:7},list:{}},provider:{size:7,pages:2}}},function(e,t,i){"use strict";var s=i(3);e.exports={DOMContentLoaded:function(e){s.events["dom"]&&s.emit("dom",e)},load:function(e){s.events[e.type]&&s.emit(e.type,e)},unload:function(e){s.events[e.type]&&s.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=s.activePage,a={code:e.keyCode,stop:!1};e.ctrlKey&&(a.code+="c"),e.altKey&&(a.code+="a"),e.shiftKey&&(a.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,a,e),!a.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,a,e)),a.stop||(i.events[e.type]&&i.emit(e.type,a,e),e.stop||s.events[e.type]&&s.emit(e.type,a,e))},keypress:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var s=Array.prototype,a=s.indexOf,n=s.slice,o=s.push,c=s.splice,l=s.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=n.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(c.call(this,t,1),this._element.className=n.call(this,0).join(" "))},toString:function(){return l.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var s=i(3),a=i(20);s.metrics=a[s.query.screenHeight]||a[screen.height]||a[720],s.metrics.availHeight=s.metrics.height-(s.metrics.availTop+s.metrics.availBottom),s.metrics.availWidth=s.metrics.width-(s.metrics.availLeft+s.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,modalSize:5},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,modalSize:5},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,modalSize:5},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,modalSize:5}}},function(e,t,i){"use strict";var s,a=i(3);(s=document.createElement("link")).rel="stylesheet",s.href=window.core.theme.path+a.metrics.height+".css",document.head.appendChild(s),e.exports=s},function(e,t,i){"use strict";var s=i(5),a=i(23),n=new s;function o(e){var t=new a(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}n.defaultLanguage="en",n.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===n.defaultLanguage?(o(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{o(JSON.parse(i.responseText)),t(null),n.events["load"]&&n.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){o(),t(e),n.events["error"]&&n.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=n},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var s,a,n,o,c,l,r,d,h,u,p,m,f,v,y,g,b,$,x,k,w,I,C,N,T,z,E,L,S,D,A,P,R=new(i(25))({$node:document.getElementById("pageMain")}),O=i(7),H=i(0),j=i(27),_=i(28),M=i(29),q=i(9),B=i(32),Y=i(4),V=i(11),U=i(35),G=i(12),Z=i(38),F=i(39),K=i(40),X=i(42),W=i(43),J=i(44),Q=new G,ee=Y.config,te=86400,ie={albums:1,artists:2,tracks:3,playlists:4},se=ie.albums,ae={},ne=[],oe={},ce=!1,le={f1Reset:{code:H.f1,title:gettext("Reset filters"),action:null},f1Delete:{code:H.f1,title:gettext("Delete"),action:function(){m.$focusItem.data.value&&se===ie.playlists&&(l.hide(),core.notify({title:gettext("Delete playlist"),icon:"alert",buttons:[{value:gettext("Cancel")},{value:gettext("Confirm"),click:function(){m.$focusItem.value.remove(function(){s(!0)})}}]}))}},f2:{code:H.f2,title:gettext("Edit"),action:function(){m.$focusItem.data.value&&(P.hide(),se===ie.playlists&&(n.blur(),k.show(m.$focusItem.value),k.focus(),l.hide()))}},f3:{code:H.f3,title:gettext("Add to playlist"),action:function(){if(m.$focusItem.data.value)switch(P.hide(),se){case ie.albums:case ie.tracks:a()}}},menu:{code:H.menu,action:function(){if(1===n.focusIndex&&m.$focusItem.data.value)switch(P.hide(),se){case ie.playlists:n.blur(),l.show(),l.focus();break;case ie.tracks:n.blur(),r.show(),r.focus();break;case ie.albums:n.blur(),d.show(),d.focus()}}},menuReset:{code:H.menu,action:function(){n.panels[n.focusIndex]===u&&(n.blur(),P.hide(),h.show(),h.focus())}},lastConfig:[]};function re(){b.$body.parentElement.data.value.query=oe.search,$.$body.parentElement.data.value.query=oe.search,oe.search?(b.links.$text.innerText=oe.search,$.links.$text.innerText=oe.search,b.links.$icon.classList.add("active"),$.links.$icon.classList.add("active")):(b.links.$text.innerText=b.$body.parentElement.data.value.placeholder,$.links.$text.innerText=b.$body.parentElement.data.value.placeholder,b.links.$icon.classList.remove("active"),$.links.$icon.classList.remove("active"))}function de(e,t){K.clear(),Y.api.getAlbums(t,function(t,i,s){S.innerHTML=t?0:s,e(t,X(i||[]),s||0)})}function he(e,t){K.hideBackInformation(),Y.api.getArtists(t,function(t,i,s){S.innerHTML=t?0:s,e(t,X(i||[]),s||0)})}function ue(e,t){K.clear(),Y.api.getTracks(t,function(t,i,s){S.innerHTML=t?0:s,e(t,J(i||[]),s||0)})}function pe(e,t){K.clear(),Y.api.getPlaylists(t,function(t,i,s){S.innerHTML=t?0:s,e(t,X(i||[]),s||0)})}function me(e,t){K.clear(),ee.playlistTrack.list.getTracks(t,function(t,i,s){S.innerHTML=t?0:s,e(t,J(i||[]),s||0)})}function fe(e){var t=e.$focusItem,i=t.data.items[0].value,s=t.value.id;function a(t,a){var n=null,o=null;t||(e.data.length>1&&(e.provider.head+e.provider.pos+e.$focusItem.index+1<=e.provider.maxCount&&(n=function(){e.move(H.down),s===e.$focusItem.value.id?(Y.api.playerContext=null,Y.api.intent.close()):fe(e)}),(e.provider.head>0||e.provider.pos>(e.provider.headItem?1:0)||e.$focusItem.index>(e.provider.headItem?1:0))&&(o=function(){e.move(H.up),s===e.$focusItem.value.id?(Y.api.playerContext=null,Y.api.intent.close()):fe(e)})),Y.api.intent=core.intent({action:"play",mime:"content/audio",data:{title:i,uri:a,mediaId:s},events:{end:function(){n?n():(Y.api.playerContext=null,Y.api.intent.close())},stop:function(){Y.api.playerContext=null,Y.api.intent.close()},error:function(){n?n():(Y.api.playerContext=null,Y.api.intent.close())},next:n,prev:o},context:Y.api.playerContext},function(e,t){Y.api.playerContext=t}))}t.value&&(t.value.url?a(!1,t.value.url):Y.api.link(a,{id:t.value.id}))}function ve(){var e=m.$focusItem;if(e.value)switch(se){case ie.albums:ee.tracks.albumId=e.value.id,ee.tracks.offset=0,(f=new q({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:ee.tracks,getter:function(e,t){Y.api.getTracks(t,function(t,i,s){e(t,J(i),s)})},cycle:!1}),scroll:null,events:{},size:ee.provider.size,fixedData:!0,className:"padded audioList",focusIndex:0})).once("data:get",function(){fe(f)});break;case ie.playlists:ee.playlistTrack.list=e.value,ee.playlistTrack.config.offset=0,(f=new q({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:ee.playlistTrack.config,getter:function(e,t){ee.playlistTrack.list.getTracks(t,e)},cycle:!1}),scroll:null,events:{},size:ee.provider.size,fixedData:!0,className:"padded audioList",focusIndex:0})).once("data:get",function(){fe(f)});break;case ie.tracks:fe(f=m)}}function ye(){ve()}function ge(e){ne.push({provider:m.provider,focus:m.$focusItem.index,title:L.innerText,type:ie.albums}),L.innerText=e.name,se=ie.tracks,ee.tracks.artistId="",ee.tracks.albumId=e.id,T=K.fillTracks,z=ue,N=ye,(oe=ee.tracks).offset=0,E=gettext("No tracks"),b.$body.parentElement.data.value.query=oe.search,$.$body.parentElement.data.value.query=oe.search,re(),P.hide(),P.init(le.lastConfig={left:le.menu,middle:[le.f3]}),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:{items:[{className:"theme-icon theme-icon-back"},{className:"title",value:". ."}],value:null}}),focusIndex:0,noData:E})}function be(e){ne.push({provider:m.provider,focus:m.$focusItem.index,title:L.innerText,type:ie.artists}),L.innerText=e.name,se=ie.albums,ee.albums.artistId=e.id,(oe=ee.albums).offset=0,z=de,E=gettext("No albums"),N=ge,T=K.fillAlbums,re(),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:{items:[{className:"theme-icon theme-icon-back"},{className:"title",value:". ."}],value:null}}),focusIndex:0,noData:E})}function $e(e){ne.push({provider:m.provider,focus:m.$focusItem.index,title:L.innerText,type:ie.playlists}),re(),L.innerText=e.name,se=ie.tracks,ee.playlistTrack.list=e,T=K.fillTracks,z=me,N=ye,(oe=ee.playlistTrack.config).offset=0,E=gettext("No tracks"),c.links.addToList.links.$title.innerText=gettext("Remove from playlist"),le.f3.title=gettext("Remove from playlist"),P.hide(),P.init(le.lastConfig={left:le.menu,middle:[le.f3]}),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:{items:[{className:"theme-icon theme-icon-back"},{className:"title",value:". ."}],value:null}}),focusIndex:0,noData:E})}function xe(){var e=ne.pop();switch(L.innerHTML=e.title,se=e.type,oe.search="",e.type){case ie.albums:oe=ee.albums,z=de,ee.albums.artistId="",T=K.fillAlbums,N=ge,le.lastConfig={left:le.menu,middle:[le.f3]},E=gettext("No albums");break;case ie.artists:z=he,T=K.fillArtist,oe=ee.artists,N=be,le.lastConfig=[],E=gettext("No artists");break;case ie.tracks:ee.tracks.artistId="",ee.tracks.albumId="",T=K.fillTracks,N=ye,z=ue,oe=ee.tracks,le.lastConfig={left:le.menu,middle:[le.f3]},E=gettext("No tracks");break;case ie.playlists:T=K.fillList,N=$e,z=pe,E=gettext("No playlists"),oe=ee.playlist,c.links.addToList.links.$title.innerText=gettext("Add to playlist"),le.f3.title=gettext("Add to playlist"),le.lastConfig={left:le.menu,middle:[le.f1Delete,le.f2]}}P.hide(),P.init(le.lastConfig),oe.offset=0,re(),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,checkTime:oe.search?0:te,cycle:!0,getter:z}),focusIndex:e.focus,noData:E})}function ke(e){var t=m.$focusItem?m.$focusItem.index:0;e&&m.provider.botEmptyLine&&m.$focusItem.index===m.data.length-1&&(t=m.$focusItem.index-1,m.provider.pos>0&&m.provider.pos--),oe.offset=m.provider.head,m.setData({data:[]}),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,pos:m.provider.pos,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:m.provider.headItem}),focusIndex:t,noData:E})}a=function(){var e=m.$focusItem.value;e&&(oe===ee.playlistTrack.config?ee.playlistTrack.list.removeTrack(e.id,function(){ke(!0)}):(n.blur(),I.show(),I.focus()))},s=function(e){Y.api.getAllPlaylists(function(t,i){var s=W(i)||[];s.push({items:[{className:"theme-icon theme-icon-plus"},{className:"title",value:gettext("Create playlist")}],value:null}),C.init({data:s,focusIndex:0,size:s.length<Y.metrics.modalSize?s.length:Y.metrics.modalSize}),oe===ee.playlist&&ke(e)})},core.addListener("show",function(){Y.api.playerContext=null}),R.once("show",function(){var e,t,i,X,W,J,ce=new G,me=!1;function fe(){m.removeListener("data:error",fe),m.removeListener("data:get",fe),m.focus(),Y.api.getGenres(function(i,a){var o,c=[];for(a=a.data||[],c.push({state:!0,title:gettext("All genres"),value:""}),o=0;o<a.length;o++)c.push({state:!1,title:a[o].name,value:a[o].id});ce=new G,y=new V({visible:!1,title:gettext("Genres"),events:{show:function(){this.children[0].focus()}},children:[e=new U({focusIndex:0,size:c.length<Y.metrics.modalSize?c.length:Y.metrics.modalSize,data:c,cycle:!0,scroll:ce,events:{"click:item":function(){y.hide(),n.focus()},select:function(e){W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,e.$curr.data.value?W.$focusItem.layout.links.$icon.classList.add("active"):W.$focusItem.layout.links.$icon.classList.remove("active"),ee.albums.genreId=e.$curr.data.value,ee.tracks.genreId=e.$curr.data.value,ee.artists.genreId=e.$curr.data.value,oe.offset=0,m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:m.provider.headItem}),focusIndex:0,noData:E})},keydown:function(e){switch(U.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:y.hide(),n.focus(),e.stop=!0}}}}),ce]}),R.add(y),Y.api.getYears(function(e,i){for(c=[],i=i.data||[],c.push({state:!0,title:gettext("All years"),value:""}),o=0;o<i.length;o++)c.push({state:!1,title:i[o].name,value:i[o].id});ce=new G,g=new V({visible:!1,title:gettext("Years"),events:{show:function(){this.children[0].focus()}},children:[t=new U({focusIndex:0,size:c.length<Y.metrics.modalSize?c.length:Y.metrics.modalSize,cycle:!0,scroll:ce,data:c,events:{"click:item":function(){g.hide(),n.focus()},select:function(e){W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,e.$curr.data.value?W.$focusItem.layout.links.$icon.classList.add("active"):W.$focusItem.layout.links.$icon.classList.remove("active"),ee.albums.yearId=e.$curr.data.value,ee.tracks.yearId=e.$curr.data.value,ee.artists.yearId=e.$curr.data.value,oe.offset=0,m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:m.provider.headItem}),focusIndex:0,noData:E})},keydown:function(e){switch(U.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:g.hide(),n.focus(),e.stop=!0}}}}),ce]}),R.add(g),s()})}),Y.ready()}function ke(){core.intent({action:"keyboard",data:{value:b.$body.parentElement.data.value.query,title:gettext("AUDIO SEARCH")},events:{done:function(e){oe.search!==e.value&&(oe.search=e.value,re(),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:m.provider.headItem}),focusIndex:0,noData:E}))}}},function(e){})}P=new j({visible:!1,parent:R}),le.lastConfig={left:le.menu,middle:[le.f3]},P.init([]),D=new Z({propagate:!0,focusable:!0,children:[W=new q({focusIndex:0,size:6,cycle:!0,data:[{name:"search",items:[{name:"$icon",className:"theme-icon theme-icon-search"},{name:"$text",value:gettext("Search"),className:"inputSearchField"}],value:{placeholder:gettext("Search"),query:""},click:ke},{name:"category",items:[{name:"$icon",className:"theme-icon theme-icon-categories"},{name:"$text",value:gettext("Albums"),className:"theme-item-more"}],click:function(){n.blur(),x.show(),x.focus()}},{name:"genre",items:[{name:"$icon",className:"theme-icon theme-icon-genres"},{name:"$text",value:gettext("All genres"),className:"theme-item-more"}],click:function(){n.blur(),y.show(),y.focus()}},{name:"year",items:[{name:"$icon",className:"theme-icon theme-icon-filter"},{name:"$text",value:gettext("All years"),className:"theme-item-more"}],click:function(){n.blur(),g.show(),g.focus()}},{name:"sort",items:[{name:"$icon",className:"theme-icon theme-icon-sort-az"},{name:"$text",value:gettext("By date"),className:"theme-item-more"}],click:function(){n.blur(),v.show(),v.focus()}},{items:[{className:"theme-icon theme-icon-exit"},{value:gettext("Exit")}],click:function(){F.goExit()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.right:u.emit("keydown",e),e.stop=!0}},blur:function(){q.prototype.blur.call(this),P.hide()},focus:function(){P.init({left:le.menuReset,middle:[le.f1Reset]}),P.show()}}})],events:{focus:function(){W.focus()}}}),b=W.links.search,A=new Z({propagate:!0,focusable:!0,children:[J=new q({propagate:!0,focusIndex:1,cycle:!0,size:4,data:[{name:"search",items:[{name:"$icon",className:"theme-icon theme-icon-search"},{name:"$text",value:gettext("Search"),className:"inputSearchField"}],value:{placeholder:gettext("Search"),query:""},click:ke},{items:[{className:"theme-icon theme-icon-categories"},{value:gettext("Playlists"),className:"theme-item-more"}],click:function(){n.blur(),x.show(),x.focus()}},{items:[{className:"theme-icon theme-icon-plus"},{value:gettext("Create playlist")}],click:function(){n.blur(),k.show(),k.focus()}},{items:[{className:"theme-icon theme-icon-exit"},{value:gettext("Exit")}],click:function(){F.goExit()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.right:u.emit("keydown",e),e.stop=!0}},blur:function(){q.prototype.blur.call(this),P.hide()},focus:function(){P.init({left:le.menuReset,middle:[le.f1Reset,le.f2]}),P.show()}}})],events:{focus:function(){A.children[0].focus()}}}),$=J.links.search,u=new M({title:[{value:gettext("Menu"),className:"name"}],children:[D,A],events:{focus:function(){this.currentTab?this.currentTab.focus():M.prototype.defaultEvents.focus.call(this)}}}),D.show(),o=new M({title:[{value:gettext("Albums"),className:"name"},O.tag("div",{className:"amountContainer"},S=O.tag("div",{className:"amount"},"0"))],main:!0}),L=o.$title.$node.children[0],K.init(),p=new M({title:[{value:gettext("Info"),className:"name"}],children:[K.textArea,K.textArea.scroll],events:{focus:function(){M.prototype.defaultEvents.focus.call(this),P.hide()}}}),K.textArea.init(),N=ge,T=K.fillAlbums,oe=ee.albums,z=de,E=gettext("No albums"),(m=new q({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:{},checkTime:oe.search?0:te,getter:z=de,cycle:!0}),scroll:Q,events:{focus:function(){P.init(le.lastConfig),m.$focusItem&&m.$focusItem.data.value?P.show():P.hide()},"focus:item":function(e){e.$curr.data.value?P.show():P.hide(),clearTimeout(ae.info),ae.info=setTimeout(function(){T(e.$curr.data.value)},core.environment.onFocusDebounceTimeout)},"move:view":function(){m&&m.$focusItem&&(m.$focusItem.data.value?P.show():P.hide(),T(m.$focusItem.data.value))},"click:item":function(e){e.$item.data.value||!ne.length?N(e.$item.data.value):xe()},keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.playPause:m.$focusItem.data.value&&se!==ie.artists&&ve()}}},size:ee.provider.size,className:"padded audioList",noData:E,focusIndex:0})).once("data:error",fe),m.once("data:get",fe),f=null,n=new _({visible:!1,panels:[u,o,p]}),R.add(n),o.add(m),o.add(Q),o.focus(),x=new V({visible:!1,title:gettext("Categories"),events:{show:function(){this.children[0].focus()}},children:[new U({focusIndex:0,size:4,cycle:!0,data:[{state:!0,title:gettext("Albums"),value:ie.albums},{state:!1,title:gettext("Singers"),value:ie.artists},{state:!1,title:gettext("Tracks"),value:ie.tracks},{state:!1,title:gettext("Playlists"),value:ie.playlists}],events:{"click:item":function(){x.hide(),n.focus()},select:function(e){switch(L.innerHTML=e.$curr.data.title,ne=[],oe.search="",e.$curr.data.value){case ie.albums:D.show(),D.focus(),le.lastConfig={left:le.menu,middle:[le.f3]},W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,oe=ee.albums,z=de,ee.albums.artistId="",T=K.fillAlbums,N=ge,E=gettext("No albums"),K.hideHolder();break;case ie.artists:D.show(),D.focus(),le.lastConfig=[],W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,z=he,oe=ee.artists,T=K.fillArtist,N=be,E=gettext("No artists"),K.showHolder();break;case ie.tracks:D.show(),D.focus(),le.f3.title=gettext("Add to playlist"),le.lastConfig={left:le.menu,middle:[le.f3]},W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,ee.tracks.artistId="",ee.tracks.albumId="",T=K.fillTracks,N=ye,z=ue,oe=ee.tracks,E=gettext("No tracks"),K.hideHolder();break;case ie.playlists:T=K.fillList,N=$e,z=pe,E=gettext("No playlists"),le.lastConfig={left:le.menu,middle:[le.f1Delete,le.f2]},oe=ee.playlist,A.show(),A.focus(),K.showHolder()}se=e.$curr.data.value,oe.offset=0,re(),m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,checkTime:oe.search?0:te,cycle:!0,getter:z}),focusIndex:0,noData:E})},keydown:function(e){switch(U.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:x.hide(),n.focus(),e.stop=!0}}}})]}),R.add(x),ce=new G,I=new V({visible:!1,title:gettext("Playlists"),events:{show:function(){P.hide(),this.children[0].focus()}},children:[C=new q({focusIndex:0,size:Y.metrics.modalSize,cycle:!0,scroll:ce,events:{"click:item":function(e){if(e=e.$item.data.value,I.hide(),e){switch(se){case ie.tracks:e.addTrack(m.$focusItem.value.id);break;case ie.albums:e.addAlbum(m.$focusItem.value.id)}n.focus()}else X=!0,k.show(),k.focus()},keydown:function(e){switch(U.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:I.hide(),n.focus(),e.stop=!0}}}}),ce]}),R.add(I),ce=new G,v=new V({visible:!1,title:gettext("Sort"),events:{show:function(){this.children[0].focus()}},children:[new U({focusIndex:0,size:2,cycle:!0,data:[{state:!0,title:gettext("By date"),value:"added"},{state:!1,title:gettext("By name"),value:"name"}],events:{"click:item":function(){v.hide(),n.focus()},select:function(e){W.$focusItem.layout.links.$text.innerText=e.$curr.data.title,ee.albums.sortby=e.$curr.data.value,ee.tracks.sortby=e.$curr.data.value,m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,getter:z,checkTime:oe.search?0:te,cycle:!0,headItem:m.provider.headItem}),focusIndex:0,noData:E})},keydown:function(e){switch(U.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:v.hide(),n.focus(),e.stop=!0}}}})]}),R.add(v),k=new V({title:gettext("create playlist"),events:{show:function(e){w.focusIndex(0),P.hide(),e?(me=e,i.$parentItem.data.value.name=e.name,i.links.$text.innerText=e.name,this.$text.innerText=gettext("edit playlist"),w.links.button.links.$text.innerText=gettext("Edit"),w.links.button.data[0].value=gettext("Edit")):(me=!1,i.$parentItem.data.value.name="",i.links.$text.innerText=i.$parentItem.data.value.placeholder,this.$text.innerText=gettext("create playlist"),w.links.button.links.$text.innerText=gettext("Create"),w.links.button.data[0].value=gettext("Create")),w.$focusItem.data.click()}},children:[w=new q({className:"padded",size:2,cycle:!0,data:[{name:"name",items:[{name:"$text",value:gettext("name"),className:"title center"}],value:{placeholder:gettext("name"),name:""},click:function(){core.intent({action:"keyboard",data:{value:i.$parentItem.data.value.name,title:me?gettext("edit playlist"):gettext("create playlist"),placeholder:i.$parentItem.data.value.placeholder},events:{done:function(e){w.focusIndex(1),i.$parentItem.data.value.name=e.value,e.value?i.links.$text.innerText=e.value:i.links.$text.innerText=i.$parentItem.data.value.placeholder}}},function(e){})}},{name:"button",items:[{name:"$text",value:me?gettext("Edit"):gettext("Create"),className:"title center"}],click:function(){k.hide(),n.focus(),!1===me?Y.api.createPlaylist({name:i.$parentItem.data.value.name},function(e,t){if(!e){if(X)switch(X=!1,se){case ie.tracks:t.addTrack(m.$focusItem.value.id);break;case ie.albums:t.addAlbum(m.$focusItem.value.id)}s()}}):me.edit(i.$parentItem.data.value.name,s)}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.back:k.hide(),n.focus(),e.stop=!0}}}})]}),i=w.links.name,R.add(k),le.f1Reset.action=function(){var i=W.links;e.$checkedData&&(e.$checkedData.state=!1,e.data[0].state=!0),e.setData({data:e.data,focusIndex:0}),t.$checkedData&&(t.$checkedData.state=!1,t.data[0].state=!0),t.setData({data:t.data,focusIndex:0}),ee.artists.search="",ee.artists.genreId="",ee.artists.yearId="",ee.albums.genreId="",ee.albums.yearId="",ee.albums.search="",ee.tracks.genreId="",ee.tracks.yearId="",ee.tracks.search="",ee.playlist.search="",ee.playlistTrack.config.search="",re(),i.genre.links.$text.innerText=gettext("All genres"),i.year.links.$text.innerText=gettext("All years"),i.search.links.$icon.classList.remove("active"),i.genre.links.$icon.classList.remove("active"),i.year.links.$icon.classList.remove("active"),oe.offset=0,oe.limit=0,m.init({provider:new B({pageSize:ee.provider.size,cacheSize:ee.provider.pages,request:oe,checkTime:oe.search?0:te,cycle:!0,getter:z,headItem:m.provider.headItem}),focusIndex:0,noData:E})},R.add(l=new V({title:gettext("Actions"),events:{hide:function(){n.focus()}},children:[new q({size:2,focusIndex:0,cycle:!0,data:[{items:[{className:"theme-icon theme-icon-rc-f1"},{value:gettext("Delete")}],click:function(){l.hide(),le.f1Delete.action()}},{items:[{className:"theme-icon theme-icon-rc-f2"},{value:gettext("Edit")}],click:function(){l.hide(),n.blur(),k.show(m.$focusItem.value),k.focus()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.menu:case H.back:l.hide(),e.stop=!0}}}})]})),R.add(h=new V({title:gettext("Actions"),events:{hide:function(){n.focus()}},children:[new q({size:1,focusIndex:0,cycle:!0,data:[{items:[{className:"theme-icon theme-icon-rc-f1"},{value:gettext("Reset filters")}],click:function(){h.hide(),le.f1Reset.action()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.menu:case H.back:h.hide(),e.stop=!0}}}})]})),R.add(r=new V({title:gettext("Actions"),events:{show:function(){clearTimeout(ae.footer),P.hide()},hide:function(){n.focus()}},children:[c=new q({size:2,focusIndex:0,cycle:!0,data:[{name:"play",items:[{name:"$icon",className:"theme-icon theme-icon-rc-play-pause"},{name:"$title",className:"title",value:gettext("Play")}],click:function(){r.hide(),ve()}},{name:"addToList",items:[{name:"$icon",className:"theme-icon theme-icon-rc-f3"},{name:"$title",className:"title",value:gettext("Add to playlist")}],click:function(){r.hide(),a()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.menu:case H.back:r.hide(),e.stop=!0}}}})]})),R.add(d=new V({title:gettext("Actions"),events:{show:function(){clearTimeout(ae.footer),P.hide()},hide:function(){n.focus()}},children:[new q({size:2,focusIndex:0,cycle:!0,data:[{items:[{className:"theme-icon theme-icon-rc-play-pause"},{className:"title",value:gettext("Play")}],click:function(){d.hide(),ve()}},{items:[{className:"theme-icon theme-icon-rc-f3"},{className:"title",value:gettext("Add to playlist")}],click:function(){d.hide(),a()}}],events:{keydown:function(e){switch(q.prototype.defaultEvents.keydown.call(this,e),e.code){case H.menu:case H.back:d.hide(),e.stop=!0}}}})]}))}),R.addListeners({show:function(){n.show(),n.focus(),f=null},keydown:function(e){switch(e.code){case H.back:if(ne.length){xe(),e.stop=!0;break}F.goBack()}}}),core.addListeners({show:function(){if(ce){if(f=null,oe.search)return;ke(),ce=!0}},intent:function(e,t){if("audioClub"===e.action)switch(e.mime){case"info":e.data?(ge(e.data),t(!1)):t(!0);break;default:t(!1)}}}),e.exports=R},function(e,t,i){"use strict";e.exports=i(26),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var s=i(1);function a(e){e=e||{},this.active=!1,this.activeComponent=null,s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-page",e.exports=a},function(e,t,i){"use strict";var s=i(2),a=i(0),n={};function o(e){var t=0,i=this;(e=e||{}).focusable=!1,e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.tabs=[{codes:{}},{codes:{}},{codes:{}},{codes:{}}],this.tab=0,this.$table=this.$node.appendChild(document.createElement("table")),this.$table.insertRow(),this.$table.rows[0].insertCell(-1),this.$left=this.$table.rows[0].cells[0].appendChild(document.createElement("div")),this.$left.className="theme-icon",this.$table.rows[0].insertCell(-1),this.$table.rows[0].cells[1].className="central",this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.$table.rows[0].insertCell(-1),this.$right=this.$table.rows[0].cells[2].appendChild(document.createElement("div")),this.$right.className="theme-icon",this.init(e.data),this.parent.addListener("keydown",function(e){var t=i.tabs[i.tab];i.visible&&t.codes[e.code]&&"function"==typeof t.codes[e.code].action&&t.codes[e.code].action()})}n[a.f1]="theme-icon-rc-f1",n[a.f2]="theme-icon-rc-f2",n[a.f3]="theme-icon-rc-f3",n[a.f4]="theme-icon-rc-f4",n[a.menu]="theme-icon-rc-menu",n[a.ok]="theme-icon-rc-ok",n[a.info]="theme-icon-rc-info",n[a.playPause]="theme-icon-rc-play-pause",n[a.back]="theme-icon-rc-back",n[a.exit]="theme-icon-rc-home",n[a.keyboard]="theme-icon-rc-vk",n[a.refresh]="theme-icon-rc-refresh",n[a.frame]="theme-icon-rc-aspect",o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-footer",o.prototype.init=function(e){var t,i,s;function a(t){return function(){"function"==typeof e.middle[t].action&&e.middle[t].action()}}if(e=e||{},this.tabs[this.tab].$body.classList.add("hidden"),this.tab=e.middle&&e.middle.length?e.middle.length-1:0,(i=this.tabs[this.tab]).codes={},e.left?(this.$left.className=e.left.className||"theme-icon "+(n[e.left.code]||"theme-icon-warning"),e.left.disabled?this.$left.classList.add("disabled"):(i.codes[e.left.code]={action:e.left.action},this.$left.style.visibility="inherit",this.$left.onclick=function(){"function"==typeof e.left.action&&e.left.action()})):"hidden"!==this.$left.style.visibility&&(this.$left.style.visibility="hidden"),e.right?(this.$right.className=e.right.className||"theme-icon "+(n[e.right.code]||"theme-icon-warning"),e.right.disabled?this.$right.classList.add("disabled"):(i.codes[e.right.code]={action:e.right.action},this.$right.style.visibility="inherit",this.$right.onclick=function(){"function"==typeof e.right.action&&e.right.action()})):"hidden"!==this.$right.style.visibility&&(this.$right.style.visibility="hidden"),e.middle&&e.middle.length){for(t=0;t<e.middle.length;t++)i.codes[e.middle[t].code]={action:e.middle[t].action},e.middle[t].disabled?i.$body.children[t].classList.add("disabled"):(i.$body.children[t].classList.remove("disabled"),i.$body.children[t].onclick=a(t)),(s=i.$body.children[t].children)[0].className="iconImg "+(e.middle[t].className||"theme-icon "+(n[e.middle[t].code]||"theme-icon-warning")),s[1].innerText=e.middle[t].title||"";i.$body.classList.remove("hidden")}},e.exports=o},function(e,t,i){"use strict";var s=i(2),a=i(0);function n(e){var t,i=this;function n(e){switch(e.code){case a.left:i.focusIndex>0&&i.panels[i.focusIndex-1].focus();break;case a.right:i.focusIndex<i.panels.length-1&&i.panels[i.focusIndex+1].focus()}}for((e=e||{}).focusable=e.focusable||!1,s.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),t=0;t<this.panels.length;t++)this.panels[t].addListeners({keydown:n}),this.panels[t].index=t}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-panel-set",n.prototype.focus=function(){s.prototype.focus.call(this),this.panels[this.focusIndex].focus()},n.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=n},function(e,t,i){"use strict";var s=i(2),a=i(30);function n(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),e.title&&(Array.isArray(e.title)||(e.title=[e.title]),this.$title=new a({className:"title",data:e.title,focusable:!1}),this.$node.appendChild(this.$title.$node)),this.$node.appendChild(this.$body),(t=document.createElement("div")).className="overlay",this.$node.appendChild(t)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-panel",n.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},n.prototype.focus=function(){this.focusable&&(this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),s.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand")))},n.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),s.prototype.blur.call(this)},e.exports=n},function(e,t,i){"use strict";var s=i(2),a=i(0);function n(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],s.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case a.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case a.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-layout",n.prototype.init=function(e){for(var t,i,a,n=this,o=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof s||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){n.focusIndex=this.index}for(this.data=o,a=0;a<o.length;a++)"string"==typeof(t=o[a]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof s?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value)):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i))},e.exports=n},function(e,t,i){"use strict";var s=i(2),a=i(0);function n(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},s.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case a.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case a.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-layout",n.prototype.init=function(e){for(var t,i,a,n=this,o=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof s||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){n.focusIndex=this.index}for(this.data=o,a=0;a<o.length;a++)"string"==typeof(t=o[a]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof s?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=n},function(e,t,i){"use strict";var s=i(0),a=0;function n(e){e=e||{},this.size=e.pageSize,this.stepSize=e.stepSize||1,this.data=[],this.head=0,this.tail=0,this.pos=e.pos||0,this.cacheSize=(e.cacheSize||2)*this.size,this.config=e.request||{},this.botEmptyLine=!1,this.count=e.count||0,this.maxCount=this.count+(e.headItem?1:0),this.headItem=e.headItem,this.lastChecked=0,this.checkTime=1e3*e.checkTime||0,this.cycle=e.cycle,this.getter=e.getter,this.blocked=!1,a=0}n.prototype.constructor=n,n.prototype.get=function(e,t){var i=this,n=[],o=new Date;if(!this.blocked)switch(e){case null:this.blocked=!0,this.config.offset?(this.head=this.config.offset,(!this.config.limit||this.config.limit<0)&&(this.config.limit=2*this.cacheSize)):(!this.config.limit||this.config.limit<0)&&(this.config.limit=this.cacheSize),this.getter(function(e,s,c){if(i.headItem&&!i.config.offset&&(s.unshift(i.headItem),a=1),i.lastChecked=o.getTime(),e)t(!0,s);else{if(i.count=c,i.maxCount=c+(i.headItem?1:0),i.data=s,i.tail=i.head+s.length,i.count&&i.head>=i.count)return void i.goEnd(t,!0);s.length<i.config.limit&&(i.botEmptyLine=!0),i.pos+i.size<i.data.length?(n=i.data.slice(i.pos,i.pos+i.size),t(e,n),i.checkNext()):i.checkNext(t)}i.blocked=!1},this.config);break;case s.right:case s.down:if(this.pos+=this.stepSize,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos+this.size<this.data.length?(n=this.data.slice(this.pos,this.pos+this.size),t(!1,n),this.checkNext()):this.checkNext(t);break;case s.pageDown:if(this.pos+=this.size-1,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos+this.size<this.data.length?(n=this.data.slice(this.pos,this.pos+this.size),t(!1,n),this.checkNext()):this.checkNext(t);break;case s.left:case s.up:if(this.pos-=this.stepSize,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos>=0?(n=this.data.slice(this.pos,this.pos+this.size),t(!1,n),this.checkPrev()):this.checkPrev(t);break;case s.pageUp:if(this.pos-=this.size-1,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos>0?(n=this.data.slice(this.pos,this.pos+this.size),t(!1,n),this.checkPrev()):this.checkPrev(t);break;case s.home:this.goHome(t);break;case s.end:this.goEnd(t)}},n.prototype.checkNext=function(e){var t=this.cacheSize+this.pos-this.data.length,i=this,s=new Date;if(this.botEmptyLine){if(this.pos>this.data.length-this.size){if(this.cycle)return void this.goHome(e);this.pos=this.data.length-this.size,this.pos<0&&(this.pos=0)}e&&e(!1,this.data.slice(this.pos,this.pos+this.size))}else if(t>=this.size){if(this.count&&t+this.tail>this.count&&(t=this.count-this.tail)<=0)return i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0)),e&&e(!1,i.data.slice(i.pos,i.pos+i.size)),void(this.botEmptyLine=!0);this.config.limit=t,this.config.offset=this.tail-a,this.blocked=!0,this.getter(function(a,n,o){a||(i.count=o,i.maxCount=o+(i.headItem?1:0),n.length<t&&(i.botEmptyLine=!0),n.length&&(i.data=i.data.concat(n),t=i.data.length-2*i.cacheSize,i.tail+=n.length,t>0&&(i.data.splice(0,t),i.pos-=t,i.head+=t)),i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0))),i.lastChecked=s.getTime(),i.blocked=!1,e&&e(a,i.data.slice(i.pos,i.pos+i.size))},this.config)}},n.prototype.checkPrev=function(e){var t=this.cacheSize-this.pos,i=this,s=new Date;if(this.head>0)t>=this.size&&(t>this.head&&(t=this.head),this.config.offset=this.head-t-a,this.config.offset<0&&(this.config.offset=0,t-=a),this.config.limit=t,this.blocked=!0,this.getter(function(a,n,o){a||(i.count=o,i.maxCount=o+(i.headItem?1:0),i.data=n.concat(i.data),0===i.config.offset&&i.headItem&&i.data[0]!==i.headItem&&i.data.unshift(i.headItem),i.tail-=n.length,i.pos+=n.length,t=i.data.length-2*i.cacheSize,i.head-=t,t>0&&(i.data.splice(-t),i.botEmptyLine=!1)),i.lastChecked=s.getTime(),i.blocked=!1,e&&e(a,i.data.slice(i.pos,i.pos+i.size))},this.config));else{if(this.headItem&&this.data[0]!==this.headItem&&this.data.unshift(this.headItem),this.pos<0){if(this.cycle)return void this.goEnd(e);this.pos=0}e&&e(!1,i.data.slice(i.pos,i.pos+i.size))}},n.prototype.goHome=function(e,t){var i=[],s=this,a=new Date;if(0!==this.head||t)this.blocked=!0,this.pos=0,this.head=0,this.config.offset=0,this.config.limit=this.cacheSize,this.getter(function(t,n,o){t||(s.count=o,s.maxCount=o+(s.headItem?1:0),s.data=n,s.headItem&&s.data[0]!==s.headItem&&s.data.unshift(s.headItem),s.tail=s.data.length,i=s.data.slice(s.pos,s.pos+s.size),s.botEmptyLine=!1),s.lastChecked=a.getTime(),s.blocked=!1,e(t,i,0)},this.config);else{if(this.pos=0,this.checkTime&&a.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(e);i=this.data.slice(this.pos,this.pos+this.size),e(!1,i,0)}},n.prototype.goEnd=function(e,t){var i,s=[],a=this,n=new Date;if(this.count)if(this.tail!==this.count||t)this.blocked=!0,this.head=this.count-2*this.cacheSize,this.head<0&&(this.head=0),this.config.offset=this.head,this.config.limit=2*this.cacheSize,this.getter(function(t,o,c){t||(a.count=c,a.maxCount=c+(a.headItem?1:0),a.data=o,0===a.head&&a.headItem&&a.data[0]!==a.headItem&&a.data.unshift(a.headItem),a.pos=a.data.length-a.size,a.tail=a.head+o.length,a.pos<0&&(a.pos=0),s=a.data.slice(a.pos,a.pos+a.size),(i=s.length-1)<0&&(i=0),a.botEmptyLine=!0),a.blocked=!1,a.lastChecked=n.getTime(),e(t,s,i)},this.config);else{if(this.checkTime&&n.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(function(t){t||a.goEnd(e)});a.pos=a.data.length-a.size,a.pos<0&&(a.pos=0),s=a.data.slice(a.pos,a.pos+a.size),(i=s.length-1)<0&&(i=0),a.botEmptyLine=!0,e(!1,s,i)}else e(!0)},n.prototype.refreshData=function(e){var t=this,i=[],s=new Date;this.pos<0&&(this.pos=0),this.config.offset=this.head,this.config.limit=this.tail-this.head,this.config.limit<=0&&(this.config.limit=0===this.config.offset?this.cacheSize:2*this.cacheSize),this.blocked=!0,this.getter(function(n,o,c){if(t.headItem&&!t.config.offset&&(o.unshift(t.headItem),a=1),n)e(n,o);else{if(t.lastChecked=s.getTime(),t.count=c,t.maxCount=c+(t.headItem?1:0),t.data=o,t.tail=t.head+o.length,t.count&&t.head>=t.count)return void t.goEnd(e,!0);o.length<t.config.limit&&(t.botEmptyLine=!0),t.pos+t.size<t.data.length?(i=t.data.slice(t.pos,t.pos+t.size),e(n,i),t.checkNext()):t.checkNext(e)}t.blocked=!1},this.config)},e.exports=n},function(e,t,i){"use strict";e.exports=i(34),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var s=i(1);function a(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-modal",e.exports=a},function(e,t,i){"use strict";var s=i(10),a=i(36),n=0;function o(e){var t=this;this.group="group "+n++,this.$checkedData=null,s.call(this,e),this.addListener("click:item",function(e){var i=e.$item;i.checkBox.set(!0),i.state=i.checkBox.value,i.data.state=i.checkBox.value,t.$checkedData!==i.data&&(t.emit("select",{$last:t.$checkedData,$curr:i}),t.$checkedData&&(t.$checkedData.state=!1),t.$checkedData=i.data)})}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-radio-list",o.prototype.group=0,o.prototype.renderItemDefault=function(e,t){var i=document.createElement("table"),s=document.createElement("tr"),n=document.createElement("td"),o=new a({group:this.group});e.innerHTML="",t.state&&(o.set(!0),this.$checkedData=t),i.appendChild(s),n.appendChild(o.$node),n.className="checkBoxWrapper",s.appendChild(n),(n=document.createElement("td")).className="title",n.innerText=t.title||"",s.appendChild(n),e.checkBox=o,e.state=o.value,e.value=t.value,e.appendChild(i)},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";var s=i(1),a=i(8),n={};function o(e){e=e||{},this.value=!!e.value,this.value&&(e.className+=" checked"),this.group=null,e.group&&(e.className+=" grouped",this.group=e.group,void 0===n[e.group]?n[e.group]=[this]:n[e.group].push(this)),s.call(this,e)}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="spa-component-checkbox",o.prototype.defaultEvents={click:function(){this.set(!this.value)},keydown:function(e){e.code===a.enter&&this.set(!this.value)}},o.prototype.set=function(e){var t,i;if(this.value!==e){if(!this.value&&null!==this.group)for(t=0,i=n[this.group].length;t<i;t++)n[this.group][t].set(!1);return this.value=!this.value,this.$node.classList.toggle("checked"),this.events["change"]&&this.emit("change",{value:this.value}),!0}return!1},e.exports=o},function(e,t,i){"use strict";var s=i(1);function a(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-scrollbar",a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},a.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=a},function(e,t,i){"use strict";var s=i(1);function a(e){(e=e||{}).focusable=e.focusable||!1,e.className+=" hidden",e.visible=null,s.call(this,e),this.visible=!1}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-tab",a.prototype.show=function(e){return!!this.visible||(this.parent.currentTab&&this.parent.currentTab.hide(e),s.prototype.show.call(this,e),this.parent.currentTab=this,!0)},a.prototype.hide=function(){return!s.prototype.hide.call(this)||(this.parent.currentTab=null,!0)},e.exports=a},function(e,t,i){"use strict";var s=i(4),a={goBack:function(){core.call("stop")},goExit:function(e){var t,a=i(11),n=i(9),o=i(0),c=s.activePage.activeComponent;s.activePage.add(t=new a({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){c.focus()}},children:[new n({className:"padded",size:2,focusIndex:0,fixedData:!0,data:[{items:[{value:gettext("Yes")}],click:function(){if("function"==typeof e&&e(!0))return t.hide(),void t.remove();t.hide(),t.remove(),core.call("exit")}},{items:[{value:gettext("No")}],click:function(){"function"==typeof e&&e(!1),t.hide(),t.remove(),s.mainPanelSet.focus()}}],events:{keydown:function(i){n.prototype.defaultEvents.keydown.call(this,i),i.code===o.back&&(i.stop=!0,"function"==typeof e&&e(!1),t.hide(),t.remove(),s.mainPanelSet.focus())}}})]})),t.show(),t.focus()}};e.exports=a},function(e,t,i){"use strict";var s,a,n,o,c,l,r,d,h,u=i(7),p=i(12),m=i(41),f={},v=u.tag;f.init=function(){s=v("div",{},n=v("div",{className:"info poster"}),v("div",{className:"info title theme-subhead-color"},gettext("Singer:")),c=v("div",{className:"info director"}),v("div",{className:"info title theme-subhead-color"},gettext("Genres:")),o=v("div",{className:"info genres"}),v("div",{className:"info title theme-subhead-color"},gettext("Year:")),l=v("div",{className:"info year"}),v("div",{className:"info title theme-subhead-color"},gettext("Language:")),d=v("div",{className:"info language"}),v("div",{className:"info title theme-subhead-color"},gettext("Country:")),r=v("div",{className:"info country"})),a=v("div",{className:"info placeholder"}),this.textArea=new m({propagate:!0,step:5,scroll:new p({})}),this.textArea.$body.appendChild(s),this.textArea.$body.appendChild(a),h=v("div",{className:"backDesk"},gettext("Back to previous list")),this.textArea.$body.appendChild(h)},f.clear=function(){n.style.backgroundImage="",s.style.display="none",this.textArea.init(),o.innerText="",c.innerText="",l.innerText=""},f.hideInfo=function(){s.style.display="none",a.style.display="block",this.textArea.init()},f.hideHolder=function(){a.style.display="none"},f.showHolder=function(){a.style.display="block"},f.showBackDesk=function(){h.style.display="block"},f.hideBackInformation=function(){h.style.display="none"},f.fillTracks=function(e){var t,i=[];if(!e)return s.style.display="none",h.style.display="block",void f.textArea.init();for(h.style.display="none",a.style.display="none",s.style.display="block",t=0;t<e.album.genres.length;t++)i.push(e.album.genres[t].name);e.album.cover?n.style.backgroundImage="url("+core.backend.host+e.album.cover+")":n.style.backgroundImage="",o.innerText=i.join(", "),c.innerText=e.album.artist.name,l.innerText=e.album.year.name,r.innerText=e.album.country.name,d.innerText=e.language,f.textArea.init()},f.fillArtist=function(){return!1},f.fillAlbums=function(e){var t,i=[];if(!e)return s.style.display="none",h.style.display="block",void f.textArea.init();for(h.style.display="none",s.style.display="block",t=0;t<e.genres.length;t++)i.push(e.genres[t].name);e.cover?n.style.backgroundImage="url("+core.backend.host+e.cover+")":n.style.backgroundImage="url(img/placeholder.png)",o.innerText=i.join(", "),c.innerText=e.artist.name,l.innerText=e.year.name,r.innerText=e.country.name,d.innerText=e.languages.join(", "),f.textArea.init()},f.fillList=function(){return!1},e.exports=f},function(e,t,i){"use strict";var s=i(1),a=i(0);function n(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,s.call(this,e),this.$node.appendChild(this.$body),this.init(e)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-scroll-area",n.prototype.defaultEvents={keydown:function(e){switch(e.code){case a.up:case a.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?a.up:a.down)}},n.prototype.move=function(e){var t=screen.height,i=this.viewHeight-this.realHeight;if(i<0)switch(e){case a.down:if(this.topPosition-this.step*t/100<i)return this.scroll.scrollTo(-i),this.$body.style.top=i+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case a.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},n.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=n},function(e,t,i){"use strict";e.exports=function(e){var t,i=[];if(e&&e.length)for(t=0;t<e.length;t++)i[t]={items:[{className:"title",value:e[t].name}],value:e[t]};return i}},function(e,t,i){"use strict";e.exports=function(e){var t,i=[];if(e&&e.length)for(t=0;t<e.length;t++)i[t]={items:[{className:"theme-icon theme-icon-playlist"},{className:"title",value:e[t].name}],value:e[t]};return i}},function(e,t,i){"use strict";e.exports=function(e){var t,i,s,a,n,o=[];if(e&&e.length)for(t=0;t<e.length;t++)o[t]={items:[{className:"title",value:e[t].name},{className:"time",value:(i=e[t].duration,s=void 0,a=void 0,n=void 0,i?((n=Math.floor(i/3600))?n+":":"")+((s=Math.floor((i-3600*n)/60))?(n&&s>9?s:"0"+s)+":":"0:")+((a=i-3600*n-60*s)>9?a:"0"+a):"0:00")}],value:e[t]};return o}}]);
//# sourceMappingURL=main.js.map