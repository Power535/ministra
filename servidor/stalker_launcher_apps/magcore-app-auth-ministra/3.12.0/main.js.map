{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/stb-keys/index.js","webpack:///./src/js/modules/shared.backend.js","webpack:///./node_modules/mag-app/index.js","webpack:///./node_modules/spa-component/index.js","webpack:///./node_modules/spa-app/lib/core.js","webpack:///./node_modules/cjs-emitter/index.js","webpack:///./node_modules/stb-component-page/index.js","webpack:///./node_modules/stb-component/index.js","webpack:///./src/js/components/popup.menu.js","webpack:///./node_modules/spa-keys/index.js","webpack:///./node_modules/stb-component-button/index.js","webpack:///./node_modules/stb-app/lib/css.js","webpack:///./src/js/modules/storage.js","webpack:///./src/js/components/fake.input.js","webpack:///./node_modules/stb-component-panel/index.js","webpack:///./node_modules/mag-component-modal/index.js","webpack:///./src/js/main.js","webpack:///./node_modules/mag-app/lib/main.js","webpack:///./node_modules/cjs-query/index.js","webpack:///./src/js/config.js","webpack:///./node_modules/spa-app/lib/events.js","webpack:///./node_modules/stb-shim-classlist/index.js","webpack:///./node_modules/stb-app/lib/metrics.js","webpack:///./src/js/metrics.js","webpack:///./node_modules/mag-app/lib/css.js","webpack:///./node_modules/spa-gettext/index.js","webpack:///./node_modules/cjs-gettext/index.js","webpack:///./src/js/modules/stalker.api.loader.js","webpack:///./src/js/modules/md5.js","webpack:///./src/js/modules/xor.string.js","webpack:///./node_modules/cjs-async/parallel.js","webpack:///./src/js/pages/login.js","webpack:///./node_modules/spa-component-page/index.js","webpack:///./node_modules/spa-component-button/index.js","webpack:///./node_modules/spa-component-panel/index.js","webpack:///./src/js/pages/account.disabled.js","webpack:///./src/js/pages/multi.login.js","webpack:///./node_modules/stb-component-list/index.js","webpack:///./node_modules/spa-component-list/index.js","webpack:///./src/js/modules/account.manager.js","webpack:///./src/js/pages/eula.js","webpack:///./node_modules/mag-component-footer/index.js","webpack:///./node_modules/stb-component-modal/index.js","webpack:///./node_modules/spa-component-modal/index.js","webpack:///./node_modules/stb-component-scrollbar/index.js","webpack:///./node_modules/spa-component-scrollbar/index.js","webpack:///./node_modules/mag-component-scroll-area/index.js","webpack:///./src/js/modules/device.api.js","webpack:///./node_modules/mag-component-layout-list/index.js","webpack:///./node_modules/mag-component-list/index.js","webpack:///./node_modules/mag-component-layout/index.js","webpack:///./src/js/eula.js","webpack:///./src/js/modules/api.provider.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","keys","back","backspace","channelNext","tab","channelPrev","ok","enter","exit","escape","volumeUp","volumeDown","f1","f2","f3","f4","refresh","frame","phone","set","tv","menu","app","rewind","forward","audio","standby","keyboard","usbMounted","usbUnmounted","playPause","play","pause","stop","power","record","info","mute","digit0","digit1","digit2","digit3","digit4","digit5","digit6","digit7","digit8","digit9","backend","instance","Emitter","counter","Component","config","self","this","visible","focusable","$node","$body","parent","children","propagate","document","createElement","className","id","add","hide","defaultEvents","events","forEach","eventName","addListener","apply","addEventListener","event","focus","emit","stopPropagation","constructor","child","index","arguments","length","push","parentNode","appendChild","item","remove","activePage","activeComponent","blur","splice","indexOf","removeChild","data","activeItem","classList","show","callback","setTimeout","parse","query","location","search","substring","route","pageTo","page","pageFrom","active","showPage","from","to","once","onceWrapper","removeListener","addListeners","callbacks","filter","fn","undefined","Array","slice","ModalMessage","LayoutList","Panel","previousFocusedComponent","title","gettext","size","focusIndex","items","click","window","top","platformApi","keydown","code","innerText","space","pageUp","pageDown","end","home","left","up","right","down","insert","del","link","rel","href","metrics","height","head","storageData","Storage","uid","store","originJSON","prefix","JSON","error","init","getItem","setItem","serializedData","stringify","stalker","request","method","async","body","FakeInput","placeholder","scheme","textVisible","$textVisibilityToggle","type","textContent","$style","style","cssText","setValue","text","scrollLeft","core","intent","action","language","environment","done","close","context","StbComponentModal","Modal","$overlay","onkeydown","firstChild","$header","$text","icon","$icon","pkgJson","XHRConstructor","ping","timeout","session","userId","onload","sharedBackend","message_available","response","notify","gSTB","ExecAction","msg","buttons","mime","uri","url","storage","fetch","XMLHttpRequest","packages","globalOptions","options","appsCount","apps","appConfig","packageName","stalkerLoaderPath","redirectTo","stalkerHost","pingTimeout","load","plugins","ufsJson","loadSync","apiVersion","getCoreInstance","platform","ready","setAttribute","contextmenu","preventDefault","split","part","decodeURIComponent","params","encodeURIComponent","join","DOMContentLoaded","unload","eventLocal","keyCode","ctrlKey","altKey","shiftKey","keypress","mousewheel","documentElement","DOMTokenList","el","_element","_classCache","classes","replace","token","contains","toString","toggle","Element","screenHeight","screen","availHeight","availTop","availBottom","availWidth","width","availLeft","availRight","480","576","720","1080","linkCSS","theme","path","Gettext","loader","prepare","_","pgettext","ngettext","defaultLanguage","xhr","ext","responseText","onerror","ontimeout","open","send","meta","msgId","plural","evalResult","eval","md5","xorString","parallel","storageKey","currentSessions","userFsStorage","loadTheme","themePath","Date","now","vars","status","extendCorePrototype","loadModules","originPackages","resolvedPackages","originName","updatePackages","loadStorage","setHomeApp","settings","homeApp","classicTvName","tvName","classicTv","packageMap","taskManager","show_after_loading","loadSettings","loadError","parentPassword","parent_password","audioPrimaryLanguage","pri_audio_lang","languages","audioSecondaryLanguage","sec_audio_lang","subtitlesPrimaryLanguage","pri_subtitle_lang","subtitlesSecondaryLanguage","sec_subtitle_lang","headers","Content-Type","settingsPutResponse","loadUserData","tasks","onStalkerCodeLoad","host","stalkerApiPath","authHost","stalkerAuthPath","lang","saveCallback","saveSync","reload","onfail","message","pages","main","accountDisabled","eula","addIntentHook","intentCreator","resource","mediaId","media_id","current_sessions","sessionId","stopCallback","session_id","persistent","oncredenitalsrequired","accessToken","exception","refreshToken","auth","login","password","result","error_description","client","sap","md5Key","rawData","atob","shift","tools","hash","md5cycle","x","k","a","b","ff","gg","hh","ii","add32","cmn","q","md51","state","md5blk","tail","charCodeAt","md5blks","hex_chr","rhex","j","hex","y","lsw","str","keyIndex","encoded","String","fromCharCode","isError","results","isArray","task","Error","inputLogin","buttonSubmit","inputPassword","Page","Button","getElementById","$plLabelError","requestCallback","plInputLogin","plButtonSubmit","plInputPassword","withCredentials","setLauncher","hideAll","clickDuration","pageAccountDisabled","button","padButton","padMainLabel","innerHTML","native","showStart","inputServerAddress","buttonNewAccount","inputActivateCode","accountList","buttonScrollUp","buttonScrollDown","accountsData","List","accountManager","errorData","pmlInputLogin","pmlInputPassword","pmlServerAddress","pmlInputActivateCode","positions","serverAddress","licenseKey","loginButton","initCreateForm","update","address","activationCode","updateId","updateAccountsCounter","$focusItem","pmlAccountListButtonScrollUp","map","magcore-app-tv","magcore-app-video-club","magcore-app-audio-club","magcore-app-magic-cast","magcore-app-radio","magcore-app-settings","magcore-app-personal-account","pop","settingsResponse","credentials","pmlLabelError","console","log","preventedKeydown","showApp","errorNotification","input","locked","setErrorPosition","position","pageMultiLogin","pmlAccountList","TYPE_VERTICAL","render","$buttons","$nameContainer","$login","lastChild","buttonFocusIndex","overflow","move","$item","opacity","focus:item","$prev","display","$curr","click:item","viewIndex","srcElement","pmlAuthError","navigator","onLine","pmlAccountsContainer","pmlFormContainer","pmlButtonSubmit","pmlAddAccount","renderView","disabled","pmlAccountListButtonScrollDown","pmlFormDescription1","pmlFormDescription2","accounts","localStorage","stbStorage","latest","licenseAgree","submitInterval","setInterval","clearInterval","errorHandler","activation_code","removeEventListener","cycle","scroll","provider","TYPE_HORIZONTAL","renderItemDefault","renderItem","wheelDeltaY","wheelDeltaX","currSize","onClick","focusItem","setData","realSize","maxCount","viewSize","pos","normalize","blurItem","itemData","prevIndex","currIndex","mark","scrollTo","direction","force","previousSibling","nextSibling","markItem","server","account","Footer","Scroll","ScrollArea","pageEula","popup","model","modal","scrollArea","footer","middle","realHeight","offsetHeight","viewHeight","topPosition","step","currentTab","tabs","codes","$table","insertRow","rows","insertCell","$left","cells","$right","currTab","$tab","$tabChildren","visibility","onclick","ScrollBar","thumbRect","trackRect","$thumb","getBoundingClientRect","marginTop","marginLeft","curr","prev","delta","Math","ceil","deviceApi","mac","network","metric1","meta1","metric2","meta2","metric3","meta3","clientType","Layout","handlers","$noData","fixedData","layout","inner","layoutConfig","currentNode","currentData","childNodes","$parentItem","$wrap","noData","idx","blocked","$wrapper","HTMLElement","wrap","componentClickHandler","apiSignature","GetDeviceModelExt","GetDeviceMacAddress","serialNumber","GetDeviceSerialNumber","nativeApiVersion","Version","defaults","defaultsKeys","requestStack","api","macAlgorithm","macKey","loginData","deviceId2","random","ts","round","GetHashVersion1","hwVersion","deviceId","GetUID","postBody","grant_type","client_type","username","serial_number","stb_type","device_id","device_id2","version","hw_version","api_signature","setRequestHeader","access_token","user_id","refresh_token","mac_algorithm","mac_key","v3","refreshData","headersKeys","eth0","GetLanLinkStatus","wifi","GetWifiLinkStatus","userAgent","responseType","onreadystatechange","readyState","onloadException","onerrorException"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","/**\n * Global list of non-printable control key codes.\n *\n * At the moment `keypress` and `keydown` events are emitted for the same keys (for both printable and non-printable characters).\n *\n * WARNING!!! All codes in this file (except 'volumeUp' and 'volumeDown')\n * are used in window 'keydown' handler to prevent wrong 'keypress' firings.\n * If you add new code to this file 'keypress' event with this code will never fire.\n *\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\nvar keys = require('spa-keys');\n\n\n// extend with additional codes\nkeys.back         = keys.backspace;\nkeys.channelNext  = keys.tab;        // Tab\nkeys.channelPrev  = keys.tab + 's';  // Shift+Tab\nkeys.ok           = keys.enter;      // Enter\nkeys.exit         = keys.escape;     // Esc\nkeys.volumeUp     = 107;             // NUMPAD +\nkeys.volumeDown   = 109;             // NUMPAD -\nkeys.f1           = 112 + 'c';       // Ctrl+F1\nkeys.f2           = 113 + 'c';       // Ctrl+F2\nkeys.f3           = 114 + 'c';       // Ctrl+F3\nkeys.f4           = 115 + 'c';       // Ctrl+F4\nkeys.refresh      = 116 + 'c';       // Ctrl+F5\nkeys.frame        = 117 + 'c';       // Ctrl+F6\nkeys.phone        = 119 + 'c';       // Ctrl+F8\nkeys.set          = 120 + 'c';       // Ctrl+F9\nkeys.tv           = 121 + 'c';       // Ctrl+F10\nkeys.menu         = 122 + 'c';       // Ctrl+F11\nkeys.app          = 123 + 'c';       // Ctrl+F12\nkeys.rewind       = 66  + 'a';       // Alt+B\nkeys.forward      = 70  + 'a';       // Alt+F\nkeys.audio        = 71  + 'a';       // Alt+G\nkeys.standby      = 74  + 'a';       // Alt+J\nkeys.keyboard     = 76  + 'a';       // Alt+L\nkeys.usbMounted   = 80  + 'a';       // Alt+P\nkeys.usbUnmounted = 81  + 'a';       // Alt+Q\nkeys.playPause    = 82  + 'a';       // Alt+R\nkeys.play         = -1;              // should be redefined on some platforms\nkeys.pause        = -1;              // should be redefined on some platforms\nkeys.stop         = 83  + 'a';       // Alt+S\nkeys.power        = 85  + 'a';       // Alt+U\nkeys.record       = 87  + 'a';       // Alt+W\nkeys.info         = 89  + 'a';       // Alt+Y\nkeys.mute         = 192 + 'a';\nkeys.digit0       = 48;\nkeys.digit1       = 49;\nkeys.digit2       = 50;\nkeys.digit3       = 51;\nkeys.digit4       = 52;\nkeys.digit5       = 53;\nkeys.digit6       = 54;\nkeys.digit7       = 55;\nkeys.digit8       = 56;\nkeys.digit9       = 57;\n\n\n// public\nmodule.exports = keys;\n\n// public\n// module.exports = {\n//     getCode: function ( event ) {\n//         var code = event.keyCode;\n//\n//         // apply key modifiers\n//         if ( event.shiftKey ) { code += 1000; }\n//         if ( event.altKey )   { code += 2000; }\n//\n//         return code;\n//     },\n//\n//     codes: {\n//         back:         8,    // Backspace\n//         channelPrev:  1009, // Shift+Tab\n//         channelNext:  9,    // Tab\n//         ok:           13,   // Enter\n//         exit:         27,   // Esc\n//         pageUp:       33,\n//         pageDown:     34,\n//         end:          35,\n//         home:         36,\n//         left:         37,\n//         up:           38,\n//         right:        39,\n//         down:         40,\n//         'delete':     46,\n//         volumeUp:     107,  // NUMPAD +\n//         volumeDown:   109,  // NUMPAD -\n//         f1:           112,  // F1\n//         f2:           113,  // F2\n//         f3:           114,  // F3\n//         f4:           115,  // F4\n//         refresh:      116,  // F5\n//         frame:        117,  // F6\n//         phone:        119,  // F8\n//         set:          120,  // F9\n//         tv:           121,  // F10\n//         menu:         122,  // F11\n//         app:          123,  // F12\n//         rewind:       2066, // Alt+B\n//         forward:      2070, // Alt+F\n//         audio:        2071, // Alt+G\n//         standby:      2074, // Alt+J\n//         keyboard:     2076, // Alt+L\n//         usbMounted:   2080, // Alt+P\n//         usbUnmounted: 2081, // Alt+Q\n//         playPause:    2082, // Alt+R\n//         stop:         2083, // Alt+S\n//         power:        2085, // Alt+U\n//         record:       2087, // Alt+W\n//         info:         2089, // Alt+Y\n//         mute:         2192\n//     }\n// };\n","'use strict';\n\nvar Emitter = require('cjs-emitter'),\n    backend = new Emitter();\n\nmodule.exports = {\n    instance: backend\n};\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\nvar app = require('./lib/main');\n\n\nmodule.exports = app;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app     = require('spa-app/lib/core'),\n    Emitter = require('cjs-emitter'),\n    counter = 0;\n\n\n/**\n * Base component implementation.\n *\n * Visual element that can handle sub-components.\n * Each component has a DOM element container $node with a set of classes:\n * \"component\" and some specific component class names depending on the hierarchy, for example \"page\".\n * Each component has a unique ID given either from $node.id or from data.id. If not given will generate automatically.\n *\n * @constructor\n * @extends Emitter\n *\n * @param {Object} [config={}] init parameters\n * @param {Element} [config.id] component unique identifier (generated if not set)\n * @param {string} [config.className] space-separated list of classes for \"className\" property of this.$node\n * @param {Element} [config.$node] DOM element/fragment to be a component outer container\n * @param {Element} [config.$body] DOM element/fragment to be a component inner container (by default is the same as $node)\n * @param {Component} [config.parent] link to the parent component which has this component as a child\n * @param {Array.<Component>} [config.children=[]] list of components in this component\n * @param {Object.<string, function>} [config.events={}] list of event callbacks\n * @param {boolean} [config.visible=true] component initial visibility state flag\n * @param {boolean} [config.focusable=true] component can accept focus or not\n * @param {boolean} [config.propagate=false] allow to emit events to the parent component\n *\n * @fires module:stb/component~Component#click\n *\n * @example\n * var component = new Component({\n *     $node: document.getElementById(id),\n *     className: 'bootstrap responsive',\n *     events: {\n *         click: function () { ... }\n *     }\n * });\n * component.add( ... );\n * component.focus();\n */\nfunction Component ( config ) {\n    // current execution context\n    var self = this,\n        name;\n\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( config.id && typeof config.id !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.id');\n        }\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.$node && !(config.$node instanceof Element) ) {\n            throw new Error(__filename + ': wrong config.$node type');\n        }\n        if ( config.$body && !(config.$body instanceof Element) ) {\n            throw new Error(__filename + ': wrong config.$body type');\n        }\n        if ( config.parent && !(config.parent instanceof Component) ) {\n            throw new Error(__filename + ': wrong config.parent type');\n        }\n        if ( config.children && !Array.isArray(config.children) ) {\n            throw new Error(__filename + ': wrong config.children type');\n        }\n    }\n\n    /**\n     * Component visibility state flag.\n     *\n     * @readonly\n     * @type {boolean}\n     */\n    this.visible = true;\n\n    /**\n     * Component can accept focus or not.\n     *\n     * @type {boolean}\n     */\n    this.focusable = true;\n\n    /**\n     * DOM outer handle.\n     *\n     * @type {Element}\n     */\n    this.$node = null;\n\n    /**\n     * DOM inner handle.\n     * In simple cases is the same as $node.\n     *\n     * @type {Element}\n     */\n    this.$body = null;\n\n    /**\n     * Link to the parent component which has this component as a child.\n     *\n     * @type {Component}\n     */\n    this.parent = null;\n\n    /**\n     * List of all children components.\n     *\n     * @type {Component[]}\n     */\n    this.children = [];\n\n    /**\n     * allow to emit events to the parent component\n     *\n     * @readonly\n     * @type {boolean}\n     */\n    this.propagate = !!config.propagate;\n\n    // parent constructor call\n    Emitter.call(this);\n\n    // outer handle - empty div in case nothing is given\n    this.$node = config.$node || document.createElement('div');\n\n    // inner handle - the same as outer handler in case nothing is given\n    this.$body = config.$body || this.$node;\n\n    // set CSS class names\n    //this.$node.className += ' component ' + (config.className || '');\n    // previous approach is not good as it mess with components hierarchy\n    this.$node.className = this.name + ' ' + (config.className || '');\n\n    // apply component id if given, generate otherwise\n    this.id = config.id || this.$node.id || 'cid' + counter++;\n\n    // apply hierarchy\n    if ( config.parent ) {\n        // add to parent component\n        config.parent.add(this);\n    }\n\n    // apply given visibility\n    if ( config.visible === false ) {\n        // default state is visible\n        this.hide();\n    }\n\n    // apply focus handling method\n    if ( config.focusable === false ) {\n        // can't accept focus\n        this.focusable = false;\n    }\n\n    // a descendant defined own events\n    if ( this.defaultEvents ) {\n        // sanitize\n        config.events = config.events || {};\n\n        if ( DEVELOP ) {\n            if ( typeof config.events !== 'object' ) {\n                throw new Error(__filename + ': wrong config.events type');\n            }\n            if ( typeof this.defaultEvents !== 'object' ) {\n                throw new Error(__filename + ': wrong this.defaultEvents type');\n            }\n        }\n\n        for ( name in this.defaultEvents ) {\n            // overwrite default events with user-defined\n            config.events[name] = config.events[name] || this.defaultEvents[name];\n        }\n    }\n\n    if ( config.events ) {\n        // apply all given events\n        Object.keys(config.events).forEach(function ( eventName ) {\n            self.addListener(eventName, config.events[eventName]);\n        });\n    }\n\n    // apply the given children components\n    if ( config.children ) {\n        // apply\n        this.add.apply(this, config.children);\n    }\n\n    // component activation by mouse\n    this.$node.addEventListener('click', function ( event ) {\n        // left mouse button\n        //if ( event.button === 0 ) {\n        // activate if possible\n        self.focus();\n\n        // there are some listeners\n        if ( self.events['click'] ) {\n            /**\n             * Mouse click event.\n             *\n             * @event module:stb/component~Component#click\n             *\n             * @type {Object}\n             * @property {Event} event click event data\n             */\n            self.emit('click', event);\n        }\n        //}\n\n        if ( DEVELOP ) {\n            // middle mouse button\n            if ( event.button === 1 ) {\n                //debug.inspect(self, 0);\n                debug.info('\"window.link\" or \"' + self.id + '.component\"', 'this component is now available in global scope');\n                window.link = self;\n                self.$node.classList.toggle('wired');\n            }\n        }\n\n        event.stopPropagation();\n    });\n\n    if ( DEVELOP ) {\n        // expose inner ID to global scope\n        window[self.id] = self.$node;\n\n        // expose a link\n        this.$node.component = this.$body.component = this;\n        this.$node.title = this.name + '#' + this.id + ' (outer)';\n        this.$body.title = this.name + '#' + this.id + ' (inner)';\n    }\n\n    debug.info('create component ' + this.name + '#' + this.id, null, {\n        tags: ['create', 'component', this.name, this.id]\n    });\n}\n\n\n// inheritance\nComponent.prototype = Object.create(Emitter.prototype);\nComponent.prototype.constructor = Component;\n\n\n/**\n * List of all default event callbacks.\n *\n * @type {Object.<string, function>}\n */\nComponent.prototype.defaultEvents = null;\n\n\n/**\n * Add a new component as a child.\n *\n * @param {...Component} [child] variable number of elements to append\n *\n * @files Component#add\n *\n * @example\n * panel.add(\n *     new Button( ... ),\n *     new Button( ... )\n * );\n */\nComponent.prototype.add = function ( child ) {\n    var index;\n\n    // walk through all the given elements\n    for ( index = 0; index < arguments.length; index++ ) {\n        child = arguments[index];\n\n        if ( DEVELOP ) {\n            if ( !(child instanceof Component) ) {\n                throw new Error(__filename + ': wrong child type');\n            }\n        }\n\n        // apply\n        this.children.push(child);\n        child.parent = this;\n\n        // correct DOM parent/child connection if necessary\n        if ( child.$node && child.$node.parentNode === null ) {\n            this.$body.appendChild(child.$node);\n        }\n\n        debug.info('add component ' + child.name + '#' + child.id + ' to ' + this.name + '#' + this.id, null, {\n            tags: ['add', 'component', this.name, this.id, child.name, child.id]\n        });\n\n        // there are some listeners\n        if ( this.events['add'] ) {\n            /**\n             * A child component is added.\n             *\n             * @event module:stb/component~Component#add\n             *\n             * @type {Object}\n             * @property {Component} item new component added\n             */\n            this.emit('add', {item: child});\n        }\n\n        //debug.log('component ' + this.name + '#' + this.id + ' new child: ' + child.name + '#' + child.id);\n    }\n};\n\n\n/* @todo: consider activation in future */\n///**\n// * Insert component into the specific position.\n// *\n// * @param {Component} child component instance to insert\n// * @param {number} index insertion position\n// */\n//Component.prototype.insert = function ( child, index ) {\n//    var prevIndex = this.children.indexOf(child);\n//\n//    if ( DEVELOP ) {\n//        if ( arguments.length !== 2 ) { throw new Error(__filename + ': wrong arguments number'); }\n//        if ( !(child instanceof Component) ) { throw new Error(__filename + ': wrong child type'); }\n//    }\n//\n//    if ( prevIndex !== -1 ) {\n//        this.children.splice(prevIndex, 1);\n//        this.$body.removeChild(child.$node);\n//    }\n//\n//    if ( index === this.children.length ) {\n//        this.$body.appendChild(child.$node);\n//    } else {\n//        this.$body.insertBefore(child.$node, this.$body.children[index]);\n//    }\n//    this.children.splice(index, 0, child);\n//\n//    if ( !child.parent ) {\n//        child.parent = this;\n//    }\n//};\n\n\n/**\n * Delete this component and clear all associated events.\n *\n * @fires module:stb/component~Component#remove\n */\nComponent.prototype.remove = function () {\n    // really inserted somewhere\n    if ( this.parent ) {\n        if ( DEVELOP ) {\n            if ( !(this.parent instanceof Component) ) {\n                throw new Error(__filename + ': wrong this.parent type');\n            }\n        }\n\n        // active at the moment\n        if ( app.activePage.activeComponent === this ) {\n            this.blur();\n            this.parent.focus();\n        }\n        this.parent.children.splice(this.parent.children.indexOf(this), 1);\n    }\n\n    // remove all children\n    this.children.forEach(function ( child ) {\n        if ( DEVELOP ) {\n            if ( !(child instanceof Component) ) {\n                throw new Error(__filename + ': wrong child type');\n            }\n        }\n\n        child.remove();\n    });\n\n    this.$node.parentNode.removeChild(this.$node);\n\n    // there are some listeners\n    if ( this.events['remove'] ) {\n        /**\n         * Delete this component.\n         *\n         * @event module:stb/component~Component#remove\n         */\n        this.emit('remove');\n    }\n\n    // remove all listeners\n    this.events = {};\n\n    //debug.log('component ' + this.name + '#' + this.id + ' remove', 'red');\n    debug.info('remove component ' + this.name + '#' + this.id, null, {\n        tags: ['remove', 'component', this.name, this.id]\n    });\n};\n\n\n/**\n * Activate the component.\n * Notify the owner-page and apply CSS class.\n *\n * @param {Object} [data] custom data which passed into handlers\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/component~Component#focus\n */\nComponent.prototype.focus = function ( data ) {\n    var activePage = app.activePage,\n        activeItem = activePage.activeComponent;\n\n    // this is a visual component on a page\n    // not already focused and can accept focus\n    if ( this.focusable && this !== activeItem ) {\n        // notify the current active component\n        if ( activeItem ) { activeItem.blur(); }\n\n        /* eslint consistent-this: 0 */\n\n        // apply\n        activePage.activeComponent = activeItem = this;\n        activeItem.$node.classList.add('focus');\n\n        //debug.log('component ' + this.name + '#' + this.id + ' focus');\n        debug.info('focus component ' + this.name + '#' + this.id, null, {\n            tags: ['focus', 'component', this.name, this.id]\n        });\n\n        // there are some listeners\n        if ( activeItem.events['focus'] ) {\n            /**\n             * Make this component focused.\n             *\n             * @event module:stb/component~Component#focus\n             */\n            activeItem.emit('focus', data);\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n/**\n * Remove focus.\n * Change page.activeComponent and notify subscribers.\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/component~Component#blur\n */\nComponent.prototype.blur = function () {\n    var activePage = app.activePage,\n        activeItem = activePage.activeComponent;\n\n    // apply visuals anyway\n    this.$node.classList.remove('focus');\n\n    // this is the active component\n    if ( this === activeItem ) {\n        activePage.activeComponent = null;\n\n        //debug.log('component ' + this.name + '#' + this.id + ' blur', 'grey');\n        debug.info('blur component ' + this.name + '#' + this.id, null, {\n            tags: ['blur', 'component', this.name, this.id]\n        });\n\n        // there are some listeners\n        if ( this.events['blur'] ) {\n            /**\n             * Remove focus from this component.\n             *\n             * @event module:stb/component~Component#blur\n             */\n            this.emit('blur');\n        }\n\n        return true;\n    }\n\n    debug.warn('component ' + this.name + '#' + this.id + ' attempt to blur without link to a page', null, {\n        tags: ['blur', 'component', this.name, this.id]\n    });\n\n    // nothing was done\n    return false;\n};\n\n\n/*function show ( self, data ) {\n    // correct style\n    self.$node.classList.remove('hidden');\n    // flag\n    self.visible = true;\n\n    debug.info('show component ' + self.name + '#' + self.id, null, {\n        tags: ['show', 'component', self.name, self.id]\n    });\n\n    // there are some listeners\n    if ( self.events['show'] ) {\n        /!**\n         * Make the component visible.\n         *\n         * @event module:stb/component~Component#show\n         *!/\n        self.emit('show', data);\n    }\n}*/\n\n/**\n * Make the component visible and notify subscribers.\n *\n * @param {Object} [data] custom data which passed into handlers\n * @param {function} [callback] user callback\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/component~Component#show\n */\nComponent.prototype.show = function ( data, callback ) {\n    //var self = this;\n\n    // is it hidden\n    if ( !this.visible ) {\n        /*if ( typeof callback === 'function' ) {\n            // async call\n            setTimeout(function () {\n                show(self, data);\n                callback();\n            });\n        } else {\n            // sync call\n            show(this, data);\n        }*/\n\n        // correct style\n        this.$node.classList.remove('hidden');\n        // flag\n        this.visible = true;\n\n        debug.info('show component ' + this.name + '#' + this.id, null, {\n            tags: ['show', 'component', this.name, this.id]\n        });\n\n        // there are some listeners\n        if ( this.events['show'] ) {\n            /**\n             * Make the component visible.\n             *\n             * @event module:stb/component~Component#show\n             */\n            this.emit('show', data);\n        }\n\n        // async call\n        if ( typeof callback === 'function' ) {\n            // async call\n            setTimeout(callback);\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n/**\n * Make the component hidden and notify subscribers.\n *\n * @param {function} [callback] user callback\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/component~Component#hide\n */\nComponent.prototype.hide = function ( callback ) {\n    // is it visible\n    if ( this.visible ) {\n        // correct style\n        this.$node.classList.add('hidden');\n        // flag\n        this.visible = false;\n\n        debug.info('hide component ' + this.name + '#' + this.id, null, {\n            tags: ['hide', 'component', this.name, this.id]\n        });\n\n        // there are some listeners\n        if ( this.events['hide'] ) {\n            /**\n             * Make the component hidden.\n             *\n             * @event module:stb/component~Component#hide\n             */\n            this.emit('hide');\n        }\n\n        // async call\n        if ( typeof callback === 'function' ) {\n            // async call\n            setTimeout(callback);\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n// public\nmodule.exports = Component;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Emitter = require('cjs-emitter'),\n    parse   = require('cjs-query').parse,\n    app     = new Emitter();\n\n\n/**\n * Make the given inactive/hidden page active/visible.\n * Pass some data to the page and trigger the corresponding event.\n *\n * @param {Page} page item to show\n * @param {*} [data] data to send to page\n *\n * @return {boolean} operation status\n */\nfunction showPage ( page, data ) {\n    // page available and can be hidden\n    if ( page && !page.active ) {\n        // apply visibility\n        page.$node.classList.add('active');\n        page.active = true;\n        app.activePage = page;\n\n        debug.info('show component ' + page.name + '#' + page.id, null, {\n            tags: ['show', 'component', page.name, page.id]\n        });\n        //console.log('component ' + page.name + '.' + page.id + ' show', 'green');\n\n        // there are some listeners\n        if ( page.events['show'] ) {\n            // notify listeners\n            page.emit('show', {data: data});\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n}\n\n\n/**\n * Make the given active/visible page inactive/hidden and trigger the corresponding event.\n *\n * @param {Page} page item to hide\n *\n * @return {boolean} operation status\n */\nfunction hidePage ( page ) {\n    // page available and can be hidden\n    if ( page && page.active ) {\n        // apply visibility\n        page.$node.classList.remove('active');\n        page.active  = false;\n        app.activePage = null;\n\n        debug.info('hide component ' + page.name + '#' + page.id, null, {\n            tags: ['hide', 'component', page.name, page.id]\n        });\n        //console.log('component ' + page.name + '.' + page.id + ' hide', 'grey');\n\n        // there are some listeners\n        if ( page.events['hide'] ) {\n            // notify listeners\n            page.emit('hide');\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n}\n\n\n// url request params\napp.query = parse(document.location.search.substring(1));\n\n\n// global application configuration\n// in config.js file in js root\napp.config = require('app:config');\n\n\n// the only visible page\napp.activePage = null;\n\n\n/**\n * Browse to a given page.\n * Do nothing if the link is invalid. Otherwise hide the current, show new and update the \"previous\" link.\n *\n * @param {Page} pageTo instance of the page to show\n * @param {*} [data] options to pass to the page on show\n *\n * @return {boolean} operation status\n */\napp.route = function ( pageTo, data ) {\n    var pageFrom = app.activePage;\n\n    if ( DEVELOP ) {\n        //if ( router.pages.length > 0 ) {\n        if ( !pageTo || typeof pageTo !== 'object' ) {\n            throw new Error(__filename + ': wrong pageTo type');\n        }\n        if ( !('active' in pageTo) ) {\n            throw new Error(__filename + ': missing field \"active\" in pageTo');\n        }\n        //}\n    }\n\n    // valid not already active page\n    if ( pageTo && !pageTo.active ) {\n        //debug.log('router.navigate: ' + pageTo.id, pageTo === pageFrom ? 'grey' : 'green');\n        debug.info('app route: ' + pageTo.name + '#' + pageTo.id, null, {tags: ['route', pageTo.name, pageTo.id]});\n\n        // update url\n        //location.hash = this.stringify(name, data);\n\n        // apply visibility\n        hidePage(app.activePage);\n        showPage(pageTo, data);\n\n        // there are some listeners\n        if ( this.events['route'] ) {\n            // notify listeners\n            this.emit('route', {from: pageFrom, to: pageTo});\n        }\n\n        // store\n        //this.history.push(pageTo);\n\n        return true;\n    }\n\n    //debug.warn('invalid page to route: ' + pageTo.id, null, {tags: ['route', 'page', pageTo.id]});\n    console.warn('invalid page to route: ' + pageTo.id);\n\n    // nothing was done\n    return false;\n};\n\n\n// public\nmodule.exports = app;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\n\n/**\n * Base Events Emitter implementation.\n *\n * @see http://nodejs.org/api/events.html\n * @constructor\n *\n * @example\n * var emitter = new Emitter();\n */\nfunction Emitter () {\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    // if ( DEVELOP ) {\n    //     if ( typeof this !== 'object' ) { throw new Error(__filename + ': must be constructed via new'); }\n    // }\n\n    /**\n     * Inner hash table for event names and linked callbacks.\n     * Manual editing should be avoided.\n     *\n     * @member {Object.<string, function[]>}\n     *\n     * @example\n     * {\n     *     click: [\n     *         function click1 () { ... },\n     *         function click2 () { ... }\n     *     ],\n     *     keydown: [\n     *         function () { ... }\n     *     ]\n     * }\n     **/\n    this.events = {};\n}\n\n\nEmitter.prototype = {\n    /**\n     * Bind an event to the given callback function.\n     * The same callback function can be added multiple times for the same event name.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to call on this event\n     *\n     * @example\n     * emitter.addListener('click', function ( data ) { ... });\n     * // one more click handler\n     * emitter.addListener('click', function ( data ) { ... });\n     */\n    addListener: function ( name, callback ) {\n        console.assert(arguments.length === 2, 'wrong arguments number');\n        console.assert(typeof name === 'string', 'wrong name type');\n        console.assert(name.length > 0, 'empty name');\n        console.assert(typeof callback === 'function', 'callback should be a function');\n\n        // if ( DEVELOP ) {\n        //     if ( arguments.length !== 2 ) { throw new Error(__filename + ': wrong arguments number'); }\n        //     if ( typeof name !== 'string' || name.length === 0 ) { throw new Error(__filename + ': wrong or empty name'); }\n        //     if ( typeof callback !== 'function' ) { throw new Error(__filename + ': wrong callback type'); }\n        // }\n\n        // initialization may be required\n        this.events[name] = this.events[name] || [];\n        // append this new event to the list\n        this.events[name].push(callback);\n    },\n\n\n    /**\n     * Add a one time listener for the event.\n     * This listener is invoked only the next time the event is fired, after which it is removed.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to call on this event\n     *\n     * @example\n     * emitter.once('click', function ( data ) { ... });\n     */\n    once: function ( name, callback ) {\n        // current execution context\n        var self = this;\n\n        if ( DEVELOP ) {\n            if ( arguments.length !== 2 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n            if ( typeof callback !== 'function' ) {\n                throw new Error(__filename + ': wrong callback type');\n            }\n        }\n\n        // initialization may be required\n        this.events[name] = this.events[name] || [];\n        // append this new event to the list\n        this.events[name].push(function onceWrapper () {\n            self.removeListener(name, onceWrapper);\n            callback.apply(self, arguments);\n        });\n    },\n\n\n    /**\n     * Apply multiple listeners at once.\n     *\n     * @param {Object} callbacks event names with callbacks\n     *\n     * @example\n     * emitter.addListeners({\n     *     click: function ( data ) {},\n     *     close: function ( data ) {}\n     * });\n     */\n    addListeners: function ( callbacks ) {\n        var name;\n\n        if ( DEVELOP ) {\n            if ( arguments.length !== 1 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof callbacks !== 'object' ) {\n                throw new Error(__filename + ': wrong callbacks type');\n            }\n            if ( Object.keys(callbacks).length === 0 ) {\n                throw new Error(__filename + ': no callbacks given');\n            }\n        }\n\n        for ( name in callbacks ) {\n            if ( callbacks.hasOwnProperty(name) ) {\n                this.addListener(name, callbacks[name]);\n            }\n        }\n    },\n\n\n    /**\n     * Remove all instances of the given callback.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to remove\n     *\n     * @example\n     * emitter.removeListener('click', func1);\n     */\n    removeListener: function ( name, callback ) {\n        if ( DEVELOP ) {\n            if ( arguments.length !== 2 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n            if ( typeof callback !== 'function' ) {\n                throw new Error(__filename + ': wrong callback type');\n            }\n            if ( this.events[name] && !Array.isArray(this.events[name]) ) {\n                throw new Error(__filename + ': corrupted inner data');\n            }\n        }\n\n        // the event exists and should have some callbacks\n        if ( this.events[name] ) {\n            // rework the callback list to exclude the given one\n            this.events[name] = this.events[name].filter(function callbacksFilter ( fn ) { return fn !== callback; });\n            // event has no more callbacks so clean it\n            if ( this.events[name].length === 0 ) {\n                // as if there were no listeners at all\n                this.events[name] = undefined;\n            }\n        }\n    },\n\n\n    /**\n     * Remove all callbacks for the given event name.\n     * Without event name clears all events.\n     *\n     * @param {string} [name] event identifier\n     *\n     * @example\n     * emitter.removeAllListeners('click');\n     * emitter.removeAllListeners();\n     *\n     * @deprecated\n     */\n    /*removeAllListeners: function ( name ) {\n        if ( DEVELOP ) {\n            if ( arguments.length !== 0 && (typeof name !== 'string' || name.length === 0) ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n        }\n\n        // check input\n        if ( arguments.length === 0 ) {\n            // no arguments so remove everything\n            this.events = {};\n        } else if ( name ) {\n            if ( DEVELOP ) {\n                if ( this.events[name] ) { throw new Error(__filename + ': event is not removed'); }\n            }\n\n            // only name is given so remove all callbacks for the given event\n            // but object structure modification should be avoided\n            this.events[name] = undefined;\n        }\n    },*/\n\n\n    /**\n     * Execute each of the listeners in the given order with the supplied arguments.\n     *\n     * @param {string} name event identifier\n     *\n     * @example\n     * emitter.emit('init');\n     * emitter.emit('click', {src: panel1, dst: panel2});\n     * emitter.emit('load', error, data);\n     *\n     * // it's a good idea to emit event only when there are some listeners\n     * if ( this.events['click'] ) {\n     *     this.emit('click', {event: event});\n     * }\n     */\n    emit: function ( name ) {\n        var event = this.events[name],\n            index;\n\n        if ( DEVELOP ) {\n            if ( arguments.length < 1 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n        }\n\n        // the event exists and should have some callbacks\n        if ( event ) {\n            if ( DEVELOP ) {\n                if ( !Array.isArray(event) ) {\n                    throw new Error(__filename + ': wrong event type');\n                }\n            }\n\n            for ( index = 0; index < event.length; index++ ) {\n                if ( DEVELOP ) {\n                    if ( typeof event[index] !== 'function' ) {\n                        throw new Error(__filename + ': wrong event callback type');\n                    }\n                }\n\n                // invoke the callback with parameters\n                event[index].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    }\n};\n\n\n// correct constructor name\nEmitter.prototype.constructor = Emitter;\n\n\n// public\nmodule.exports = Emitter;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-page');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-page';\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component');\n","'use strict';\n\nvar app = require('mag-app'),\n    keys = require('stb-keys'),\n\n    ModalMessage  = require('mag-component-modal'),\n    LayoutList    = require('mag-component-layout-list'),\n    Panel    = require('stb-component-panel'),\n\n    previousFocusedComponent = null,\n\n    menu = new ModalMessage({\n        title: gettext('Exit from application?'),\n        visible: false,\n        className: 'popup',\n        children: [\n            new Panel({className: 'plaintext'}),\n            new LayoutList({\n                className: 'padded',\n                size: 1,\n                focusIndex: 1,\n                data: [\n                    {\n                        items: [\n                            {\n                                className: 'centeredText',\n                                value: gettext('Close')\n                            }\n                        ],\n                        click: function () {\n                            window.top.platformApi.exit();\n                            setTimeout(function () {\n                                menu.hide();\n                            }, 0);\n                        }\n                    }\n                ],\n                events: {\n                    keydown: function ( event ) {\n                        LayoutList.prototype.defaultEvents.keydown.call(this, event);\n                        if ( event.code === keys.back ) {\n                            event.stop = true;\n                            // widget\n                            setTimeout(function () {\n                                menu.hide();\n                            }, 0);\n                        }\n                    }\n                }\n            })\n        ],\n        events: {\n            show: function () {\n                previousFocusedComponent = app.activePage.activeComponent;\n                this.children[1].focus();\n            },\n            hide: function () {\n                previousFocusedComponent.focus();\n            }\n        }\n    });\n\n\nmenu.children[0].$body.innerText = gettext('The OK button will become active when you finish reading the End-User License Agreement');\n\nmodule.exports = menu;\n","/**\n * Global list of non-printable control key codes.\n *\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n * @license GNU GENERAL PUBLIC LICENSE Version 3\n */\n\n'use strict';\n\n// public\nmodule.exports = {\n    backspace: 8,\n    tab:       9,\n    enter:     13,\n    escape:    27,\n    space:     32,\n    pageUp:    33,\n    pageDown:  34,\n    end:       35,\n    home:      36,\n    left:      37,\n    up:        38,\n    right:     39,\n    down:      40,\n    insert:    45,\n    // not \"delete\" because of old browsers issue\n    del:       46\n};\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-button');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-button';\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app = require('spa-app/lib/core');\n//    metrics = require('app:metrics'),\n//    linkCSS;\n\n\n// global link\n//app.metrics = metrics[app.query.screenHeight] || metrics[screen.height] || metrics[720];\n\n// calculate and extend\n//app.metrics.availHeight = app.metrics.height - (app.metrics.availTop  + app.metrics.availBottom);\n//app.metrics.availWidth  = app.metrics.width  - (app.metrics.availLeft + app.metrics.availRight);\n\n// // set max browser window size\n// window.moveTo(0, 0);\n// window.resizeTo(metrics.width, metrics.height);\n\n// load CSS file base on resolution\n/*linkCSS = document.createElement('link');\nlinkCSS.rel  = 'stylesheet';\nlinkCSS.href = 'css/' + (DEVELOP ? 'develop.' : 'release.') + app.metrics.height + '.css' + (DEVELOP ? '?' + Date.now() : '');\ndocument.head.appendChild(linkCSS);*/\n\n\n// public\nmodule.exports = function ( name ) {\n    var link = document.createElement('link');\n\n    link.rel  = 'stylesheet';\n    link.href = 'css/' + name + '.' + app.metrics.height + '.css' + (DEVELOP ? '?' + Date.now() : '');\n    document.head.appendChild(link);\n};\n","'use strict';\n\nvar app = require('mag-app'),\n    storageKey = 'applications-storage',\n    storageData;\n\nfunction Storage ( uid ) {\n    // stalker storage\n    this.store = {};\n\n    Object.defineProperty(this, 'prefix', {\n        get: function () {\n            return uid + '.storage';\n        }\n    });\n    console.log('uid ' + this.prefix);\n    console.log('storage' + JSON.stringify(storageData));\n\n    this.originJSON = storageData[this.prefix];\n\n    if ( this.originJSON ) {\n        try {\n            this.store = JSON.parse(this.originJSON);\n        } catch ( error ) {\n            console.log(error);\n            this.originJSON = '';\n        }\n    }\n}\n\nStorage.init = function ( data ) {\n    storageData = data;\n};\n\n\nStorage.prototype.getItem = function ( key ) {\n    return this.store[key];\n};\n\n\nStorage.prototype.setItem = function ( key, data ) {\n    var serializedData;\n\n    try {\n        console.log(JSON.stringify(data));\n    } catch ( error ) {\n        console.log(error);\n\n        return;\n    }\n\n    this.store[key] = data;\n\n    serializedData = JSON.stringify(this.store);\n\n    if ( serializedData !== this.originJSON ) {\n        storageData[this.prefix] = this.originJSON = serializedData;\n    }\n\n    console.log('SAVE ' + JSON.stringify(window.storage));\n    app.stalker.request('storage/', {\n        method: 'POST',\n        async: true,\n        body: JSON.stringify({key: storageKey, value: JSON.stringify(storageData)})\n    });\n};\n\nmodule.exports = Storage;\n","'use strict';\n\nvar Panel = require('stb-component-panel'),\n    keys  = require('stb-keys');\n\n\nfunction getLang () {\n    if ( PLATFORM === 'MAG' ) {\n        return window.core.environment.language;\n    }\n\n    return navigator.language.split('-')[0];\n\n}\n\n\nfunction FakeInput ( config ) {\n\n    /**\n     *\n     * @type {string}\n     */\n    this.value = config.value || '';\n\n    this.placeholder = config.placeholder || '';\n\n    this.size = config.size || 0;\n\n    this.scheme = config.scheme || '';\n\n    this.textVisible = true;\n\n    this.$textVisibilityToggle = null;\n\n    config.focusable = true;\n\n    this.defaultEvents = FakeInput.defaultEvents;\n\n    this.type = config.type || 'text';\n\n    Panel.call(this, config);\n\n    this.$node.classList.add(this.type);\n\n    this.$body = this.$node.appendChild(document.createElement('div'));\n    this.$body.className = 'fake-input-text-node';\n\n    if ( this.value ) {\n        this.$body.textContent = config.value;\n    } else if ( this.placeholder ) {\n        this.$node.classList.add('placeholder');\n        this.$body.textContent = config.placeholder;\n    }\n\n    this.$node.classList.add('fake-input');\n\n    if ( config.placeholder ) {\n        this.$style = document.head.appendChild(document.createElement('style'));\n        this.$style.textContent = '#' + this.$node.id + ':before { color: #23548c; content: \"' + config.placeholder + '\";}';\n    }\n\n    if ( this.type === 'password' ) {\n        this.textVisible = false;\n        this.$textVisibilityToggle = this.$node.appendChild(document.createElement('div'));\n        this.$textVisibilityToggle.className = 'text-visibility-toggle';\n        this.$textVisibilityToggle.focus = false;\n\n        if ( !this.placeholder ) {\n            this.$body.style.cssText = '-webkit-text-security: disc;';\n        }\n    }\n}\n\n// inheritance\nFakeInput.prototype = Object.create(Panel.prototype);\nFakeInput.prototype.constructor = FakeInput;\n\n\nFakeInput.prototype.setValue = function ( text ) {\n    // if ( this.$textVisibilityToggle !== null ) {\n    //     this.$body.removeChild(this.$textVisibilityToggle);\n    // }\n\n    if ( this.size && text.length > this.size ) {\n        text = text.substring(0, this.size);\n    }\n\n    if ( text ) {\n        this.value = this.$body.textContent = text;\n        this.$node.classList.remove('placeholder');\n        if ( this.type === 'password' && !this.textVisible ) {\n            this.$body.style.cssText = '-webkit-text-security: disc;';\n        }\n    } else if ( this.placeholder ) {\n        this.$node.classList.add('placeholder');\n        this.$body.style.cssText = '';\n        this.$body.textContent = this.placeholder;\n        this.value = '';\n    } else {\n        this.value = '';\n    }\n\n    this.$body.scrollLeft = 300000;\n\n    // if ( this.$textVisibilityToggle !== null ) {\n    //     this.$body.appendChild(this.$textVisibilityToggle);\n    // }\n};\n\n\nFakeInput.defaultEvents = {\n    keydown: function ( event ) {\n        console.log(event.code);\n        switch ( event.code ) {\n            case keys.ok:\n                this.emit('click');\n                break;\n\n            case keys.right:\n                if ( this.$textVisibilityToggle !== null && !this.$textVisibilityToggle.focus ) {\n                    this.$textVisibilityToggle.focus = true;\n                    this.$node.classList.remove('focus');\n                    if ( this.textVisible ) {\n                        this.$textVisibilityToggle.className = 'text-visibility-toggle focus-visible';\n                    } else {\n                        this.$textVisibilityToggle.className = 'text-visibility-toggle focus-invisible';\n                    }\n                }\n                break;\n\n\n            case keys.left:\n                if ( this.$textVisibilityToggle !== null && this.$textVisibilityToggle.focus ) {\n                    this.$textVisibilityToggle.focus = false;\n                    this.$node.classList.add('focus');\n                    if ( this.textVisible ) {\n                        this.$textVisibilityToggle.className = 'text-visibility-toggle visible';\n                    } else {\n                        this.$textVisibilityToggle.className = 'text-visibility-toggle';\n                    }\n                }\n                break;\n\n            default:\n                break;\n        }\n    },\n    focus: function () {\n        if ( this.placeholder ) {\n            this.$style.innerText = '#' + this.$node.id + ':before { color: #23548c; content: \"' + this.placeholder + '\";}';\n        }\n    },\n    blur: function () {\n        if ( this.placeholder ) {\n            this.$style.innerText = '#' + this.$node.id + ':before { content: \"' + this.placeholder + '\";}';\n        }\n\n        if ( this.$textVisibilityToggle !== null && this.$textVisibilityToggle.focus ) {\n            this.$textVisibilityToggle.focus = false;\n            if ( this.textVisible ) {\n                this.$textVisibilityToggle.className = 'text-visibility-toggle visible';\n            } else {\n                this.$textVisibilityToggle.className = 'text-visibility-toggle';\n            }\n        }\n    },\n    click: function () {\n        var self = this;\n\n        if ( this.$textVisibilityToggle !== null && this.$textVisibilityToggle.focus ) {\n            this.textVisible = !this.textVisible;\n            if ( this.value ) {\n                if ( this.textVisible ) {\n                    this.$textVisibilityToggle.className = 'text-visibility-toggle focus-visible';\n                    this.$body.style.cssText = '';\n                } else {\n                    this.$textVisibilityToggle.className = 'text-visibility-toggle focus-invisible';\n                    this.$body.style.cssText = '-webkit-text-security: disc;';\n                }\n            }\n        } else {\n            window.core.intent({\n                action: 'keyboard',\n                data: {\n                    type: self.type,\n                    language: getLang(),\n                    value: self.value || self.scheme,\n                    title: self.title\n                },\n                events: {\n                    done: function ( event ) {\n                        self.setValue(event.value);\n                    },\n                    close: function (  ) {\n                        window.core.call('focus');\n                    }\n                }\n            // eslint-disable-next-line no-unused-vars\n            }, function ( error, context ) {\n                console.log(error);\n            });\n        }\n    }\n};\n\n\nmodule.exports = FakeInput;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-panel');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-panel';\n","/**\n * @license The MIT License (MIT)\n * @copyright Dmitry Fedotov <bas.jsdev@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\n\nvar StbComponentModal = require('stb-component-modal'),\n    Component         = require('stb-component'),\n    keys              = require('stb-keys');\n\n\n/**\n * Modal window implementation.\n *\n * @constructor\n * @extends StbComponentModal\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n * @param {Object} [config.title] message title\n * @param {Object} [config.className] message classname\n * @param {Object} [config.icon] icon at header\n * @param {Object} [config.visible] visibility flag\n * @param {Object} [config.children] content (inherited from the parent)\n *\n * @example\n * var modalSort = new Modal({\n *     visible: false,\n *     title: 'sort',\n *     events: {\n *         show: function () {\n *             list.focus();\n *         },\n *         hide: function () {\n *             page.panelSet.focus();\n *         }\n *     },\n *     children: [list = new RadioList({})]\n * });\n * page.add(modalSort);\n */\nfunction Modal ( config ) {\n    var self = this,\n        $overlay, $body, onkeydown;\n\n    // sanitize\n    config = config || {};\n    config.events = config.events || {};\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( config.icon && typeof config.icon !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.icon');\n        }\n        if ( config.title && typeof config.title !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.title');\n        }\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.$body ) {\n            throw new Error(__filename + ': config.$body should not be provided in Modal manually');\n        }\n    }\n\n    // usually can't accept focus\n    config.focusable = config.focusable || false;\n    // hide by default\n    config.visible = config.visible || false;\n    // add default close by click\n    config.events.click = config.events.click || function () { self.hide(); };\n    // add close window behavior, when pushed a back button or a menu button\n    onkeydown = config.events.keydown;\n    config.events.keydown = function ( event ) {\n        if ( onkeydown ) {\n            onkeydown.call(this, event);\n        }\n        if ( event.code === keys.back || event.code === keys.menu ) {\n            event.stop = true;\n            self.hide();\n        }\n    };\n\n    // parent constructor call\n    StbComponentModal.call(this, config);\n\n    // add table-cell wrappers\n    this.$node.appendChild(document.createElement('div'));\n    this.$node.firstChild.classList.add('alignBox');\n    this.$node.firstChild.appendChild(document.createElement('div'));\n\n    // add header div\n    this.$header = document.createElement('div');\n    this.$header.className = 'header';\n\n    // insert caption placeholder\n    this.$text = this.$header.appendChild(document.createElement('div'));\n    this.$text.classList.add('text');\n    this.$text.innerText = config.title || '';\n\n    // optional icon\n    if ( config.icon ) {\n        this.$icon = this.$header.appendChild(document.createElement('div'));\n        this.$icon.className = 'icon ' + config.icon;\n    }\n\n    $overlay = document.createElement('div');\n    $overlay.className = 'overlay';\n\n    // add to dom\n    // add body wrapper\n    $body = this.$body.parentNode.removeChild(this.$body);\n    this.$node.firstChild.firstChild.appendChild(this.$header);\n    this.$node.firstChild.firstChild.appendChild($body);\n    this.$node.firstChild.firstChild.appendChild($overlay);\n}\n\n\n// inheritance\nModal.prototype = Object.create(StbComponentModal.prototype);\nModal.prototype.constructor = Modal;\n\n// set component name\nModal.prototype.name = 'mag-component-modal';\n\n\n/**\n * Redefine default component focus to set additional css\n */\nModal.prototype.focus = function () {\n    this.$node.classList.add('active');\n    StbComponentModal.prototype.focus.call(this);\n    if ( this.children[0] && this.children[0] instanceof Component ) {\n        this.children[0].focus();\n    }\n};\n\n\n/**\n * Blur message\n */\nModal.prototype.blur = function () {\n    this.$node.classList.remove('active');\n    StbComponentModal.prototype.blur.call(this);\n};\n\n\n// public\nmodule.exports = Modal;\n","/**\n * Main application entry point.\n *\n * @author Stanislav Kalashnik <sk@infomir.eu>\n * @license GNU GENERAL PUBLIC LICENSE Version 3\n */\n\n'use strict';\n\n\nvar app            = require('mag-app'),\n    pkgJson        = require('../../manifest.json'),\n    XHRConstructor = null;\n\n\napp.storage = {};\n\nfunction catchMessage () {\n    var sharedBackend = require('./modules/shared.backend').instance;\n\n    app.stalker.request('message', {\n        onload: function ( error, response ) {\n            if ( !error && response.data.type ) {\n                sharedBackend.emit('message', response.data);\n\n                switch ( response.data.type ) {\n                    case 'reboot':\n                        if ( PLATFORM === 'MAG' ) {\n                            console.log('reboot');\n\n                            window.core.notify({\n                                title: 'Reboot',\n                                icon: 'info',\n                                type: 'success',\n                                timeout: 7000\n                            });\n\n                            setTimeout(function () {\n                                // eslint-disable-next-line new-cap\n                                window.top.gSTB.ExecAction('reboot');\n                            }, 7000);\n                        }\n                        break;\n                    case 'send_msg':\n                        window.core.notify({\n                            title: response.data.msg,\n                            icon: 'info',\n                            type: 'success',\n                            timeout: 7000\n                        });\n\n                        break;\n                    case 'send_msg_with_video':\n                        window.core.notify({\n                            title: response.data.msg,\n                            icon: 'info',\n                            type: 'success',\n                            buttons: [\n                                {\n                                    value: gettext('Ok'),\n                                    click: function () {\n                                        window.core.intent({\n                                            action: 'play',\n                                            mime: 'content/media',\n                                            data: {\n                                                //uri: 'udp://@228.1.2.6:1234'\n                                                uri: response.data.url\n                                            }\n                                            // eslint-disable-next-line no-unused-vars\n                                        }, function ( error, context ) {\n                                            if ( error ) {\n                                                console.log(error);\n                                            }\n                                        });\n                                    }\n                                }\n                            ]\n                        });\n\n                        break;\n                    default:\n                        console.log('catch message with type: ' + response.data.type);\n                        break;\n                }\n            }\n        }\n    });\n}\n\n\nfunction ping ( timeout ) {\n    setTimeout(function () {\n        console.log('PING START, timeout: ' + timeout);\n        app.stalker.request('users/' + app.stalker.session.userId + '/ping', {\n            onload: function ( error, data ) {\n                console.log('PING END');\n                if ( !error ) {\n                    if ( data ) {\n                        if ( data.data && data.data.message_available ) {\n                            catchMessage();\n                        }\n                    }\n                }\n\n                ping(timeout);\n            }\n        });\n    }, timeout);\n}\n\nwindow.fetch = function () {\n    if ( !XHRConstructor ) {\n        XHRConstructor = XMLHttpRequest;\n    }\n\n    return new XHRConstructor();\n};\n\n//app.addListener('keydown', function ( event ) {\n//    var keys = require('stb-keys');\n//\n//    if ( event.code === keys.f4 ) {\n//        if ( app.pages.eula ) {\n//            app.route(app.pages.eula);\n//        }\n//    }\n//});\n\n// everything is ready\napp.once('load', function () {\n    window.core.once('ready', function ( event ) {\n        var packages      = {},\n            globalOptions = window.core.config.options,\n            appsCount     = window.core.config.apps.filter(function ( appConfig ) {\n                if ( appConfig.type === 'app' ) {\n                    packages[appConfig.packageName] = appConfig;\n\n                    return true;\n                }\n\n                return false;\n            }).length;\n\n\n        require('./modules/shared.backend').instance.session = app.stalker.session;\n\n        if ( appsCount === 0 && typeof globalOptions.stalkerLoaderPath !== 'undefined' ) {\n            event.stop = true;\n\n            if ( typeof window.core.redirectTo === 'function' ) {\n                window.core.redirectTo(globalOptions.stalkerHost + globalOptions.stalkerLoaderPath);\n            }\n\n            return;\n        }\n\n        // if ( PLATFORM === 'MAG' ) {\n        // } else {\n        ping(window.core.config.options.pingTimeout);\n        // ping(2000);\n        // }\n    });\n    require('spa-gettext').load({name: core.environment.language}, function () {\n        var session = {};\n\n        window.addEventListener('online', function () {\n            window.core.notify({\n                title: gettext('Network connected'),\n                icon: 'info',\n                type: 'success',\n                timeout: 10000\n            });\n        });\n\n        window.addEventListener('offline', function () {\n            window.core.notify({\n                title: gettext('Network disconnected'),\n                icon: 'info',\n                type: 'success',\n                timeout: 10000\n            });\n        });\n\n        session = core.plugins.ufsJson.loadSync();\n        console.log(JSON.stringify(session));\n\n        require('./modules/stalker.api.loader')({\n            apiVersion: pkgJson.config.apiVersion,\n            options: window.core.config.options,\n            session: session\n        });\n    });\n});\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app    = require('spa-app/lib/core'),\n    events = require('spa-app/lib/events');\n\n\n// get instance\nwindow.core = window.parent.getCoreInstance(window, app);\n\n// shims\nrequire('stb-shim-classlist');\n\n// apply geometry\nrequire('stb-app/lib/metrics');\n\n// load sdk css\nrequire('stb-app/lib/css')('sdk');\n\n// load theme css\nrequire('./css');\n\n// load app css\nrequire('stb-app/lib/css')('app');\n\n/**\n * Specify platform name\n *\n * @type {string}\n */\napp.platform = 'mag';\n\n/**\n * Show app.\n */\napp.ready = function () {\n    // if ( this.events['show'] ) {\n    //     this.emit('show');\n    // }\n    window.core.call('app:ready');\n};\n\n\n/**\n * Exit from app.\n * Destroy all application instance.\n * If callback function provided, and callback returns boolean 'true', application will stay alive.\n *\n * @fires module:/stb/app#exit\n */\napp.exit = function () {\n    if ( app.events['exit'] ) {\n        app.emit('exit');\n    }\n\n    core.call('exit');\n};\n\n\nevents.load = function ( event ) {\n    //window.core = window.parent.getCoreInstanse(window, app);\n    document.body.setAttribute('platform', app.platform);\n\n    if ( core.ready ) {\n        if ( app.events['load'] ) {\n            // notify listeners\n            app.emit('load', {});\n        }\n    } else {\n        core.once('load', function () {\n            //core.ready = true;\n            if ( app.events[event.type] ) {\n                // notify listeners\n                app.emit(event.type, event);\n            }\n        });\n    }\n};\n\n\n// activate development mechanisms and tools\nif ( DEVELOP ) {\n    //require('stb-develop');\n    require('./develop/main');\n} else {\n    // disable context menu\n    events.contextmenu = function ( event ) {\n        event.preventDefault();\n    };\n}\n\n\n//apply DOM events\nObject.keys(events).forEach(function ( name ) {\n    window.addEventListener(name, events[name]);\n});\n\n\n// new way of string handling\n// all strings are in UTF-16\n// since stbapp 2.18\n// if ( window.gSTB && gSTB.SetNativeStringMode ) {\n//     /* eslint new-cap: 0 */\n//     gSTB.SetNativeStringMode(true);\n// }\n\n// public\nmodule.exports = app;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\nmodule.exports = {\n    /**\n     * Parse the given location search string into object.\n     *\n     * @param {string} query string to parse\n     *\n     * @return {Object.<string, string>} result data\n     */\n    parse: function ( query ) {\n        var data = {};\n\n        // parse and fill the data\n        query.split('&').forEach(function ( part ) {\n            part = part.split('=');\n            // valid number on params\n            if ( part.length === 2 ) {\n                data[part[0]] = decodeURIComponent(part[1]);\n            }\n        });\n\n        return data;\n    },\n\n\n    /**\n     * Make uri query part in a string form.\n     *\n     * @param {Object} params data to stringify\n     *\n     * @return {string} query string\n     */\n    stringify: function ( params ) {\n        var data = [];\n\n        Object.keys(params).forEach(function ( name ) {\n            data.push(name + '=' + encodeURIComponent(params[name]));\n        });\n\n        return data.join('&');\n    }\n};\n","/**\n * Global application configuration.\n * Can store run-time options, API urls, paths, execution flags and so on.\n * Automatically loaded on application initialization and available as app.config.\n */\n\n'use strict';\n\n// public\nmodule.exports = {};\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app = require('./core');\n\n\n// public\nmodule.exports = {\n    DOMContentLoaded: function ( event ) {\n        //debug.event(event);\n        //console.log(event);\n\n        //debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type, event);\n\n        // there are some listeners\n        if ( app.events['dom'] ) {\n            // notify listeners\n            app.emit('dom', event);\n            //console.log('DOMContentLoaded');\n        }\n    },\n\n    /**\n     * The load event is fired when a resource and its dependent resources have finished loading.\n     *\n     * Control flow:\n     *   1. Global handler.\n     *   2. Each page handler.\n     *   3. Application DONE event.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/load\n     *\n     * @param {Event} event generated object with event data\n     */\n    load: function ( event ) {\n        //var path;\n\n        //debug.event(event);\n        //console.log(event);\n\n        // time mark\n        //app.data.time.load = event.timeStamp;\n\n        //debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type, event);\n\n        // global handler\n        // there are some listeners\n        if ( app.events[event.type] ) {\n            // notify listeners\n            app.emit(event.type, event);\n        }\n\n        // local handler on each page\n        /*router.pages.forEach(function forEachPages ( page ) {\n         debug.log('component ' + page.constructor.name + '.' + page.id + ' load', 'green');\n\n         // there are some listeners\n         if ( page.events[event.type] ) {\n         // notify listeners\n         page.emit(event.type, event);\n         }\n         });*/\n\n        // time mark\n        //app.data.time.done = +new Date();\n\n        // everything is ready\n        // and there are some listeners\n        // if ( app.events['done'] ) {\n        //     // notify listeners\n        //     app.emit('done', event);\n        // }\n    },\n\n    /**\n     * The unload event is fired when the document or a child resource is being unloaded.\n     *\n     * Control flow:\n     *   1. Each page handler.\n     *   2. Global handler.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/unload\n     *\n     * @param {Event} event generated object with event data\n     */\n    unload: function ( event ) {\n        //debug.event(event);\n        //console.log(event);\n\n        //debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type, event);\n\n        // global handler\n        // there are some listeners\n        if ( app.events[event.type] ) {\n            // notify listeners\n            app.emit(event.type, event);\n        }\n\n        // local handler on each page\n        /*router.pages.forEach(function forEachPages ( page ) {\n         debug.log('component ' + page.constructor.name + '.' + page.id + ' unload', 'red');\n\n         // there are some listeners\n         if ( page.events[event.type] ) {\n         // notify listeners\n         page.emit(event.type, event);\n         }\n         });*/\n    },\n\n    /**\n     * The error event is fired when a resource failed to load.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/error\n     *\n     * @param {Event} event generated object with event data\n     */\n    error: function ( event ) {\n        //debug.event(event);\n        //console.log(event);\n        //debug.fail('app event: ' + event.message, event, {tags: [event.type, 'event']});\n        console.error('app event: ' + event.message, event);\n    },\n\n    /**\n     * The keydown event is fired when a key is pressed down.\n     * Set event.stop to true in order to prevent bubbling.\n     *\n     * Control flow:\n     *   1. Current active component on the active page.\n     *   2. Current active page itself.\n     *   3. Application.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/keydown\n     *\n     * @param {Event} event generated object with event data\n     */\n    keydown: function ( event ) {\n        var page = app.activePage,\n            eventLocal = {\n                code: event.keyCode,\n                stop: false\n            },\n            activeComponent;\n\n        if ( DEVELOP ) {\n            if ( !page ) {\n                throw new Error(__filename + ': app should have at least one page');\n            }\n        }\n\n        // filter phantoms\n        //if ( event.keyCode === 0 ) { return; }\n\n        // combined key code\n        //event.code = event.keyCode;\n\n        // apply key modifiers\n        if ( event.ctrlKey )  { eventLocal.code += 'c'; }\n        if ( event.altKey )   { eventLocal.code += 'a'; }\n        if ( event.shiftKey ) { eventLocal.code += 's'; }\n\n        //debug.event(event);\n        //console.log(event);\n        //debug.info('app event: ' + event.type + ' - ' + eventLocal.code, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type + ' - ' + eventLocal.code, event);\n\n        // page.activeComponent can be set to null in event handles\n        activeComponent = page.activeComponent;\n\n        // current component handler\n        if ( activeComponent && activeComponent !== page ) {\n            // component is available and not page itself\n            if ( activeComponent.events[event.type] ) {\n                // there are some listeners\n                activeComponent.emit(event.type, eventLocal, event);\n            }\n\n            // todo: bubble event recursively\n            // bubbling\n            if (\n                !eventLocal.stop &&\n                activeComponent.propagate &&\n                activeComponent.parent &&\n                activeComponent.parent.events[event.type]\n            ) {\n                activeComponent.parent.emit(event.type, eventLocal, event);\n            }\n        }\n\n        // page handler\n        if ( !eventLocal.stop ) {\n            // not prevented\n            if ( page.events[event.type] ) {\n                // there are some listeners\n                page.emit(event.type, eventLocal, event);\n            }\n\n            // global app handler\n            if ( !event.stop ) {\n                // not prevented\n                if ( app.events[event.type] ) {\n                    // there are some listeners\n                    app.emit(event.type, eventLocal, event);\n                }\n            }\n        }\n\n        //// suppress non-printable keys in stb device (not in your browser)\n        //if ( app.data.host && keyCodes[event.code] ) {\n        //    event.preventDefault();\n        //}\n    },\n\n    /**\n     * The keypress event is fired when press a printable character.\n     * Delivers the event only to activeComponent at active page.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/keypress\n     *\n     * @param {Event} event generated object with event data\n     * @param {string} event.char entered character\n     */\n    keypress: function ( event ) {\n        var page = app.activePage;\n\n        if ( DEVELOP ) {\n            if ( page === null || page === undefined ) {\n                throw new Error(__filename + ': app should have at least one page');\n            }\n        }\n\n        //debug.event(event);\n        //console.log(event);\n        //debug.info('app event: ' + event.type + ' - ' + event.key, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type + ' - ' + event.key, event);\n\n        // current component handler\n        if ( page.activeComponent && page.activeComponent !== page ) {\n            // component is available and not page itself\n            if ( page.activeComponent.events[event.type] ) {\n                // there are some listeners\n                page.activeComponent.emit(event.type, event);\n            }\n        }\n    },\n\n    /**\n     * The click event is fired when a pointing device button (usually a mouse button) is pressed and released on a single element.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/click\n     *\n     * @param {Event} event generated object with event data\n     */\n    /*click: function ( event ) {\n     //debug.event(event);\n     //console.log(event);\n     debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n     },*/\n\n    /**\n     * The contextmenu event is fired when the right button of the mouse is clicked (before the context menu is displayed),\n     * or when the context menu key is pressed (in which case the context menu is displayed at the bottom left of the focused\n     * element, unless the element is a tree, in which case the context menu is displayed at the bottom left of the current row).\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/contextmenu\n     *\n     * @param {Event} event generated object with event data\n     */\n    // contextmenu: function ( event ) {\n    //     debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n    //\n    //     if ( !DEVELOP ) {\n    //         // disable right click in release mode\n    //         event.preventDefault();\n    //     }\n    // },\n\n    /*contextmenu: function ( event ) {\n     //var kbEvent = {}; //Object.create(document.createEvent('KeyboardEvent'));\n\n     //debug.event(event);\n     //console.log(event);\n     debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n\n     //kbEvent.type    = 'keydown';\n     //kbEvent.keyCode = 8;\n\n     //debug.log(kbEvent.type);\n\n     //globalEventListenerKeydown(kbEvent);\n     //var event = document.createEvent('KeyboardEvent');\n     //event.initEvent('keydown', true, true);\n\n     //document.dispatchEvent(kbEvent);\n\n     if ( !DEVELOP ) {\n     // disable right click in release mode\n     event.preventDefault();\n     }\n     },*/\n\n    /**\n     * The wheel event is fired when a wheel button of a pointing device (usually a mouse) is rotated.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n     *\n     * @param {Event} event generated object with event data\n     */\n    mousewheel: function ( event ) {\n        var page = app.activePage;\n\n        if ( DEVELOP ) {\n            if ( page === null || page === undefined ) {\n                throw new Error(__filename + ': app should have at least one page');\n            }\n        }\n\n        //debug.event(event);\n        //console.log(event);\n        //debug.info('app event: ' + event.type, event, {tags: [event.type, 'event']});\n        console.log('app event: ' + event.type, event);\n\n        // current component handler\n        if ( page.activeComponent && page.activeComponent !== page ) {\n            // component is available and not page itself\n            if ( page.activeComponent.events[event.type] ) {\n                // there are some listeners\n                page.activeComponent.emit(event.type, event);\n            }\n        }\n\n        // page handler\n        if ( !event.stop ) {\n            // not prevented\n            if ( page.events[event.type] ) {\n                // there are some listeners\n                page.emit(event.type, event);\n            }\n        }\n    }\n};\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint-disable */\n\n'use strict';\n\n\nif ( !document.documentElement.classList ) {\n    var prototype = Array.prototype,\n        indexOf   = prototype.indexOf,\n        slice     = prototype.slice,\n        push      = prototype.push,\n        splice    = prototype.splice,\n        join      = prototype.join;\n\n    window.DOMTokenList = function ( el ) {\n        this._element = el;\n        if (el.className !== this._classCache) {\n            this._classCache = el.className;\n            if (!this._classCache) { return; }\n            var classes = this._classCache.replace(/^\\s+|\\s+$/g,'').split(/\\s+/),\n                i;\n            for (i = 0; i < classes.length; i++) {\n                push.call(this, classes[i]);\n            }\n        }\n    };\n\n    window.DOMTokenList.prototype = {\n        add: function ( token ) {\n            if(this.contains(token)) { return; }\n            push.call(this, token);\n            this._element.className = slice.call(this, 0).join(' ');\n        },\n\n        contains: function ( token ) {\n            return indexOf.call(this, token) !== -1;\n        },\n\n        item: function ( index ) {\n            return this[index] || null;\n        },\n\n        remove: function ( token ) {\n            var i = indexOf.call(this, token);\n            if (i === -1) {\n                return;\n            }\n            splice.call(this, i, 1);\n            this._element.className = slice.call(this, 0).join(' ');\n        },\n\n        toString: function () {\n            return join.call(this, ' ');\n        },\n\n        toggle: function ( token ) {\n            if (!this.contains(token)) {\n                this.add(token);\n            } else {\n                this.remove(token);\n            }\n            return this.contains(token);\n        }\n    };\n\n    Object.defineProperty(Element.prototype, 'classList', {\n        get: function () {\n            return new window.DOMTokenList(this);\n        }\n    });\n}\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app     = require('spa-app/lib/core'),\n    metrics = require('app:metrics');\n\n\n// global link\napp.metrics = metrics[app.query.screenHeight] || metrics[screen.height] || metrics[720];\n\n// calculate and extend\napp.metrics.availHeight = app.metrics.height - (app.metrics.availTop  + app.metrics.availBottom);\napp.metrics.availWidth  = app.metrics.width  - (app.metrics.availLeft + app.metrics.availRight);\n\n\n// public\n//module.exports = app;\n","/**\n * Application geometry options.\n * Automatically loaded on application initialization and available as app.metrics.\n */\n\n'use strict';\n\n// public\nmodule.exports = {\n    480: {\n        // screen base dimension\n        height: 480,\n        width:  720,\n        // safe zone margins\n        availTop:    24,\n        availBottom: 24,\n        availRight:  32,\n        availLeft:   48\n        // project-specific vars\n        // put here ...\n    },\n\n    576: {\n        // screen base dimension\n        height: 576,\n        width:  720,\n        // safe zone margins\n        availTop:    24,\n        availBottom: 24,\n        availRight:  26,\n        availLeft:   54\n        // project-specific vars\n        // put here ...\n    },\n\n    720: {\n        // screen base dimension\n        height: 720,\n        width:  1280,\n        // safe zone margins\n        availTop:    30,\n        availBottom: 30,\n        availRight:  40,\n        availLeft:   40\n        // project-specific vars\n        // put here ...\n    },\n\n    1080: {\n        // screen base dimension\n        height: 1080,\n        width:  1920,\n        // safe zone margins\n        availTop:    45,\n        availBottom: 45,\n        availRight:  60,\n        availLeft:   60\n        // project-specific vars\n        // put here ...\n    }\n};\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar app = require('spa-app/lib/core'),\n    //metrics = require('app:metrics'),\n    linkCSS;\n\n\n//window.core = window.parent.getCoreInstance(window, app);\n\n\nlinkCSS = document.createElement('link');\nlinkCSS.rel  = 'stylesheet';\nlinkCSS.href = window.core.theme.path + app.metrics.height + '.css' + (DEVELOP ? '?' + Date.now() : '');\ndocument.head.appendChild(linkCSS);\n\n\n// public\nmodule.exports = linkCSS;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Emitter = require('cjs-emitter'),\n    Gettext = require('cjs-gettext'),\n    loader  = new Emitter();\n\n\n/**\n * Wrap the given data with gettext instance\n * and export methods to the global scope.\n *\n * @param {Object} [data] localization data\n *\n * @return {Gettext} gettext instance\n */\nfunction prepare ( data ) {\n    var gettext = new Gettext(data);\n\n    // make it global\n    window.gettext  = window._ = gettext.gettext;\n    window.pgettext = gettext.pgettext;\n    window.ngettext = gettext.ngettext;\n\n    return gettext;\n}\n\n\n/**\n * Main application language\n */\nloader.defaultLanguage = 'en';\n\n\n/**\n * Simple gettext implementation.\n *\n * @param {Object} config options\n * @param {string} [config.path=lang] relative path to project root\n * @param {string} config.name language name\n * @param {string} [config.ext=json] language file extension\n * @param {function} callback hook on ready\n *\n * @return {boolean} flag is ajax request was made\n */\nloader.load = function ( config, callback ) {\n    var xhr;\n\n    if ( DEVELOP ) {\n        if ( !config.name || typeof config.name !== 'string' ) {\n            throw new Error(__filename + ': config.name must be a nonempty string');\n        }\n        if ( typeof callback !== 'function' ) {\n            throw new Error(__filename + ': wrong callback type');\n        }\n    }\n\n    // defaults\n    config.ext  = config.ext  || 'json';\n    config.path = config.path || 'lang';\n\n    // is it necessary to request a localization file?\n    if ( config.name === loader.defaultLanguage ) {\n        // no\n        prepare();\n        callback(null);\n\n        return false;\n    }\n\n    // yes\n    xhr = new XMLHttpRequest();\n\n    xhr.onload = function () {\n        var json;\n\n        try {\n            json = JSON.parse(xhr.responseText);\n\n            prepare(json);\n            callback(null);\n\n            // there are some listeners\n            if ( loader.events['load'] ) {\n                // notify listeners\n                loader.emit('load');\n            }\n        } catch ( error ) {\n            xhr.onerror(error);\n        }\n    };\n\n    xhr.ontimeout = xhr.onerror = function ( error ) {\n        prepare();\n        callback(error);\n\n        // there are some listeners\n        if ( loader.events['error'] ) {\n            // notify listeners\n            loader.emit('error', error);\n        }\n    };\n\n    xhr.open('GET', config.path + '/' + config.name + '.' + config.ext, true);\n    xhr.send(null);\n\n    return true;\n};\n\n\n// public\nmodule.exports = loader;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\n\n/**\n * Translations handler.\n *\n * @constructor\n *\n * @param {Object} config init parameters\n */\nfunction Gettext ( config ) {\n    var data, meta;\n\n    // sanitize\n    config   = config || {};\n    data     = config.data || {};\n    data[''] = data[''] || {};\n\n    // shortcut\n    meta = config.meta;\n\n    /**\n     * Display the native language translation of a textual message.\n     *\n     * @param {string} msgId textual message\n     *\n     * @return {string} translated text\n     */\n    this.gettext = function ( msgId ) {\n        return data[''][msgId] || msgId;\n    };\n\n\n    /**\n     * The \"p\" in \"pgettext\" stands for \"particular\": fetches a particular translation of the textual message.\n     *\n     * @param {string} context message context\n     * @param {string} msgId textual message\n     *\n     * @return {string} translated text\n     */\n    this.pgettext = function ( context, msgId ) {\n        return data[context] && data[context][msgId] || msgId;\n    };\n\n\n    /**\n     * Display the native language translation of a textual message whose grammatical form depends on a number.\n     *\n     * @param {string} msgId textual message in a singular form\n     * @param {string} plural textual message in a plural form\n     * @param {number} value message number\n     *\n     * @return {string} translated text\n     */\n    this.ngettext = function ( msgId, plural, value ) {\n        /* eslint no-unused-vars: 0 */\n        /* eslint no-eval: 0 */\n        /* eslint id-length: 0 */\n        var n, evalResult;\n\n        if ( DEVELOP ) {\n            if ( Number(value) !== value ) {\n                throw new Error(__filename + ': value must be a number');\n            }\n        }\n\n        if ( data && meta && data[''][msgId] ) {\n            evalResult = eval('n = ' + value + '; ' + meta.plural);\n\n            if ( typeof evalResult === 'boolean' ) {\n                evalResult = +evalResult;\n            }\n\n            // translation\n            return data[''][msgId][evalResult];\n        }\n\n        // english\n        return value === 1 ? msgId : plural;\n    };\n}\n\n\n// correct constructor name\nGettext.prototype.constructor = Gettext;\n\n\n// public\nmodule.exports = Gettext;\n","'use strict';\n\n\nvar app             = require('mag-app'),\n\n    md5             = require('./md5'),\n    xorString       = require('./xor.string'),\n    // sharedBackend   = require('./shared.backend').instance,\n\n    parallel = require('cjs-async/parallel'),\n\n    storageKey     = 'applications-storage',\n\n    currentSessions = [],\n\n    userFsStorage = core.storage,\n\n    loader;\n\n\nfunction loadTheme ( done ) {\n    var globalOptions = core.config.options,\n        xhr = new XMLHttpRequest();\n\n    xhr.open('GET', globalOptions.stalkerHost + '/stalker_portal/server/api/launcher_profile.php?language=en&uid=' + app.stalker.session.userId);\n    xhr.onload = function () {\n        var config = null;\n\n        try {\n            config = JSON.parse(this.responseText);\n        } catch ( error ) {\n            console.log(error);\n        }\n\n        if ( config !== null ) {\n            if ( config.options.themePath ) {\n                config.theme = {\n                    path: globalOptions.stalkerHost + '/stalker_portal/server/api/theme_css.php?uid=' +\n                    app.stalker.session.userId + '&_=' + Date.now() + '&resolution=',\n                    vars: null\n                };\n\n                xhr = new XMLHttpRequest();\n                xhr.open('GET', config.theme.path + window.screen.height);\n\n                xhr.onload = function () {\n                    if ( this.status === 200 ) {\n                        parent.extendCorePrototype('theme', config.theme);\n                    }\n\n                    done();\n                };\n\n                xhr.onerror = xhr.ontimeout = function () {\n                    done();\n                };\n\n                xhr.send();\n            }\n        }\n    };\n\n    xhr.onerror = xhr.ontimeout = function () {\n        done();\n    };\n\n    xhr.send();\n}\n\n\nfunction loadModules ( callback ) {\n    app.stalker.request('modules', {\n        onload: function ( error, response ) {\n            var originPackages   = core.packages,\n                resolvedPackages = [];\n\n            // map = {\n            //     'magcore-app-explorer': 'media_browser',\n            //     'magcore-app-tv': 'tv',\n            //     // apps: 'apps',\n            //     // dvb: 'dvb',\n            //     // tv_archive: 'tv_archive',\n            //     // time_shift: 'time_shift',\n            //     // time_shift_local: 'time_shift_local',\n            //     // 'epg.reminder': 'epg.reminder',\n            //     // 'epg.recorder': 'epg.recorder',\n            //     // 'epg': 'epg',\n            //     // 'epg.simple': 'epg.simple',\n            //     'magcore-app-video-club': 'vclub',\n            //     'magcore-app-audio-club': 'audioclub',\n            //     'magcore-app-magic-cast': 'magiccast',\n            //     // 'downloads_dialog': 'downloads_dialog',\n            //     'magcore-app-downloads': 'downloads',\n            //     'magcore-app-karaoke': 'karaoke',\n            //     'magcore-app-radio': 'radio',\n            //     'magcore-app-weather': 'weather.current',\n            //     // 'widget.audio': 'widget.audio',\n            //     // 'widget.radio': 'widget.radio',\n            //     'magcore-app-records': 'records',\n            //     // 'magcore-app-records': 'remotepvr',\n            //     // 'magcore-app-records': 'pvr_local',\n            //     'magcore-app-settings': 'settings',\n            //     // 'course.nbu': 'course.nbu',\n            //     // 'weather.day': 'weather.day',\n            //     // 'cityinfo': 'cityinfo',\n            //     // 'horoscope': 'horoscope',\n            //     // 'anecdote': 'anecdote',\n            //     // 'game.mastermind': 'game.mastermind',\n            //     'magcore-app-personal-account': 'account'\n            //     // 'demo': 'demo',\n            //     // 'infoportal': 'infoportal',\n            //     // 'internet': 'internet',\n            //     // 'service_management': 'service_management',\n            //     // 'logout': 'logout',\n            //     // 'account_menu': 'account_menu'\n            // }\n\n            if ( !error && response ) {\n                // resolve\n                originPackages.forEach(function ( item ) {\n                    var originName;\n\n                    if ( item.type === 'app' ) {\n                        originName = item.packageName;\n                        if ( response.data.indexOf(originName) !== -1 ) {\n                            // named as package\n                            resolvedPackages.push(item);\n                        }\n                    } else {\n                        resolvedPackages.push(item);\n                    }\n                });\n                core.updatePackages(resolvedPackages);\n            }\n            callback();\n        },\n        ontimeout: callback,\n        onerror: callback\n    });\n}\n\nfunction loadStorage ( done ) {\n    //window.top.sharedBackend = sharedBackend;\n    app.stalker.request('storage/' + storageKey, {\n        onload: function ( error, response ) {\n            var Storage = require('./storage');\n\n            console.log('APP STORAGE LAODED ' + JSON.stringify(response));\n\n            if ( error ) {\n                app.stalker.request('storage/', {\n                    method: 'POST',\n                    body: JSON.stringify({key: storageKey, value: '{}'})\n                });\n                Storage.init({});\n            } else {\n                Storage.init(JSON.parse(response.data.value));\n            }\n\n            parent.extendCorePrototype('Storage', Storage);\n\n            done();\n        },\n        onerror: done,\n        ontimeout: done\n    });\n}\n\nfunction setHomeApp ( settings ) {\n    var classicTvName = 'magcore-app-tv-classic',\n        tvName = 'magcore-app-tv',\n        classicTv = core.packageMap[classicTvName],\n        tv = core.packageMap[tvName],\n        homeApp;\n\n    homeApp = userFsStorage.getItem('homeApp');\n    console.log('homeApp ' + homeApp);\n    console.log(JSON.stringify(['backend', core.backend]));\n\n    if ( homeApp && core.packageMap[homeApp] ) {\n        core.taskManager.setHomeApp(core.packageMap[homeApp]);\n    } else {\n        console.log(JSON.stringify(['show_after_loading', settings.show_after_loading]));\n        if ( settings.show_after_loading === 'last_channel' ) {\n            if ( homeApp ) {\n                // settings exsits\n                // if ( homeApp === 'last_channel' ) {\n                //     // confirm(1);\n                //     if ( classicTv ) {\n                //         // confirm(2);\n                //         userFsStorage.setItem('homeApp', classicTv.packageName);\n                //         core.taskManager.setHomeApp(classicTv);\n                //     } else if ( tv ) {\n                //         // confirm(3);\n                //         userFsStorage.setItem('homeApp', tv.packageName);\n                //         core.taskManager.setHomeApp(tv);\n                //     }\n                // } else\n                if ( homeApp === tvName && tv ) {\n                    // confirm(4);\n                    // settings saved to TV\n                    userFsStorage.setItem('homeApp', tv.packageName);\n                    homeApp = tv.packageName;\n                    core.taskManager.setHomeApp(tv);\n                } else if ( homeApp === classicTvName && classicTv ) {\n                    // confirm(5);\n                    // settings saved to classic TV\n                    userFsStorage.setItem('homeApp', classicTv.packageName);\n                    homeApp = classicTv.packageName;\n                    core.taskManager.setHomeApp(classicTv);\n                } else if ( homeApp === tvName && !tv && classicTv ) {\n                    // confirm(4);\n                    // classic TV exists, but settings saved to TV\n                    userFsStorage.setItem('homeApp', classicTv.packageName);\n                    homeApp = classicTv;\n                    core.taskManager.setHomeApp(classicTv);\n                } else if ( homeApp === classicTvName && !classicTv && tv ) {\n                    // confirm(5);\n                    // TV exists, settings saved to classic TV\n                    userFsStorage.setItem('homeApp', tv.packageName);\n                    homeApp = tv.packageName;\n                    core.taskManager.setHomeApp(tv);\n                } else if ( tv && classicTv ) {\n                    // confirm(6);\n                    homeApp = classicTv.packageName;\n                    core.taskManager.setHomeApp(classicTv);\n                } else if ( core.packageMap[homeApp] ) {\n                    // confirm(7);\n                    core.taskManager.setHomeApp(core.packageMap[homeApp]);\n                }\n            } else if ( classicTv ) {\n                // new start\n                // confirm(7);\n                userFsStorage.setItem('homeApp', classicTvName);\n                homeApp = classicTvName;\n                core.taskManager.setHomeApp(classicTv);\n            } else if ( tv ) {\n                // new start without classic TV\n                // confirm(8);\n                userFsStorage.setItem('homeApp', tvName);\n                homeApp = tvName;\n                core.taskManager.setHomeApp(tv);\n            }\n        }\n    }\n\n    return homeApp;\n}\n\nfunction loadSettings ( done ) {\n    function loadError () {\n        var sharedBackend = require('./shared.backend');\n\n        sharedBackend.instance.settings = {};\n        done();\n    }\n\n    app.stalker.request('users/' + app.stalker.session.userId + '/settings', {\n        onload: function ( error, data ) {\n            var sharedBackend = require('./shared.backend');\n\n            if ( !error && data ) {\n                app.parentPassword = data.data.parent_password;\n\n                core.environment.audioPrimaryLanguage = data.data.pri_audio_lang || data.data.languages[0];\n                core.environment.audioSecondaryLanguage = data.data.sec_audio_lang || data.data.languages[1];\n                core.environment.subtitlesPrimaryLanguage = data.data.pri_subtitle_lang || data.data.languages[0];\n                core.environment.subtitlesSecondaryLanguage = data.data.sec_subtitle_lang || data.data.languages[1];\n\n                sharedBackend.instance.settings = data.data;\n                sharedBackend.instance.settings.homeApp = setHomeApp(data.data);\n                sharedBackend.instance.settings.setHomeApp = function ( homeApp, callback ) {\n                    var value;\n\n                    if ( homeApp ) {\n                        value = 'last_channel';\n                    } else {\n                        value = 'main_menu';\n                    }\n\n                    sharedBackend.instance.settings.homeApp = homeApp;\n                    userFsStorage.setItem('homeApp', homeApp);\n\n                    core.backend.request('users/' + core.backend.session.userId + '/settings', {\n                        headers: {\n                            'Content-Type': 'application/x-www-form-urlencoded'\n                        },\n                        method: 'PUT',\n                        onload: function ( error, settingsPutResponse ) {\n                            sharedBackend.instance.settings['show_after_loading'] = value;\n                            // window.extendCorePrototype('backend', core.backend);\n                            callback(error, settingsPutResponse);\n                        },\n                        onerror: function () {\n                            callback(true);\n                        },\n                        body: 'show_after_loading=' + value\n                    });\n                };\n\n                parent.extendCorePrototype('environment', core.environment);\n            }\n\n            console.log('onload ' + error);\n            console.log(JSON.stringify(data));\n            done();\n            // core.events['show'] = null;\n            // console.log('ready');\n            // core.emit('ready', {stop: false});\n        },\n        onerror: loadError,\n        ontimeout: loadError\n    });\n}\n\nfunction loadUserData () {\n    var tasks = [\n        loadTheme,\n        loadStorage\n    ];\n\n\n    if ( TARGET === 'android-stb' || TARGET === 'android-app' ) {\n        tasks.push(loadModules);\n    }\n\n    parallel(tasks, function () {\n        loadSettings(function () {\n            core.events.show = null;\n            core.emit('ready', {stop: false});\n            setTimeout(function () {\n                require('./shared.backend').instance.emit('ready');\n            }, 0);\n        });\n    });\n}\n\n\n/* eslint max-lines-per-function: 0 */\nfunction onStalkerCodeLoad ( config, instance ) {\n    var sharedBackend = require('./shared.backend').instance,\n        property;\n\n\n    for ( property in instance ) {\n        sharedBackend[property] = instance[property];\n    }\n    app.stalker = instance;\n\n    if ( app.stalker.host === null && config.options.stalkerApiPath ) {\n        if ( config.options.stalkerApiPath.indexOf('://') === -1 ) {\n            // absolute path\n            app.stalker.host = config.options.stalkerHost + config.options.stalkerApiPath;\n        } else {\n            app.stalker.host = config.options.stalkerApiPath;\n        }\n    }\n\n    if ( app.stalker.authHost === null && config.options.stalkerApiPath ) {\n        if ( config.options.stalkerApiPath.indexOf('://') === -1 ) {\n            // absolute path\n            app.stalker.authHost = config.options.stalkerHost + config.options.stalkerAuthPath;\n        } else {\n            app.stalker.authHost = config.options.stalkerAuthPath;\n        }\n    }\n    app.stalker.lang = core.environment.language;\n    app.stalker.saveCallback = function () {\n        console.log('SAVE CALLBACK CALLED');\n        if ( PLATFORM === 'MAG' ) {\n            core.plugins.ufsJson.saveSync(app.stalker.session);\n        } else {\n            console.log(app.stalker.session);\n            localStorage.setItem('ssession', JSON.stringify(app.stalker.session));\n        }\n    };\n    app.stalker.reload = function () {\n        core.reload(config.options.stalkerHost + config.options.stalkerLoaderPath);\n    };\n    app.stalker.onfail = function ( message ) {\n        console.log('EXCEPTION IN REQUEST CALLBACK');\n        console.log(JSON.stringify(message));\n        if ( PLATFORM === 'SMARTTV' ) {\n            window.top.alert(message);\n        }\n        //setTimeout(function () {\n        //    core.notify({\n        //        title: message, // текст нотификации\n        //        icon: 'console.log',\n        //        type: 'error',\n        //        timeout: 5000\n        //    });\n        //}, 1000);\n    };\n\n    // load pages\n    if ( config.options.stalkerHost ) {\n        app.pages = {\n            main: require('../pages/login'),\n            accountDisabled: require('../pages/account.disabled')\n        };\n    } else {\n        app.pages = {\n            main: require('../pages/multi.login'),\n            eula: require('../pages/eula')\n        };\n    }\n    // show main page\n    app.route(app.pages.main);\n\n    // initiate global backend property with private data\n\n    sharedBackend.host = config.options.stalkerHost + '/';\n    sharedBackend.request = app.stalker.request;\n    sharedBackend.session = config.session;\n    //sharedBackend.withCredentials = false;\n\n    if ( PLATFORM !== 'MAG' || TARGET === 'android-stb' || TARGET === 'android-app' ) {\n        // smart tv's platforms and mag devices which running under android must have logout in personal account\n        sharedBackend.logout = function () {\n            sharedBackend.session = {};\n            core.plugins.ufsJson.saveSync(sharedBackend.session);\n            top.location.reload();\n        };\n    }\n\n    parent.extendCorePrototype('backend', sharedBackend);\n    parent.extendCorePrototype('stalker', sharedBackend);\n\n    parent.addIntentHook('play', function ( intent, intentCreator ) {\n        console.log('HOOKED');\n        if ( intentCreator && intentCreator.config && intentCreator.config.resource && intent.data.mediaId ) {\n            /* eslint camelcase: 0 */\n            core.backend.request('media-info/', {\n                method: 'POST',\n                body: JSON.stringify({\n                    type: intent.data.resource || intentCreator.config.resource,\n                    media_id: intent.data.mediaId,\n                    current_sessions: currentSessions\n                }),\n                onload: function ( error, data ) {\n                    var sessionId, stopCallback;\n\n                    if ( error ) {\n                        console.log(error);\n                        console.log(data);\n                    } else {\n                        console.log('statistic send ' + intent.data.uri);\n                        sessionId = data.data.session_id;\n                        currentSessions.push(sessionId);\n                        console.log(JSON.stringify(data));\n                        console.log('sessionId: ' + sessionId);\n                        stopCallback = function () {\n                            var index = currentSessions.indexOf(sessionId);\n\n                            currentSessions.splice(index, 1);\n                            //console.log('statistic deleted ' + intent.data.uri);\n                            core.backend.request('media-info/' + sessionId, {\n                                method: 'DELETE'\n                            });\n                        };\n\n                        intent.once('close', function () {\n                            if ( !(intent.data && intent.data.persistent) ) {\n                                stopCallback();\n                            }\n                        });\n                        intent.once('hide', stopCallback);\n                        intent.once('exit', stopCallback);\n                        intent.once('end', stopCallback);\n                        intent.once('error', stopCallback);\n                    }\n                }\n            });\n        }\n    });\n\n    if ( PLATFORM === 'MAG' ) {\n        if (\n            (TARGET !== 'android-stb' || TARGET !== 'android-app')\n            && core.config.options.userId === null\n        ) {\n            app.stalker.oncredenitalsrequired(function () {\n                core.redirectTo(config.options.stalkerHost + config.options.stalkerLoaderPath);\n            });\n        } else if ( config.session && config.session.accessToken && config.session.userId ) {\n            app.stalker.session = config.session;\n            console.log('find session: ' + JSON.stringify(config.session));\n            console.log('users/' + app.stalker.session.userId + '/ping');\n            app.stalker.request('users/' + app.stalker.session.userId + '/ping', {\n                onload: function ( error, data ) {\n                    console.log('onload ' + error);\n                    console.log(JSON.stringify(data));\n                    loadUserData();\n                },\n                onerror: function ( exception ) {\n                    console.log('onerror');\n                    console.log(exception);\n                    console.log(this.status);\n                    console.log(this.readyState);\n                    console.log(this.responseText);\n                    loadUserData();\n                },\n                ontimeout: function ( request ) {\n                    console.log('ontimeout');\n                    console.log(request.status);\n                    console.log(request.readyState);\n                    console.log(request.responseText);\n                    loadUserData();\n                }\n            });\n            //console.log('app.stalker.request/');\n        } else if ( config.session && config.session.refreshToken ) {\n            app.stalker.auth.refreshToken(config.session.refreshToken, function ( error ) {\n                console.log('refreshToken ERROR ' + error);\n                if ( error ) {\n                    app.stalker.auth.login({password: '', login: ''}, function ( error, result ) {\n                        if ( error ) {\n                            console.log(error);\n                            console.log(result);\n                            app.stalker.oncredenitalsrequired();\n                        } else {\n                            loadUserData();\n                        }\n                    });\n                } else {\n                    loadUserData();\n                }\n            });\n        } else {\n            app.stalker.auth.login({password: '', login: ''}, function ( error, result ) {\n                console.log('empty login ERROR ' + JSON.stringify(error));\n                if ( error ) {\n                    if ( error.error_description === 'Account disabled' ) {\n                        app.stalker.oncredenitalsrequired(function () {\n                            app.stalker.reload();\n                        }, {\n                            error: error\n                        });\n\n                        return;\n                    }\n\n                    app.stalker.oncredenitalsrequired(function () {\n                        loadUserData();\n                    });\n\n                    console.log(error);\n                    console.log(result);\n                } else {\n                    loadUserData();\n                }\n            });\n        }\n    } else {\n        app.stalker.oncredenitalsrequired();\n    }\n}\n\n\nloader = function ( config ) {\n    var client;\n\n    if ( TARGET === 'android-stb' || TARGET === 'android-app' ) {\n        onStalkerCodeLoad(config, require('./api.provider'));\n\n        return;\n    }\n\n    if ( PLATFORM !== 'MAG' ) {\n        app.stalker = require('./stalker.api.unsecure');\n        onStalkerCodeLoad(config, app.stalker);\n\n        return;\n    }\n\n    if ( PLATFORM === 'MAG' ) {\n        client = fetch();\n\n        client.open('GET', config.options.sap + '?version=' + config.apiVersion);\n\n        client.onload = function () {\n            var instance = {},\n                data, key, md5Key, rawData;\n\n\n            data = this.responseText.split('.');\n            key = atob(data.shift());\n            md5Key = md5(key);\n            rawData = atob(data[0]);\n\n            key = core.tools.hash(key, md5Key);\n            //console.log('key ' + key);\n            //console.log('md5Key ' + md5Key);\n            //console.log('data ' + rawData.length);\n\n            data = xorString(rawData, key);\n\n            data = data.replace(/gSTB/g, 'window.top.gSTB');\n            if ( DEVELOP ) {\n                data = data.replace('DEBUG=!1', 'DEBUG=!0');\n            }\n            console.log(data);\n\n            try {\n                /* eslint no-eval: 0 */\n                instance = eval(data);\n            } catch ( error ) {\n                console.log(error);\n            }\n\n            onStalkerCodeLoad(config, instance);\n        };\n\n        client.onerror = function () {\n            console.log('cant load api');\n        };\n\n        client.send();\n    }\n};\n\n\nmodule.exports = loader;\n","'use strict';\n\n/* eslint-disable */\n\nfunction md5cycle (x, k) {\n    var a = x[0],\n        b = x[1],\n        c = x[2],\n        d = x[3];\n\n    a = ff(a, b, c, d, k[0], 7, -680876936);\n    d = ff(d, a, b, c, k[1], 12, -389564586);\n    c = ff(c, d, a, b, k[2], 17,  606105819);\n    b = ff(b, c, d, a, k[3], 22, -1044525330);\n    a = ff(a, b, c, d, k[4], 7, -176418897);\n    d = ff(d, a, b, c, k[5], 12,  1200080426);\n    c = ff(c, d, a, b, k[6], 17, -1473231341);\n    b = ff(b, c, d, a, k[7], 22, -45705983);\n    a = ff(a, b, c, d, k[8], 7,  1770035416);\n    d = ff(d, a, b, c, k[9], 12, -1958414417);\n    c = ff(c, d, a, b, k[10], 17, -42063);\n    b = ff(b, c, d, a, k[11], 22, -1990404162);\n    a = ff(a, b, c, d, k[12], 7,  1804603682);\n    d = ff(d, a, b, c, k[13], 12, -40341101);\n    c = ff(c, d, a, b, k[14], 17, -1502002290);\n    b = ff(b, c, d, a, k[15], 22,  1236535329);\n\n    a = gg(a, b, c, d, k[1], 5, -165796510);\n    d = gg(d, a, b, c, k[6], 9, -1069501632);\n    c = gg(c, d, a, b, k[11], 14,  643717713);\n    b = gg(b, c, d, a, k[0], 20, -373897302);\n    a = gg(a, b, c, d, k[5], 5, -701558691);\n    d = gg(d, a, b, c, k[10], 9,  38016083);\n    c = gg(c, d, a, b, k[15], 14, -660478335);\n    b = gg(b, c, d, a, k[4], 20, -405537848);\n    a = gg(a, b, c, d, k[9], 5,  568446438);\n    d = gg(d, a, b, c, k[14], 9, -1019803690);\n    c = gg(c, d, a, b, k[3], 14, -187363961);\n    b = gg(b, c, d, a, k[8], 20,  1163531501);\n    a = gg(a, b, c, d, k[13], 5, -1444681467);\n    d = gg(d, a, b, c, k[2], 9, -51403784);\n    c = gg(c, d, a, b, k[7], 14,  1735328473);\n    b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n    a = hh(a, b, c, d, k[5], 4, -378558);\n    d = hh(d, a, b, c, k[8], 11, -2022574463);\n    c = hh(c, d, a, b, k[11], 16,  1839030562);\n    b = hh(b, c, d, a, k[14], 23, -35309556);\n    a = hh(a, b, c, d, k[1], 4, -1530992060);\n    d = hh(d, a, b, c, k[4], 11,  1272893353);\n    c = hh(c, d, a, b, k[7], 16, -155497632);\n    b = hh(b, c, d, a, k[10], 23, -1094730640);\n    a = hh(a, b, c, d, k[13], 4,  681279174);\n    d = hh(d, a, b, c, k[0], 11, -358537222);\n    c = hh(c, d, a, b, k[3], 16, -722521979);\n    b = hh(b, c, d, a, k[6], 23,  76029189);\n    a = hh(a, b, c, d, k[9], 4, -640364487);\n    d = hh(d, a, b, c, k[12], 11, -421815835);\n    c = hh(c, d, a, b, k[15], 16,  530742520);\n    b = hh(b, c, d, a, k[2], 23, -995338651);\n\n    a = ii(a, b, c, d, k[0], 6, -198630844);\n    d = ii(d, a, b, c, k[7], 10,  1126891415);\n    c = ii(c, d, a, b, k[14], 15, -1416354905);\n    b = ii(b, c, d, a, k[5], 21, -57434055);\n    a = ii(a, b, c, d, k[12], 6,  1700485571);\n    d = ii(d, a, b, c, k[3], 10, -1894986606);\n    c = ii(c, d, a, b, k[10], 15, -1051523);\n    b = ii(b, c, d, a, k[1], 21, -2054922799);\n    a = ii(a, b, c, d, k[8], 6,  1873313359);\n    d = ii(d, a, b, c, k[15], 10, -30611744);\n    c = ii(c, d, a, b, k[6], 15, -1560198380);\n    b = ii(b, c, d, a, k[13], 21,  1309151649);\n    a = ii(a, b, c, d, k[4], 6, -145523070);\n    d = ii(d, a, b, c, k[11], 10, -1120210379);\n    c = ii(c, d, a, b, k[2], 15,  718787259);\n    b = ii(b, c, d, a, k[9], 21, -343485551);\n\n    x[0] = add32(a, x[0]);\n    x[1] = add32(b, x[1]);\n    x[2] = add32(c, x[2]);\n    x[3] = add32(d, x[3]);\n\n}\n\nfunction cmn (q, a, b, x, s, t) {\n    a = add32(add32(a, q), add32(x, t));\n\n    return add32((a << s) | (a >>> (32 - s)), b);\n}\n\nfunction ff (a, b, c, d, x, s, t) {\n    return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n}\n\nfunction gg (a, b, c, d, x, s, t) {\n    return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n}\n\nfunction hh (a, b, c, d, x, s, t) {\n    return cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction ii (a, b, c, d, x, s, t) {\n    return cmn(c ^ (b | (~d)), a, b, x, s, t);\n}\n\nfunction md51 (s) {\n    var txt = '';\n\n    var n = s.length,\n        state = [1732584193, -271733879, -1732584194, 271733878],\n        i;\n\n    for (i = 64; i <= s.length; i += 64) {\n        md5cycle(state, md5blk(s.substring(i - 64, i)));\n    }\n    s = s.substring(i - 64);\n    var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n    for (i = 0; i < s.length; i++) { tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3); }\n    tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n    if (i > 55) {\n        md5cycle(state, tail);\n        for (i = 0; i < 16; i++) { tail[i] = 0; }\n    }\n    tail[14] = n * 8;\n    md5cycle(state, tail);\n\n    return state;\n}\n\n/* there needs to be support for Unicode here,\n * unless we pretend that we can redefine the MD-5\n * algorithm for multi-byte characters (perhaps\n * by adding every four 16-bit characters and\n * shortening the sum to 32 bits). Otherwise\n * I suggest performing MD-5 as if every character\n * was two bytes--e.g., 0040 0025 = @%--but then\n * how will an ordinary MD-5 sum be matched?\n * There is no way to standardize text to something\n * like UTF-8 before transformation; speed cost is\n * utterly prohibitive. The JavaScript standard\n * itself needs to look at this: it should start\n * providing access to strings as preformed UTF-8\n * 8-bit unsigned value arrays.\n */\nfunction md5blk (s) { /* I figured global was faster.   */\n    var md5blks = [],\n        i; /* Andy King said do it this way. */\n\n    for (i = 0; i < 64; i += 4) {\n        md5blks[i >> 2] = s.charCodeAt(i)\n            + (s.charCodeAt(i + 1) << 8)\n            + (s.charCodeAt(i + 2) << 16)\n            + (s.charCodeAt(i + 3) << 24);\n    }\n\n    return md5blks;\n}\n\nvar hex_chr = '0123456789abcdef'.split('');\n\nfunction rhex (n) {\n    var s = '',\n        j = 0;\n\n    for (; j < 4; j++) {\n        s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\n            + hex_chr[(n >> (j * 8)) & 0x0F];\n    }\n\n    return s;\n}\n\nfunction hex (x) {\n    for (var i = 0; i < x.length; i++) { x[i] = rhex(x[i]); }\n\n    return x.join('');\n}\n\nfunction md5 (s) {\n    return hex(md51(s));\n}\n\n/* this function is much faster,\n so if possible we use it. Some IEs\n are the only ones I know of that\n need the idiotic second function,\n generated by an if clause.  */\n\nvar add32 = function (a, b) {\n    return (a + b) & 0xFFFFFFFF;\n};\n\n\nfunction add32b (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n        msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\n    return (msw << 16) | (lsw & 0xFFFF);\n}\n\nif (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n    add32 = add32b;\n}\n\nmodule.exports = function ( str ) {\n    return hex(md51(str));\n};\n","'use strict';\n\n\nmodule.exports = function xorString ( data, key ) {\n    var index = 0,\n        size = data.length,\n        encoded = [],\n        keyIndex;\n\n    encoded.length = size;\n\n    while ( index < size ) {\n        keyIndex = index % key.length;\n        /* eslint no-bitwise: 0 */\n        encoded[index] = (String.fromCharCode(data.charCodeAt(index) ^ key.charCodeAt(keyIndex)));\n        ++index;\n    }\n\n    return encoded.join('');\n};\n","/**\n * @module cjs-async/parallel\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n/**\n * Method to be called to set task as completed.\n *\n * @callback onTaskFinishCallback\n *\n * @param {boolean} error status of the task execution\n * @param {Array} result data to return from the task\n */\n\n/**\n * Task method to be executed.\n *\n * @callback taskHandler\n *\n * @param {module:cjs-async/parallel~onTaskFinishCallback} [callback] method to be called to set task as completed\n *\n * @example\n * function ( callback ) {\n *     callback(null, true);\n * }\n */\n\n/**\n * Method to be called on all given tasks completion.\n *\n * @callback onFinishCallback\n *\n * @param {boolean} error status of all tasks execution\n * @param {Array} result data received from all tasks\n */\n\n/**\n * Parallel tasks execution.\n *\n * @param {module:cjs-async/parallel~taskHandler[]} tasks set of tasks to execute\n * @param {module:cjs-async/parallel~onFinishCallback} [callback] optional callback to run once all the tasks have completed\n *\n * @example\n * parallel(taskList, function ( error, results ) {\n *     console.log(error, results);\n * });\n */\nmodule.exports = function ( tasks, callback ) {\n    var isError = false,\n        counter = 0,\n        results = [];\n\n    function handler ( task, index ) {\n        var done = function ( error, result ) {\n            // error happened in some other task\n            if ( isError ) {\n                // callback was already used\n                return;\n            }\n\n            if ( error ) {\n                // exit this task\n                // and prevent other to callback\n                isError = true;\n\n                callback(error);\n\n                return;\n            }\n\n            // fill results\n            results[index] = result;\n\n            counter++;\n\n            // all tasks are processed\n            if ( counter === tasks.length ) {\n                callback(null, results);\n            } else if ( counter > tasks.length ) {\n                throw Error('done callback invoked more than one time in function with ' + index + ' position in tasks array');\n            }\n        };\n\n        // actual call condition\n        if ( task.length === 0 ) {\n            done(null, task());\n        } else {\n            task(done);\n        }\n    }\n\n    // sanitize\n    tasks = Array.isArray(tasks) ? tasks : [];\n\n    // sanitize final handler\n    if ( typeof callback !== 'function' ) {\n        callback = function () { /* just in case */ };\n    }\n\n    // no tasks were given\n    if ( tasks.length === 0 ) {\n        // empty result\n        callback(null, results);\n    } else {\n        // run all tasks\n        tasks.forEach(handler);\n    }\n};\n","/**\n * Loading page implementation.\n *\n * @author Stanislav Kalashnik <sk@infomir.eu>\n * @license GNU GENERAL PUBLIC LICENSE Version 3\n */\n\n'use strict';\n\nvar app    = require('mag-app'),\n    keys   = require('stb-keys'),\n\n    Page   = require('stb-component-page'),\n    Button = require('stb-component-button'),\n\n    FakeInput  = require('../components/fake.input'),\n\n    page          = new Page({$node: document.getElementById('pageLogin')}),\n\n    $plLabelError = document.getElementById('plLabelError'),\n\n    requestCallback = null,\n\n    inputLogin,\n    buttonSubmit,\n    inputPassword;\n\n\ninputLogin    = new FakeInput({\n    $node: window.plInputLogin,\n    placeholder: gettext('Login'),\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    inputPassword.focus();\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n\nbuttonSubmit  = new Button({\n    $node: window.plButtonSubmit,\n    value: gettext('Sign in')\n});\n\ninputPassword = new FakeInput({\n    $node: window.plInputPassword,\n    placeholder: gettext('Password'),\n    type: 'password',\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    buttonSubmit.focus();\n                    break;\n\n                case keys.up:\n                    inputLogin.focus();\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n// buttonSubmit.$node.classList.remove('stb-component-button');\n// buttonSubmit.$node.classList.add('theme-focus');\n// buttonSubmit.$node.classList.add('my-component-button');\n// inputLogin.$node.classList.add('theme-main');\n// inputLogin.$node.classList.add('theme-border');\n// inputPassword.$node.classList.add('theme-main');\n// page.$node.classList.add('theme-background-color');\ninputLogin.title = gettext('Enter login');\ninputPassword.title = gettext('Enter password');\n\napp.stalker.oncredenitalsrequired = function ( callback, config ) {\n    var backend = require('../modules/shared.backend').instance;\n\n    backend.withCredentials = true;\n\n    if ( PLATFORM === 'MAG' ) {\n        requestCallback = callback;\n    } else {\n        requestCallback = function () {\n            // reload required for all platforms after login\n            if ( callback ) {\n                callback();\n            } else {\n                parent.location.reload();\n            }\n        };\n    }\n\n    if ( config ) {\n        switch ( config.error.error_description ) {\n            case  'Account disabled':\n                if ( TARGET === 'android-stb' || TARGET === 'android-app' ) {\n                    app.route(app.pages.accountDisabled);\n                } else {\n                    $plLabelError.innerText = gettext('Account disabled');\n                    $plLabelError.className = 'visible';\n                }\n                break;\n\n            default:\n                $plLabelError.innerText = gettext(config.error.error_description);\n                $plLabelError.className = 'visible';\n                break;\n        }\n\n        if ( TARGET !== 'android-stb' || TARGET !== 'android-app' ) {\n            // app.route(app.pages.accountDisabled) - called\n            inputLogin.focus();\n        }\n    }\n\n    core.taskManager.setLauncher(window);\n    core.taskManager.hideAll();\n};\n\npage.addListener('show', function () {\n    inputLogin.focus();\n});\n\nbuttonSubmit.addListener('keydown', function ( event ) {\n    if ( event.code === keys.up ) {\n        inputPassword.focus();\n    }/* else if ( event.code === keys.down ) {\n        buttonExit.focus();\n    }*/\n});\n\nbuttonSubmit.addListener('click', function () {\n    // reset style\n    $plLabelError.className = '';\n\n    if ( inputLogin.value.length === 0 ) {\n        // empty login\n        $plLabelError.innerText = gettext('Error.') + ' ' + gettext('Please, input login');\n        $plLabelError.className = 'visible';\n        inputLogin.focus();\n    } else if ( inputPassword.value.length === 0 ) {\n        // empty password\n        $plLabelError.innerText = gettext('Error.') + ' ' + gettext('Please, input password');\n        $plLabelError.className = 'visible';\n        inputPassword.focus();\n    } else {\n        app.stalker.auth.login({\n            password: inputPassword.value,\n            login: inputLogin.value\n        }, function ( error, response ) {\n            if ( error ) {\n                if ( response.error_description ) {\n                    $plLabelError.innerText = gettext(response.error_description);\n                    $plLabelError.className = 'visible';\n                    inputLogin.focus();\n                } else {\n                    $plLabelError.innerText = gettext(response.error_description);\n                    $plLabelError.className = 'visible';\n                    inputLogin.focus();\n                }\n            } else {\n                core.call('hide');\n                core.call('blur');\n                if ( requestCallback ) {\n                    requestCallback();\n                    requestCallback = null;\n                } else {\n                    console.log('oncredenitalsrequired');\n                    core.events.show = null;\n                    core.emit('ready', {stop: false});\n                }\n            }\n        });\n    }\n});\n\n\n// public\nmodule.exports = page;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component');\n\n\n/**\n * Base page implementation.\n *\n * A full-screen top-level layer that can operate as an independent separate entity.\n * It is added to the document body on creation if not already linked.\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n *\n * @example\n * var Page = require('stb/ui/page'),\n *     page = new Page({\n *         $node: document.getElementById(id)\n *     });\n *\n * page.addListener('show', function show () {\n *     // page is visible now\n * });\n */\nfunction Page ( config ) {\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n    }\n\n    /**\n     * Page visibility/active state flag.\n     *\n     * @readonly\n     * @type {boolean}\n     */\n    this.active = false;\n\n    /**\n     * Link to the currently active component with focus.\n     *\n     * @readonly\n     * @type {Component}\n     */\n    this.activeComponent = null;\n\n    // set default className if classList property empty or undefined\n    //config.className = 'page ' + (config.className || '');\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // state flag\n    this.active = this.$node.classList.contains('active');\n\n    // correct DOM parent/child connection if necessary\n    if ( this.$node.parentNode === null ) {\n        document.body.appendChild(this.$node);\n    }\n\n    // always itself\n    this.page = this;\n}\n\n\n// inheritance\nPage.prototype = Object.create(Component.prototype);\nPage.prototype.constructor = Page;\n\n// set component name\nPage.prototype.name = 'spa-component-page';\n\n\n// public\nmodule.exports = Page;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component'),\n    keys      = require('spa-keys');\n\n\n/**\n * Base button implementation.\n *\n * Has global options:\n *     Button.prototype.clickDuration - time to apply \"click\" class, does not apply if 0\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n * @param {string} [config.value] button caption text (generated if not set)\n * @param {string} [config.icon] button icon name\n *\n * @example\n * var Button = require('stb/ui/button'),\n *     btnSimple, btnIcon, btnDetached;\n *\n * btnSimple = new Button({\n *     $node: document.getElementById('btnSimple'),\n *     value: 'Simple button'\n * });\n *\n * btnIcon = new Button({\n *     $node: document.getElementById('btnIcon'),\n *     icon: 'menu'\n *     value: 'Button with icon'\n * });\n *\n * btnDetached = new Button({\n *     value: 'Button not added to the page',\n *     className: 'wide'\n * });\n */\nfunction Button ( config ) {\n    // current execution context\n    //var self = this;\n\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.icon && typeof config.icon !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.icon');\n        }\n        if ( config.value && typeof config.value !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.value');\n        }\n    }\n\n    //config.name = 'spa-component-button' + (config.className || '');\n\n    // set default className if classList property empty or undefined\n    //config.className = this.name + ' ' + (config.className || '');\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // optional dom\n    if ( config.icon ) {\n        // insert icon\n        this.$icon = this.$body.appendChild(document.createElement('div'));\n        this.$icon.className = 'icon ' + config.icon;\n    }\n\n    // insert caption placeholder\n    this.$text = this.$body.appendChild(document.createElement('div'));\n    this.$text.classList.add('text');\n\n    if ( config.value ) {\n        // fill it\n        this.$text.innerText = config.value;\n    }\n}\n\n\n// inheritance\nButton.prototype = Object.create(Component.prototype);\nButton.prototype.constructor = Button;\n\n// set component name\nButton.prototype.name = 'spa-component-button';\n\n\n// time to apply \"click\" class, does not apply if 0\nButton.prototype.clickDuration = 200;\n\n\n/**\n * List of all default event callbacks.\n *\n * @type {Object.<string, function>}\n */\nButton.prototype.defaultEvents = {\n    /**\n     * Default method to handle mouse click events.\n     */\n    click: function () {\n        // current execution context\n        var self = this;\n\n        this.$node.classList.add('click');\n\n        setTimeout(function () {\n            self.$node.classList.remove('click');\n        }, this.clickDuration);\n    },\n\n    /**\n     * Default method to handle keyboard keydown events.\n     *\n     * @param {Object} event generated event\n     */\n    keydown: function ( event ) {\n        if ( event.code === keys.enter ) {\n            // emulate click\n            // there are some listeners\n            if ( this.events['click'] ) {\n                /**\n                 * Mouse click event emulation.\n                 *\n                 * @event module:stb/ui/button~Button#click\n                 *\n                 * @type {Object}\n                 * @property {Event} event click event data\n                 */\n                this.emit('click', {event: event});\n            }\n        }\n    }\n};\n\n\n// public\nmodule.exports = Button;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component');\n\n\n/**\n * Base panel implementation.\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n *\n * @example\n * var Panel = require('stb/ui/panel'),\n *     panel = new Panel({\n *         $node: document.getElementById('someId'),\n *         children: [\n *             new Panel({\n *                 $node: document.getElementById('anotherId')\n *             })\n *         ]\n *     });\n *\n * panel.add(\n *     new Button(),\n *     new Button(),\n *     new Button()\n * );\n *\n * page.add(panel);\n */\nfunction Panel ( config ) {\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n    }\n\n    // can't accept focus\n    config.focusable = config.focusable || false;\n\n    // set default className if classList property empty or undefined\n    //config.className = 'panel ' + (config.className || '');\n\n    // parent constructor call\n    Component.call(this, config);\n}\n\n\n// inheritance\nPanel.prototype = Object.create(Component.prototype);\nPanel.prototype.constructor = Panel;\n\n// set component name\nPanel.prototype.name = 'spa-component-panel';\n\n\n// public\nmodule.exports = Panel;\n","/**\n * Main page implementation.\n */\n\n'use strict';\n\n\nvar Page   = require('stb-component-page'),\n    Button = require('stb-component-button'),\n    keys   = require('stb-keys'),\n    page   = new Page({$node: window.pageAccountDisabled}),\n    button = new Button({\n        $node: window.padButton,\n        value: gettext('Restart portal'),\n        // focusable: true,\n        events: {\n            click: function () {\n                window.top.location.reload();\n            }\n        }\n        // events: {\n        //     focus: function () {\n        //         this.$node.className = 'ministra-button--focus'\n        //     },\n        //     blur: function () {\n        //         this.$node.className = 'ministra-button'\n        //     }\n        // }\n    });\n\n\nwindow.padMainLabel.innerHTML = gettext('Service is not available.') + '<br>' + gettext('Please contact your service provider.');\nbutton.$text.innerText = gettext('Restart portal');\n\nbutton.$node.className = 'ministra-button--focus';\n\n\npage.addListener('show', function () {\n    setTimeout(function () {\n        button.focus();\n    }, 0);\n});\n\npage.addListener('keydown', function ( event ) {\n    if ( event.code === keys.back ) {\n        window.native.showStart();\n    }\n});\n\n// public\nmodule.exports = page;\n","/**\n * Loading page implementation.\n *\n * @author Stanislav Kalashnik <sk@infomir.eu>\n * @license GNU GENERAL PUBLIC LICENSE Version 3\n */\n\n'use strict';\n\nvar app  = require('mag-app'),\n    keys = require('stb-keys'),\n\n    Page   = require('stb-component-page'),\n    List   = require('stb-component-list'),\n    Button = require('stb-component-button'),\n\n    FakeInput      = require('../components/fake.input'),\n\n    accountManager = require('../modules/account.manager'),\n\n    errorData  = {\n        pmlInputLogin: {\n            className: '',\n            text: gettext('Please, input login')\n        },\n        pmlInputPassword: {\n            className: 'passwordError',\n            text: gettext('Please, input password')\n        },\n        pmlServerAddress: {\n            className: 'addressError',\n            text: gettext('Please, input portal address')\n        },\n        pmlInputActivateCode: {\n            className: 'licenseError',\n            text: gettext('Please, input valid license key')\n        }\n    },\n    positions = {\n        login: 1,\n        password: 2,\n        serverAddress: 3,\n        licenseKey: 4,\n        loginButton: 5\n    },\n    storageKey      = 'applications-storage',\n    requestCallback = null,\n\n    page, inputLogin, inputServerAddress, buttonSubmit,\n    buttonNewAccount, inputPassword, inputActivateCode,\n    accountList, buttonScrollUp, buttonScrollDown, accountsData;\n\n\n//function declaration\nfunction initCreateForm ( data, update ) {\n    inputLogin.setValue(data.login);\n    inputLogin.$node.classList.remove('error');\n    inputPassword.setValue(data.password);\n    inputPassword.$node.classList.remove('error');\n    inputServerAddress.setValue(data.address);\n    inputServerAddress.$node.classList.remove('error');\n    inputActivateCode.setValue(data.activationCode);\n    inputActivateCode.$node.classList.remove('error');\n\n    if ( update ) {\n        buttonSubmit.updateId = accountManager.get().indexOf(data);\n        buttonSubmit.$text.innerHTML = gettext('Save');\n        buttonSubmit.state = 'update';\n    }\n}\n\n\nfunction updateAccountsCounter ( index ) {\n    var length     = accountList.data.length,\n        focusIndex = typeof index === 'undefined' ? (accountList.data.indexOf(accountList.$focusItem.data) + 1) : index + 1;\n\n    window.pmlAccountListButtonScrollUp.innerText = focusIndex + '/' + length;\n}\n\n\nfunction loadTheme ( callback ) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('GET', app.stalker.host + '/stalker_portal/server/api/launcher_profile.php?language=en&uid=' + app.stalker.session.userId);\n    xhr.onload = function () {\n        var config = null;\n\n        console.log('config response text');\n\n        try {\n            config = JSON.parse(this.responseText);\n        } catch ( error ) {\n            console.log(error);\n        }\n\n        if ( config === null ) {\n            // window.top.console.log('config is null');\n            callback();\n        } else if ( config.options && config.options.themePath ) {\n            config.theme = {\n                path: app.stalker.host + '/stalker_portal/server/api/theme_css.php?uid=' +\n                app.stalker.session.userId + '&_=' + Date.now() + '&resolution=',\n                vars: null\n            };\n            // xhr = new XMLHttpRequest();\n            xhr.open('GET', config.theme.path + window.screen.height);\n\n            xhr.onload = function () {\n                window.top.console.log('onload theme ' + this.status);\n\n                if ( this.status === 200 ) {\n                    parent.extendCorePrototype('theme', config.theme);\n                }\n                callback();\n            };\n\n            xhr.onerror = xhr.ontimeout = function ( ) {\n                console.log('onerror timeout ' + this.status);\n\n                callback();\n            };\n\n            xhr.send();\n        } else {\n            console.log('no theme path');\n            callback();\n        }\n    };\n\n    xhr.onerror = xhr.ontimeout = function ( ) {\n        // window.top.console.log('theme on error, on timeout');\n        callback();\n    };\n\n    xhr.send();\n}\n\n\nfunction loadSettings ( globalOptions, callback ) {\n    //window.top.sharedBackend = sharedBackend;\n    console.log('USERS STORAGE');\n\n    app.stalker.request('storage/' + storageKey, {\n        onload: function ( error, data ) {\n            console.log('APP STORAGE LAODED ' + JSON.stringify(data));\n\n            if ( error ) {\n                app.stalker.request('storage/', {\n                    method: 'POST',\n                    body: JSON.stringify({key: storageKey, value: '{}'})\n                });\n                window.storage = {};\n            } else {\n                window.storage = JSON.parse(data.data.value);\n            }\n\n            app.stalker.request('users/' + app.stalker.session.userId + '/settings', {\n                onload: function ( error, settingsResponse ) {\n                    var packages      = {},\n                        sharedBackend = require('../modules/shared.backend');\n\n\n                    core.config.apps.forEach(function ( appConfig ) {\n                        if ( appConfig.type === 'app' ) {\n                            packages[appConfig.packageName] = appConfig;\n\n                            return true;\n                        }\n\n                        return false;\n                    });\n\n                    if ( !error && settingsResponse ) {\n                        if ( PLATFORM === 'MAG' ) {\n                            if ( settingsResponse.data.show_after_loading === 'last_channel' ) {\n                                if ( packages['magcore-app-tv'] ) {\n                                    core.taskManager.setHomeApp(packages['magcore-app-tv']);\n                                }\n                            }\n                        }\n\n                        app.parentPassword = settingsResponse.data.parent_password;\n                        /* eslint max-len: 0 */\n                        core.environment.audioPrimaryLanguage = settingsResponse.data.pri_audio_lang || settingsResponse.data.languages[0];\n                        core.environment.audioSecondaryLanguage = settingsResponse.data.sec_audio_lang || settingsResponse.data.languages[1];\n                        core.environment.subtitlesPrimaryLanguage = settingsResponse.data.pri_subtitle_lang || settingsResponse.data.languages[0];\n                        core.environment.subtitlesSecondaryLanguage = settingsResponse.data.sec_subtitle_lang || settingsResponse.data.languages[1];\n\n                        sharedBackend.instance.settings = settingsResponse.data;\n                        parent.extendCorePrototype('environment', core.environment);\n\n                        require('../modules/shared.backend').instance.emit('ready');\n                    }\n                    callback();\n                },\n                onerror: function ()  {\n                    callback(true);\n                },\n                ontimeout: function ()  {\n                    callback(true);\n                }\n            });\n        },\n        onerror: function ()  {\n            callback(true);\n        },\n        ontimeout: function ()  {\n            callback(true);\n        }\n    });\n\n    parent.extendCorePrototype('Storage', require('../modules/storage'));\n}\n\n\nfunction loadModules ( callback ) {\n    app.stalker.request('modules', {\n        onload: function ( error, data ) {\n            var map = {\n                    // media_browser: 'media_browser',\n                    'magcore-app-tv': 'tv',\n                    // apps: 'apps',\n                    // dvb: 'dvb',\n                    // tv_archive: 'tv_archive',\n                    // time_shift: 'time_shift',\n                    // time_shift_local: 'time_shift_local',\n                    // 'epg.reminder': 'epg.reminder',\n                    // 'epg.recorder': 'epg.recorder',\n                    // 'epg': 'epg',\n                    // 'epg.simple': 'epg.simple',\n                    'magcore-app-video-club': 'vclub',\n                    'magcore-app-audio-club': 'audioclub',\n                    'magcore-app-magic-cast': 'magiccast',\n                    // 'downloads_dialog': 'downloads_dialog',\n                    // 'downloads': 'downloads',\n                    // 'karaoke': 'karaoke',\n                    'magcore-app-radio': 'radio',\n                    // 'weather.current': 'weather.current',\n                    // 'widget.audio': 'widget.audio',\n                    // 'widget.radio': 'widget.radio',\n                    // 'records': 'records',\n                    // 'remotepvr': 'remotepvr',\n                    // 'pvr_local': 'pvr_local',\n                    'magcore-app-settings': 'settings',\n                    // 'course.nbu': 'course.nbu',\n                    // 'weather.day': 'weather.day',\n                    // 'cityinfo': 'cityinfo',\n                    // 'horoscope': 'horoscope',\n                    // 'anecdote': 'anecdote',\n                    // 'game.mastermind': 'game.mastermind',\n                    'magcore-app-personal-account': 'account'\n                    // 'demo': 'demo',\n                    // 'infoportal': 'infoportal',\n                    // 'internet': 'internet',\n                    // 'service_management': 'service_management',\n                    // 'logout': 'logout',\n                    // 'account_menu': 'account_menu'\n                },\n                originPackages   = core.packages,\n                resolvedPackages = [];\n\n            if ( !error && data ) {\n                originPackages.forEach(function ( item ) {\n                    var originName;\n\n                    if ( item.type === 'app' ) {\n                        originName = item.packageName.split('-');\n                        // remove platform postfix\n                        originName.pop();\n                        originName = originName.join('-');\n                        if ( data.data.indexOf(map[originName]) !== -1 ) {\n                            resolvedPackages.push(item);\n                        }\n                    } else {\n                        resolvedPackages.push(item);\n                    }\n                });\n                core.updatePackages(resolvedPackages);\n            }\n\n            console.log('modules loaded and parsed');\n\n            loadSettings(core.config.options, callback);\n        },\n        onerror: function ()  {\n            console.log('loadModules onerror ');\n\n            callback(true);\n        },\n        ontimeout: function ()  {\n            console.log('loadModules ontimeout ');\n\n            callback(true);\n        }\n    });\n}\n\n\nfunction login ( credentials, callback ) {\n    window.pmlLabelError.innerText = '';\n    window.pmlLabelError.className = '';\n    inputLogin.$node.classList.remove('error');\n    inputPassword.$node.classList.remove('error');\n    inputServerAddress.$node.classList.remove('error');\n    inputActivateCode.$node.classList.remove('error');\n    app.stalker.auth.login(credentials, function ( error, response ) {\n        window.top.console.log('login error: ' + error);\n        if ( error ) {\n            callback(error, response);\n        } else {\n            if ( requestCallback ) {\n                requestCallback();\n            }\n            requestCallback = null;\n\n            loadTheme(function ( error ) {\n                if ( error ) {\n                    callback(error);\n\n                    return;\n                }\n\n                loadModules(function ( error ) {\n                    if ( error ) {\n                        callback(error);\n\n                        return;\n                    }\n\n                    core.call('hide');\n                    core.call('blur');\n\n                    core.events['show'] = null;\n                    core.emit('ready', {stop: false});\n                    callback(null, response);\n                });\n            });\n        }\n    });\n}\n\n\nfunction preventedKeydown ( event ) {\n    event.preventDefault();\n}\n\n\nfunction showApp ( callback ) {\n    requestCallback = callback;\n    core.emit('show');\n    core.call('show');\n    core.call('focus');\n}\n\n\nfunction errorNotification ( input ) {\n    window.pmlLabelError.innerText = gettext('Error.') + ' ' + errorData[input.$node.id].text;\n    window.pmlLabelError.className = 'visible ' + errorData[input.$node.id].className;\n    input.focus();\n    input.$node.classList.add('error');\n    buttonSubmit.locked = false;\n}\n\n\nfunction setErrorPosition ( position ) {\n    switch ( position ) {\n        case positions.login:\n            window.pmlLabelError.className = 'visible';\n            inputLogin.$node.classList.add('error');\n            inputPassword.$node.classList.add('error');\n            inputLogin.focus();\n            break;\n\n        case positions.password:\n            window.pmlLabelError.className = 'visible passwordError';\n            inputLogin.$node.classList.add('error');\n            inputPassword.$node.classList.add('error');\n            inputLogin.focus();\n            break;\n\n        case positions.serverAddress:\n            window.pmlLabelError.className = 'visible addressError';\n            inputActivateCode.focus();\n            inputActivateCode.$node.classList.add('error');\n            break;\n\n        case positions.licenseKey:\n            window.pmlLabelError.className = 'visible licenseError';\n            inputActivateCode.focus();\n            inputActivateCode.$node.classList.add('error');\n            break;\n\n        case positions.loginButton:\n            window.pmlLabelError.className = 'visible unknownError';\n            break;\n    }\n}\n\n\nfunction errorHandler ( code ) {\n    switch ( code ) {\n        case 'Username or password is incorrect':\n            window.pmlLabelError.innerText = gettext('Incorrect login or password. Please try again');\n            // inputLogin.focus();\n            // inputLogin.$node.classList.add('error');\n            // inputPassword.$node.classList.add('error');\n            setErrorPosition(positions.login);\n            break;\n\n        case 'Activation code not found':\n        case 'License key not found':\n            window.pmlLabelError.innerText = gettext('License key not found');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Operator ID mismatch':\n            window.pmlLabelError.innerText = gettext('The License Key doesn\\'t work for this portal. Please contact your Key provider.');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Incorrect code. Please try again.':\n        case 'Incorrect key. Please try again.':\n            window.pmlLabelError.innerText = gettext('Incorrect key. Please try again.');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Activation code missing':\n        case 'License key missing':\n            window.pmlLabelError.innerText = gettext('License key missing');\n            setErrorPosition(positions.licenseKey);\n\n            // window.pmlLabelError.className = 'visible licenseError';\n            // inputActivateCode.focus();\n            // inputActivateCode.$node.classList.add('error');\n            break;\n\n        case 'Meta data mismatch':\n            window.pmlLabelError.innerText = gettext('The code you’ve entered has already been ' +\n                'activated on another device. Please contact the code provider.');\n\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Reached limit the number of codes for user.':\n            window.pmlLabelError.innerText = gettext('Reached limit the number of codes for user.');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Certificate server error - unable to create certificate':\n        case 'Unable to decode certificate server response':\n            window.pmlLabelError.innerText = gettext('The license key has not been verified. Please contact your service provider.');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        case 'Automatic activation code issuing disabled for user.':\n            window.pmlLabelError.innerText = gettext('The license key has not been issued. Please contact your service provider.');\n            setErrorPosition(positions.licenseKey);\n            break;\n\n        default:\n            window.pmlLabelError.innerText = code || gettext('Error');\n            setErrorPosition(positions.loginButton);\n            break;\n    }\n}\n\n\nfunction errorNetworkNotification ( interval ) {\n    clearInterval(interval);\n    window.pmlLabelError.innerText = gettext('No network connection');\n    window.pmlLabelError.className = 'visible unknownError';\n    buttonSubmit.locked = false;\n}\n\n\n//instance creation\npage = new Page({\n    focusable: false,\n    $node: window.pageMultiLogin\n});\n\ninputLogin = new FakeInput({\n    $node: window.pmlInputLogin,\n    placeholder: gettext('Login'),\n    // value: '6',\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    this.$node.classList.remove('error');\n                    inputPassword.$node.classList.remove('error');\n                    inputPassword.focus();\n                    window.pmlLabelError.innerText = '';\n                    window.pmlLabelError.className = '';\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n\ninputPassword = new FakeInput({\n    $node: window.pmlInputPassword,\n    placeholder: gettext('Password'),\n    type: 'password',\n    // value: '6',\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    this.$node.classList.remove('error');\n                    // if ( inputServerAddress.visible ) {\n                    inputServerAddress.focus();\n                    // } else {\n                    //     buttonSubmit.focus();\n                    // }\n                    break;\n\n                case keys.up:\n                    this.$node.classList.remove('error');\n                    inputLogin.focus();\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n\ninputServerAddress = new FakeInput({\n    $node: window.pmlServerAddress,\n    placeholder: gettext('Portal'),\n    scheme: 'http',\n    // value: 'http://10.118.48.6',\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    this.$node.classList.remove('error');\n                    inputActivateCode.focus();\n                    window.pmlLabelError.innerText = '';\n                    window.pmlLabelError.className = '';\n                    break;\n\n                case keys.up:\n                    this.$node.classList.remove('error');\n                    inputPassword.focus();\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n\ninputActivateCode = new FakeInput({\n    $node: window.pmlInputActivateCode,\n    placeholder: gettext('License key'),\n    size: 12,\n    // value: '123456789012',\n    events: {\n        keydown: function ( event ) {\n            FakeInput.defaultEvents.keydown.call(this, event);\n\n            switch ( event.code ) {\n                case keys.down:\n                    this.$node.classList.remove('error');\n                    buttonSubmit.focus();\n                    window.pmlLabelError.innerText = '';\n                    window.pmlLabelError.className = '';\n                    break;\n\n                case keys.up:\n                    this.$node.classList.remove('error');\n                    inputServerAddress.focus();\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n});\n\naccountsData = accountManager.get();\n\naccountList = new List({\n    $node: window.pmlAccountList,\n    type: List.prototype.TYPE_VERTICAL,\n    size: accountsData.length < 3 ? accountsData.length : 3,\n    focusIndex: 0,\n    render: function ( $node, data ) {\n        if ( !$node.ready ) {\n            $node.$buttons = [];\n            $node.$buttons.push($node.appendChild(document.createElement('div')));\n            $node.$buttons[0].className = 'button account';\n\n            $node.$nameContainer = $node.$buttons[0].appendChild(document.createElement('div'));\n            $node.$nameContainer.className = 'name-container';\n\n            $node.$nameContainer.appendChild(document.createElement('div'));\n            $node.$nameContainer.firstChild.className = 'label';\n            $node.$nameContainer.firstChild.innerText = gettext('Login');\n            $node.$login = $node.$nameContainer.appendChild(document.createElement('div'));\n            $node.$login.className = 'account';\n\n            $node.$buttons[0].appendChild(document.createElement('div'));\n            $node.$buttons[0].lastChild.className = 'theme-icon theme-icon-more';\n\n            $node.$buttons.push($node.appendChild(document.createElement('div')));\n            $node.lastChild.className = 'button edit';\n\n            $node.$buttons.push($node.appendChild(document.createElement('div')));\n            $node.lastChild.className = 'button remove';\n            $node.ready = true;\n        }\n\n        $node.$login.innerText = data.login;\n        $node.buttonFocusIndex = 0;\n    },\n    events: {\n        overflow: function () {\n            //if ( event.direction === keys.down ) {}\n        },\n        keydown: function ( event ) {\n            var $node = this.$focusItem,\n                index;\n\n            switch ( event.code ) {\n                case keys.right:\n                    if ( $node.buttonFocusIndex < 2 ) {\n                        $node.$buttons[$node.buttonFocusIndex].classList.remove('focus');\n                        ++$node.buttonFocusIndex;\n                        $node.$buttons[$node.buttonFocusIndex].classList.add('focus');\n                    }\n                    break;\n                case keys.left:\n                    if ( $node.buttonFocusIndex > 0 ) {\n                        $node.$buttons[$node.buttonFocusIndex].classList.remove('focus');\n                        --$node.buttonFocusIndex;\n                        $node.$buttons[$node.buttonFocusIndex].classList.add('focus');\n                    }\n                    break;\n\n                case keys.back:\n                    window.top.platformApi.exit();\n                    break;\n\n                case keys.pageUp:\n                case keys.pageDown:\n                case keys.home:\n                case keys.end:\n                    // cursor move only on arrow keys\n                    if ( PLATFORM === 'SMARTTV' ) {\n                        document.body.style.display = 'none';\n                        setTimeout(function () {\n                            document.body.style.display = '';\n                        }, 0);\n                    }\n                    this.move(event.code);\n                    break;\n                case keys.ok:\n                    this.emit('click:item', {$item: $node, event: event});\n                    break;\n\n                case keys.up:\n                    setTimeout(function () {\n                        accountList.$node.style.opacity = '';\n                    }, 0);\n                    accountList.$node.style.opacity = '0.5';\n                    index = this.data.indexOf($node.data);\n                    if ( index > 0 ) {\n                        if ( this.$focusItem === this.$body.firstChild && accountList.data.length > 3 ) {\n                            buttonScrollUp.focus();\n                            console.log('focus up button');\n                        } else {\n                            this.move(event.code);\n                            updateAccountsCounter(index - 1);\n                        }\n                    }\n                    break;\n\n                case keys.down:\n                    setTimeout(function () {\n                        accountList.$node.style.opacity = '';\n                    }, 0);\n                    accountList.$node.style.opacity = '0.5';\n                    index = this.data.indexOf($node.data);\n                    if ( (index + 1) < this.data.length ) {\n                        if ( index > 1 && accountList.data.length > 3 ) {\n                            buttonScrollDown.focus();\n                            console.log('focus down button');\n                        } else {\n                            updateAccountsCounter(index + 1);\n                            this.move(event.code);\n                        }\n                    } else {\n                        buttonNewAccount.focus();\n                    }\n            }\n        },\n        'focus:item': function ( event ) {\n            console.log('focus item');\n            if ( event.$prev ) {\n                event.$prev.$buttons[1].style.display = 'none';\n                event.$prev.$buttons[2].style.display = 'none';\n                event.$prev.$buttons[event.$prev.buttonFocusIndex].classList.remove('focus');\n            }\n\n            event.$curr.buttonFocusIndex = 0;\n            event.$curr.$buttons[event.$curr.buttonFocusIndex].classList.add('focus');\n        },\n        'click:item': function ( event ) {\n            var self = this,\n                focusIndex, viewIndex;\n\n            if ( event.event && event.event.srcElement ) {\n                // mouse click\n                if ( event.event.srcElement === event.$item.$buttons[1] ) {\n                    event.$item.buttonFocusIndex = 1;\n                } else if ( event.event.srcElement === event.$item.$buttons[2] ) {\n                    event.$item.buttonFocusIndex = 2;\n                } else {\n                    event.$item.buttonFocusIndex = 0;\n                }\n            }\n\n            switch ( event.$item.buttonFocusIndex ) {\n                case 0:\n                    window.pmlAuthError.className = '';\n                    if ( typeof window.navigator.onLine !== 'undefined' && !window.navigator.onLine ) {\n                        window.pmlLabelError.innerText = gettext('No network connection');\n                        window.pmlLabelError.className = 'visible';\n                    } else {\n                        login(event.$item.data, function ( error, response ) {\n                            if ( error ) {\n                                if ( error === 'onerror 0 : ' ) {\n                                    window.pmlLabelError.innerText = gettext('Portal address entered incorrectly');\n                                    window.pmlLabelError.className = 'visible addressError';\n                                    inputServerAddress.focus();\n                                    inputServerAddress.$node.classList.add('error');\n                                } else if ( response && response.error_description ) {\n                                    window.pmlAuthError.innerText = (response.error_description);\n                                } else {\n                                    window.pmlAuthError.innerText = gettext('Error');\n                                }\n\n                                if ( event.$item === self.$body.firstChild ) {\n                                    window.pmlAuthError.className = 'visible';\n                                } else if ( event.$item === self.$body.lastChild ) {\n                                    window.pmlAuthError.className = 'visible third';\n                                } else {\n                                    window.pmlAuthError.className = 'visible second';\n                                }\n                            } else {\n                                accountManager.get().indexOf(event.$item.data);\n                                accountManager.update(event.$item.data);\n                            }\n                        });\n                    }\n                    break;\n\n                case 1:\n                    console.log('edit');\n                    setTimeout(function () {\n                        window.pmlAccountsContainer.className = 'hidden';\n                        window.pmlLabelError.className = '';\n                        window.pmlFormContainer.className = '';\n                        inputLogin.focus();\n                        initCreateForm(event.$item.data, true);\n                    });\n                    break;\n\n                case 2:\n                    console.log('remove');\n                    focusIndex = this.$focusItem.index;\n                    viewIndex = this.viewIndex;\n                    console.log(focusIndex);\n                    this.$focusItem.$buttons[this.$focusItem.buttonFocusIndex].classList.remove('focus');\n                    this.$focusItem = this.viewIndex = null;\n                    accountManager.remove(event.$item.data);\n                    if ( this.size === 1 ) {\n                        this.data = [];\n                        window.pmlAccountsContainer.className = 'hidden';\n                        window.pmlLabelError.className = '';\n                        window.pmlFormContainer.className = '';\n                        inputLogin.focus();\n                    } else if ( this.data.length <= 3 ) {\n                        --this.size;\n                        this.init({\n                            size: this.size,\n                            viewIndex: viewIndex,\n                            focusIndex: focusIndex,\n                            data: accountManager.get()\n                        });\n                    } else {\n                        this.init({\n                            size: 3,\n                            viewIndex: viewIndex,\n                            focusIndex: focusIndex,\n                            data: accountManager.get()\n                        });\n                    }\n                    break;\n            }\n        }\n    },\n    data: accountsData\n});\n\nbuttonSubmit = new Button({\n    $node: window.pmlButtonSubmit,\n    value: gettext('Login')\n});\n\nbuttonNewAccount = new Button({\n    $node: window.pmlAddAccount,\n    value: gettext('Add account')\n});\n\nbuttonScrollUp = new Button({\n    $node: window.pmlAccountListButtonScrollUp,\n    // className: '',\n    events: {\n        click: function () {\n            if ( accountList.viewIndex > 0 ) {\n                accountList.renderView(accountList.viewIndex - 1);\n                updateAccountsCounter();\n                if ( accountList.viewIndex === 0 ) {\n                    accountList.focus();\n                    buttonScrollUp.disabled = true;\n                    buttonScrollUp.$node.className = 'transparent';\n                } else {\n                    buttonScrollDown.disabled = false;\n                    buttonScrollDown.$node.className = '';\n                }\n            }\n        },\n        focus: function () {\n            this.$node.className = 'focus';\n        },\n        blur: function () {\n            this.$node.className = '';\n        },\n        keydown: function ( event ) {\n            if ( event.code === keys.ok ) {\n                this.emit('click');\n            } else if ( event.code === keys.down ) {\n                accountList.focus();\n            }\n        }\n    }\n});\n\nbuttonScrollDown = new Button({\n    $node: window.pmlAccountListButtonScrollDown,\n    // className: '',\n    events: {\n        click: function () {\n            if ( accountList.data.length > (accountList.viewIndex + accountList.size) ) {\n                accountList.renderView(accountList.viewIndex + 1);\n                updateAccountsCounter();\n\n                if ( (accountList.viewIndex + accountList.size) === accountList.data.length ) {\n                    console.log(buttonScrollDown.$node.className);\n                    accountList.focus();\n                    buttonScrollDown.disabled = true;\n                    buttonScrollDown.$node.className = 'transparent';\n                }\n\n                buttonScrollUp.disabled = false;\n                buttonScrollUp.$node.className = '';\n            }\n        },\n        focus: function () {\n            this.$node.className = 'focus';\n        },\n        blur: function () {\n            this.$node.className = '';\n        },\n        keydown: function ( event ) {\n            if ( event.code === keys.ok ) {\n                this.emit('click');\n            } else if ( event.code === keys.up ) {\n                accountList.focus();\n            } else if ( event.code === keys.down ) {\n                buttonNewAccount.focus();\n            }\n        }\n    }\n});\n\nif ( accountList.data.length > 3 ) {\n    buttonScrollDown.disabled = false;\n    buttonScrollDown.$node.className = '';\n} else {\n    buttonScrollDown.disabled = true;\n    buttonScrollDown.$node.className = 'transparent';\n}\n\nbuttonScrollUp.disabled = true;\nbuttonScrollUp.$node.className = 'transparent';\n\ninputLogin.title = gettext('Enter login');\ninputPassword.title = gettext('Enter password');\ninputServerAddress.title = gettext('Portal');\ninputActivateCode.title = gettext('License key');\nwindow.pmlFormDescription1.innerHTML = gettext('Request this information from your IPTV service provider');\nwindow.pmlFormDescription2.innerHTML = gettext('Enter your License Key or buy a new one at <b>infomir.eu/pay</b>');\n\napp.stalker.oncredenitalsrequired = function ( callback ) {\n    var backend  = require('../modules/shared.backend').instance,\n        accounts = accountManager.get(),\n        session  = window.localStorage ? window.localStorage.getItem('ssession') : window.top.stbStorage.getItem('ssession');\n\n    if ( session ) {\n        try {\n            session = JSON.parse(session);\n        } catch ( exception ) {\n            session = null;\n        }\n    }\n\n    backend.withCredentials = true;\n\n    // if ( backend.host ) {\n    //     inputServerAddress.setValue(backend.host);\n    //     window.pmlFormBlock.className = 'simple';\n    //     inputServerAddress.hide();\n    //     inputServerAddress.setValue(backend.host);\n    //     inputActivateCode.hide();\n    //     window.pmlFormDescription1.innerHTML = '';\n    //     window.pmlFormDescription2.innerHTML = '';\n    //     window.pmlFormDescription3.innerHTML = '';\n    //     window.pmlLine.style.display = 'none';\n    //     window.pmlLineSmall.style.display = 'none';\n    //     buttonSubmit.$text.innerHTML = gettext('Login');\n\n    //     window.pmlFormContainer.className = '';\n    //     inputLogin.focus();\n    // } else {\n    //     window.pmlFormBlock.className = '';\n    //     inputServerAddress.$node.classList.remove('hidden');\n    //     inputActivateCode.$node.classList.remove('hidden');\n    // }\n\n    if ( session && accounts.length > 0 ) {\n        accounts.forEach(function ( item, index ) {\n            if ( item.latest ) {\n                if ( typeof window.navigator.onLine !== 'undefined' && !window.navigator.onLine ) {\n                    window.pmlAuthError.innerText = gettext('No network connection');\n                    showApp(callback);\n\n                    return;\n                }\n\n                login(item, function ( error, response ) {\n                    if ( error ) {\n                        if ( error === 'onerror 0 : ' ) {\n                            window.pmlLabelError.innerText = gettext('Portal address entered incorrectly');\n                            window.pmlLabelError.className = 'visible addressError';\n                            inputServerAddress.focus();\n                            inputServerAddress.$node.classList.add('error');\n                        } else if ( response && response.error_description ) {\n                            window.pmlAuthError.innerText = (response.error_description);\n                        } else {\n                            window.pmlAuthError.innerText = gettext('Error');\n                        }\n\n                        showApp(callback);\n                    }\n                });\n            } else if ( index === accounts.length - 1 ) {\n                showApp(callback);\n            }\n        });\n    } else {\n        showApp(callback);\n    }\n};\n\npage.addListener('show', function () {\n    var accounts = accountManager.get();\n\n    if ( accounts.length > 0 ) {\n        window.pmlAccountsContainer.className = '';\n        accountList.focus();\n        updateAccountsCounter(0);\n    } else {\n        window.pmlLabelError.className = '';\n        window.pmlFormContainer.className = '';\n        inputLogin.focus();\n\n        if ( !app.licenseAgree ) {\n            app.route(app.pages.eula);\n        }\n    }\n});\n\npage.addListener('keydown', function ( event ) {\n    if ( event.code === keys.back /*&& buttonSubmit.state === 'update'*/ ) {\n        if ( accountList.data.length ) {\n            if ( page.activeComponent === accountList || page.activeComponent === buttonNewAccount ) {\n                window.top.platformApi.exit();\n            }\n            buttonSubmit.state = null;\n            buttonSubmit.$text.innerHTML = gettext('Add account');\n\n            window.pmlFormContainer.className = 'hidden';\n            window.pmlAccountsContainer.className = '';\n            accountList.focus();\n        } else {\n            window.top.platformApi.exit();\n        }\n    }\n    //  else if ( event.code === keys.f4 ) {\n    //     app.route(app.pages.eula);\n    // }\n});\n\nbuttonNewAccount.addListener('click', function () {\n    window.pmlAccountsContainer.className = 'hidden';\n    window.pmlLabelError.className = '';\n    window.pmlFormContainer.className = '';\n    inputLogin.focus();\n    window.pmlAuthError.className = '';\n    initCreateForm({});\n});\n\nbuttonNewAccount.addListener('keydown', function ( event ) {\n    if ( event.code === keys.up ) {\n        window.pmlAuthError.className = '';\n        if ( buttonScrollDown.disabled ) {\n            accountList.focus();\n        } else {\n            buttonScrollDown.focus();\n        }\n    }\n});\n\nbuttonSubmit.addListener('keydown', function ( event ) {\n    if ( event.code === keys.up ) {\n        // if ( inputActivateCode.visible ) {\n        inputActivateCode.focus();\n        // } else {\n        //     inputPassword.focus();\n        // }\n    }\n});\n\nbuttonSubmit.addListener('click', function () {\n    var submitInterval;\n\n    if ( buttonSubmit.locked ) {\n        return;\n    }\n\n    buttonSubmit.locked = true;\n\n    if ( typeof window.navigator.onLine !== 'undefined' ) {\n        submitInterval = setInterval(function () {\n            if ( PLATFORM !== 'MAG' ) {\n                if ( !window.navigator.onLine ) {\n                    errorNetworkNotification(submitInterval);\n                }\n            }\n        }, 5000);\n    }\n\n    // var backend = require('../modules/shared.backend').instance;\n\n    // inputLogin.setValue('samsungdev');\n    // inputServerAddress.setValue('http://smart-portal.infomir.com.ua/stalker_portal/');\n    // inputPassword.setValue('4aijBoUGK5');\n    // if ( DEVELOP ) {\n    //     inputLogin.setValue('stv');\n    //     inputPassword.setValue('1111');\n    //     inputServerAddress.setValue('http://192.168.1.13/stalker_portal/');\n    //     inputActivateCode.setValue('3110A46806C7');\n    //     if ( PLATFORM === 'SMARTTV' ) {\n    //         inputLogin.setValue('smart');\n    //         inputPassword.setValue('1111');\n    //         inputServerAddress.setValue('http://ad.h.od.ua/stalker_portal/');\n    //         inputActivateCode.setValue('114073406EEB');\n    //     }\n    // }\n    // reset style\n    window.pmlLabelError.className = '';\n\n    if ( inputLogin.value.length === 0 ) {\n        // empty login\n        errorNotification(inputLogin);\n    } else if ( inputPassword.value.length === 0 ) {\n        // empty password\n        errorNotification(inputPassword);\n    } else if ( inputServerAddress.value.length === 0 ) {\n        // empty password\n        errorNotification(inputServerAddress);\n    } else if ( inputActivateCode.value.length !== 0 && inputActivateCode.value.length !== 12 ) {\n        // empty password\n        errorNotification(inputActivateCode);\n    } else if ( PLATFORM !== 'MAG' && typeof window.navigator.onLine !== 'undefined' && !window.navigator.onLine ) {\n        errorNetworkNotification(submitInterval);\n    } else {\n        login({\n            password: inputPassword.value,\n            login: inputLogin.value,\n            address: inputServerAddress.value,\n            activationCode: inputActivateCode.value\n        }, function ( error, response ) {\n            if ( typeof window.navigator.onLine !== 'undefined' ) {\n                clearInterval(submitInterval);\n            }\n\n            buttonSubmit.locked = false;\n\n            if ( error ) {\n                console.log(JSON.stringify(error));\n                console.log(typeof error.indexOf === 'function' && error.indexOf('404') !== -1);\n                if ( error === 'onerror 0 : ' || error === '0 : ' ) {\n                    window.pmlLabelError.innerText = gettext('Portal address entered incorrectly');\n                    window.pmlLabelError.className = 'visible addressError';\n                    inputServerAddress.focus();\n                    inputServerAddress.$node.classList.add('error');\n                } else if ( typeof error.indexOf === 'function' && error.indexOf('404') !== -1 ) {\n                    window.pmlLabelError.innerText = gettext('Ministra Player is compatible only with the service of IPTV providers who use Stalker Middleware 5.2 or Ministra TV platform.');\n                    window.pmlLabelError.className = 'visible addressError';\n                    inputServerAddress.focus();\n                    inputServerAddress.$node.classList.add('error');\n                } else if ( response && response.error_description ) {\n                    errorHandler(response.error_description);\n                } else {\n                    window.pmlLabelError.innerText = gettext('Error. Please try again.');\n                    window.pmlLabelError.className = 'visible';\n                }\n            } else {\n                if ( buttonSubmit.state === 'update' ) {\n                    buttonSubmit.state = null;\n                    accountManager.update({\n                        password: inputPassword.value,\n                        login: inputLogin.value,\n                        address: inputServerAddress.value,\n                        activationCode: inputActivateCode.value\n                    }, buttonSubmit.updateId);\n                } else {\n                    if ( response.activation_code ) {\n                        inputActivateCode.setValue(response.activation_code);\n                    }\n\n                    accountManager.add({\n                        password: inputPassword.value,\n                        login: inputLogin.value,\n                        address: inputServerAddress.value,\n                        activationCode: inputActivateCode.value\n                    });\n                }\n\n                buttonSubmit.$text.innerHTML = gettext('Add account');\n                window.pmlFormContainer.className = 'hidden';\n\n                accountsData = accountManager.get();\n                accountList.init({\n                    size: accountsData.length < 3 ? accountsData.length : 3,\n                    viewIndex: 0,\n                    focusIndex: 0,\n                    data: accountManager.get()\n                });\n\n                window.pmlAccountsContainer.className = '';\n                accountList.focus();\n            }\n        });\n    }\n});\n\npage.addListener('show', function () {\n    window.addEventListener('keydown', preventedKeydown);\n});\n\npage.addListener('hide', function () {\n    window.removeEventListener('keydown', preventedKeydown);\n});\n\n\n// public\nmodule.exports = page;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-list');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-list';\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint-disable */\n\n'use strict';\n\nvar Component = require('spa-component'),\n    keys      = require('spa-keys');\n\n\n/**\n * Mouse click event.\n *\n * @event module:stb/ui/list~List#click:item\n *\n * @type {Object}\n * @property {Element} $item clicked HTML item\n * @property {Event} event click event data\n */\n\n\n/**\n * Base list implementation.\n *\n * Each data item can be either a primitive value or an object with these fields:\n *\n *  Name    | Description\n * ---------|-------------\n *  value   | actual cell value to render\n *  mark    | is it necessary or not to render this cell as marked\n *\n * @constructor\n * @extends Component\n *\n * @param {Object}   [config={}]          init parameters (all inherited from the parent)\n * @param {Array}    [config.data=[]]     component data to visualize\n * @param {function} [config.render]      method to build each grid cell content\n * @param {function} [config.navigate]    method to move focus according to pressed keys\n * @param {number}   [config.size=5]      amount of visible items on a page\n * @param {number}   [config.viewIndex=0] move view window to this position on init\n * @param {number}   [config.focusIndex]  list item index to make item focused (move view window to this position)\n * @param {boolean}  [config.cycle=true]  allow or not to jump to the opposite side of a list when there is nowhere to go next\n * @param {boolean}  [config.scroll=null] associated ScrollBar component link\n * @param {Object}   [config.provider]      data provider\n *\n * @fires module:stb/ui/list~List#click:item\n */\nfunction List ( config ) {\n    // current execution context\n    //var self = this;\n\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.type && Number(config.type) !== config.type ) {\n            throw new Error(__filename + ': config.type must be a number');\n        }\n    }\n\n    /**\n     * Link to the currently focused DOM element.\n     *\n     * @type {Element}\n     */\n    this.$focusItem = null;\n\n    /**\n     * Position of the visible window to render.\n     *\n     * @type {number}\n     */\n    this.viewIndex = null;\n\n    /**\n     * Component data to visualize.\n     *\n     * @type {Array}\n     */\n    this.data = [];\n\n    /**\n     * Component orientation.\n     *\n     * @type {number}\n     */\n    this.type = this.TYPE_VERTICAL;\n\n    /**\n     * Amount of visible items on a page.\n     *\n     * @type {number}\n     */\n    this.size = 5;\n\n    /**\n     * Allow or not to jump to the opposite side of a list when there is nowhere to go next.\n     *\n     * @type {boolean}\n     */\n    this.cycle = false;\n\n    /**\n     * Associated ScrollBar component link.\n     *\n     * @type {ScrollBar}\n     */\n    this.scroll = null;\n\n    // horizontal or vertical\n    if ( config.type ) {\n        // apply\n        this.type = config.type;\n    }\n\n    /**\n     * Associated data provider\n     *\n     * @type {Provider}\n     */\n    this.provider = null;\n\n\n    // set default className if classList property empty or undefined\n    //config.className = 'list ' + (config.className || '');\n\n    if ( this.type === this.TYPE_HORIZONTAL ) {\n        config.className += ' horizontal';\n    }\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // component setup\n    this.init(config);\n}\n\n\n// inheritance\nList.prototype = Object.create(Component.prototype);\nList.prototype.constructor = List;\n\n// set component name\nList.prototype.name = 'spa-component-list';\n\nList.prototype.TYPE_VERTICAL   = 1;\nList.prototype.TYPE_HORIZONTAL = 2;\n\n\n/**\n * Fill the given item with data.\n *\n * @param {Element} $item item DOM link\n * @param {*} data associated with this item data\n */\nList.prototype.renderItemDefault = function ( $item, data ) {\n    $item.innerText = data.value;\n};\n\n\n/**\n * Method to build each list item content.\n * Can be redefined to provide custom rendering.\n *\n * @type {function}\n */\nList.prototype.renderItem = List.prototype.renderItemDefault;\n\n\n/**\n * List of all default event callbacks.\n *\n * @type {Object.<string, function>}\n */\nList.prototype.defaultEvents = {\n    /**\n     * Default method to handle mouse wheel events.\n     *\n     * @param {Event} event generated event\n     */\n    mousewheel: function ( event ) {\n        // scrolling by Y axis\n        if ( this.type === this.TYPE_VERTICAL && event.wheelDeltaY ) {\n            this.move(event.wheelDeltaY > 0 ? keys.up : keys.down);\n        }\n\n        // scrolling by X axis\n        if ( this.type === this.TYPE_HORIZONTAL && event.wheelDeltaX ) {\n            this.move(event.wheelDeltaX > 0 ? keys.left : keys.right);\n        }\n    },\n\n    /**\n     * Default method to handle keyboard keydown events.\n     *\n     * @param {Object} event generated event\n     */\n    keydown: function ( event ) {\n        switch ( event.code ) {\n            case keys.up:\n            case keys.down:\n            case keys.right:\n            case keys.left:\n            case keys.pageUp:\n            case keys.pageDown:\n            case keys.home:\n            case keys.end:\n                // cursor move only on arrow keys\n                this.move(event.code);\n                break;\n            case keys.enter:\n                // there are some listeners\n                if ( this.events['click:item'] && this.$focusItem ) {\n                    // notify listeners\n                    this.emit('click:item', {$item: this.$focusItem, event: event});\n                }\n                break;\n        }\n    }\n};\n\n\n/**\n * Make all the data items identical.\n * Wrap to objects if necessary.\n *\n * @param {Array} data incoming array\n * @return {Array} reworked incoming data\n */\nfunction normalize ( data ) {\n    var i, item;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( !Array.isArray(data) ) {\n            throw new Error(__filename + ': wrong data type');\n        }\n    }\n\n    // rows\n    for ( i = 0; i < data.length; i++ ) {\n        // cell value\n        item = data[i];\n        // primitive value\n        if ( typeof item !== 'object' ) {\n            // wrap with defaults\n            item = data[i] = {\n                value: data[i]\n            };\n        }\n\n        if ( DEVELOP ) {\n            // if ( !('value' in item) ) {\n            //     throw new Error(__filename + ': field \"value\" is missing');\n            // }\n            if ( ('mark' in item) && Boolean(item.mark) !== item.mark ) {\n                throw new Error(__filename + ': item.mark must be boolean');\n            }\n        }\n    }\n\n    return data;\n}\n\n\n/**\n * Init or re-init of the component inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nList.prototype.init = function ( config ) {\n    var self     = this,\n        currSize = this.$body.children.length,\n        /**\n         * Item mouse click handler.\n         *\n         * @param {Event} event click event data\n         *\n         * @this Element\n         *\n         * @fires module:stb/ui/list~List#click:item\n         */\n        onClick = function ( event ) {\n            if ( this.data ) {\n                self.focusItem(this);\n\n                // there are some listeners\n                if ( self.events['click:item'] ) {\n                    // notify listeners\n                    self.emit('click:item', {$item: this, event: event});\n                }\n            }\n        },\n        item, i;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n    }\n\n    // apply cycle behaviour\n    if ( config.cycle !== undefined ) { this.cycle = config.cycle; }\n\n    // apply ScrollBar link\n    if ( config.scroll ) { this.scroll = config.scroll; }\n\n    // apply data provider\n    if ( config.provider ) { this.provider = config.provider; }\n\n\n    // custom render method\n    if ( config.render ) {\n        if ( DEVELOP ) {\n            if ( typeof config.render !== 'function' ) {\n                throw new Error(__filename + ': wrong config.render type');\n            }\n        }\n\n        // apply\n        this.renderItem = config.render;\n    }\n\n    // list items amount on page\n    if ( config.size ) {\n        if ( DEVELOP ) {\n            if ( Number(config.size) !== config.size ) {\n                throw new Error(__filename + ': config.size must be a number');\n            }\n            if ( config.size <= 0 ) {\n                throw new Error(__filename + ': config.size should be positive');\n            }\n        }\n\n        // apply\n        this.size = config.size;\n    }\n\n    // geometry has changed or initial draw\n    if ( this.size !== currSize ) {\n        // non-empty list\n        if ( currSize > 0 ) {\n            // clear old items\n            this.$body.innerText = null;\n        }\n\n        // create new items\n        for ( i = 0; i < this.size; i++ ) {\n            item = document.createElement('div');\n            item.index = i;\n            item.className = 'item';\n\n            item.addEventListener('click', onClick);\n            this.$body.appendChild(item);\n        }\n    }\n\n    if ( this.provider ) {\n        this.provider.get( null, function ( error, data ) {\n            if ( error ) {\n                if ( self.events['data:error'] ) {\n                    /**\n                     * Provider get error while take new data\n                     *\n                     * @event module:stb/ui/list~List#data:error\n                     */\n                    self.emit('data:error', error);\n                }\n            } else {\n                if ( data ) {\n                    config.data = data;\n                    self.setData(config);\n                    if ( self.scroll ) {\n                        self.scroll.init({\n                            realSize: self.provider.maxCount,\n                            viewSize: self.provider.size,\n                            value: self.provider.head + self.provider.pos\n                        });\n                    }\n                }\n                if ( self.events['data:get'] ) {\n                    /**\n                     * Provider request new data\n                     *\n                     * @event module:stb/ui/list~List#data:get\n                     *\n                     * @type {Object}\n                     */\n                    self.emit('data:get');\n                }\n            }\n        });\n    } else if ( config.data ) {\n        this.setData(config);\n    }\n\n};\n\n/**\n * Set data and render inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nList.prototype.setData = function ( config ) {\n    // apply list of items\n\n    if ( config.data ) {\n        if ( DEVELOP ) {\n            if ( !Array.isArray(config.data) ) {\n                throw new Error(__filename + ': wrong config.data type');\n            }\n        }\n\n        // prepare user data\n        this.data = normalize(config.data);\n    }\n\n    // view window position\n    if ( DEVELOP ) {\n        if ( config.viewIndex !== undefined ) {\n            if ( Number(config.viewIndex) !== config.viewIndex ) {\n                throw new Error(__filename + ': config.viewIndex must be a number');\n            }\n            if ( config.viewIndex < 0 ) {\n                throw new Error(__filename + ': config.viewIndex should be positive');\n            }\n        }\n    }\n\n    // reset current view window position\n    this.viewIndex = null;\n\n    if ( this.$focusItem ) {\n        this.blurItem(this.$focusItem);\n    }\n\n    if ( this.scroll ) {\n        if ( this.provider ) {\n            if ( this.scroll.realSize !== this.provider.maxCount ) {\n                this.scroll.init({\n                    realSize: this.provider.maxCount,\n                    viewSize: this.provider.size,\n                    value: this.provider.head + this.provider.pos\n                });\n            }\n        } else {\n            this.scroll.init({\n                realSize: this.data.length,\n                viewSize: this.size,\n                value: config.viewIndex || 0\n            });\n        }\n    }\n\n    // set focus item\n    if ( config.focusIndex !== undefined && this.data.length ) {\n        if ( DEVELOP ) {\n            if ( Number(config.focusIndex) !== config.focusIndex ) {\n                throw new Error(__filename + ': config.focusIndex must be a number');\n            }\n            if ( config.focusIndex < 0 ) {\n                throw new Error(__filename + ': config.focusIndex should be positive');\n            }\n            // if ( config.focusIndex > this.data.length - 1 ) {\n            //     throw new Error(__filename + ': config.focusIndex should be less than data size');\n            // }\n        }\n\n        // jump to the necessary item\n        this.focusIndex(config.focusIndex);\n    } else {\n        // go to the first page\n        this.renderView(config.viewIndex || 0);\n    }\n};\n\n\n/**\n * Shift the visible view window event.\n *\n * @event module:stb/ui/list~List#move:view\n *\n * @type {Object}\n * @property {number} prevIndex previous view window position\n * @property {number} currIndex current view window position\n */\n\n\n/**\n * Draw the visible window.\n *\n * @param {number} index start position to render\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#move:view\n */\nList.prototype.renderView = function ( index ) {\n    var $item, i, itemData, prevIndex, currIndex;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( Number(index) !== index ) {\n            throw new Error(__filename + ': index must be a number');\n        }\n        if ( index < 0 ) {\n            throw new Error(__filename + ': index should be more than zero');\n        }\n        // if ( index >= this.data.length ) {\n        //     throw new Error(__filename + ': index should be less than data size');\n        // }\n    }\n\n    // has the view window position changed\n    if ( this.viewIndex !== index ) {\n        // save for emit\n        prevIndex = this.viewIndex;\n        // sync global pointer\n        this.viewIndex = currIndex = index;\n\n        // rebuild all visible items\n        for ( i = 0; i < this.size; i++ ) {\n            // shortcuts\n            $item    = this.$body.children[i];\n            itemData = this.data[index];\n\n            // real item or stub\n            if ( itemData ) {\n                // correct inner data/index and render\n                $item.data  = itemData;\n                $item.index = index;\n                this.renderItem($item, itemData);\n\n                // apply CSS\n                if ( itemData.mark ) {\n                    $item.classList.add('mark');\n                } else {\n                    $item.classList.remove('mark');\n                }\n            } else {\n                // nothing to render\n                $item.data = $item.index = undefined;\n                $item.innerHTML = '&nbsp;';\n                $item.ready = false;\n            }\n            index++;\n        }\n\n        // there are some listeners\n        if ( this.events['move:view'] ) {\n            // notify listeners\n            this.emit('move:view', {prevIndex: prevIndex, currIndex: currIndex});\n        }\n\n        // there are some listeners\n        if ( this.events['select:item'] ) {\n            this.emit('select:item', {$item: $item});\n        }\n\n        // update a linked scroll component\n        if ( this.scroll ) {\n            this.scroll.scrollTo(this.provider ? this.provider.head + this.provider.pos : this.viewIndex);\n        }\n\n        // full rebuild\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n/**\n * Jump to the opposite side.\n *\n * @event module:stb/ui/list~List#cycle\n *\n * @type {Object}\n * @property {number} direction key code initiator of movement\n */\n\n\n/**\n * Attempt to go beyond the edge of the list.\n *\n * @event module:stb/ui/list~List#overflow\n *\n * @type {Object}\n * @property {number} direction key code initiator of movement\n */\n\n\n/**\n * Move focus to the given direction.\n *\n * @param {number} direction arrow key code\n *\n * @fires module:stb/ui/list~List#cycle\n * @fires module:stb/ui/list~List#overflow\n */\nList.prototype.move = function ( direction ) {\n    var self = this,\n        force = false;\n\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( Number(direction) !== direction ) {\n            throw new Error(__filename + ': direction must be a number');\n        }\n    }\n\n    // empty list\n    if ( !this.data.length ) {\n        return;\n    }\n    switch ( direction ) {\n        case keys.left:\n            if ( this.type === this.TYPE_HORIZONTAL ) {\n                force = true;\n            } else {\n                break;\n            }\n        case keys.up:\n            if ( force || this.type === this.TYPE_VERTICAL ) {\n                if ( this.$focusItem && this.$focusItem.index > 0 ) {\n                    if ( this.$focusItem === this.$body.firstChild ) {\n                        this.renderView(this.viewIndex - 1);\n                    } else {\n                        this.focusItem(this.$focusItem.previousSibling);\n                    }\n                } else {\n                    if ( this.provider ) {\n                        this.provider.get(direction, function ( error, data, pos ) {\n                            if ( error ) {\n                                if ( self.events['data:error'] ) {\n                                    /**\n                                     * Provider get error while take new data\n                                     *\n                                     * @event module:stb/ui/list~List#data:error\n                                     */\n                                    self.emit('data:error', error);\n                                }\n                            } else {\n                                if ( data ) {\n                                    self.setData({data: data, focusIndex: pos || pos === 0 ? pos : self.$focusItem.index});\n                                }\n                            }\n                        });\n                    } else {\n                        // already at the beginning\n                        if ( this.cycle ) {\n                            // jump to the end of the list\n                            this.move(keys.end);\n                        }\n                        if ( this.events['overflow'] ) {\n                            // notify listeners\n                            this.emit('overflow', {direction: direction, cycle: this.cycle});\n                        }\n                    }\n                }\n            }\n            break;\n        case keys.right:\n            if ( this.type === this.TYPE_HORIZONTAL ) {\n                force = true;\n            } else {\n                break;\n            }\n        case keys.down:\n            if ( force || this.type === this.TYPE_VERTICAL ) {\n                if ( this.$focusItem && this.$focusItem.index < this.data.length - 1 ) {\n                    if ( this.$focusItem === this.$body.lastChild ) {\n                        this.renderView(this.viewIndex + 1);\n                    } else {\n                        this.focusItem(this.$focusItem.nextSibling);\n                    }\n                } else {\n                    if ( this.provider ) {\n                        this.provider.get(direction, function ( error, data, pos ) {\n                            if ( error ) {\n                                if ( self.events['data:error'] ) {\n                                    /**\n                                     * Provider get error while take new data\n                                     *\n                                     * @event module:stb/ui/list~List#data:error\n                                     */\n                                    self.emit('data:error', error);\n                                }\n                            } else {\n                                if ( data ) {\n                                    self.setData({data: data, focusIndex: pos || pos === 0 ? pos : self.$focusItem.index});\n                                }\n                            }\n                        });\n                    } else {\n                        // already at the beginning\n                        if ( this.cycle ) {\n                            // jump to the beginning of the list\n                            this.move(keys.home);\n                        }\n                        if ( this.events['overflow'] ) {\n                            // notify listeners\n                            this.emit('overflow', {direction: direction, cycle: this.cycle});\n                        }\n                    }\n                }\n            }\n            break;\n        case keys.pageUp:\n            if ( this.provider ) {\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else {\n                        if ( data ) {\n                            self.setData({data: data, focusIndex: pos ? pos : 0});\n                        }\n                    }\n                });\n                return;\n            }\n            if ( this.viewIndex < this.size ) {\n                // first page\n                this.renderView(0);\n            } else {\n                // second page and further\n                this.renderView(this.viewIndex - this.size + 1);\n            }\n\n            this.focusItem(this.$body.firstChild);\n            break;\n        case keys.pageDown:\n            if ( this.provider ) {\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else {\n                        if ( data ) {\n                            self.setData({\n                                data: data,\n                                focusIndex: pos || pos === 0 ? pos : data.length < self.size ?  data.length - 1 : self.size - 1\n                            });\n                        }\n                    }\n                });\n                break;\n            }\n            // data is bigger then one page\n            if ( this.data.length > this.size ) {\n                // determine jump size\n                if ( this.viewIndex > this.data.length - this.size * 2 ) {\n                    // last page\n                    this.renderView(this.data.length - this.size);\n                } else {\n                    // before the last page\n                    this.renderView(this.viewIndex + this.size - 1);\n                }\n                this.focusItem(this.$body.lastChild);\n            } else {\n                // not the last item on the page\n                this.focusItem(this.$body.children[this.data.length - 1]);\n            }\n            break;\n        case keys.home:\n            if ( this.provider ) {\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else {\n                        if ( data ) {\n                            self.setData({data: data, focusIndex: pos ? pos : 0});\n                        }\n                    }\n                });\n                break;\n            }\n            this.renderView(0);\n            this.focusItem(this.$body.firstChild);\n            break;\n        case keys.end:\n            if ( this.provider ) {\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else {\n                        if ( data ) {\n                            self.setData({\n                                data: data,\n                                focusIndex: pos || pos === 0 ? pos : data.length < self.size ?  data.length - 1 : self.size - 1\n                            });\n                        }\n                    }\n                });\n                break;\n            }\n            if ( this.data.length > this.size ) {\n                this.renderView(this.data.length - this.size);\n                this.focusItem(this.$body.lastChild);\n            } else {\n                // not the last item on the page\n                this.focusItem(this.$body.children[this.data.length - 1]);\n            }\n            break;\n    }\n};\n\n\n/**\n * Highlight the given DOM element as focused.\n * Remove focus from the previously focused item and generate associated event.\n *\n * @param {Node|Element} $item element to focus\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#focus:item\n * @fires module:stb/ui/list~List#blur:item\n */\nList.prototype.focusItem = function ( $item ) {\n    var $prev = this.$focusItem;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n    }\n\n    // different element\n    if ( $item && $prev !== $item ) {\n        if ( DEVELOP ) {\n            if ( !($item instanceof Element) ) {\n                throw new Error(__filename + ': wrong $item type');\n            }\n            if ( $item.parentNode !== this.$body ) {\n                throw new Error(__filename + ': wrong $item parent element');\n            }\n        }\n\n        // some item is focused already\n        if ( $prev !== null ) {\n            if ( DEVELOP ) {\n                if ( !($prev instanceof Element) ) {\n                    throw new Error(__filename + ': wrong $prev type');\n                }\n            }\n\n            // style\n            $prev.classList.remove('focus');\n\n            // there are some listeners\n            if ( this.events['blur:item'] ) {\n                /**\n                 * Remove focus from an element.\n                 *\n                 * @event module:stb/ui/list~List#blur:item\n                 *\n                 * @type {Object}\n                 * @property {Element} $item previously focused HTML element\n                 */\n                this.emit('blur:item', {$item: $prev});\n            }\n        }\n        // reassign\n        this.$focusItem = $item;\n\n        this.$focusItem.data = this.data[this.$focusItem.index];\n\n        // correct CSS\n        $item.classList.add('focus');\n\n        // there are some listeners\n        if ( this.events['focus:item'] ) {\n            /**\n             * Set focus to a DOM element.\n             *\n             * @event module:stb/ui/list~List#focus:item\n             *\n             * @type {Object}\n             * @property {Element} $prev old/previous focused HTML element\n             * @property {Element} $curr new/current focused HTML element\n             */\n            this.emit('focus:item', {$prev: $prev, $curr: $item});\n        }\n\n        // there are some listeners\n        if ( this.events['select:item'] ) {\n            /**\n             * Set focus to a list item.\n             *\n             * @event module:stb/ui/list~List#select:item\n             *\n             * @type {Object}\n             * @property {Element} $item new/current focused item\n             */\n            this.emit('select:item', {$item: $item});\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n/**\n * Highlight the given DOM element as blur.\n * Remove focus from the item and generate associated event.\n *\n * @param {Node|Element} $item element to focus\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#focus:item\n * @fires module:stb/ui/list~List#blur:item\n */\nList.prototype.blurItem = function ( $item ) {\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n    }\n\n    // different element\n    if ( $item ) {\n        if ( $item === this.$focusItem ) {\n            this.$focusItem = null;\n        }\n\n        $item.classList.remove('focus');\n\n        // there are some listeners\n        if ( this.events['blur:item'] ) {\n            /**\n             * Remove focus from an element.\n             *\n             * @event module:stb/ui/list~List#blur:item\n             *\n             * @type {Object}\n             * @property {Element} $item previously focused HTML element\n             */\n            this.emit('blur:item', {$item: $item});\n        }\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n/**\n * Set the given item focused by item index.\n *\n * @param {number} index item data index\n */\nList.prototype.focusIndex = function ( index ) {\n    var viewIndex = this.viewIndex || 0;\n\n    if ( DEVELOP ) {\n        if ( Number(index) !== index ) {\n            throw new Error(__filename + ': index must be a number');\n        }\n        if ( index < 0 ) {\n            throw new Error(__filename + ': index should be positive');\n        }\n        // if ( index > this.data.length - 1 ) {\n        //     throw new Error(__filename + ': index should be less than data size');\n        // }\n    }\n\n    // determine direction\n    if ( index >= viewIndex + this.size ) {\n        // check range\n        index = index < this.data.length - 1 ? index : this.data.length - 1;\n        // move down\n        this.renderView(index - this.size + 1);\n        this.focusItem(this.$body.lastChild);\n    } else if ( index < viewIndex ) {\n        // check range\n        index = index > 0 ? index : 0;\n        // move up\n        this.renderView(index);\n        this.focusItem(this.$body.firstChild);\n    } else {\n        // no move\n        if ( this.viewIndex === null ) {\n            // first attempt\n            this.renderView(0);\n        }\n        this.focusItem(this.$body.children[index - viewIndex]);\n    }\n};\n\n\n/**\n * Set item state and appearance as marked.\n *\n * @param {Node|Element} $item element to focus\n * @param {boolean} state true - marked, false - not marked\n */\nList.prototype.markItem = function ( $item, state ) {\n    if ( DEVELOP ) {\n        if ( arguments.length !== 2 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( !($item instanceof Element) ) {\n            throw new Error(__filename + ': wrong $item type');\n        }\n        if ( $item.parentNode !== this.$body ) {\n            throw new Error(__filename + ': wrong $item parent element');\n        }\n        if ( Boolean(state) !== state ) {\n            throw new Error(__filename + ': state must be boolean');\n        }\n    }\n\n    // correct CSS\n    if ( state ) {\n        $item.classList.add('mark');\n    } else {\n        $item.classList.remove('mark');\n    }\n\n    // apply flag\n    $item.data.mark = state;\n};\n\n\n// public\nmodule.exports = List;\n","'use strict';\n\nvar app = require('mag-app'),\n    storage = window.top.localStorage || window.top.stbStorage,\n    accounts = storage.getItem('accounts');\n\n\nif ( accounts ) {\n    try {\n        accounts = JSON.parse(accounts);\n    } catch ( exception ) {\n        accounts = [];\n    }\n} else {\n    accounts = [];\n}\n\nif ( app.query.server ) {\n    // credentials in GET params\n    accounts = [\n        {\n            login: app.query.login,\n            password: app.query.password,\n            address: app.query.server,\n            activationCode: app.query.activationCode,\n            latest: true\n        }\n    ];\n}\n\nmodule.exports = {\n    get: function () {\n        return accounts;\n    },\n    add: function ( account ) {\n        accounts.forEach(function ( item ) {\n            item.latest = false;\n        });\n        account.latest = true;\n        accounts.push(account);\n        storage.setItem('accounts', JSON.stringify(accounts));\n    },\n    update: function ( account, index ) {\n        if ( accounts[index] ) {\n            accounts[index] = account;\n        }\n        accounts.forEach(function ( item ) {\n            item.latest = false;\n        });\n        account.latest = true;\n        storage.setItem('accounts', JSON.stringify(accounts));\n    },\n    remove: function ( account ) {\n        var index = accounts.indexOf(account);\n\n        if ( index === -1 ) {\n            account = JSON.stringify(account);\n            index = 0;\n            while ( index < accounts.length ) {\n                if ( JSON.stringify(accounts[index]) === account ) {\n                    accounts.splice(index, 1);\n                    break;\n                }\n                ++index;\n            }\n        } else {\n            accounts.splice(accounts.indexOf(account), 1);\n        }\n        storage.setItem('accounts', JSON.stringify(accounts));\n    }\n};\n","/**\n * Main page implementation.\n */\n\n'use strict';\n\n\nvar app          = require('mag-app'),\n    Page         = require('stb-component-page'),\n    keys         = require('stb-keys'),\n    Footer       = require('mag-component-footer'),\n    ModalMessage = require('mag-component-modal'),\n    Scroll       = require('stb-component-scrollbar'),\n    ScrollArea   = require('mag-component-scroll-area'),\n    page         = new Page({$node: window.pageEula}),\n    popup        = null;\n\n\npage.once('show', function () {\n    // eslint-disable-next-line handle-callback-err\n    require('../modules/device.api').model(function ( error, model ) {\n        var scroll = new Scroll();\n\n        page.add(page.modal = new ModalMessage({\n            title: gettext('TERMS AND CONDITIONS OF USE'),\n            visible: true,\n            className: 'main',\n            children: [\n                page.scrollArea = new ScrollArea({\n                    events: {\n                        overflow: function ( event ) {\n                            if ( event.direction === keys.down ) {\n                                page.footer.init({\n                                    middle: [\n                                        {\n                                            code: keys.back,\n                                            title: gettext('Reject the license agreement'),\n                                            action: function () {\n                                                if ( popup === null ) {\n                                                    popup = require('../components/popup.menu');\n                                                }\n\n                                                popup.show();\n                                            }\n                                        },\n                                        {\n                                            code: keys.ok,\n                                            title: gettext('Accept the license agreement'),\n                                            action: function () {\n                                                if ( popup === null || (!popup.visible) ) {\n                                                    app.licenseAgree = true;\n                                                    app.route(app.pages.main);\n                                                }\n                                            }\n                                        }\n                                    ]\n                                });\n                            }\n                        },\n                        keydown: function ( event ) {\n                            switch ( event.code ) {\n                                case keys.up:\n                                case keys.down:\n\n                                    console.log('before');\n                                    console.log(this.realHeight);\n                                    console.log(this.viewHeight);\n                                    this.realHeight = this.$body.offsetHeight;\n                                    this.viewHeight = this.$node.offsetHeight;\n                                    console.log('after');\n                                    console.log(this.realHeight);\n                                    console.log(this.viewHeight);\n\n                                    this.scroll.init({\n                                        realSize: this.realHeight,\n                                        viewSize: this.viewHeight,\n                                        value: this.topPosition * -1\n                                    });\n\n                                    this.move(event.code);\n                                    break;\n                            }\n                        }\n                    }\n                })\n            ],\n            events: {\n                hide: function () {\n                    setTimeout(function () {\n                        page.modal.show();\n                        page.scrollArea.focus();\n                    });\n                }\n            }\n        }));\n\n        page.scrollArea.$node.appendChild(scroll.$node);\n\n        page.scrollArea.$body.innerHTML = '<p>Please read these Terms and Conditions of Use (the “Terms”) ' +\n            'carefully before using this Ministra Player for ' +\n            model + ' application (hereinafter – the “Application”). By using the Application, you agree to be bound by these Terms.' +\n            'If you do not agree to these Terms or any portion thereof, you are strictly prohibited from using the Application. </p>' +\n            require('../eula');\n\n        page.scrollArea.focus();\n\n        page.scrollArea.init({scroll: scroll, step: 10});\n\n        page.footer = new Footer({\n            parent: page,\n            visible: true,\n            data: {\n                middle: [\n                    {\n                        code: keys.back,\n                        title: gettext('Reject the license agreement'),\n                        action: function () {\n                            require('../components/popup.menu').show();\n                        }\n                    },\n                    {\n                        code: keys.ok,\n                        disabled: true,\n                        title: gettext('Accept the license agreement'),\n                        action: function () {\n                            // action is required, but no needed to handle this\n                        }\n                    }\n                ]\n            }\n        });\n\n        page.add(require('../components/popup.menu'));\n\n        page.addListener('show', function () {\n            page.scrollArea.init();\n            page.footer.init({\n                middle: [\n                    {\n                        code: keys.back,\n                        title: gettext('Reject the license agreement'),\n                        action: function () {\n                            require('../components/popup.menu').show();\n                        }\n                    },\n                    {\n                        code: keys.ok,\n                        title: gettext('Accept the license agreement'),\n                        disabled: true,\n                        action: function () {\n                            page.scrollArea.move(keys.down);\n                        }\n                    }\n                ]\n            });\n        });\n    });\n});\n\n\nfunction preventedKeydown ( event ) {\n    event.preventDefault();\n}\n\n\npage.addListener('show', function () {\n    window.addEventListener('keydown', preventedKeydown);\n});\n\n\npage.addListener('hide', function () {\n    window.removeEventListener('keydown', preventedKeydown);\n});\n\npage.addListener('keydown', function ( event ) {\n    if ( event.code === keys.back ) {\n        // core.call\n    }\n});\n\n\n// public\nmodule.exports = page;\n","/**\n * @license The MIT License (MIT)\n * @copyright Dmitry Fedotov <bas.jsdev@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('stb-component'),\n    keys      = require('stb-keys'),\n    classes   = {};\n\n\n// initialize classes\nclasses[keys.f1] = 'theme-icon-rc-f1';\nclasses[keys.f2] = 'theme-icon-rc-f2';\nclasses[keys.f3] = 'theme-icon-rc-f3';\nclasses[keys.f4] = 'theme-icon-rc-f4';\nclasses[keys.menu] = 'theme-icon-rc-menu';\nclasses[keys.ok] = 'theme-icon-rc-ok';\nclasses[keys.info] = 'theme-icon-rc-info';\nclasses[keys.playPause] = 'theme-icon-rc-play-pause';\nclasses[keys.back] = 'theme-icon-rc-back';\nclasses[keys.exit] = 'theme-icon-rc-home';\nclasses[keys.keyboard] = 'theme-icon-rc-vk';\nclasses[keys.refresh] = 'theme-icon-rc-refresh';\nclasses[keys.frame] = 'theme-icon-rc-aspect';\n\n/**\n * Footer.\n *\n * @constructor\n * @extends Component\n *\n * @param {Object}  config={} init parameters\n * @param {Object}  config.parent parent page\n * @param {boolean} [config.visible] visibility flag\n * @param {Object}  [config.data] footer buttons config\n * @param {Object}  [config.data.left] left button config\n * @param {Object}  [config.data.middle] middle buttons config\n * @param {Object}  [config.data.right] right button config\n * @param {number}  [config.data.middle.code] button key code\n * @param {Object}  [config.data.middle.title] button title\n * @param {Object}  [config.data.middle.action] button press (click) action\n *\n * @example\n * page.footer = new Footer({\n *     parent: page,\n *     data: {\n *         left: {\n *             code: keys.menu, action: function () {}\n *         },\n *         middle: [\n *             {code: 55, action: function () {}},\n *             {code: keys.f1, title: 'stop', action: function () {}},\n *             {code: 9000, className: 'customIcon', title: 'start', action: function () {}},\n *             {code: keys.f4, title: 'end', action: function () {}}\n *         ],\n *         right: {\n *             code: 65, action: function () {}\n *         }\n *     }\n * });\n */\n\n/* eslint max-statements: 0 */\nfunction Footer ( config ) {\n    var currentTab = 0,\n        self = this;\n\n    // sanitize\n    config = config || {};\n    // can't accept focus\n    config.focusable = false;\n    // hide by default\n    config.visible = config.visible || false;\n    // create centered div\n    config.$body = document.createElement('div');\n    config.$body.className = 'body';\n\n    // parent constructor call\n    Component.call(this, config);\n\n    this.tabs = [{codes: {}}, {codes: {}}, {codes: {}}, {codes: {}}];\n\n    this.tab = 0;\n\n    this.$table = this.$node.appendChild(document.createElement('table'));\n\n    this.$table.insertRow();\n    this.$table.rows[0].insertCell(-1);\n    this.$left = this.$table.rows[0].cells[0].appendChild(document.createElement('div'));\n    this.$left.className = 'theme-icon';\n\n    this.$table.rows[0].insertCell(-1);\n    this.$table.rows[0].cells[1].className = 'central';\n\n\n    this.tabs[currentTab].$body = this.$table.rows[0].cells[1].appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.className = 'wrapper hidden';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n\n    ++currentTab;\n    this.tabs[currentTab].$body = this.$table.rows[0].cells[1].appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.className = 'wrapper hidden';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n\n    ++currentTab;\n    this.tabs[currentTab].$body = this.$table.rows[0].cells[1].appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.className = 'wrapper hidden';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n\n    ++currentTab;\n    this.tabs[currentTab].$body = this.$table.rows[0].cells[1].appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.className = 'wrapper hidden';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n    this.tabs[currentTab].$body.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.className = 'button';\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.appendChild(document.createElement('div'));\n    this.tabs[currentTab].$body.lastChild.lastChild.className = 'title';\n\n    this.$table.rows[0].insertCell(-1);\n    this.$right = this.$table.rows[0].cells[2].appendChild(document.createElement('div'));\n    this.$right.className = 'theme-icon';\n\n    this.init(config.data);\n\n    this.parent.addListener('keydown', function ( event ) {\n        var currTab = self.tabs[self.tab];\n\n        if ( self.visible ) {\n            if ( currTab.codes[event.code] && typeof currTab.codes[event.code].action === 'function' ) {\n                currTab.codes[event.code].action();\n            }\n        }\n    });\n}\n\n\n// inheritance\nFooter.prototype = Object.create(Component.prototype);\nFooter.prototype.constructor = Footer;\n\n// set component name\nFooter.prototype.name = 'mag-component-footer';\n\n\n/**\n * Redefine buttons\n *\n * @param {Object} [config] footer buttons config\n * @param {Object} [config.left] left button config\n * @param {number} [config.left.code] left button key code\n * @param {boolean} [config.left.disabled] left button is disabled\n * @param {Object} [config.left.action] left button press (click) action\n * @param {Object} [config.middle] middle buttons config\n * @param {Object} [config.right] right button config\n * @param {number} [config.right.code] right button key code\n * @param {boolean} [config.right.disabled] right button is disabled\n * @param {Object} [config.right.action] right button press (click) action\n * @param {number} [config.middle.code] button key code\n * @param {Object} [config.middle.title] button title\n * @param {boolean} [config.middle.disabled] button is disabled\n * @param {Object} [config.middle.action] button press (click) action\n *\n * page.Footer.init({\n *     left: {\n *         code: keys.menu, action: function () {}\n *     },\n *     middle: [\n *         {code: 55, action: function () {}},\n *         {code: keys.f1, title: 'stop', action: function () {}},\n *         {code: 9000, className: 'customIcon', title: 'start', action: function () {}},\n *         {code: keys.f4, title: 'end', disabled: true}\n *     ],\n *     right: {\n *         code: 65, action: function () {}\n *     }\n * });\n *\n */\nFooter.prototype.init = function ( config ) {\n    var index, $tab, $tabChildren;\n\n    config = config || {};\n\n    if ( DEVELOP ) {\n        if ( config.middle && config.middle.length > 4 ) {\n            throw new Error(__filename + ': only 4 buttons allowed in footer');\n        }\n        if ( config.middle && Array.isArray(config.middle) ) {\n            for ( index = 0; index < config.middle.length; index++ ) {\n                if ( typeof config.middle[index].action !== 'function' && !config.middle[index].disabled ) {\n                    throw new Error(__filename + ': action must be a function');\n                }\n                ++index;\n            }\n        }\n        if ( config.left && typeof config.left.action !== 'function' && !config.left.disabled ) {\n            throw new Error(__filename + ': action must be a function');\n        }\n        if ( config.right && typeof config.right.action !== 'function' && !config.right.disabled ) {\n            throw new Error(__filename + ': action must be a function');\n        }\n    }\n\n    this.tabs[this.tab].$body.classList.add('hidden'); // hide old tab\n    this.tab = config.middle && config.middle.length ? config.middle.length - 1 : 0;\n    $tab = this.tabs[this.tab]; // current tab shortcut\n    $tab.codes = {}; // reset all actions\n\n    // left button\n    if ( config.left ) {\n        this.$left.className = config.left.className || ('theme-icon ' + (classes[config.left.code] || 'theme-icon-warning'));\n        if ( config.left.disabled ) {\n            this.$left.classList.add('disabled');\n        } else {\n            $tab.codes[config.left.code] = {action: config.left.action};\n            this.$left.style.visibility = 'inherit';\n            this.$left.onclick = config.left.action;\n        }\n    } else if ( this.$left.style.visibility !== 'hidden' ) {\n        this.$left.style.visibility = 'hidden';\n    }\n\n    // right button\n    if ( config.right ) {\n        this.$right.className = config.right.className || ('theme-icon ' + (classes[config.right.code] || 'theme-icon-warning'));\n        if ( config.right.disabled ) {\n            this.$right.classList.add('disabled');\n        } else {\n            $tab.codes[config.right.code] = {action: config.right.action};\n            this.$right.style.visibility = 'inherit';\n            this.$right.onclick = config.right.action;\n        }\n    } else if ( this.$right.style.visibility !== 'hidden' ) {\n        this.$right.style.visibility = 'hidden';\n    }\n\n    // middle buttons\n    if ( config.middle && config.middle.length ) {\n        for ( index = 0; index < config.middle.length; index++ ) {\n            $tab.codes[config.middle[index].code] = {action: config.middle[index].action};\n            if ( config.middle[index].disabled ) {\n                $tab.$body.children[index].classList.add('disabled');\n            } else {\n                $tab.$body.children[index].classList.remove('disabled');\n                $tab.$body.children[index].onclick = config.middle[index].action;\n            }\n            $tabChildren = $tab.$body.children[index].children; // shortcut\n            $tabChildren[0].className = 'iconImg ' +\n                (config.middle[index].className || ('theme-icon ' + (classes[config.middle[index].code] || 'theme-icon-warning')));\n\n            $tabChildren[1].innerText = config.middle[index].title || '';\n        }\n        $tab.$body.classList.remove('hidden');\n    }\n};\n\n\n// public\nmodule.exports = Footer;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-modal');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-modal';\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component');\n\n\n/**\n * Base modal window implementation.\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n */\nfunction Modal ( config ) {\n    // sanitize\n    config = config || {};\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.$body ) {\n            throw new Error(__filename + ': config.$body should not be provided manually');\n        }\n    }\n\n    // create centered div\n    config.$body = document.createElement('div');\n    config.$body.className = 'body';\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // add table-cell wrapper\n    this.$node.appendChild(document.createElement('div').appendChild(this.$body).parentNode);\n}\n\n\n// inheritance\nModal.prototype = Object.create(Component.prototype);\nModal.prototype.constructor = Modal;\n\n// set component name\nModal.prototype.name = 'spa-component-modal';\n\n\n// public\nmodule.exports = Modal;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n'use strict';\n\n// public\nmodule.exports = require('spa-component-scrollbar');\n\n// correct component name\nmodule.exports.prototype.name = 'stb-component-scrollbar';\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component');\n\n\n/**\n * Base scroll bar implementation.\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} [config={}] init parameters (all inherited from the parent)\n * @param {number} [config.value=0] initial thumb position\n * @param {number} [config.realSize=100] actual scroll size\n * @param {number} [config.viewSize=10] visible area size\n * @param {number} [config.type] direction\n *\n * @example\n * var ScrollBar = require('stb/ui/scroll.bar'),\n *     scrollBar = new ScrollBar({\n *         viewSize: 5,\n *         realSize: 25,\n *         events: {\n *             done: function () {\n *                 debug.log('ScrollBar: done');\n *             },\n *             change: function ( data ) {\n *                 debug.log('ScrollBar: change to ' + data.curr + ' from ' + data.prev);\n *             }\n *         }\n *     });\n */\nfunction ScrollBar ( config ) {\n    // sanitize\n    config = config || {};\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n        if ( config.type && Number(config.type) !== config.type ) {\n            throw new Error(__filename + ': config.type must be a number');\n        }\n    }\n\n    /**\n     * Visible area size.\n     *\n     * @type {number}\n     */\n    this.viewSize = 10;\n\n    /**\n     * Scroll area actual height or width (if scroll is horizontal).\n     *\n     * @type {number}\n     */\n    this.realSize = 100;\n\n    /**\n     * Scroll thumb position.\n     *\n     * @type {number}\n     */\n    this.value = 0;\n\n    /**\n     * Component orientation.\n     *\n     * @type {number}\n     */\n    this.type = this.TYPE_VERTICAL;\n\n    /**\n     * Geometry of the scroll thumb element.\n     *\n     * @type {ClientRect}\n     */\n    this.thumbRect = null;\n\n    /**\n     * Geometry of the scroll track element.\n     *\n     * @type {ClientRect}\n     */\n    this.trackRect = null;\n\n    // can't accept focus\n    config.focusable = config.focusable || false;\n\n    // set default className if classList property empty or undefined\n    //config.className = 'scrollBar ' + (config.className || '');\n\n    // horizontal or vertical\n    if ( config.type ) {\n        // apply\n        this.type = config.type;\n    }\n\n    if ( this.type === this.TYPE_HORIZONTAL ) {\n        config.className += ' horizontal';\n    }\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // insert thumb line\n    this.$thumb = this.$body.appendChild(document.createElement('div'));\n\n    // correct CSS class name\n    this.$thumb.className = 'thumb';\n\n    // component setup\n    this.init(config);\n}\n\n\n// inheritance\nScrollBar.prototype = Object.create(Component.prototype);\nScrollBar.prototype.constructor = ScrollBar;\n\n// set component name\nScrollBar.prototype.name = 'spa-component-scrollbar';\n\nScrollBar.prototype.TYPE_VERTICAL   = 1;\nScrollBar.prototype.TYPE_HORIZONTAL = 2;\n\n\n/**\n * Init or re-init realSize/viewSize/value parameters.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nScrollBar.prototype.init = function ( config ) {\n    config = config || {};\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n    }\n\n    // set actual scroll size\n    if ( config.realSize !== undefined ) {\n        if ( DEVELOP ) {\n            if ( Number(config.realSize) !== config.realSize ) {\n                throw new Error(__filename + ': config.realSize value must be a number');\n            }\n        }\n\n        // apply\n        this.realSize = config.realSize;\n    }\n\n    // set visible area size\n    if ( config.viewSize !== undefined ) {\n        if ( DEVELOP ) {\n            if ( Number(config.viewSize) !== config.viewSize ) {\n                throw new Error(__filename + ': config.viewSize value must be a number');\n            }\n            if ( config.viewSize < 0 ) {\n                throw new Error(__filename + ': config.viewSize value must be greater than 0');\n            }\n        }\n\n        // apply\n        this.viewSize = config.viewSize;\n    }\n\n    // show or hide thumb\n    if ( this.viewSize >= this.realSize ) {\n        this.$thumb.classList.add('hidden');\n    } else {\n        this.$thumb.classList.remove('hidden');\n    }\n\n    // set thumb position\n    if ( config.value !== undefined ) {\n        // apply\n        this.scrollTo(config.value);\n    }\n\n    // set thumb size\n    if ( this.type === this.TYPE_VERTICAL ) {\n        this.$thumb.style.height = (this.viewSize / this.realSize * 100) + '%';\n    } else {\n        this.$thumb.style.width = (this.viewSize / this.realSize * 100) + '%';\n    }\n\n    // geometry\n    this.thumbRect = this.$thumb.getBoundingClientRect();\n    this.trackRect = this.$node.getBoundingClientRect();\n};\n\n\n/**\n * Set position of the given value.\n * Does nothing in case when scroll is in the end and passed value is more than scroll bar length.\n *\n * @param {number} value new value to set\n * @return {boolean} operation result\n *\n * @fires module:stb/ui/scroll.bar~ScrollBar#done\n * @fires module:stb/ui/scroll.bar~ScrollBar#change\n */\nScrollBar.prototype.scrollTo = function ( value ) {\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( Number(value) !== value ) {\n            throw new Error(__filename + ': value must be a number');\n        }\n        if ( this.realSize > this.viewSize && value > this.realSize - this.viewSize ) {\n            throw new Error(__filename + ': value is greater than this.realSize-this.viewSize');\n        }\n        if ( value < 0 ) {\n            throw new Error(__filename + ': value is less then 0');\n        }\n    }\n\n    // value has changed\n    if ( this.value !== value ) {\n        // track and thumb geometry was not set\n        if ( this.thumbRect.height === 0 || this.thumbRect.width === 0 ) {\n            // apply\n            this.trackRect = this.$node.getBoundingClientRect();\n            this.thumbRect = this.$thumb.getBoundingClientRect();\n        }\n\n        // set scroll bar width\n        if ( this.type === this.TYPE_VERTICAL ) {\n            this.$thumb.style.marginTop = ((this.trackRect.height - this.thumbRect.height) * value / (this.realSize - this.viewSize)) + 'px';\n        } else {\n            this.$thumb.style.marginLeft = ((this.trackRect.width - this.thumbRect.width) * value / (this.realSize - this.viewSize)) + 'px';\n        }\n\n        // there are some listeners\n        if ( this.events['change'] ) {\n            /**\n             * Update scroll value.\n             *\n             * @event module:stb/ui/scroll.bar~ScrollBar#change\n             *\n             * @type {Object}\n             * @property {number} prev old/previous scroll value\n             * @property {number} curr new/current scroll value\n             */\n            this.emit('change', {curr: value, prev: this.value});\n        }\n\n        // is it the end?\n        if ( value >= this.realSize ) {\n            value = this.realSize;\n\n            // there are some listeners\n            if ( this.events['done'] ) {\n                /**\n                 * Set scroll to its maximum value.\n                 *\n                 * @event module:stb/ui/scroll.bar~ScrollBar#done\n                 */\n                this.emit('done');\n            }\n        }\n\n        // set new value\n        this.value = value;\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n// public\nmodule.exports = ScrollBar;\n","/**\n * @license The MIT License (MIT)\n * @copyright Boris Aleynikov <aleynikov.boris@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('spa-component'),\n    keys      = require('stb-keys');\n\n\n/**\n * Scroll area implementation\n *\n * @constructor\n * @extends Component\n *\n * @param {Object} config object\n * @param {number} [config.step] step in % of screen height to scroll area\n */\nfunction ScrollArea ( config ) {\n\n    config = config || {};\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && (!config.className || typeof config.className !== 'string') ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n    }\n\n    config.$body = document.createElement('div');\n    config.$body.className = 'body';\n\n    /**\n     * Step to scroll area in % of screen height\n     *\n     * @type {number}\n     */\n    this.step = 5;\n\n    /**\n     * Real height of scroll area\n     *\n     * @type {number}\n     */\n    this.realHeight = 0;\n\n    /**\n     * Visible height of area\n     *\n     * @type {number}\n     */\n    this.viewHeight = 0;\n\n    /**\n     * Top position of scroll container\n     *\n     * @type {number}\n     */\n    this.topPosition = 0;\n\n    /**\n     * Associated ScrollBar component link.\n     *\n     * @type {ScrollBar}\n     */\n    this.scroll = null;\n\n    Component.call(this, config);\n\n    this.$node.appendChild(this.$body);\n\n    // component setup\n    this.init(config);\n}\n\n\nScrollArea.prototype = Object.create(Component.prototype);\nScrollArea.prototype.constructor = ScrollArea;\n\n// set component name\nScrollArea.prototype.name = 'mag-component-scroll-area';\n\n\n/**\n * List of all default event callbacks.\n *\n * @type {Object.<string, function>}\n */\nScrollArea.prototype.defaultEvents = {\n    /**\n     * Default method to handle keyboard keydown events.\n     *\n     * @param {Object} event generated event\n     */\n    keydown: function ( event ) {\n        switch ( event.code ) {\n            case keys.up:\n            case keys.down:\n                this.move(event.code);\n                break;\n        }\n    },\n    mousewheel: function ( event ) {\n        // scrolling by Y axis\n        this.move(event.wheelDeltaY > 0 ? keys.up : keys.down);\n    }\n};\n\n\n/**\n * Attempt to go beyond the edge of the list.\n *\n * @event\n *\n * @type {Object}\n * @property {number} direction key code initiator of movement\n */\n\n\n/**\n * Move ScrollArea content\n *\n * @param {number} direction to move\n */\nScrollArea.prototype.move = function ( direction ) {\n    var height = screen.height,\n        delta  = this.viewHeight - this.realHeight;\n\n    // run logic only if it's reasonable to navigate\n    if ( delta < 0 ) {\n        switch ( direction ) {\n            case keys.down:\n                if ( this.topPosition - this.step * height / 100 < delta ) {\n                    this.scroll.scrollTo(-delta);\n                    this.$body.style.top = delta + 'px';\n                    this.emit('overflow', {direction: direction});\n\n                    return;\n                }\n\n                this.topPosition -= Math.ceil(this.step * height / 100);\n\n                if ( this.scroll ) {\n                    this.scroll.scrollTo(-this.topPosition);\n                }\n                this.$body.style.top = this.topPosition + 'px';\n                break;\n            case keys.up:\n                if ( this.topPosition + this.step * height / 100 > 0 ) {\n                    this.scroll.scrollTo(0);\n                    this.$body.style.top = '0px';\n                    this.emit('overflow', {direction: direction});\n\n                    return;\n                }\n                this.topPosition += Math.ceil(this.step * height / 100);\n\n                if ( this.scroll ) {\n                    this.scroll.scrollTo(-this.topPosition);\n                }\n                this.$body.style.top = this.topPosition + 'px';\n                break;\n        }\n    } else {\n        this.emit('overflow', {direction: direction});\n    }\n};\n\n\n/**\n * Init or re-init of the component inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nScrollArea.prototype.init = function ( config ) {\n\n    config = config || {};\n\n    this.realHeight = this.$body.offsetHeight;\n    this.viewHeight = this.$node.offsetHeight;\n    this.topPosition = 0;\n    this.$body.style.top = this.topPosition + 'px';\n\n    if ( config.scroll ) {\n        this.scroll = config.scroll;\n    }\n\n    if ( config.step ) {\n        this.step = config.step;\n    }\n\n    if ( this.scroll ) {\n        this.scroll.init({\n            realSize: this.realHeight,\n            viewSize: this.viewHeight,\n            value: this.topPosition\n        });\n    }\n};\n\nmodule.exports = ScrollArea;\n","'use strict';\n\nvar app = require('mag-app'),\n    deviceApi;\n\nif ( PLATFORM === 'BROWSER' || (PLATFORM === 'MAG' && DEVELOP) ) {\n    deviceApi = require('./platforms/browser/device.api');\n} else if ( PLATFORM === 'SMARTTV' ) {\n    deviceApi = require('./platforms/smarttv/device.api');\n} else if ( PLATFORM === 'TIZEN' ) {\n    deviceApi = require('./platforms/tizen/device.api');\n}\n\n\nif ( PLATFORM === 'WEBOS' ) {\n    deviceApi = require('./platforms/webos/device.api');\n}\n\n\nif ( app.query.mac ) {\n    // metadata in GET params\n    deviceApi = {\n        network: {\n            mac: function (callback) {\n                callback(null, app.query.mac);\n            }\n        },\n        model: function ( callback ) {\n            callback(null, 'SmartTV');\n        },\n        metric1: function ( callback ) {\n            callback(null, app.query.meta1);\n        },\n        metric2: function ( callback ) {\n            callback(null, app.query.meta2);\n        },\n        metric3: function ( callback ) {\n            callback(null, app.query.meta3);\n        },\n        clientType: function (callback) {\n            callback(null, app.query.clientType);\n        }\n    };\n}\n\nmodule.exports = deviceApi;\n","/**\n * @license The MIT License (MIT)\n * @copyright Boris Aleynikov <aleynikov.boris@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar List = require('mag-component-list'),\n    Layout = require('mag-component-layout');\n\n/**\n *  Layout list contains array of layout components\n *\n * @constructor\n * @extends List\n *\n * @param {Object} config object\n * @param {Element} [config.noData=''] element or string to display if set empty data\n *\n * @example\n * var CheckList = require('../stb/ui/layout.list'),\n *     list = new LayoutList({\n *         propagate: true,\n *         size: 7,\n *         focusIndex: 0,\n *         noData: 'No channels'\n *         data: [\n *                 {\n *                     items: [\n *                         {\n *                             className: 'star'\n *                         },\n *                         'Some text'\n *                     ],\n *                     click: function () {\n *                         // do something\n *                     }\n *                 },\n *                 {\n *                     items: [\n *                         'Hello world',\n *                         {\n *                             value: 'hi',\n *                             className: 'status'\n *                         }\n *                     ],\n *                     value:{\n *                         uri: 'http://55.55.55.55/some'\n *                     },\n *                     click: someHandler\n *                 },\n *                 {\n *                     items: [\n *                         {\n *                             className: 'big',\n *                             value: ' Some'\n *                         },\n *                         {\n *                             value: new Input()\n *                         }\n *                     ]\n *                 },\n *                 {\n *                     items: [\n *                         new Button({value: 'Ok'}),\n *                         new Button({value: 'Cancel'}),\n *                         new Button({value: 'Exit'})\n *                     ]\n *                 }\n *             ]\n * });\n */\nfunction LayoutList ( config ) {\n    var self = this;\n\n    config = config || {};\n\n    /**\n     * Elements handlers\n     */\n    this.handlers = {};\n\n    /**\n     * No data placeholder\n     *\n     * @type {Element}\n     */\n    this.$noData = null;\n\n    //config.className = 'layoutList ' + (config.className || '');\n\n    config.propagate = config.propagate === undefined ? true : config.propagate;\n\n    /**\n     * Set data layout to be fixed to cache HTML elements\n     *\n     * @type {boolean|*}\n     */\n    this.fixedData = config.fixedData || false;\n\n    //config.$body = document.createElement('div');\n\n    config.$body = document.createElement('div');\n    config.$body.className = 'body';\n\n    this.$noData = document.createElement('div');\n    this.$noData.className = 'noData hidden';\n\n    List.call(this, config);\n\n    this.$node.appendChild(this.$body);\n    this.$node.appendChild(this.$noData);\n\n    // add handler to focus inner layout\n    this.addListener('click:item', function ( event ) {\n        // focus inner layout of item\n        if ( event.$item.layout.children.length && !event.inner ) {\n            event.$item.layout.children[event.$item.layout.focusIndex].focus();\n        }\n\n        // only focus item if we click mouse\n        if ( event.inner ) {\n            self.focus();\n            self.focusItem(event.$item);\n        }\n        // do click callback if it present\n        if ( self.handlers[event.$item.index] ) {\n            self.handlers[event.$item.index](event.$item);\n        }\n    });\n}\n\n\nLayoutList.prototype = Object.create(List.prototype);\nLayoutList.prototype.constructor = LayoutList;\n\n// set component name\nLayoutList.prototype.name = 'mag-component-layout-list';\n\n\n/*eslint id-length:0*/\n/**\n * Default render function\n *\n * @param {Element} $item in list\n * @param {Object} config to render layout element\n */\nLayoutList.prototype.renderItemDefault = function ( $item, config ) {\n    var layout, layoutConfig,\n        currentNode,\n        currentData,\n        i;\n\n    if ( $item.ready && this.fixedData ) {\n        for ( i = 0; i < config.items.length; i++ ) {\n            currentData = config.items[i];\n            if ( typeof currentData.value === 'string' || currentData.value === undefined ) {\n                currentNode = $item.layout.$node.childNodes[i];\n                currentNode.innerText = currentData.value || '';\n                currentNode.className = currentData.className || '';\n            }\n        }\n    } else {\n        // clear inner content\n        while ( $item.firstChild ) {\n            $item.removeChild($item.firstChild);\n        }\n\n        layoutConfig = {\n            focusable: false,\n            data: config.items\n        };\n\n        if ( config.className ) {\n            layoutConfig.className = config.className;\n        }\n\n        layout = new Layout(layoutConfig);\n\n        $item.appendChild(layout.$node);\n        $item.layout = layout;\n        layout.parent = this;\n        layout.$parentItem = $item;\n\n        // focus layoutList if click on layout\n        layout.addListener('click', function () {\n            // add inner property to set that event comes from inner component\n            layout.parent.emit('click:item', {$item: $item, inner: true});\n        });\n\n        if ( config.click ) {\n            this.handlers[$item.index] = config.click;\n        }\n        // item is rendered\n        $item.ready = true;\n    }\n    $item.value = config.value || {};\n};\n\n\nLayoutList.prototype.setData = function ( config ) {\n    List.prototype.setData.call(this, config);\n\n    if ( config.data && config.data.length ) {\n        this.$noData.classList.add('hidden');\n    } else {\n        this.$noData.classList.remove('hidden');\n    }\n};\n\n\nLayoutList.prototype.init = function ( config ) {\n    var $wrap;\n\n    List.prototype.init.call(this, config);\n    if ( config.noData ) {\n        if ( DEVELOP ) {\n            if ( typeof config.noData !== 'string' && !(config.noData instanceof Element) ) {\n                throw new Error(__filename + ': wrong config.$noData type');\n            }\n        }\n\n        this.$noData.innerHTML = '';\n        if ( config.noData instanceof Element ) {\n            this.$noData.appendChild(config.noData);\n        } else if ( typeof config.noData === 'string' ) {\n            $wrap = document.createElement('div');\n            $wrap.innerText = config.noData;\n            this.$noData.appendChild($wrap);\n        }\n    }\n\n    if ( config.data && config.data.length ) {\n        this.$noData.classList.add('hidden');\n    } else {\n        this.$noData.classList.remove('hidden');\n    }\n};\n\nLayoutList.prototype.renderItem = LayoutList.prototype.renderItemDefault;\n\n\nmodule.exports = LayoutList;\n","/**\n * @license The MIT License (MIT)\n * @copyright Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n/* eslint complexity: [error, 37] */\n/* eslint max-lines-per-function: 1 */\n/* eslint no-fallthrough: 1 */\n/* eslint complexity: 1 */\n\n'use strict';\n\nvar Component = require('stb-component'),\n    keys      = require('stb-keys');\n\n\n/**\n * Mouse click event.\n *\n * @event module:stb/ui/list~List#click:item\n *\n * @type {Object}\n * @property {Element} $item clicked HTML item\n * @property {Event} event click event data\n */\n\n\n/**\n * Base list implementation.\n *\n * Each data item can be either a primitive value or an object with these fields:\n *\n *  Name    | Description\n * ---------|-------------\n *  value   | actual cell value to render\n *  mark    | is it necessary or not to render this cell as marked\n *\n * @constructor\n * @extends Component\n *\n * @param {Object}   [config={}]          init parameters (all inherited from the parent)\n * @param {Array}    [config.data=[]]     component data to visualize\n * @param {function} [config.render]      method to build each grid cell content\n * @param {function} [config.navigate]    method to move focus according to pressed keys\n * @param {number}   [config.size=5]      amount of visible items on a page\n * @param {number}   [config.viewIndex=0] move view window to this position on init\n * @param {number}   [config.focusIndex]  list item index to make item focused (move view window to this position)\n * @param {boolean}  [config.cycle=true]  allow or not to jump to the opposite side of a list when there is nowhere to go next\n * @param {boolean}  [config.scroll=null] associated ScrollBar component link\n * @param {Object}   [config.provider]    data provider\n *\n * @fires module:stb/ui/list~List#click:item\n */\nfunction List ( config ) {\n    // current execution context\n    //var self = this;\n\n    // sanitize\n    config = config || {};\n\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        if ( config.type && Number(config.type) !== config.type ) {\n            throw new Error(__filename + ': config.type must be a number');\n        }\n    }\n\n    /**\n     * Link to the currently focused DOM element.\n     *\n     * @type {Element}\n     */\n    this.$focusItem = null;\n\n    /**\n     * Position of the visible window to render.\n     *\n     * @type {number}\n     */\n    this.viewIndex = null;\n\n    /**\n     * Component data to visualize.\n     *\n     * @type {Array}\n     */\n    this.data = [];\n\n    /**\n     * Component orientation.\n     *\n     * @type {number}\n     */\n    this.type = this.TYPE_VERTICAL;\n\n    /**\n     * Amount of visible items on a page.\n     *\n     * @type {number}\n     */\n    this.size = 5;\n\n    /**\n     * Allow or not to jump to the opposite side of a list when there is nowhere to go next.\n     *\n     * @type {boolean}\n     */\n    this.cycle = false;\n\n    /**\n     * Associated ScrollBar component link.\n     *\n     * @type {ScrollBar}\n     */\n    this.scroll = null;\n\n    // horizontal or vertical\n    if ( config.type ) {\n        // apply\n        this.type = config.type;\n    }\n\n    /**\n     * Associated data provider\n     *\n     * @type {Provider}\n     */\n    this.provider = null;\n\n    if ( this.type === this.TYPE_HORIZONTAL ) {\n        config.className += ' horizontal';\n    }\n\n    //config.className += ' theme-main';\n\n    // parent constructor call\n    Component.call(this, config);\n\n    // component setup\n    this.init(config);\n\n    // custom navigation method\n    //if ( config.navigate ) {\n    //    if ( DEVELOP ) {\n    //        if ( typeof config.navigate !== 'function' ) { throw new Error(__filename + ': wrong config.navigate type'); }\n    //    }\n    //    // apply\n    //    this.navigate = config.navigate;\n    //}\n\n    // navigation by keyboard\n    //this.addListener('keydown', this.navigate);\n\n    // navigation by mouse\n    //this.$body.addEventListener('mousewheel', function ( event ) {\n    //    // scrolling by Y axis\n    //    if ( self.type === self.TYPE_VERTICAL && event.wheelDeltaY ) {\n    //        self.move(event.wheelDeltaY > 0 ? 38 : keys.down);\n    //    }\n    //\n    //    // scrolling by X axis\n    //    if ( self.type === self.TYPE_HORIZONTAL && event.wheelDeltaX ) {\n    //        self.move(event.wheelDeltaX > 0 ? 37 : 39);\n    //    }\n    //});\n}\n\n\n// inheritance\nList.prototype = Object.create(Component.prototype);\nList.prototype.constructor = List;\n\n// set component name\nList.prototype.name = 'mag-component-list';\n\nList.prototype.TYPE_VERTICAL   = 1;\nList.prototype.TYPE_HORIZONTAL = 2;\n\n\n/**\n * Fill the given item with data.\n *\n * @param {Element} $item item DOM link\n * @param {*} data associated with this item data\n */\nList.prototype.renderItemDefault = function ( $item, data ) {\n    $item.innerText = data.value;\n};\n\n\n/**\n * Method to build each list item content.\n * Can be redefined to provide custom rendering.\n *\n * @type {function}\n */\nList.prototype.renderItem = List.prototype.renderItemDefault;\n\n\n/**\n * List of all default event callbacks.\n *\n * @type {Object.<string, function>}\n */\nList.prototype.defaultEvents = {\n    /**\n     * Default method to handle mouse wheel events.\n     *\n     * @param {Event} event generated event\n     */\n    mousewheel: function ( event ) {\n        // scrolling by Y axis\n        if ( this.type === this.TYPE_VERTICAL && event.wheelDeltaY ) {\n            this.move(event.wheelDeltaY > 0 ? keys.up : keys.down);\n        }\n\n        // scrolling by X axis\n        if ( this.type === this.TYPE_HORIZONTAL && event.wheelDeltaX ) {\n            this.move(event.wheelDeltaX > 0 ? keys.left : keys.right);\n        }\n    },\n\n    /**\n     * Default method to handle keyboard keydown events.\n     *\n     * @param {Object} event generated event\n     */\n    keydown: function ( event ) {\n        switch ( event.code ) {\n            case keys.up:\n            case keys.down:\n            case keys.right:\n            case keys.left:\n            case keys.pageUp:\n            case keys.pageDown:\n            case keys.home:\n            case keys.end:\n                // cursor move only on arrow keys\n                this.move(event.code);\n                break;\n            case keys.enter:\n                // there are some listeners\n                if ( this.events['click:item'] && this.$focusItem ) {\n                    // notify listeners\n                    this.emit('click:item', {$item: this.$focusItem, event: event});\n                }\n                break;\n        }\n    }\n};\n\n\n/**\n * Default method to move focus according to pressed keys.\n *\n * @param {Object} event generated event source of movement\n */\n//List.prototype.navigateDefault = function ( event ) {\n//    switch ( event.code ) {\n//        case 38:\n//        case 40:\n//        case 39:\n//        case 37:\n//        case 33:\n//        case 34:\n//        case 36:\n//        case 35:\n//            // cursor move only on arrow keys\n//            this.move(event.code);\n//            break;\n//        case 13:\n//            // there are some listeners\n//            if ( this.events['click:item'] ) {\n//                // notify listeners\n//                this.emit('click:item', {$item: this.$focusItem, event: event});\n//            }\n//            break;\n//    }\n//};\n\n\n/**\n * Current active method to move focus according to pressed keys.\n * Can be redefined to provide custom navigation.\n *\n * @type {function}\n */\n//List.prototype.navigate = List.prototype.navigateDefault;\n\n\n/**\n * Make all the data items identical.\n * Wrap to objects if necessary.\n *\n * @param {Array} data incoming array\n * @return {Array} reworked incoming data\n */\nfunction normalize ( data ) {\n    var idx, item;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( !Array.isArray(data) ) {\n            throw new Error(__filename + ': wrong data type');\n        }\n    }\n\n    // rows\n    for ( idx = 0; idx < data.length; idx++ ) {\n        // cell value\n        item = data[idx];\n        // primitive value\n        if ( typeof item !== 'object' ) {\n            // wrap with defaults\n            item = data[idx] = {\n                value: data[idx]\n            };\n        }\n\n        if ( DEVELOP ) {\n            //if ( !('value' in item) ) { throw new Error(__filename + ': field \"value\" is missing'); }\n            if ( ('mark' in item) && Boolean(item.mark) !== item.mark ) {\n                throw new Error(__filename + ': item.mark must be boolean');\n            }\n        }\n    }\n\n    return data;\n}\n\n\n/**\n * Init or re-init of the component inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nList.prototype.init = function ( config ) {\n    var self     = this,\n        currSize = this.$body.children.length,\n        /**\n         * Item mouse click handler.\n         *\n         * @param {Event} event click event data\n         *\n         * @this Element\n         *\n         * @fires module:stb/ui/list~List#click:item\n         */\n        onClick = function ( event ) {\n            if ( this.data ) {\n                self.focusItem(this);\n\n                // there are some listeners\n                if ( self.events['click:item'] ) {\n                    // notify listeners\n                    self.emit('click:item', {$item: this, event: event});\n                }\n            }\n        },\n        item, idx;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n    }\n\n    // apply cycle behaviour\n    if ( config.cycle !== undefined ) { this.cycle = config.cycle; }\n\n    // apply ScrollBar link\n    if ( config.scroll ) { this.scroll = config.scroll; }\n\n    // apply data provider\n    if ( config.provider ) { this.provider = config.provider; }\n\n\n    // custom render method\n    if ( config.render ) {\n        if ( DEVELOP ) {\n            if ( typeof config.render !== 'function' ) {\n                throw new Error(__filename + ': wrong config.render type');\n            }\n        }\n\n        // apply\n        this.renderItem = config.render;\n    }\n\n    // list items amount on page\n    if ( config.size ) {\n        if ( DEVELOP ) {\n            if ( Number(config.size) !== config.size ) {\n                throw new Error(__filename + ': config.size must be a number');\n            }\n            if ( config.size <= 0 ) {\n                throw new Error(__filename + ': config.size should be positive');\n            }\n        }\n\n        // apply\n        this.size = config.size;\n    }\n\n    if ( config.events ) {\n        // apply all given events\n        Object.keys(config.events).forEach(function ( name ) {\n            self.events[name] = null;\n            self.addListener(name, config.events[name]);\n        });\n    }\n\n    // geometry has changed or initial draw\n    if ( this.size !== currSize ) {\n        // non-empty list\n        if ( currSize > 0 ) {\n            // clear old items\n            this.$body.innerText = null;\n        }\n\n        // create new items\n        for ( idx = 0; idx < this.size; idx++ ) {\n            item = document.createElement('div');\n            item.index = idx;\n            //item.className = 'item theme-list-item';\n            item.className = 'item';\n\n            item.addEventListener('click', onClick);\n            this.$body.appendChild(item);\n        }\n    }\n\n    if ( this.provider ) {\n        if ( this.provider.blocked ) {\n            return;\n        }\n\n        this.provider.get( null, function ( error, data ) {\n            if ( error ) {\n                if ( self.events['data:error'] ) {\n                    /**\n                     * Provider get error while take new data\n                     *\n                     * @event module:stb/ui/list~List#data:error\n                     */\n                    self.emit('data:error', error);\n                }\n            } else {\n                if ( data ) {\n                    config.data = data;\n                    self.setData(config);\n                    if ( self.scroll ) {\n                        self.scroll.init({\n                            realSize: self.provider.maxCount,\n                            viewSize: self.provider.size,\n                            value: self.provider.head + self.provider.pos\n                        });\n                    }\n                }\n                if ( self.events['data:get'] ) {\n                    /**\n                     * Provider request new data\n                     *\n                     * @event module:stb/ui/list~List#data:get\n                     *\n                     * @type {Object}\n                     */\n                    self.emit('data:get');\n                }\n            }\n        });\n    } else if ( config.data ) {\n        this.setData(config);\n    }\n};\n\n/**\n * Set data and render inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nList.prototype.setData = function ( config ) {\n    // apply list of items\n\n    if ( config.data ) {\n        if ( DEVELOP ) {\n            if ( !Array.isArray(config.data) ) { throw new Error(__filename + ': wrong config.data type'); }\n        }\n        // prepare user data\n        this.data = normalize(config.data);\n    }\n\n    // view window position\n    if ( DEVELOP ) {\n        if ( config.viewIndex !== undefined ) {\n            if ( Number(config.viewIndex) !== config.viewIndex ) {\n                throw new Error(__filename + ': config.viewIndex must be a number');\n            }\n            if ( config.viewIndex < 0 ) {\n                throw new Error(__filename + ': config.viewIndex should be positive');\n            }\n        }\n    }\n\n    // reset current view window position\n    this.viewIndex = null;\n\n    if ( this.$focusItem ) {\n        this.blurItem(this.$focusItem);\n    }\n\n    if ( this.scroll ) {\n        if ( this.provider ) {\n            if ( this.scroll.realSize !== this.provider.maxCount ) {\n                this.scroll.init({\n                    realSize: this.provider.maxCount,\n                    viewSize: this.provider.size,\n                    value: this.provider.head + this.provider.pos\n                });\n            }\n        } else {\n            this.scroll.init({\n                realSize: this.data.length,\n                viewSize: this.size,\n                value: config.viewIndex || 0\n            });\n        }\n    }\n\n    // set focus item\n    if ( config.focusIndex !== undefined && this.data.length ) {\n        if ( DEVELOP ) {\n            if ( Number(config.focusIndex) !== config.focusIndex ) {\n                throw new Error(__filename + ': config.focusIndex must be a number');\n            }\n            if ( config.focusIndex < 0 ) {\n                throw new Error(__filename + ': config.focusIndex should be positive');\n            }\n            // if ( config.focusIndex > this.data.length - 1 ) {\n            //     throw new Error(__filename + ': config.focusIndex should be less than data size');\n            // }\n        }\n\n        // jump to the necessary item\n        this.focusIndex(config.focusIndex);\n    } else {\n        // go to the first page\n        this.renderView(config.viewIndex || 0);\n    }\n};\n\n\n/**\n * Shift the visible view window event.\n *\n * @event module:stb/ui/list~List#move:view\n *\n * @type {Object}\n * @property {number} prevIndex previous view window position\n * @property {number} currIndex current view window position\n */\n\n\n/**\n * Draw the visible window.\n *\n * @param {number} index start position to render\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#move:view\n */\nList.prototype.renderView = function ( index ) {\n    var $item, idx, itemData, prevIndex, currIndex;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( Number(index) !== index ) {\n            throw new Error(__filename + ': index must be a number');\n        }\n        if ( index < 0 ) {\n            throw new Error(__filename + ': index should be more than zero');\n        }\n        // if ( index >= this.data.length ) {\n        //     throw new Error(__filename + ': index should be less than data size');\n        // }\n    }\n\n    // has the view window position changed\n    if ( this.viewIndex !== index ) {\n        // save for emit\n        prevIndex = this.viewIndex;\n        // sync global pointer\n        this.viewIndex = currIndex = index;\n\n        // rebuild all visible items\n        for ( idx = 0; idx < this.size; idx++ ) {\n            // shortcuts\n            $item    = this.$body.children[idx];\n            itemData = this.data[index];\n\n            // real item or stub\n            if ( itemData ) {\n                // correct inner data/index and render\n                $item.data  = itemData;\n                $item.index = index;\n                this.renderItem($item, itemData);\n\n                // apply CSS\n                if ( itemData.mark ) {\n                    $item.classList.add('mark');\n                } else {\n                    $item.classList.remove('mark');\n                }\n            } else {\n                // nothing to render\n                $item.data = $item.index = undefined;\n                $item.innerHTML = '&nbsp;';\n                $item.ready = false;\n            }\n            index++;\n        }\n\n        // there are some listeners\n        if ( this.events['move:view'] ) {\n            // notify listeners\n            this.emit('move:view', {prevIndex: prevIndex, currIndex: currIndex});\n        }\n\n        // there are some listeners\n        if ( this.events['select:item'] ) {\n            this.emit('select:item', {$item: $item});\n        }\n\n        // update a linked scroll component\n        if ( this.scroll ) {\n            this.scroll.scrollTo(this.provider ? this.provider.head + this.provider.pos : this.viewIndex);\n        }\n\n        // full rebuild\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n\n/**\n * Move focus to the given direction.\n *\n * @param {number} direction arrow key code\n *\n * @fires module:stb/ui/list~List#cycle\n * @fires module:stb/ui/list~List#overflow\n */\nList.prototype.move = function ( direction ) {\n    var self = this,\n        force = false;\n\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( Number(direction) !== direction ) {\n            throw new Error(__filename + ': direction must be a number');\n        }\n    }\n\n    // empty list\n    if ( !this.data.length ) {\n        return;\n    }\n\n    switch ( direction ) {\n        case keys.left:\n            if ( this.type === this.TYPE_HORIZONTAL ) {\n                force = true;\n            } else {\n                break;\n            }\n        case keys.up:\n            if ( force || this.type === this.TYPE_VERTICAL ) {\n                if ( this.$focusItem && this.$focusItem.index > 0 ) {\n                    if ( this.$focusItem === this.$body.firstChild ) {\n                        this.renderView(this.viewIndex - 1);\n                    } else {\n                        this.focusItem(this.$focusItem.previousSibling);\n                    }\n                } else if ( this.provider ) {\n                    if ( this.provider.blocked ) {\n                        return;\n                    }\n\n                    this.provider.get(direction, function ( error, data, pos ) {\n                        if ( error ) {\n                            if ( self.events['data:error'] ) {\n                                /**\n                                     * Provider get error while take new data\n                                     *\n                                     * @event module:stb/ui/list~List#data:error\n                                     */\n                                self.emit('data:error', error);\n                            }\n                        } else if ( data ) {\n                            self.setData({data: data, focusIndex: pos || pos === 0 ? pos : self.$focusItem.index});\n                        }\n                    });\n                } else {\n                    // already at the beginning\n                    if ( this.cycle ) {\n                        // jump to the end of the list\n                        this.move(keys.end);\n                    }\n                    if ( this.events['overflow'] ) {\n                        // notify listeners\n                        this.emit('overflow', {direction: direction, cycle: this.cycle});\n                    }\n                }\n            }\n            break;\n        case keys.right:\n            if ( this.type === this.TYPE_HORIZONTAL ) {\n                force = true;\n            } else {\n                break;\n            }\n        case keys.down:\n            if ( force || this.type === this.TYPE_VERTICAL ) {\n                if ( this.$focusItem && this.$focusItem.index < this.data.length - 1 ) {\n                    if ( this.$focusItem === this.$body.lastChild ) {\n                        this.renderView(this.viewIndex + 1);\n                    } else {\n                        this.focusItem(this.$focusItem.nextSibling);\n                    }\n                } else if ( this.provider ) {\n                    if ( this.provider.blocked ) {\n                        return;\n                    }\n\n                    this.provider.get(direction, function ( error, data, pos ) {\n                        if ( error ) {\n                            if ( self.events['data:error'] ) {\n                                /**\n                                     * Provider get error while take new data\n                                     *\n                                     * @event module:stb/ui/list~List#data:error\n                                     */\n                                self.emit('data:error', error);\n                            }\n                        } else if ( data ) {\n                            self.setData({data: data, focusIndex: pos || pos === 0 ? pos : self.$focusItem.index});\n                        }\n                    });\n                } else {\n                    // already at the beginning\n                    if ( this.cycle ) {\n                        // jump to the beginning of the list\n                        this.move(keys.home);\n                    }\n                    if ( this.events['overflow'] ) {\n                        // notify listeners\n                        this.emit('overflow', {direction: direction, cycle: this.cycle});\n                    }\n                }\n            }\n            break;\n        case keys.pageUp:\n            if ( this.provider ) {\n                if ( this.provider.blocked ) {\n                    return;\n                }\n\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else if ( data ) {\n                        self.setData({data: data, focusIndex: pos ? pos : 0});\n                    }\n                });\n\n                return;\n            }\n            if ( this.viewIndex < this.size ) {\n                // first page\n                this.renderView(0);\n            } else {\n                // second page and further\n                this.renderView(this.viewIndex - this.size + 1);\n            }\n\n            this.focusItem(this.$body.firstChild);\n            break;\n        case keys.pageDown:\n            if ( this.provider ) {\n                if ( this.provider.blocked ) {\n                    return;\n                }\n\n                this.provider.get(direction, function ( error, data, pos ) {\n                    var focusIndex;\n\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else if ( data ) {\n                        if ( pos || pos === 0 ) {\n                            focusIndex = pos;\n                        } else {\n                            focusIndex = data.length < self.size ?  data.length - 1 : self.size - 1;\n                        }\n\n                        self.setData({data: data, focusIndex: focusIndex});\n                    }\n                });\n                break;\n            }\n            // data is bigger then one page\n            if ( this.data.length > this.size ) {\n                // determine jump size\n                if ( this.viewIndex > this.data.length - this.size * 2 ) {\n                    // last page\n                    this.renderView(this.data.length - this.size);\n                } else {\n                    // before the last page\n                    this.renderView(this.viewIndex + this.size - 1);\n                }\n                this.focusItem(this.$body.lastChild);\n            } else {\n                // not the last item on the page\n                this.focusItem(this.$body.children[this.data.length - 1]);\n            }\n            break;\n        case keys.home:\n            if ( this.provider ) {\n                if ( this.provider.blocked ) {\n                    return;\n                }\n\n                this.provider.get(direction, function ( error, data, pos ) {\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else if ( data ) {\n                        self.setData({data: data, focusIndex: pos ? pos : 0});\n                    }\n                });\n                break;\n            }\n            this.renderView(0);\n            this.focusItem(this.$body.firstChild);\n            break;\n        case keys.end:\n            if ( this.provider ) {\n                if ( this.provider.blocked ) {\n                    return;\n                }\n\n                this.provider.get(direction, function ( error, data, pos ) {\n                    var focusIndex;\n\n                    if ( error ) {\n                        if ( self.events['data:error'] ) {\n                            /**\n                             * Provider get error while take new data\n                             *\n                             * @event module:stb/ui/list~List#data:error\n                             */\n                            self.emit('data:error', error);\n                        }\n                    } else if ( data ) {\n                        if ( pos || pos === 0 ) {\n                            focusIndex = pos;\n                        } else {\n                            focusIndex = data.length < self.size ?  data.length - 1 : self.size - 1;\n                        }\n\n                        self.setData({data: data, focusIndex: focusIndex});\n                    }\n                });\n                break;\n            }\n            if ( this.data.length > this.size ) {\n                this.renderView(this.data.length - this.size);\n                this.focusItem(this.$body.lastChild);\n            } else {\n                // not the last item on the page\n                this.focusItem(this.$body.children[this.data.length - 1]);\n            }\n            break;\n    }\n};\n\n\n/**\n * Highlight the given DOM element as focused.\n * Remove focus from the previously focused item and generate associated event.\n *\n * @param {Node|Element} $item element to focus\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#focus:item\n * @fires module:stb/ui/list~List#blur:item\n */\nList.prototype.focusItem = function ( $item ) {\n    var $prev = this.$focusItem;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n    }\n\n    // different element\n    if ( $item && $prev !== $item ) {\n        if ( DEVELOP ) {\n            if ( !($item instanceof Element) ) {\n                throw new Error(__filename + ': wrong $item type');\n            }\n            if ( $item.parentNode !== this.$body ) {\n                throw new Error(__filename + ': wrong $item parent element');\n            }\n        }\n\n        // some item is focused already\n        if ( $prev !== null ) {\n            if ( DEVELOP ) {\n                if ( !($prev instanceof Element) ) {\n                    throw new Error(__filename + ': wrong $prev type');\n                }\n            }\n\n            // style\n            $prev.classList.remove('focus');\n            //$prev.classList.remove('theme-focus');\n\n            // there are some listeners\n            if ( this.events['blur:item'] ) {\n                /**\n                 * Remove focus from an element.\n                 *\n                 * @event module:stb/ui/list~List#blur:item\n                 *\n                 * @type {Object}\n                 * @property {Element} $item previously focused HTML element\n                 */\n                this.emit('blur:item', {$item: $prev});\n            }\n        }\n        // reassign\n        this.$focusItem = $item;\n\n        this.$focusItem.data = this.data[this.$focusItem.index];\n\n        // correct CSS\n        $item.classList.add('focus');\n        //$item.classList.add('theme-focus');\n\n        // there are some listeners\n        if ( this.events['focus:item'] ) {\n            /**\n             * Set focus to a DOM element.\n             *\n             * @event module:stb/ui/list~List#focus:item\n             *\n             * @type {Object}\n             * @property {Element} $prev old/previous focused HTML element\n             * @property {Element} $curr new/current focused HTML element\n             */\n            this.emit('focus:item', {$prev: $prev, $curr: $item});\n        }\n\n        // there are some listeners\n        if ( this.events['select:item'] ) {\n            /**\n             * Set focus to a list item.\n             *\n             * @event module:stb/ui/list~List#select:item\n             *\n             * @type {Object}\n             * @property {Element} $item new/current focused item\n             */\n            this.emit('select:item', {$item: $item});\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n/**\n * Highlight the given DOM element as blur.\n * Remove focus from the item and generate associated event.\n *\n * @param {Node|Element} $item element to focus\n *\n * @return {boolean} operation status\n *\n * @fires module:stb/ui/list~List#focus:item\n * @fires module:stb/ui/list~List#blur:item\n */\nList.prototype.blurItem = function ( $item ) {\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) { throw new Error(__filename + ': wrong arguments number'); }\n    }\n\n    // different element\n    if ( $item ) {\n        if ( $item === this.$focusItem ) {\n            this.$focusItem = null;\n        }\n\n        $item.classList.remove('focus');\n        //$item.classList.remove('theme-focus');\n\n        // there are some listeners\n        if ( this.events['blur:item'] ) {\n            /**\n             * Remove focus from an element.\n             *\n             * @event module:stb/ui/list~List#blur:item\n             *\n             * @type {Object}\n             * @property {Element} $item previously focused HTML element\n             */\n            this.emit('blur:item', {$item: $item});\n        }\n\n        return true;\n    }\n\n    // nothing was done\n    return false;\n};\n\n/**\n * Set the given item focused by item index.\n *\n * @param {number} index item data index\n */\nList.prototype.focusIndex = function ( index ) {\n    var viewIndex = this.viewIndex || 0;\n\n    if ( DEVELOP ) {\n        if ( Number(index) !== index ) {\n            throw new Error(__filename + ': index must be a number');\n        }\n        if ( index < 0 ) {\n            throw new Error(__filename + ': index should be positive');\n        }\n        // if ( index > this.data.length - 1 ) {\n        //     throw new Error(__filename + ': index should be less than data size');\n        // }\n    }\n\n    // determine direction\n    if ( index >= viewIndex + this.size ) {\n        // check range\n        index = index < this.data.length - 1 ? index : this.data.length - 1;\n        // move down\n        this.renderView(index - this.size + 1);\n        this.focusItem(this.$body.lastChild);\n    } else if ( index < viewIndex ) {\n        // check range\n        index = index > 0 ? index : 0;\n        // move up\n        this.renderView(index);\n        this.focusItem(this.$body.firstChild);\n    } else {\n        // no move\n        if ( this.viewIndex === null ) {\n            // first attempt\n            this.renderView(0);\n        }\n        this.focusItem(this.$body.children[index - viewIndex]);\n    }\n};\n\n\n/**\n * Set item state and appearance as marked.\n *\n * @param {Node|Element} $item element to focus\n * @param {boolean} state true - marked, false - not marked\n */\nList.prototype.markItem = function ( $item, state ) {\n    if ( DEVELOP ) {\n        if ( arguments.length !== 2 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( !($item instanceof Element) ) {\n            throw new Error(__filename + ': wrong $item type');\n        }\n        if ( $item.parentNode !== this.$body ) {\n            throw new Error(__filename + ': wrong $item parent element');\n        }\n        if ( Boolean(state) !== state ) {\n            throw new Error(__filename + ': state must be boolean');\n        }\n    }\n\n    // correct CSS\n    if ( state ) {\n        $item.classList.add('mark');\n    } else {\n        $item.classList.remove('mark');\n    }\n\n    // apply flag\n    $item.data.mark = state;\n};\n\n\n// public\nmodule.exports = List;\n","/**\n * @license The MIT License (MIT)\n * @copyright Boris Aleynikov <aleynikov.boris@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\nvar Component = require('stb-component'),\n    keys      = require('stb-keys');\n\n/**\n * Layout component implementation\n *\n * @constructor\n * @extends Component\n *\n * @param {Object}   [config={}]          init parameters (all inherited from the parent)\n * @param {Array} [config.data] array of items to add to layout\n */\nfunction Layout ( config ) {\n    var self = this;\n\n    // sanitize\n    config = config || {};\n\n    /**\n     * Index of focused child component\n     * @type {number}\n     */\n    this.focusIndex = 0;\n\n    if ( DEVELOP ) {\n        if ( typeof config !== 'object' ) {\n            throw new Error(__filename + ': wrong config type');\n        }\n        // init parameters checks\n        if ( 'className' in config && config.className !== undefined && typeof config.className !== 'string' ) {\n            throw new Error(__filename + ': wrong or empty config.className');\n        }\n    }\n\n    //config.className = 'layout ' + (config.className || '');\n\n    /**\n     * Component data\n     * @type {Array}\n     */\n    this.data = [];\n\n    Component.call(this, config);\n\n    this.init(config);\n\n    // add listener to move focus between children\n    this.addListener('keydown', function ( event ) {\n        switch ( event.code ) {\n            case keys.right:\n                if ( self.children.length && self.focusIndex < self.children.length - 1 ) {\n                    self.children[++self.focusIndex].focus();\n                }\n                break;\n            case keys.left:\n                if ( self.children.length && self.focusIndex > 0 ) {\n                    self.children[--self.focusIndex].focus();\n                }\n                break;\n            case keys.back:\n                // focus parent focused item if parent is layout list\n                if ( self.parent ) {\n                    self.parent.focus();\n                    if ( self.$parentItem ) {\n                        self.parent.focusItem(self.$parentItem);\n                    }\n                }\n                break;\n        }\n    });\n}\n\n\nLayout.prototype = Object.create(Component.prototype);\nLayout.prototype.constructor = Layout;\n\n// set component name\nLayout.prototype.name = 'mag-component-layout';\n\n\n/**\n * Make all the data items identical.\n * Wrap to objects if necessary.\n *\n * @param {Array} data incoming array\n * @return {Array} reworked incoming data\n */\nfunction normalize ( data ) {\n    var index, item;\n\n    if ( DEVELOP ) {\n        if ( arguments.length !== 1 ) {\n            throw new Error(__filename + ': wrong arguments number');\n        }\n        if ( !Array.isArray(data) ) {\n            throw new Error(__filename + ': wrong data type');\n        }\n    }\n\n    // rows\n    for ( index = 0; index < data.length; index++ ) {\n        // cell value\n        item = data[index];\n        // plain text\n        if ( typeof item === 'object' ) {\n            // HTML element or component\n            if ( item instanceof Component || item instanceof HTMLElement ) {\n                data[index] = {\n                    value: item,\n                    wrap: false\n                };\n            } else {\n                data[index].wrap = true;\n            }\n        } else {\n            // wrap with defaults\n            data[index] = {\n                value: data[index],\n                wrap: true\n            };\n        }\n    }\n\n    return data;\n}\n\n\n/**\n * Init or re-init of the component inner structures and HTML.\n *\n * @param {Object} config init parameters (subset of constructor config params)\n */\nLayout.prototype.init = function ( config ) {\n    var self = this,\n        data = normalize(config.data),\n        item, $wrapper, index;\n\n    // clear element if reinit\n    while (this.$node.firstChild) {\n        this.$node.removeChild(this.$node.firstChild);\n    }\n\n    this.data = data;\n\n    /**\n     * @this Component\n     */\n    function componentClickHandler (  ) {\n        self.focusIndex = this.index;\n    }\n\n    for ( index = 0; index < data.length; index++ ) {\n        item = data[index];\n        // plain text\n        if ( typeof item.value === 'string' ) {\n            $wrapper = document.createElement('div');\n            $wrapper.textContent = item.value;\n            if ( item.className ) { $wrapper.className = item.className; }\n            this.$node.appendChild($wrapper);\n        } else if ( item.value instanceof HTMLElement ) {\n            // HTML Element\n\n            // if with wrapper\n            if ( item.wrap ) {\n                $wrapper = document.createElement('div');\n                if ( item.className ) { $wrapper.className = item.className; }\n                $wrapper.appendChild(item.value);\n                this.$node.appendChild($wrapper);\n            } else {\n                // without wrapper\n                this.$node.appendChild(item.value);\n            }\n        } else if ( item.value instanceof Component ) {\n            // component\n            // force propagate events\n            item.value.propagate = true;\n\n            // set index to current component\n            item.value.index = this.children.length;\n\n            // change layout focus index if click component\n            item.value.addListener('click', componentClickHandler);\n\n            // append component\n            if ( item.wrap ) {\n                // with wrapper\n                $wrapper = document.createElement('div');\n                if ( item.className ) { $wrapper.className = item.className; }\n                $wrapper.appendChild(item.value.$node);\n                this.$node.appendChild($wrapper);\n                this.children.push(item.value);\n                item.value.parent = this;\n            } else {\n                // without wrapper\n                this.add(item.value);\n            }\n        } else {\n            $wrapper = document.createElement('div');\n            if ( item.className ) { $wrapper.className = item.className; }\n            this.$node.appendChild($wrapper);\n        }\n    }\n};\n\n\nmodule.exports = Layout;\n","/**\n *\n */\n\n'use strict';\n\n/* eslint max-len: 0 */\n\nmodule.exports = '<p class=\"bold\">1. PERMITTED USE' +\n'</p><p>' +\n'1.1 Subject to these Terms, you are granted a limited, non-exclusive, non-transferable, royalty-free license to use the Application on a single device and solely for the intended purpose of the Application within its functionality as designed by the Application owners. ' +\n'</p><p>' +\n'1.2 You may not, and you agree not to or enable others to, modify, copy (except as expressly permitted by these Terms), decrypt, decompile, reverse engineer, disassemble, attempt to derive the source code of, or create derivative works of the Application or any services provided by the Application or any part thereof (except as and only to the extent any foregoing restriction is prohibited by applicable law). ' +\n'</p><p>' +\n'1.3 You may not rent, lease, lend, sell, redistribute, or sublicense the Application. ' +\n'</p><p>' +\n'1.4 You shall promptly report any errors in the operation of the Application to the Application owners. You shall immediately notify the Application owners of any third party infringement on the Application owners’ rights in the Application of which you may become aware. ' +\n'</p><p>' +\n'1.5 Are agree that the Application owners may from time to time download and install automatic updates of the Application.' +\n'</p><p class=\"bold\">' +\n'2. CONTENT ' +\n'</p><p>' +\n'2.1 Any content (data file, text, software, music, phonograms, audio files, photos, videos or any other form of audiovisual data) displayed by, stored on, or accessed through the Application belongs to the respective content owners. Such content may be protected by copyright or other intellectual property laws and treaties, and may be subject to terms of use of the third party providing such content. The Application may be used to reproduce content so long as such use is limited to reproduction of non-copyrighted content, content in which you own the copyright, or content you are authorized or legally permitted to reproduce. You further acknowledge that you understand that the Application owners are not responsible for examining or evaluating the content in any way, and it is your sole responsibility to abide by any applicable intellectual property and other laws and regulations. ' +\n'</p><p>' +\n'2.2 You understand that by using the Application, you may encounter content that may be deemed offensive, indecent, or objectionable, which content may or may not be identified as having explicit language, and that the results of any search or entering of a particular URL may automatically and unintentionally generate links or references to objectionable material. Nevertheless, you agree to use the Application at your sole risk, and that the Application owners, their affiliates, agents, principals, or licensors shall have no liability to you for content that may be found to be offensive, indecent, or objectionable. ' +\n'</p><p class=\"bold\">' +\n'3. REPRESENTATIONS AND WARRANTIES ' +\n'</p><p>' +\n'3.1 THERE IS NO WARRANTY FOR THE APPLICATOIN TO THE EXTENT PERMITTED BY THE APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING, THE APPLICATOIN IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, QUALITY, PERFORMANCE OR NONINFRINGEMENT UPON THE PATENT, TRADEMARK, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHTS OF ANY OTHER PARTY. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE APPLICATOIN IS WITH YOU. SHOULD THE APPLICATOIN PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL THE NECESSARY SERVICING, REPAIR OR CORRECTION. THE APPLICATOIN OWNERS MAKE NO WARRANTY THAT THE APPLICATOIN AND ALL OTHER MATERIALS RELATED THERETO WILL MEET YOUR SPECIFIC OBJECTIVES OR NEEDS OR THAT THE SAME WILL BE FREE FROM ERRORS OR BUGS. THE APPLICATOIN OWNERS MAKE NO WARRANTY THAT THERE WILL BE UNINTERRUPTED OPEATION OF THE APPLICATOIN. YOU ACKNOWLEDGE AND AGREE THAT THE FOREGOING EXCLUSIONS AND DISCLAIMERS OF WARRANTIES ARE AN INTEGRAL PART OF THESE TERMS. ' +\n'</p><p>' +\n'3.2 IN NO EVENT WILL THE APPLICATOIN OWNERS BE LIABLE TO YOU FOR ANY DAMAGES, INCLUDING, BUT NOT LIMITED TO, ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE APPLICATOIN (INCLUDING, BUT NOT LIMITED TO, LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES INCURRED BY YOU OR THIRD PARTIES OR A FAILURE OF THE APPLICATOIN TO OPERATE WITH ANY COMPUTER PROGRAMS), EVEN IF THE APPLICATOIN OWNERS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. ' +\n'</p><p>' +\n'3.3 If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts or government bodies shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Application. If there is a mandatory minimum level of liability, this mandatory minimum level shall apply taking into account the absolute waiver of all civil liability in connection with the Application. ' +\n'</p><p class=\"bold\">' +\n'4. TERMINATION ' +\n'</p><p>' +\n'4.1 In the event that you (i) breach any of the terms and conditions of these Terms, or (ii) use the Application in a manner which is inconsistent with the license granted to you pursuant to these Terms, or (iii) you use the Application in a manner which is inconsistent with its functionality or intended purpose, or (iv) you attempt to assign, transfer or sublicense the Application or any portion thereof to any third party without the consent of the Application owners which may be withheld, delayed, denied or conditioned by the Application owners in their sole discretion, then the Application owners may terminate these Terms immediately upon the provision of notice to you. Upon termination of these Terms, you shall delete, uninstall and cease using the Application in any manner. ' +\n'</p><p class=\"bold\">' +\n'5. INJUNCTIVE RELIEF ' +\n'</p><p>' +\n'5.1 You acknowledge and agree that an actual or threatened violation by you of these Terms will cause the Application owners immediate and irreparable harm and injury which cannot be fully compensated by an award of damages or other remedies at law. Accordingly, you acknowledge and agree that in such case, the Application owners shall be entitled, as a matter of right, to an injunction from any court of competent jurisdiction restraining any further violation by you of these Terms; such right to an injunction shall be cumulative and in addition to, but not in limitation of, any other rights that the Application owners may have at law or in equity. This section shall survive the termination of these Terms, indefinitely. ' +\n'</p><p class=\"bold\">' +\n'6. COLLECTION OF INFORMATION ' +\n'</p><p>' +\n'6.1 You are hereby notified and agree that the Application owners may, for the purposes of improving performance and compatibility of the Application, providing individual support, improving the experience of the Application use, preventing or addressing security or technical issues, or as otherwise required by law, collect, process, and store unique identifiers and other user information, which comprises account information, services usage information, contact information, log data, device information, geo-locational information, third-party services integrations. ' +\n'</p><p>' +\n'6.2 The foregoing information may be also used for marketing or advertising purposes. You can opt out of these at any time by sending a notice to sales@infomir.eu. ' +\n'</p><p>' +\n'6.3 The Application owners receive user information from various sources, including information from: ' +\n'<ul><li>' +\n'your requests for the Application owners’ services; ' +\n'</li><li>' +\n'your transactions with the Application owners, and ' +\n'</li><li>' +\n'nonpublic information that you provide directly to the Application owners. ' +\n'</li></ul>' +\n'</p><p>' +\n'6.4 The Application owners use nonpublic information that they have about you, as described above, to give you superior products and services, provide convenient access to products and services, and make a wider range of services available to you. The Application owners furnish your nonpublic information to their service providers and generically to serve the function of what the Application owners do. However, the Application owners do not disclose your specific nonpublic information to other third parties, except as otherwise described in these Terms. ' +\n'</p><p>' +\n'6.5 The Application owners may disclose your nonpublic information as permitted by law. For example, the Application owners may share nonpublic information with regulatory authorities and law enforcement officials who have jurisdiction over the Application owners or if the Application owners are required to do so by United States or other applicable law; provide nonpublic information to others to protect against fraud; and share nonpublic information with others with your consent. The Application owners also may share nonpublic information with firms they hire to market their services or with non-affiliated companies with whom the Application owners have joint marketing agreements to provide you with offers of their services. These companies may receive user information, but they are restricted in its use and they are required to comply with all applicable federal, state and local laws. ' +\n'</p><p>' +\n'6.6 When the Application owners share nonpublic information with companies working on the Application owners’ behalf, the Application owners insist that such companies use the nonpublic information only to provide the service that the Application owners have asked them to perform. Within the Application owners, user information is available only to those individuals who may need to see it to fulfill and service the needs of their customers or the general function of the Application owners. The Application owners communicate regarding the need to protect nonpublic information to all employees and agents, especially to those individuals who have access to it. In addition, the Application owners have established and maintain physical, electronic, and procedural safeguards to protect nonpublic information. ' +\n'</p><p class=\"bold\">' +\n'7. NO LIABILITY FOR THIRD PARTY CLAIMS ' +\n'</p><p>' +\n'7.1 The Application owners shall not be liable for claims made against the Application owners or you arising out of your use of the Application and any materials related thereto and you hereby agree to indemnify, defend and hold the Application owners and its members, officers, directors, shareholders, employees, agents and affiliates harmless from and against any and all claims of every nature or type, that may be brought or asserted against the Application owners or any of the Application owners’ members, officers, directors, shareholders, employees, agents and their affiliates by any other party arising out of (i) your use of the Application and/or any materials related thereto, or (ii) your breach of your obligations, duties and responsibilities under these Terms, or (iii) any breach or default under any representations, warranties, guaranties or other written or oral statements made by or on behalf of you or any person under your control, including, without limitation, your agents. ' +\n'</p><p class=\"bold\">' +\n'8. NOTICES ' +\n'</p><p>' +\n'8.1 You consent to receive notices that may be required or desirable to give under these Terms or in connection with it electronically by email or through the Application; in the latter case a notice will be displayed within the Application interface. Alternatively, the Application owners may notify you by placing a notice on the website http://www.infomir.eu/. You agree that any such notices that the Application owners send you electronically or place on the website will satisfy any legal communication requirements. Any notice required to be given to the Application owners under these Terms or in connection with it, shall be given to the following email address: sales@infomir.eu. Any notification given under or in connection with these Terms shall be made in English. ' +\n'</p><p class=\"bold\">' +\n'9. GOVERNING LAW. JURISDICTION ' +\n'</p><p>' +\n'9.1 These Terms shall be governed and construed in accordance with the laws of the State of New York, without regard to the conflict of law principles thereof. In the event of a dispute arising under these Terms, the Supreme Court of the State of New York venued in Kings County and the United States District Court for the Eastern District of New York venued in Kings County shall have co-exclusive jurisdiction to resolve such a dispute. These Terms shall not be governed by the United Nations Convention on Contracts for the International Sale of Goods, the application of which is expressly excluded. ' +\n'</p><p class=\"bold\">' +\n'10. NO ASSIGNMENT ' +\n'</p><p>' +\n'10.1 Neither these Terms nor any interest in these Terms may be assigned or sublicensed by you without the prior express written approval of the Application owners, and any attempt by you to assign or sublicense these Terms or any interest herein without the prior express written approval of the Application owners shall be null, void and of no force and effect. ' +\n'</p><p class=\"bold\">' +\n'11. ENTIRE AGREEMENT. MODIFICATION ' +\n'</p><p>' +\n'11.1 These Terms constitute the entire agreement between the parties hereto and terminate and supersede all prior understandings or agreements on the subject matter hereof. These Terms may be modified by the Application owners at any time by providing to you a notice to this effect. Any further use of the Application will be subject to such modified Terms, and in case you do not accept these modified Terms, you will not be able to continue the use of the Application. ' +\n'</p><p class=\"bold\">' +\n'12. SEVERABILITY ' +\n'</p><p>' +\n'12.1 If any provision of these Terms is found by a court of competent jurisdiction or other valid tribunal to be invalid or otherwise unenforceable, the invalid or unenforceable provision shall be deemed amended to remove such provision, and the remaining Terms will be construed to give maximum effect to the intention of the parties; in this event the Application owners shall also have the right to terminate these Terms immediately upon the provision of notice to you. ' +\n'</p><p class=\"bold\">' +\n'13. SURVIVAL. NO WAIVER ' +\n'</p><p>' +\n'13.1 Sections 3, 7, 8, 9 shall survive any termination or expiration of these Terms. ' +\n'</p><p>' +\n'13.2 No party’s waiver of any breach or accommodation to the other party shall be deemed to be a waiver of any subsequent breach by a party. ' +\n'</p><p class=\"bold\">' +\n'14. HEADINGS. INTERPRETATIONS ' +\n'</p><p>' +\n'14.1 Headings used in these Terms are provided for convenience only and shall not be used to construe meaning or intent. Except as otherwise provided herein, words used herein, regardless of the number and gender specifically used, shall be deemed and construed to include any other member, singular or plural, and any other gender, masculine, feminine or neuter, as the context indicates as appropriate. ' +\n'</p>';\n","'use strict';\n\nvar gSTB = top.gSTB,\n    apiSignature = (function () {\n        var counter = 0,\n            property;\n\n        for ( property in gSTB ) {\n            if ( gSTB.hasOwnProperty(property) ) {\n                ++counter;\n            }\n        }\n\n        return counter;\n    })(),\n    model            = gSTB.GetDeviceModelExt(),\n    mac              = gSTB.GetDeviceMacAddress(),\n    clientType       = 'STB',\n    serialNumber     = gSTB.GetDeviceSerialNumber(),\n    nativeApiVersion = gSTB.Version(),\n\n    // HTTP request defaults\n    defaults = {\n        method: 'GET',\n        async: true,\n        headers: {},\n        data: null,\n        timeout: 30000,\n        type: 'text',\n        onload: function () {\n            // callback when the request has successfully completed\n        },\n        onerror: function () {\n            // callback when the request has failed\n        },\n        ontimeout: null\n    },\n    defaultsKeys = Object.keys(defaults),\n    requestStack = [],\n    locked = false,\n    api = {\n        host: null,\n        authHost: null,\n        lang: 'en',\n        session: {\n            accessToken: null,\n            refreshToken: null,\n            userId: null,\n            macAlgorithm: null,\n            macKey: null\n        },\n        auth: {\n            login: function (credentials, callback) {\n                var deviceId2 = Math.random().toString(36).substring(2),\n                    client = fetch(),\n                    random = Math.random().toString(36).substring(2),\n                    ts = Math.round(Date.now() / 1000),\n                    hash = gSTB.GetHashVersion1(random, ts),\n                    hwVersion = hash + '.' + random + '.' + ts,\n                    deviceId = gSTB.GetUID(),\n                    postBody = [],\n                    uid, loginData;\n\n                console.log('hash ' + hash);\n                if ( hash === 'false' ) {\n                    setTimeout(function () {\n                        api.auth.login(credentials, callback);\n                    }, 5000);\n\n                    return;\n                }\n\n                /* eslint no-fallthrough: 0 */\n                switch ( model ) {\n                    case 'AuraHD4':\n                    case 'MAG322':\n                    case 'MAG324':\n                        deviceId = gSTB.GetUID('device_id', '1729452065727304', 3);\n\n                        uid = gSTB.GetUID('device_id', deviceId2, 5);\n\n                        deviceId2 = deviceId2 + '.' + uid;\n                        if ( deviceId.length > 0 && uid.length > 0 ) {\n                            break;\n                        }\n\n                    default:\n                        deviceId = gSTB.GetUID();\n\n                        uid = gSTB.GetUID('device_id', deviceId2);\n\n                        if ( uid ) {\n                            deviceId2 = deviceId2 + '.' + uid;\n                        } else {\n                            deviceId2 = '';\n                        }\n                        break;\n                }\n\n                /* eslint camelcase: 0 */\n                loginData = {\n                    grant_type: 'password',\n                    client_type: clientType,\n                    username: credentials.login,\n                    password: credentials.password,\n                    mac: mac,\n                    serial_number: serialNumber,\n                    stb_type: model,\n                    model: model,\n                    device_id: deviceId,\n                    device_id2: deviceId2,\n                    version: nativeApiVersion,\n                    hw_version: hwVersion,\n                    api_signature: apiSignature\n                };\n\n                Object.keys(loginData).forEach(function ( key ) {\n                    postBody.push(key + '=' + encodeURIComponent(loginData[key]));\n                });\n\n                client.open('POST', api.authHost, true);\n\n                client.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n                client.timeout = 10000;\n\n                client.onload = function () {\n                    var data;\n\n                    console.log('login responseText ' + this.responseText);\n                    console.log('login status ' + this.status);\n                    if ( this.status === 200 ) {\n                        try {\n                            data = JSON.parse(this.responseText);\n                        } catch (error) {\n                            console.log(error);\n                            data = {};\n                        }\n\n                        if ( data.access_token && data.user_id ) {\n                            api.session.accessToken = data.access_token;\n                            api.session.refreshToken = data.refresh_token;\n                            api.session.userId = data.user_id;\n\n                            if ( data.mac_algorithm ) {\n                                api.session.macAlgorithm = data.mac_algorithm;\n                            }\n\n                            if ( data.mac_key ) {\n                                api.session.macKey = data.api.mac_key;\n                                api.session.macAlgorithm = data.api.mac_algorithm;\n                            }\n\n                            if ( data.api && data.api.v3 ) {\n                                api.session.macKey = data.api.v3.mac_key;\n                                api.session.macAlgorithm = data.api.v3.mac_algorithm;\n                            }\n\n                            if ( api.saveCallback ) {\n                                api.saveCallback();\n                            }\n\n                            callback(false);\n                        } else {\n                            callback(data, data);\n                        }\n                    } else {\n                        callback(this.status + ' : ' + this.responseText, {});\n                    }\n                };\n\n                client.ontimeout = function () {\n                    callback('onerror ' + this.status + ' : ' + this.responseText, false);\n                };\n\n                client.onerror = function () {\n                    callback('onerror ' + this.status + ' : ' + this.responseText, false);\n                };\n\n                console.log(postBody.join('&'));\n                client.send(postBody.join('&'));\n            },\n            refreshToken: function (refreshToken, callback) {\n                var client = fetch(),\n                    random = Math.random().toString(36).substring(2),\n                    ts = Math.round(Date.now() / 1000),\n                    hash = gSTB.GetHashVersion1(random, ts),\n                    hwVersion = hash + '.' + random + '.' + ts,\n                    postBody = [],\n                    refreshData;\n\n                console.log('hash ' + hash);\n                if ( hash === 'false' ) {\n                    setTimeout(function () {\n                        api.auth.refreshToken(refreshToken, callback);\n                    }, 5000);\n\n                    return;\n                }\n\n                refreshData = {\n                    grant_type: 'refresh_token',\n                    refresh_token: refreshToken,\n                    hw_version: hwVersion,\n                    model: model,\n                    mac: mac,\n                    client_type: clientType,\n                    api_signature: apiSignature\n                };\n\n                Object.keys(refreshData).forEach(function ( key ) {\n                    postBody.push(key + '=' + encodeURIComponent(refreshData[key]));\n                });\n\n                client.open('POST', api.authHost, true);\n\n                client.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n                client.onload = function () {\n                    var data;\n\n                    console.log('refresh token status ' + this.status);\n                    if ( this.status === 200 ) {\n                        try {\n                            data = JSON.parse(this.responseText);\n                        } catch (error) {\n                            data = {};\n                            console.log(error);\n                        }\n\n                        console.log('refresh token responseText ' + this.responseText);\n                        if ( data.access_token && data.user_id ) {\n                            api.session.accessToken = data.access_token;\n                            api.session.refreshToken = data.refresh_token;\n                            api.session.userId = data.user_id;\n\n                            if ( data.mac_algorithm ) {\n                                api.session.macAlgorithm = data.mac_algorithm;\n                            }\n\n                            if ( data.mac_key ) {\n                                api.session.macKey = data.api.mac_key;\n                                api.session.macAlgorithm = data.api.mac_algorithm;\n                            }\n\n                            if ( data.api && data.api.v3 ) {\n                                api.session.macKey = data.api.v3.mac_key;\n                                api.session.macAlgorithm = data.api.v3.mac_algorithm;\n                            }\n\n                            if ( api.saveCallback ) {\n                                api.saveCallback();\n                            }\n\n                            callback(false);\n                        } else {\n                            callback(data, data);\n                        }\n                    } else {\n                        callback(this.status + ' : ' + this.responseText, {});\n                    }\n                };\n\n                client.onerror = function () {\n                    console.log('onerror');\n                    callback(true, {});\n                };\n\n                console.log(postBody.join('&'));\n                client.send(postBody.join('&'));\n            }\n        },\n        /* eslint max-lines-per-function: 0 */\n        /* eslint consistent-return: 0 */\n        request: function (url, options) {\n            var client = fetch(),\n                eth0 = gSTB.GetLanLinkStatus(),\n                wifi = gSTB.GetWifiLinkStatus(),\n                userAgent = 'Model: ' + gSTB.GetDeviceModelExt() + '; Link: ',\n                index, headersKeys;\n\n            if ( locked ) {\n                requestStack.push({\n                    url: url,\n                    options: options\n                });\n\n                return;\n            }\n\n            locked = true;\n            // init\n            options = options || {};\n\n            // valid non-empty string\n            if ( url && (typeof url === 'string' || url instanceof String) && url.length > 0 ) {\n                // plain object is given as param\n                if ( options && typeof options === 'object' ) {\n                    // extend with default options\n                    for ( index = 0; index < defaultsKeys.length; index++ ) {\n                        // in case not redefined\n                        if ( options[defaultsKeys[index]] === undefined) {\n                            options[defaultsKeys[index]] = defaults[defaultsKeys[index]];\n                        }\n                    }\n                }\n\n                client = fetch();\n                // init a request\n                console.log(JSON.stringify([options.method, api.host + '/' + url, options.async]));\n                client.open(options.method, api.host + '/' + url, options.async);\n\n                client.setRequestHeader('Authorization', 'Bearer ' + api.session.accessToken);\n\n                client.setRequestHeader('Content-Type', 'application/json');\n\n                client.setRequestHeader('Accept-Language', api.lang);\n                /* eslint no-nested-ternary: 0 */\n                client.setRequestHeader('X-User-Agent', userAgent + (eth0 && wifi ? 'Ethernet,WiFi' : wifi ? 'WiFi' : eth0 ? 'Ethernet' : ''));\n\n                // apply the given headers\n                if ( options.headers && typeof options.headers === 'object' ) {\n                    headersKeys = Object.keys(options.headers);\n                    for ( index = 0; index < headersKeys.length; index++ ) {\n                        client.setRequestHeader(headersKeys[index], options.headers[headersKeys[index]]);\n                    }\n                }\n\n                // set response type and timeout\n                client.responseType = options.type;\n                client.timeout = options.timeout;\n\n                client.onreadystatechange = function onreadystatechange () {\n                    var data = false;\n\n                    console.log(this.readyState);\n                    console.log(this.status);\n                    if ( this.readyState === 0 ) {\n                        locked = false;\n                        if ( requestStack.length > 0 ) {\n                            data = requestStack.shift();\n                            api.request(data.url, data.options);\n                        }\n                    } else if ( this.readyState === 4 ) {\n                        try {\n                            data = JSON.parse(this.responseText);\n                        } catch (error) {\n                            data = false;\n                            console.log(error);\n                        }\n\n                        if ( this.status === 0 ) {\n                            locked = false;\n                            if ( requestStack.length > 0 ) {\n                                data = requestStack.shift();\n                                api.request(data.url, data.options);\n                            }\n                        } else if ( this.status === 200 ) {\n                            try {\n                                options.onload(!data, data);\n                            } catch (error) {\n                                if ( api.onfail ) {\n                                    api.onfail('Exception thrown ' + error.message, error);\n                                }\n                                if ( options.onerror ) {\n                                    try {\n                                        options.onerror.call(client, error);\n                                    } catch (error) {\n                                        console.log(error);\n                                    }\n                                }\n                            }\n\n                            locked = false;\n                            if ( requestStack.length > 0 ) {\n                                data = requestStack.shift();\n                                api.request(data.url, data.options);\n                            }\n                        } else if ( this.status === 401 ) {\n                            if ( api.session.refreshToken ) {\n                                api.auth.refreshToken(api.session.refreshToken, function (error) {\n                                    if ( error ) {\n                                        console.log(error);\n                                        api.auth.login({\n                                            password: '',\n                                            login: ''\n                                        }, function (error, result) {\n                                            console.log(error);\n                                            console.log(JSON.stringify(error));\n                                            console.log(JSON.stringify(result));\n                                            if ( error ) {\n                                                if ( error.error === 'invalid_grant' ) {\n                                                    api.oncredenitalsrequired(function () {\n                                                        locked = false;\n                                                        api.request(url, options);\n                                                    });\n                                                } else if ( error.error === 'access_denied' && error.error_description === 'Account disabled' ) {\n                                                    api.oncredenitalsrequired(function () {\n                                                        // empty callback\n                                                    }, {\n                                                        error: error\n                                                    });\n                                                } else {\n                                                    locked = false;\n                                                    api.request(url, options);\n                                                }\n                                            } else {\n                                                locked = false;\n                                                api.request(url, options);\n                                            }\n                                        });\n                                    } else {\n                                        locked = false;\n                                        api.request(url, options);\n                                    }\n                                });\n                            } else {\n                                api.auth.login({\n                                    password: '',\n                                    login: ''\n                                }, function (error, result) {\n                                    console.log(JSON.stringify(error));\n                                    console.log(JSON.stringify(result));\n                                    if ( error ) {\n                                        if ( error.error === 'invalid_grant' ) {\n                                            api.oncredenitalsrequired(function () {\n                                                locked = false;\n                                                api.request(url, options);\n                                            });\n                                        } else if ( error.error === 'access_denied' && error.error_description === 'Account disabled' ) {\n                                            api.reload();\n                                            api.oncredenitalsrequired(function () {\n                                                // empty callback\n                                            }, {\n                                                error: error\n                                            });\n                                        } else {\n                                            locked = false;\n                                            api.request(url, options);\n                                        }\n                                    } else {\n                                        console.log(222);\n                                        locked = false;\n                                        api.request(url, options);\n                                    }\n                                });\n                            }\n                        } else if ( data && data.error === 'access_denied' && data.error_description === 'Account disabled' ) {\n                            api.oncredenitalsrequired(function () {\n                                // empty callback\n                            }, {\n                                error: data.error\n                            });\n                            locked = true;\n                        } else {\n                            locked = false;\n\n                            try {\n                                options.onload(this.status, this.responseText);\n                            } catch (onloadException) {\n                                console.log(onloadException);\n                                //if ( api.onfail ) {\n                                //    api.onfail('Exception thrown ' + e.message, e);\n                                //}\n                                if ( options.onerror) {\n                                    try {\n                                        options.onerror.call(client, onloadException);\n                                    } catch (onerrorException) {\n                                        console.log(onerrorException);\n                                    }\n                                }\n                            }\n\n                            if ( requestStack.length > 0 ) {\n                                data = requestStack.shift();\n                                api.request(data.url, data.options);\n                            }\n                        }\n                    }\n                };\n\n                client.onerror = function () {\n                    if ( options.onerror ) {\n                        try {\n                            options.onerror.call(client);\n                        } catch (error) {\n                            console.log(error);\n                        }\n                    }\n                    if ( api.onfail ) {\n                        api.onfail('Network error ' + client.status);\n                    }\n                };\n\n                client.ontimeout = function () {\n                    if ( options.ontimeout ) {\n                        try {\n                            options.ontimeout.call(client);\n                        } catch (error) {\n                            console.log(error);\n                        }\n                    }\n                };\n\n                // actual request\n                client.send(options.body || null);\n\n                return client;\n            }\n        }\n    };\n\n\nmodule.exports = api;\n"],"sourceRoot":""}