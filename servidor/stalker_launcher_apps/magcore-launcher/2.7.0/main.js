!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}([function(e,t,i){"use strict";var s=i(2),n=i(12).parse,o=new s;o.query=n(document.location.search.substring(1)),o.config=i(13),o.activePage=null,o.route=function(e,t){var i,s=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=o.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,o.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:s,to:e}),!0)},e.exports=o},function(e,t,i){"use strict";var s=i(0),n=i(2),o=0;function a(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,n.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.defaultEvents=null,a.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},a.prototype.remove=function(){this.parent&&(s.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},a.prototype.focus=function(e){var t=s.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},a.prototype.blur=function(){var e=s.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},a.prototype.show=function(e){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),!0)},a.prototype.hide=function(){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),!0)},e.exports=a},function(e,t,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function s(){i.removeListener(e,s),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s=i(5);s.back=s.backspace,s.channelNext=s.tab,s.channelPrev=s.tab+"s",s.ok=s.enter,s.exit=s.escape,s.volumeUp=107,s.volumeDown=109,s.f1="112c",s.f2="113c",s.f3="114c",s.f4="115c",s.refresh="116c",s.frame="117c",s.phone="119c",s.set="120c",s.tv="121c",s.menu="122c",s.app="123c",s.rewind="66a",s.forward="70a",s.audio="71a",s.standby="74a",s.keyboard="76a",s.usbMounted="80a",s.usbUnmounted="81a",s.playPause="82a",s.play=-1,s.pause=-1,s.stop="83a",s.power="85a",s.record="87a",s.info="89a",s.mute="192a",s.digit0=48,s.digit1=49,s.digit2=50,s.digit3=51,s.digit4=52,s.digit5=53,s.digit6=54,s.digit7=55,s.digit8=56,s.digit9=57,e.exports=s},function(e,t,i){"use strict";var s=i(11);e.exports=s},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";e.exports=i(1)},function(e,t,i){"use strict";var s=i(0);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+s.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";var s=new(i(2)),n=0,o={},a=!1;function r(e){"error"===e.type?(this.group,this.src):a&&(this.group,this.src,this.width,this.height),n--,o[this.group]--,s.events["link"]&&s.emit("link",{url:this.src,group:this.group}),0===o[this.group]&&(this.group,s.events["group"]&&s.emit("group",{name:this.group})),0===n&&s.events["done"]&&s.emit("done")}s.add=function(e){e.forEach(function(e){var t=new Image,i=e.url||e,s=e.group||"";n++,o[s]=void 0===o[s]?1:o[s]+1,t.src=i,t.group=s,t.onload=t.onerror=t.ontimeout=r})},e.exports=s},function(e,t,i){"use strict";var s=i(6),n=i(3);function o(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-list",o.prototype.TYPE_VERTICAL=1,o.prototype.TYPE_HORIZONTAL=2,o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?n.up:n.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?n.left:n.right)},keydown:function(e){switch(e.code){case n.up:case n.down:case n.right:case n.left:case n.pageUp:case n.pageDown:case n.home:case n.end:this.move(e.code);break;case n.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,s=this,n=this.$body.children.length,o=function(e){this.data&&(s.focusItem(this),s.events["click:item"]&&s.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){s.events[t]=null,s.addListener(t,e.events[t])}),this.size!==n)for(n>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);this.provider?this.provider.get(null,function(t,i){t?s.events["data:error"]&&s.emit("data:error",t):(i&&(e.data=i,s.setData(e),s.scroll&&s.scroll.init({realSize:s.provider.maxCount,viewSize:s.provider.size,value:s.provider.head+s.provider.pos})),s.events["data:get"]&&s.emit("data:get"))}):e.data&&this.setData(e)},o.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},o.prototype.renderView=function(e){var t,i,s,n,o;if(this.viewIndex!==e){for(n=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(s=this.data[e])?(t.data=s,t.index=e,this.renderItem(t,s),s.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:n,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},o.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case n.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case n.up:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})}):(this.cycle&&this.move(n.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case n.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case n.down:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})}):(this.cycle&&this.move(n.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case n.pageUp:if(this.provider)return void this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case n.pageDown:if(this.provider){this.provider.get(e,function(e,i,s){var n;e?t.events["data:error"]&&t.emit("data:error",e):i&&(n=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:n}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case n.home:if(this.provider){this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case n.end:if(this.provider){this.provider.get(e,function(e,i,s){var n;e?t.events["data:error"]&&t.emit("data:error",e):i&&(n=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:n}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},o.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";var s=i(4),n=i(8),o=i(19),a=i(21);s.activePage={events:{},emit:function(){}},s.addListeners({load:function(){o.load({name:core.environment.language},function(){a.load(s.query,function(e,t){e?window.pageMain.innerHTML="<p>Launcher config loading error</p> "+e:(s.data=s.data||{},s.data.profile=t,s.pages={main:i(23)},n.once("done",function(){s.route(s.pages.main),core.emit("app:ready")}),n.add([{url:"img/"+s.metrics.height+"/icons/shadow.normal.png",group:"overlay"},{url:"img/"+s.metrics.height+"/icons/shadow.active.png",group:"overlay"}]))})})}})},function(e,t,i){"use strict";var s=i(0),n=i(14);window.core=window.parent.getCoreInstance(window,s),i(15),i(16),i(7)("sdk"),i(18),i(7)("app"),s.platform="mag",s.ready=function(){window.core.call("app:ready")},s.exit=function(){s.events["exit"]&&s.emit("exit"),core.call("exit")},n.load=function(e){document.body.setAttribute("platform",s.platform),core.ready?s.events["load"]&&s.emit("load",{}):core.once("load",function(){s.events[e.type]&&s.emit(e.type,e)})},n.contextmenu=function(e){e.preventDefault()},Object.keys(n).forEach(function(e){window.addEventListener(e,n[e])}),e.exports=s},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";var s=i(0);e.exports={DOMContentLoaded:function(e){s.events["dom"]&&s.emit("dom",e)},load:function(e){s.events[e.type]&&s.emit(e.type,e)},unload:function(e){s.events[e.type]&&s.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=s.activePage,n={code:e.keyCode,stop:!1};e.ctrlKey&&(n.code+="c"),e.altKey&&(n.code+="a"),e.shiftKey&&(n.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,n,e),!n.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,n,e)),n.stop||(i.events[e.type]&&i.emit(e.type,n,e),e.stop||s.events[e.type]&&s.emit(e.type,n,e))},keypress:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var s=Array.prototype,n=s.indexOf,o=s.slice,a=s.push,r=s.splice,c=s.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)a.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(a.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==n.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=n.call(this,e);-1!==t&&(r.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var s=i(0),n=i(17);s.metrics=n[s.query.screenHeight]||n[screen.height]||n[720],s.metrics.availHeight=s.metrics.height-(s.metrics.availTop+s.metrics.availBottom),s.metrics.availWidth=s.metrics.width-(s.metrics.availLeft+s.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:62,availLeft:62,appMenuRows:1,appMenuCols:4},576:{height:576,width:720,availTop:24,availBottom:24,availRight:62,availLeft:62,appMenuRows:2,appMenuCols:4},720:{height:720,width:1280,availTop:28,availBottom:28,availRight:66,availLeft:66,appMenuRows:2,appMenuCols:6},1080:{height:1080,width:1920,availTop:42,availBottom:42,availRight:75,availLeft:75,appMenuRows:2,appMenuCols:6}}},function(e,t,i){"use strict";var s,n=i(0);(s=document.createElement("link")).rel="stylesheet",s.href=window.core.theme.path+n.metrics.height+".css",document.head.appendChild(s),e.exports=s},function(e,t,i){"use strict";var s=i(2),n=i(20),o=new s;function a(e){var t=new n(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}o.defaultLanguage="en",o.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===o.defaultLanguage?(a(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{a(JSON.parse(i.responseText)),t(null),o.events["load"]&&o.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){a(),t(e),o.events["error"]&&o.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=o},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n;return data&&meta&&data[""][msgId]?data[""][msgId][eval("n = "+value+"; "+meta.plural)]:1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var s=i(4),n=i(22),o=i(8),a={};function r(e,t,i){var s,n,o,a=Math.ceil(e.length/(t*i))||1,r=[],c=0;for(s=0;s<a;s++)for(r[s]=[],n=0;n<t;n++)for(r[s][n]=[],o=0;o<i;o++)r[s][n][o]=e[c]||{disable:!0},c++;return r}function c(e){return function(e,t){var i,a,c,d,l=s.metrics.height,h={},p=[],u=[],m=0;try{e.logo=n(e.logo,l)}catch(e){}for(e.categories=e.categories.map(function(e){return e.apps=[],h[e.name.toLowerCase()]=e,e}),t.forEach(function(e){h[e.category]&&h[e.category].apps.push(e)}),e.categories=e.categories.filter(function(e){return e.apps.length}),i=0;i<e.categories.length;i++){switch((c=e.categories[i]).name){case"media":c.name=gettext("Media");break;case"apps":c.name=gettext("Apps");break;case"games":c.name=gettext("Games");break;default:c.name=gettext(c.name)}for(c.offset=m,p.push(c.icons=n(c.icons,l)),a=0;a<c.apps.length;a++)(d=c.apps[a]).icon=d.uris.icons.logoNormal||c.icons,d.focusIcon=d.uris.icons.logoActive||c.icons,p.push(d.icon),p.push(d.focusIcon);c.apps=r(c.apps,s.metrics.appMenuRows,s.metrics.appMenuCols),m+=c.apps.length,u.push(c)}return e.menu=u,o.add(p),e}(e,core.packages.filter(function(e){return"app"===e.type}))}a.load=function(e,t){var i;e.config,new XMLHttpRequest;i=core.backend.settings.theme,i=core.backend.settings.themes[i]&&core.backend.settings.themes[i].alias?core.backend.settings.themes[i].alias:"default",core.backend.request("themes/"+i+"?colorSpace=rgba_hex&screenResolution="+screen.width+"x"+screen.height,{onload:function(e,i){var s={logo:"img/{0}/logo.png",categories:[{name:"Media",icons:"img/{0}/icons/media.png",color:"#ffd200",apps:[]},{name:"Apps",icons:"img/{0}/icons/apps.png",color:"#00eaff",apps:[]},{name:"Games",icons:"img/{0}/icons/games.png",color:"#8de619",apps:[]}]};!e&&i.data&&(i.data.logoFilename&&(s.logo=i.data.logoFilename.value),i.data.logoAlign&&(s.logoAlign=i.data.logoAlign.value)),t(null,c(s))},onerror:function(){var e={logo:"img/{0}/logo.png",categories:[{name:"Media",icons:"img/{0}/icons/media.png",color:"#ffd200",apps:[]},{name:"Apps",icons:"img/{0}/icons/apps.png",color:"#00eaff",apps:[]},{name:"Games",icons:"img/{0}/icons/games.png",color:"#8de619",apps:[]}]};e=c(e),t(null,e)}})},e.exports=a},function(e,t,i){"use strict";e.exports=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,i){return void 0===t[i]?e:t[i]})}},function(e,t,i){"use strict";var s,n,o,a,r,c,d=i(4),l=i(3),h=i(24),p=i(26),u=i(27),m=i(9),f=i(28),v=i(30),g=new h({$node:window.pageMain,className:"page-main",focusable:!1}),y=d.data.profile.menu,w=document.getElementById("pmTime"),$=(gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December"),gettext("Sunday"),gettext("Monday"),gettext("Tuesday"),gettext("Wednesday"),gettext("Thursday"),gettext("Friday"),gettext("Saturday"),[]),b=0,x=null;function I(){var e=new Date,t=e.getHours(),i=e.getMinutes();w.innerText=(t>9?t:"0"+t)+":"+(i>9?i:"0"+i)}function k(e){e===l.right&&b<$.length-1&&(c.$node.style.visibility="hidden",(c=$[++b]).focus(),c.$node.style.visibility="inherit"),e===l.left&&b>0&&(c.$node.style.visibility="hidden",(c=$[--b]).focus(),c.$node.style.visibility="inherit"),b>0?s.show():s.hide(),b<$.length-1?n.show():n.hide()}function C(e){var t,i;e||(i=(t=c.$focusItem).data,c.data[t.y][t.x].locked=i.locked=!i.locked,c.renderItem(c.$focusItem,i),t.classList.add("focus"))}core.addListener("blur",function(){(o=g.activeComponent)&&o.blur()}),core.addListener("focus",function(){c.focus()}),g.addListener("show",function(){$.length>0&&c.focus()}),r=y.length,g.add(s=new p({$node:window.pmArrowLeft,className:"arrow__button",events:{click:function(){k(l.left)}}}),n=new p({$node:window.pmArrowRight,className:"arrow__button",events:{click:function(){k(l.right)}}})),r>1&&g.add(x=new m({$node:window.pmGroupList,className:"app-menu",size:r||1,data:r?y:[{name:"no apps"}],render:function(e,t){var i=document.createElement("div");e.className="menu-item item",e.innerText=null,t&&(e.$title=document.createElement("div"),i.className="menu-item__body",e.$title.className="menu-item__title theme-launcher-color",i.style.backgroundImage='url("'+t.icons+'")',e.$title.innerText=t.name,i.appendChild(e.$title),e.appendChild(i))},focusIndex:0,type:m.prototype.TYPE_HORIZONTAL,cycle:!1,events:{keydown:function(e){if(e.code===l.down)c.focus();else switch(e.code){case l.up:case l.down:case l.right:case l.left:case l.pageUp:case l.pageDown:case l.home:case l.end:this.move(e.code);break;case l.back:break;case l.ok:}},"click:item":function(e){var t=this.$focusItem;e.event&&void 0!==e.event.button&&0===e.event.button&&(this.focus(),this.emit("focus:item",{$prev:t,$curr:this.$focusItem}))},"focus:item":function(e){this===g.activeComponent&&(e.$prev&&(e.$prev.firstChild.firstChild.classList.remove("active"),e.$curr.firstChild.firstChild.classList.add("active")),c&&(c.$node.style.visibility="hidden"),(c=$[b=e.$curr.data.offset]).$node.style.visibility="inherit",b>0?s.show():s.hide(),b<$.length-1?n.show():n.hide()),e.$prev&&e.$prev.firstChild.classList.remove("theme-focus"),e.$curr.firstChild.classList.add("theme-focus")},blur:function(){this.$focusItem.firstChild.firstChild.classList.remove("active")},focus:function(){this.$focusItem.firstChild.firstChild.classList.add("active")}}})),y.forEach(function(e,t){e.apps.forEach(function(e){var s=new u({className:"grid",data:e,render:v,cycleX:!1,cycleY:!1,events:{focus:function(){window.pmItemDesc.innerText=this.$focusItem?this.$focusItem.data.description:"",null!==x&&x.focusIndex(t)},"focus:item":function(e){window.pmItemDesc.innerText=e.$curr.data.description},"click:item":function(e){c.blur(),core.taskManager.runApp({visible:!0,config:e.$item.data,onerror:function(e){core.notify&&(0===e?core.notify({title:gettext("Network status: offline"),icon:"info"}):core.notify({title:gettext("Service not available, try later"),icon:"info"}))}},!0)},overflow:function(e){var t,i;if(e.direction===l.up&&null!==x&&x.focus(),e.direction===l.down){if(this.$focusItem&&this.$focusItem.parentNode.nextSibling){for(t=0,i=this.data[1].length;t<i&&!this.data[1][t].disable;++t);this.focusItem(this.map[1][t-1])}}else e.direction!==l.left&&e.direction!==l.right||k(e.direction)},cycle:function(e){e.direction===l.up&&x.focus()}}});s.addListener("keydown",function(e){var t;e.code===l.menu?(t=i(31),a||(g.add(a=new t({title:gettext("Actions"),events:{show:function(){this.children[0].focus()},hide:function(){o=c,c.focus()}},children:[new f({size:1,focusIndex:0,data:[{items:[{value:" ",className:"theme-icon theme-icon-rc-f2"},{value:gettext("Parent control")}],click:function(){core.taskManager.lockApp(c.$focusItem.data,function(e){C(e),a.hide()})}}],events:{keydown:function(e){f.prototype.defaultEvents.keydown.call(this,e),e.code===l.f2?core.taskManager.lockApp(c.$focusItem.data,C):e.code!==l.back&&e.code!==l.menu||(e.stop=!0,a.hide())},blur:function(){a.hide()}}})]})),a.$node.firstChild.className="alignBox"),a.show(),a.focus()):e.code===l.f2?core.taskManager.lockApp(c.$focusItem.data,C):(e.code,l.back)}),window.pmGrid.appendChild(s.$node),$.push(s)})}),c=$[b],$.length<2&&n.hide(),$.length>0&&(c.$node.style.visibility="inherit"),s.hide(),window.pmLogo.style.backgroundImage='url("'+d.data.profile.logo+'")',d.data.profile.logoAlign&&(window.pmLogo.className=d.data.profile.logoAlign,w.className="reverse-"+d.data.profile.logoAlign),I(),setInterval(I,1e3),e.exports=g},function(e,t,i){"use strict";e.exports=i(25),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var s=i(1);function n(e){e=e||{},this.active=!1,this.activeComponent=null,s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-page",e.exports=n},function(e,t,i){"use strict";var s=i(1),n=i(5);function o(e){e=e||{},s.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="spa-component-button",o.prototype.clickDuration=200,o.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===n.enter&&this.events["click"]&&this.emit("click",{event:e})}},e.exports=o},function(e,t,i){"use strict";var s=i(1),n=i(5);function o(e){e=e||{},this.map=[],this.$focusItem=null,this.data=[],this.cycleX=!0,this.cycleY=!0,this.focusX=0,this.focusY=0,s.call(this,e),this.init(e)}function a(e,t,i,s,n,o){var a,r;for(a=i;a<i+n;a++){for(e.length<a+1&&e.push([]);void 0!==e[a][t];)t++;for(r=t;r<t+s;r++)e[a].length<r+1&&e[a].push(),e[a][r]=o,void 0===o.x&&(o.x=r),void 0===o.y&&(o.y=a)}}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="spa-component-grid",o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaY&&this.move(e.wheelDeltaY>0?n.up:n.down),e.wheelDeltaX&&this.move(e.wheelDeltaX>0?n.left:n.right)},keydown:function(e){switch(e.code){case n.up:case n.down:case n.right:case n.left:this.move(e.code);break;case n.enter:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,s,n,o,r,c,d,l=this,h=!1,p=function(e){!0!==this.data.disable&&(l.focusItem(this),l.events["click:item"]&&l.emit("click:item",{$item:this,event:e}))},u=function(d){if(d&&l.data!==d&&(l.data=d,h=!0),e.render&&l.renderItem!==e.render&&(l.renderItem=e.render,h=!0),h){for(l.$table=document.createElement("table"),o=document.createElement("tbody"),l.data=function(e){var t,i,s;for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)"object"==typeof(s=e[t][i])?(s.colSpan=s.colSpan||1,s.rowSpan=s.rowSpan||1):s=e[t][i]={value:e[t][i],colSpan:1,rowSpan:1};return e}(l.data),t=0;t<l.data.length;t++){for(s=o.insertRow(),i=0;i<l.data[t].length;i++)(n=s.insertCell(-1)).className="item",(c=l.data[t][i]).$item=n,n.colSpan=c.colSpan,n.rowSpan=c.rowSpan,c.focus&&(r=n),c.disable&&n.classList.add("disable"),c.mark&&n.classList.add("mark"),l.renderItem(n,c),n.data=c,n.addEventListener("click",p);o.appendChild(s)}l.map=function(e){var t,i,s,n=[];for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)a(n,i,t,(s=e[t][i]).colSpan,s.rowSpan,s.$item),delete s.$item;return n}(l.data),l.$body.innerText=null,l.$table.appendChild(o),l.$body.appendChild(l.$table),r?l.focusItem(r):l.focusItem(l.map[0][0])}};void 0!==e.cycleX&&(this.cycleX=e.cycleX),void 0!==e.cycleY&&(this.cycleY=e.cycleY),e.provider&&(this.provider=e.provider,this.sizeX=e.sizeX,this.sizeY=e.sizeY),e.translate&&(this.translate=e.translate),e.provider?(d=this.provider.get(null,function(e,t){e&&l.events["data:error"]&&l.emit("data:error",e),u(l.translate(t)),l.events["data:ready"]&&l.emit("data:ready")}),this.events["data:get"]&&this.emit("data:get",{fresh:d})):u(e.data)},o.prototype.defaultTranslate=function(e){var t,i,s,n=[];for(t=0;t<this.sizeY;t++){for(s=[],i=0;i<this.sizeX;i++)s[i]=e[t*this.sizeX+i];n[t]=s}return n},o.prototype.translate=o.prototype.defaultTranslate,o.prototype.move=function(e){var t,i=this.focusX,s=this.focusY,o=!0,a=!1,r=!1;for(0;o;){switch(e){case n.up:s>0?s--:(this.cycleY&&(s=this.map.length-1,r=!0),a=!0);break;case n.down:s<this.map.length-1?s++:(this.cycleY&&(s=0,r=!0),a=!0);break;case n.right:i<this.map[s].length-1?i++:(this.cycleX&&(i=0,r=!0),a=!0);break;case n.left:i>0?i--:(this.cycleX&&(i=this.map[s].length-1,r=!0),a=!0)}i===this.focusX&&s===this.focusY&&(o=!1),this.map[s][i]!==this.map[this.focusY][this.focusX]&&!0!==this.map[s][i].data.disable&&(o=!1),a&&(o=!1,!0===this.map[s][i].data.disable&&(i=this.focusX,s=this.focusY))}this.focusItem(this.map[s][i]),this.focusX=i,this.focusY=s,a&&(this.provider&&(t=this.provider.get(e,function(e,t){var i,s;if(e&&self.events["data:error"])self.emit("data:error",e);else if(t){for(self.data=self.translate(t),i=0;i<self.sizeY-1;i++)for(s=0;s<self.sizeX;s++)self.renderItem(self.map[i][s],self.data[i][s]);self.events["data:ready"]&&self.emit("data:ready")}}),this.events["data:get"]&&this.emit("data:get",{fresh:t})),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:r})),this.focusX,this.focusY},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e||!0===e.data.disable)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.focusX=e.x,this.focusY=e.y,this.$focusItem=e,e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),!0)},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";var s=i(9),n=i(29);function o(e){var t=this;e=e||{},this.handlers={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",s.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout-list",o.prototype.renderItemDefault=function(e,t){var i,s,o,a,r;if(e.ready&&this.fixedData)for(r=0;r<t.items.length;r++)"string"!=typeof(a=t.items[r]).value&&void 0!==a.value||((o=e.layout.$node.childNodes[r]).innerText=a.value||"",o.className=a.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);s={focusable:!1,data:t.items},t.className&&(s.className=t.className),i=new n(s),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},o.prototype.setData=function(e){s.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.init=function(e){var t;s.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";var s=i(6),n=i(3);function o(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],s.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case n.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case n.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case n.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout",o.prototype.init=function(e){for(var t,i,n,o=this,a=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof s||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function r(){o.focusIndex=this.index}for(this.data=a,n=0;n<a.length;n++)"string"==typeof(t=a[n]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof s?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",r),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value)):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i))},e.exports=o},function(e,t,i){"use strict";e.exports=function(e,t){var i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");e.className="grid__cell",e.innerText=null,t&&!t.disable&&(i.className="app",o.className="app__lock",c.className="app__name",s.className="app__body",n.className="app__body active",a.className="app__icon",r.className="app__icon",d.className="app__shadow",s.style.backgroundColor=n.style.backgroundColor=t.colors.splashBackground,c.style.color=t.colors.splashFont,c.innerText=t.name,a.style.backgroundImage='url("'+t.icon+'")',r.style.backgroundImage='url("'+t.focusIcon+'")',o.style.visibility=t.locked?"inherit":"hidden",s.appendChild(a),s.appendChild(d.cloneNode()),s.appendChild(o.cloneNode()),s.appendChild(c.cloneNode(!0)),n.appendChild(r),n.appendChild(d),n.appendChild(o),n.appendChild(c),i.appendChild(s),i.appendChild(n),e.appendChild(i))}},function(e,t,i){"use strict";var s=i(32),n=i(6),o=i(3);function a(e){var t,i,n,a=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){a.hide()},n=e.events.keydown,e.events.keydown=function(e){n&&n.call(this,e),e.code!==o.back&&e.code!==o.menu||(e.stop=!0,a.hide())},s.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-modal",a.prototype.focus=function(){this.$node.classList.add("active"),s.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof n&&this.children[0].focus()},a.prototype.blur=function(){this.$node.classList.remove("active"),s.prototype.blur.call(this)},e.exports=a},function(e,t,i){"use strict";e.exports=i(33),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var s=i(1);function n(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-modal",e.exports=n}]);
//# sourceMappingURL=main.js.map