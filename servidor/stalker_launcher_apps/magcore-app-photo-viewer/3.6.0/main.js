!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){"use strict";var n=i(3),s=i(11).parse,o=new n;o.query=s(document.location.search.substring(1)),o.config=i(12),o.activePage=null,o.route=function(e,t){var i,n=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=o.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,o.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:n,to:e}),!0)},e.exports=o},function(e,t,i){"use strict";var n=i(22);n.back=n.backspace,n.channelNext=n.tab,n.channelPrev=n.tab+"s",n.ok=n.enter,n.exit=n.escape,n.volumeUp=107,n.volumeDown=109,n.f1="112c",n.f2="113c",n.f3="114c",n.f4="115c",n.refresh="116c",n.frame="117c",n.phone="119c",n.set="120c",n.tv="121c",n.menu="122c",n.app="123c",n.rewind="66a",n.forward="70a",n.audio="71a",n.standby="74a",n.keyboard="76a",n.usbMounted="80a",n.usbUnmounted="81a",n.playPause="82a",n.play=-1,n.pause=-1,n.stop="83a",n.power="85a",n.record="87a",n.info="89a",n.mute="192a",n.digit0=48,n.digit1=49,n.digit2=50,n.digit3=51,n.digit4=52,n.digit5=53,n.digit6=54,n.digit7=55,n.digit8=56,n.digit9=57,e.exports=n},function(e,t,i){"use strict";var n=i(10);e.exports=n},function(e,t,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function n(){i.removeListener(e,n),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";var n=i(0),s=i(3),o=0;function a(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.defaultEvents=null,a.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},a.prototype.remove=function(){this.parent&&(n.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},a.prototype.focus=function(e){var t=n.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},a.prototype.blur=function(){var e=n.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},a.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},a.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=a},function(e,t,i){"use strict";e.exports=i(4)},function(e,t,i){"use strict";var n=i(0);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+n.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";e.exports=i(21),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var n=i(24),s=i(25);function o(e){var t=this;e=e||{},this.handlers={},this.links={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",n.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout-list",o.prototype.renderItemDefault=function(e,t){var i,n,o,a,r;if(e.ready&&this.fixedData)for(r=0;r<t.items.length;r++)"string"!=typeof(a=t.items[r]).value&&void 0!==a.value||((o=e.layout.$node.childNodes[r]).innerText=a.value||"",o.className=a.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);n={focusable:!1,data:t.items},t.className&&(n.className=t.className),i=new s(n),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},o.prototype.setData=function(e){this.links={},n.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.init=function(e){var t;n.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";var n=i(2);n.once("load",function(){i(18).load({name:core.environment.language||"en"},function(e){n.pages={main:i(20),clear:i(28)},n.route(n.pages.main)})})},function(e,t,i){"use strict";var n=i(0),s=i(13);window.core=window.parent.getCoreInstance(window,n),i(14),i(15),i(6)("sdk"),i(17),i(6)("app"),n.platform="mag",n.ready=function(){window.core.call("app:ready")},n.exit=function(){n.events["exit"]&&n.emit("exit"),core.call("exit")},s.load=function(e){document.body.setAttribute("platform",n.platform),core.ready?n.events["load"]&&n.emit("load",{}):core.once("load",function(){n.events[e.type]&&n.emit(e.type,e)})},s.contextmenu=function(e){e.preventDefault()},Object.keys(s).forEach(function(e){window.addEventListener(e,s[e])}),e.exports=n},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";var n=i(0);e.exports={DOMContentLoaded:function(e){n.events["dom"]&&n.emit("dom",e)},load:function(e){n.events[e.type]&&n.emit(e.type,e)},unload:function(e){n.events[e.type]&&n.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=n.activePage,s={code:e.keyCode,stop:!1};e.ctrlKey&&(s.code+="c"),e.altKey&&(s.code+="a"),e.shiftKey&&(s.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,s,e),!s.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,s,e)),s.stop||(i.events[e.type]&&i.emit(e.type,s,e),e.stop||n.events[e.type]&&n.emit(e.type,s,e))},keypress:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var n=Array.prototype,s=n.indexOf,o=n.slice,a=n.push,r=n.splice,c=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)a.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(a.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==s.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=s.call(this,e);-1!==t&&(r.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var n=i(0),s=i(16);n.metrics=s[n.query.screenHeight]||s[screen.height]||s[720],n.metrics.availHeight=n.metrics.height-(n.metrics.availTop+n.metrics.availBottom),n.metrics.availWidth=n.metrics.width-(n.metrics.availLeft+n.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(e,t,i){"use strict";var n,s=i(0);(n=document.createElement("link")).rel="stylesheet",n.href=window.core.theme.path+s.metrics.height+".css",document.head.appendChild(n),e.exports=n},function(e,t,i){"use strict";var n=i(3),s=i(19),o=new n;function a(e){var t=new s(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}o.defaultLanguage="en",o.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===o.defaultLanguage?(a(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{a(JSON.parse(i.responseText)),t(null),o.events["load"]&&o.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){a(),t(e),o.events["error"]&&o.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=o},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var n,s,o,a=new(i(7))({$node:document.getElementById("pMain")}),r=i(2),c=i(1),d=i(23),l=i(26),h=i(27),u=document.getElementById("contentTitle"),p={codec:document.getElementById("codecInfo"),lang:document.getElementById("langInfo")},m=document.getElementById("canvas"),f={rotate:0,random:!1,slideShow:{active:!1,timeout:0,current:0,modes:[3,5,7]}},v=null,y={};function g(){f.slideShow.active=!f.slideShow.active,f.slideShow.active?(s.$playPauseBtn.className="theme-icon theme-icon-pause",f.slideShow.timeout=setTimeout(function e(){b(!0);f.slideShow.timeout=setTimeout(e,1e3*f.slideShow.modes[f.slideShow.current])},1e3*f.slideShow.modes[f.slideShow.current])):(s.$playPauseBtn.className="theme-icon theme-icon-play",clearTimeout(f.slideShow.timeout))}function b(e){w(),e&&n.events.next?n.emit("next",{random:f.random}):!e&&n.events.prev&&n.emit("prev")}function w(){f.rotate=0,m.style.webkitTransform="",s.$rightText.innerText="",m.style.background="transparent",p.codec.src="",p.lang.innerText=""}y.slideshow={icon:"theme-icon theme-icon-slideshow",title:gettext("Slide show")+": 3 "+gettext("sec"),buttonName:"slideShow",click:function(){f.slideShow.current++,f.slideShow.current>f.slideShow.modes.length-1&&(f.slideShow.current=0);o.links.slideShow.links.$text.innerText=gettext("Slide show")+": "+f.slideShow.modes[f.slideShow.current]+" "+gettext("sec")}},y.mode={icon:"theme-icon theme-icon-repeat",title:gettext("Repeat"),buttonName:"mode",click:function(){f.random=!f.random,f.random?(o.links.mode.links.$text.innerText=gettext("Random"),o.links.mode.links.$icon.className="theme-icon theme-icon-shuffle"):(o.links.mode.links.$text.innerText=gettext("Repeat"),o.links.mode.links.$icon.className="theme-icon theme-icon-repeat")}},a.add(o=new d({$node:document.getElementById("pMainMenu"),focusIndex:1,size:2,propagate:!1,data:[y.mode,y.slideshow]})),o.addListener("keydown",function(e){e.code===c.up&&s.focus()}),a.add(s=new l({$node:document.getElementById("pMainPlayerPanel"),onPlay:g,onPrevNext:function(e){switch(e.direction){case c.right:b(!0);break;case c.left:b(!1)}},onRotate:function(e){var t;switch(e.direction){case c.right:f.rotate+=90;break;case c.left:f.rotate-=90}t="rotate("+f.rotate+"deg)",m.style.webkitTransform=t,m.style.transform=t,m.style.height=r.metrics.height+"px"},events:{keydown:function(e){e.code===c.down&&o.focus()}}})),o.init({data:[y.mode,y.slideshow],size:2,focusIndex:1}),w(),a.addListener("show",function(){s.focus()}),core.addListener("intent",function(e,t){switch(e.action){case"play":!function(e,t){if(!e.data)return void t(!0,null);r.currentIntent=n=e,w(),e.context||(r.route(r.pages.main),s.focus());u.innerText=e.data.title||e.data.uri,e.once("start",function(){}),s.buttons.$focusItem.data.disabled&&s.buttons.focusIndex(2);e.data.totalCount&&e.data.currentPosition&&(s.$rightText.innerText=e.data.currentPosition+"/"+e.data.totalCount);h.show({uri:e.data.uri,onerror:function(){core.notify({title:"Error opening "+(e.data.title||e.data.uri),icon:"alert",type:"error",timeout:3e3})}}),t&&t(!1,{})}(e,t)}}),a.addListener("keydown",function(e){switch(clearTimeout(v),e.code){case c.back:case c.info:r.route(r.pages.clear)}}),r.addListener("keydown",function(e){switch(e.code){case c.forward:case c.channelNext:case c.pageDown:b(!0);break;case c.rewind:case c.channelPrev:case c.pageUp:b(!1);break;case c.playPause:g();break;case c.exit:w()}}),r.nextPrevContent=function(e){(n.events.next||n.events.prev)&&b(e)},r.addListener("close",function(){clearTimeout(f.slideShow.timeout),f.slideShow.active=!1,s.$playPauseBtn.className="theme-icon theme-icon-play"}),core.addListener("hide",function(){w(),n&&n.emit("hide"),clearTimeout(f.slideShow.timeout),f.slideShow.active=!1,s.$playPauseBtn.className="theme-icon theme-icon-play"}),r.ready(),e.exports=a},function(e,t,i){"use strict";var n=i(4);function s(e){e=e||{},this.active=!1,this.activeComponent=null,n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-page",e.exports=s},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var n=i(8),s=i(1);function o(e){var t,i=[];for(t=0;t<e.length;t++)i.push({click:e[t].click,items:[{className:e[t].icon,name:"$icon"},{className:"title",value:e[t].title,name:"$text"}],name:e[t].buttonName});return i}function a(e){(e=e||{}).type=n.prototype.TYPE_HORIZONTAL,e.data=o(e.data),e.className="horizontalMenu "+(e.className||""),e.events={keydown:function(e){e.code!==s.pageDown&&e.code!==s.pageUp&&n.prototype.defaultEvents.keydown.call(this,e)}},n.call(this,e)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.init=function(e){(e=e||{}).data=o(e.data),n.prototype.init.call(this,e)},e.exports=a},function(e,t,i){"use strict";var n=i(5),s=i(1);function o(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.init(e)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-list",o.prototype.TYPE_VERTICAL=1,o.prototype.TYPE_HORIZONTAL=2,o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?s.up:s.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?s.left:s.right)},keydown:function(e){switch(e.code){case s.up:case s.down:case s.right:case s.left:case s.pageUp:case s.pageDown:case s.home:case s.end:this.move(e.code);break;case s.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){n.events[t]=null,n.addListener(t,e.events[t])}),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e),n.scroll&&n.scroll.init({realSize:n.provider.maxCount,viewSize:n.provider.size,value:n.provider.head+n.provider.pos})),n.events["data:get"]&&n.emit("data:get"))})}else e.data&&this.setData(e)},o.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},o.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},o.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case s.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case s.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case s.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case s.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},o.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";var n=i(5),s=i(1);function o(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},n.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case s.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case s.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case s.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout",o.prototype.init=function(e){for(var t,i,s,o=this,a=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof n||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function r(){o.focusIndex=this.index}for(this.data=a,s=0;s<a.length;s++)"string"==typeof(t=a[s]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof n?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",r),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=o},function(e,t,i){"use strict";var n=i(5),s=i(1),o=i(8);function a(e){var t;(e=e||{}).className="playerPanel "+(e.className||""),e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.$node.appendChild(this.$body),this.$body.appendChild(this.$leftText=document.createElement("div")),this.$leftText.className="leftText",this.$body.appendChild(t=document.createElement("div")),t.className="buttonsWrapper",this.buttons=new o({focusIndex:2,cycle:!0,propagate:!0,parent:this,type:o.prototype.TYPE_HORIZONTAL,className:"playerButtons",data:[],events:{keydown:function(e){e.code!==s.pageDown&&e.code!==s.pageUp&&o.prototype.defaultEvents.keydown.call(this,e)}}}),t.appendChild(this.buttons.$node),this.$body.appendChild(this.$rightText=document.createElement("div")),this.$rightText.className="rightText",this.init(e)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.init=function(e){var t=[{items:[{value:"<",className:"button theme-icon theme-icon-rotate"}],click:function(){e.onRotate&&e.onRotate({direction:s.left})}},{items:[{value:"",className:"button theme-icon theme-icon-previous"}],click:function(){e.onPrevNext&&e.onPrevNext({direction:s.left})}},{items:[{value:"",className:"button theme-icon theme-icon-play"}],click:function(){e.onPlay&&e.onPlay()}},{items:[{value:"",className:"button theme-icon theme-icon-next"}],click:function(){e.onPrevNext&&e.onPrevNext({direction:s.right})}},{items:[{value:">",className:"button theme-icon theme-icon-rotate-back"}],click:function(){e.onRotate&&e.onRotate({direction:s.right})}}];this.buttons.init({data:t,size:t.length,focusIndex:2}),!1!==e.play&&(this.$playPauseBtn=document.getElementsByClassName("theme-icon-play")[0])},a.prototype.focus=function(){this.buttons.focus()},a.prototype.initButtons=function(e){e=e||{},this.buttons.enabledCount=0,e.prev?(this.buttons.$body.children[1].classList.remove("disabled"),this.buttons.$body.children[1].data.disabled=!1,this.buttons.enabledCount++):(this.buttons.$body.children[1].classList.add("disabled"),this.buttons.$body.children[1].data.disabled=!0),e.play?(this.buttons.$body.children[3].classList.remove("disabled"),this.buttons.$body.children[3].data.disabled=!1,this.buttons.enabledCount++):(this.buttons.$body.children[3].classList.add("disabled"),this.buttons.$body.children[3].data.disabled=!0),e.next?(this.buttons.$body.children[3].classList.remove("disabled"),this.buttons.$body.children[3].data.disabled=!1,this.buttons.enabledCount++):(this.buttons.$body.children[3].classList.add("disabled"),this.buttons.$body.children[3].data.disabled=!0)},e.exports=a},function(e,t,i){"use strict";var n,s=document.getElementById("canvas"),o={show:function(e){var t=e.uri||"";t=encodeURI(t),(n=new Image).onload=function(){e.onload&&e.onload(),s.style.background="url("+t+") no-repeat center"},n.onerror=e.onerror,n.src=t}};e.exports=o},function(e,t,i){"use strict";var n,s=new(i(7))({$node:document.getElementById("pClear")}),o=i(29),a=i(2),r=i(1);n=new o({focusable:!0}),s.add(n),s.addListener("keydown",function(e){switch(e.code){case r.ok:a.route(a.pages.main);break;case r.back:a.currentIntent.close(),a.emit("close")}}),s.addListener("show",function(){n.focus()}),e.exports=s},function(e,t,i){"use strict";e.exports=i(30),e.exports.prototype.name="stb-component-panel"},function(e,t,i){"use strict";var n=i(4);function s(e){(e=e||{}).focusable=e.focusable||!1,n.call(this,e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-panel",e.exports=s}]);
//# sourceMappingURL=main.js.map