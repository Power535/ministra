!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=27)}([function(e,t,i){"use strict";var n=i(19);n.back=n.backspace,n.channelNext=n.tab,n.channelPrev=n.tab+"s",n.ok=n.enter,n.exit=n.escape,n.volumeUp=107,n.volumeDown=109,n.f1="112c",n.f2="113c",n.f3="114c",n.f4="115c",n.refresh="116c",n.frame="117c",n.phone="119c",n.set="120c",n.tv="121c",n.menu="122c",n.app="123c",n.rewind="66a",n.forward="70a",n.audio="71a",n.standby="74a",n.keyboard="76a",n.usbMounted="80a",n.usbUnmounted="81a",n.playPause="82a",n.play=-1,n.pause=-1,n.stop="83a",n.power="85a",n.record="87a",n.info="89a",n.mute="192a",n.digit0=48,n.digit1=49,n.digit2=50,n.digit3=51,n.digit4=52,n.digit5=53,n.digit6=54,n.digit7=55,n.digit8=56,n.digit9=57,e.exports=n},function(e,t,i){"use strict";var n=i(2);e.exports=function(e,t){for(var s=this,o=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div");n.data[this.id].firstChild;)n.data[this.id].removeChild(n.data[this.id].firstChild);c.innerText=this.name,a.className="theme-icon "+this.icon,c.className="settings-list-item-name",o.className="mag-component-layout",o.appendChild(a),o.appendChild(c),this.config&&this.config.group&&(a=document.createElement("div"),o.appendChild(a),this.config.enabled&&(a.className="theme-icon theme-icon theme-icon-ok")),n.data[this.id].appendChild(o),this instanceof i(12)&&(this.events.change=[function(e){n.data[s.id].listInstance.$nodeChange(e,s)}],n.data[this.id].onclick=function(){s.events.click?s.emit("click"):s.saver.call(s)}),t()}},function(e,t,i){"use strict";e.exports={data:{}}},function(e,t,i){"use strict";var n=i(6),s=i(5),o=0;function a(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.defaultEvents=null,a.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},a.prototype.remove=function(){this.parent&&(n.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},a.prototype.focus=function(e){var t=n.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},a.prototype.blur=function(){var e=n.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},a.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},a.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=a},function(e,t,i){"use strict";var n=i(28);e.exports=n},function(e,t,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function n(){i.removeListener(e,n),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";var n=i(5),s=i(29).parse,o=new n;o.query=s(document.location.search.substring(1)),o.config=i(30),o.activePage=null,o.route=function(e,t){var i,n=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=o.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,o.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:n,to:e}),!0)},e.exports=o},function(e,t,i){"use strict";e.exports=i(3)},function(e,t,i){"use strict";var n,s=i(0),o=i(46),a=i(13),c=i(11),d=i(48),r=i(14).actions,l=i(12),h=i(24),u=i(1),p=i(25),m=i(26),f=i(16),v=document.createElement("div"),y=v.appendChild(document.createElement("div")),g=new a({title:[{value:gettext("Settings"),className:"name"},v],main:!0,children:[],className:"middlePanel"}),b=new c,$="root",x=[],w={},C=null,I=!1,k=o(function(e){f.setInfo(e)},core.environment.onFocusDebounceTimeout);function E(e){var t,n,s,o=i(20),a=[];if(e&&"root"!==e.id?(x.push(e),a.push({id:"back",onclick:function(){g.back()},name:"..",description:gettext("Back to the previous list"),icon:"theme-icon-back",render:u}),$=e.id):$="root",o.setSearchQuery(w[$]),0===(t=w[$]?h.getContent($,function(e){return!(!I||!e.advanced)||-1!==e.name.toLowerCase().indexOf(w[$])}):I?h.getContent($):h.getContent($,function(e){return!e.advanced})).length)a=[],y.innerText=0;else{for(s=t.length,n=0;n<s;)a.push(t[n]),++n;y.innerText=t.length}if(e)for(e.options=[],s=a.length,n=0;n<s;)"option"===a[n].type&&(e.options.push(a[n]),a[n].section=e),++n;return a}n={middle:[{code:s.f1,title:gettext("Apply"),action:function(){g.save()}}],left:{code:s.menu,action:function(){m.show()}}},v.className="amountContainer",y.className="amount",y.innerText="0",g.list=C=new d({propagate:!0,cycle:!1,focusIndex:0,size:7,data:[],scroll:b,events:{"focus:item":function(e){var t=e.$curr.data;t instanceof l&&t.events.focus?t.emit("focus"):k(t)},"click:item":function(e){var t=e.$item.data;t instanceof l?e.$item.onclick?e.$item.onclick(!0):t.emit("click"):e.$item.data.onclick?e.$item.data.onclick():e.$item.data.onenter?e.$item.data.onenter.call(e.$item.data,function(t,i){t?core.notify({title:t,icon:"alert",type:""}):i&&i.length>0&&(h.clearSection(e.$item.data.id),h.addContent(i),e.$item.data.temp=!0,C.render(E(e.$item.data),function(){C.focusIndex(0),C.scroll.init({realSize:C.data.length,value:C.viewIndex})}))}):C.render(E(e.$item.data),function(){C.focusIndex(0),C.scroll.init({realSize:C.data.length,value:C.viewIndex})})},focus:function(){p.instance.init(n)},change:function(e){e?p.instance.show():p.instance.hide()}}}),[].push(C),C.addListener("keydown",function(e){switch(e.code){case s.back:e.stop=g.back()}}),g.add(C,C.scroll),g.setData=function(e,t){e.forEach(function(e){e.sections&&e.sections.length&&h.addSections(e.sections),e.options&&e.options.length&&h.addOptions(e.options),e.content&&e.content.length&&h.addContent(e.content)}),C.render(E(),function(){g.focus(),C.focusIndex(0),C.scroll.init({realSize:C.data.length,value:C.viewIndex}),t()})},g.save=function(){var e,t,i=C.getSaveRequirements();i.reload?(i.reload.device?(e=gettext("To save new settings, the device should be reloaded"),t=r.reboot):i.reload.portal&&(e=gettext("To apply new settings, the portal should be reloaded."),t=r.reload),core.notify({title:e,icon:"alert",type:"",buttons:[{value:gettext("Cancel")},{value:gettext("Ok"),click:function(){C.save(function(){p.instance.hide(),t()})}}]})):C.save(function(){p.instance.hide()})},g.back=function(){var e,t;return!C.empty&&("root"!==$&&((e=x.pop())&&e.temp&&h.clearSection(e.id),C.render(E(x.pop()),function(){-1===(t=C.data.indexOf(e))?(C.focusIndex(0),t=0):(C.focusIndex(t),t-C.size>=0&&(t-=C.size)),C.scroll.init({realSize:C.data.length,value:t})}),!0))},g.reset=function(){for(;g.back(););w={}},g.refresh=function(){C.refresh()},g.init=function(e){var t;"root"===$?C.initialize(null,e):(t=e.data[0].parent,h.clearSection(t),h.addContent(e.data),e.data=h.getContent(t),C.initialize({id:"back",onclick:function(){g.back()},name:"..",description:gettext("Back to the previous list"),icon:"theme-icon-back",render:u},e))},g.filterContent=function(e){var t=C.viewIndex;C.$focusItem&&(t=C.$focusItem.index),e.name&&e.name.length>0?(w[$]=e.name.toLowerCase(),C.render(E({id:$}),function(){x.pop(),C.scroll.init({realSize:C.data.length,value:C.viewIndex}),t>C.data.length?C.focusIndex(0):C.focusIndex(t)})):(void 0!==e.name&&0===e.name.length&&(w[$]=null),I=!!e.advanced,C.render(E({id:$}),function(){x.pop(),C.scroll.init({realSize:C.data.length,value:C.viewIndex}),t>C.data.length?C.focusIndex(0):C.focusIndex(t)}))},e.exports=g},function(e,t,i){"use strict";var n=i(44),s=i(7),o=i(0);function a(e){var t,i,s,a=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){a.hide()},s=e.events.keydown,e.events.keydown=function(e){s&&s.call(this,e),e.code!==o.back&&e.code!==o.menu||(e.stop=!0,a.hide())},n.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-modal",a.prototype.focus=function(){this.$node.classList.add("active"),n.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof s&&this.children[0].focus()},a.prototype.blur=function(){this.$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=a},function(e,t,i){"use strict";var n=i(42),s=i(21);function o(e){var t=this;e=e||{},this.handlers={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",n.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout-list",o.prototype.renderItemDefault=function(e,t){var i,n,o,a,c;if(e.ready&&this.fixedData)for(c=0;c<t.items.length;c++)"string"!=typeof(a=t.items[c]).value&&void 0!==a.value||((o=e.layout.$node.childNodes[c]).innerText=a.value||"",o.className=a.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);n={focusable:!1,data:t.items},t.className&&(n.className=t.className),i=new s(n),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},o.prototype.setData=function(e){n.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.init=function(e){var t;n.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";e.exports=i(47),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";var n=i(5),s=i(1);function o(e){for(var t,i=Object.keys(e),o=i.length,a=0,c=e.events;a<o;)this[i[a]]=e[i[a]],++a;for(t in this.events={},n.call(this,e),c)this.addListener(t,c[t]);void 0===this.render&&(this.render=s),this.type="option",this.cached=null,this.advanced=!!e.advanced}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,e.exports=o},function(e,t,i){"use strict";var n=i(7),s=i(21);function o(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),e.title&&(Array.isArray(e.title)||(e.title=[e.title]),this.$title=new s({className:"title",data:e.title,focusable:!1}),this.$node.appendChild(this.$title.$node)),this.$node.appendChild(this.$body),(t=document.createElement("div")).className="overlay",this.$node.appendChild(t)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-panel",o.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},o.prototype.focus=function(){this.focusable&&(this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),n.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand")))},o.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=o},function(e,t,i){"use strict";var n=i(24),s=null;e.exports={renders:{listItem:i(1),popupSelect:i(51),popupLayoutList:i(52),rangeInput:i(53),toggle:i(55),confirm:i(56),input:i(57),checkbox:i(58)},actions:{setInfo:i(16).setInfo,applyTheme:function(e){document.querySelectorAll('[rel="stylesheet"]')[1].href=e+"/"+window.screen.height+".css"},view:{reset:function(){null===s&&(s=i(8)),s.reset()},refresh:function(){null===s&&(s=i(8)),s.refresh()},init:function(e){null===s&&(s=i(8)),s.init(e)}}},getters:{},savers:{},sections:{add:function(e){n.addSections(e)},remove:function(e){n.removeSections(e)}},options:{add:function(e){n.addOptions(e)},remove:function(e){n.removeOptions(e)}},content:{add:function(e){n.addContent(e)},remove:function(e){n.removeContent(e)}}}},function(e,t,i){"use strict";e.exports=function(e,t){core.notify({title:e,icon:"info",type:"",buttons:[{value:gettext("Cancel"),click:function(){t()}},{value:gettext("Ok"),click:function(){t(!0)}}]})}},function(e,t,i){"use strict";var n=i(59),s=i(13),o=i(11),a=i(60),c=new s({title:gettext("Info"),children:[],className:"rightPanel"}),d=new o,r=new a({propagate:!0,step:5,scroll:d});c.add(r,d),r.$body.$preview=r.$body.appendChild(document.createElement("canvas")),r.$body.$preview.className="preview",r.$body.$text=r.$body.appendChild(document.createElement("div")),r.$body.$text.className="text",c.setInfo=function(e){var t;r.$body.$text.innerHTML="",e.preview?(n.add([e.preview]),n.once("link",function(){r.$body.$preview.style.backgroundImage='url("'+e.preview+'")',r.$body.$preview.classList.remove("hidden")})):r.$body.$preview.classList.add("hidden"),"string"==typeof e.description?r.$body.$text.innerText=e.description:e.description&&e.description.length&&(t=document.createDocumentFragment(),e.description.forEach(function(e){var i=t.appendChild(document.createElement("span"));i.className="theme-subhead-color",i.innerText=e.label+" ",(i=t.appendChild(document.createElement("span"))).className="",i.innerText=e.value,t.appendChild(document.createElement("br"))}),r.$body.$text.appendChild(t)),r.init()},e.exports=c},function(e,t,i){"use strict";var n=i(6);e.exports={DOMContentLoaded:function(e){n.events["dom"]&&n.emit("dom",e)},load:function(e){n.events[e.type]&&n.emit(e.type,e)},unload:function(e){n.events[e.type]&&n.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=n.activePage,s={code:e.keyCode,stop:!1};e.ctrlKey&&(s.code+="c"),e.altKey&&(s.code+="a"),e.shiftKey&&(s.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,s,e),!s.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,s,e)),s.stop||(i.events[e.type]&&i.emit(e.type,s,e),e.stop||n.events[e.type]&&n.emit(e.type,s,e))},keypress:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";var n=i(6);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+n.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var n,s=i(13),o=i(10),a=i(22),c=i(8),d=new s({title:gettext("Menu"),children:[],className:"leftPanel"}),r=new o({cycle:!0,focusIndex:0,size:3,events:{focus:function(){},blur:function(){}}}),l=null,h=null;n=[{items:[{className:"theme-icon theme-icon-search",value:""},{value:gettext("Search")}],click:function(e){l=e.firstChild.firstChild,h=e.firstChild.lastChild,core.intent({action:"keyboard",data:{title:"Enter query",value:e.lastChild.lastChild.innerText===gettext("Search")?"":e.lastChild.lastChild.innerText},events:{done:function(e){c.filterContent({name:e.value}),d.setSearchQuery(e.value)}}},function(e){})}},{items:[{className:"theme-icon theme-icon-toggle"},{value:gettext("Advanced")}],click:function(e){this.advanced?e.layout.$body.children[0].className="theme-icon theme-icon-toggle":e.layout.$body.children[0].className="theme-icon theme-icon-toggle-active active",this.advanced=!this.advanced,c.filterContent({advanced:this.advanced})}},{items:[{className:"theme-icon theme-icon-exit"},{value:gettext("Exit")}],click:function(){a.show(r)}}],r.setData({data:n,focusIndex:0}),d.setSearchQuery=function(e){null!==l&&(e?(l.classList.add("active"),h.innerText=e):(l.classList.remove("active"),h.innerText=gettext("Search")))},d.add(r),e.exports=d},function(e,t,i){"use strict";var n=i(7),s=i(0);function o(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],n.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case s.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case s.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case s.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout",o.prototype.init=function(e){for(var t,i,s,o=this,a=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof n||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){o.focusIndex=this.index}for(this.data=a,s=0;s<a.length;s++)"string"==typeof(t=a[s]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof n?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value)):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i))},e.exports=o},function(e,t,i){"use strict";var n=i(4),s=i(0),o=i(43),a=i(9),c=i(10),d=new a({title:gettext("Exit"),visible:!0}),r=new o({$node:window.widgetExitConfirm,visible:!1,events:{show:function(){d.focus()}}});d.add(new c({parent:d,className:"padded",size:2,focusIndex:0,data:[{items:[{value:gettext("Yes")}],click:function(){n.exit()}},{items:[{value:gettext("No")}],click:function(){d.parent.hide()}}],events:{keydown:function(e){c.prototype.defaultEvents.keydown.call(this,e),e.code===s.back&&(e.stop=!0,d.parent.hide())}}})),r.add(d),e.exports=r},function(e,t,i){"use strict";e.exports=i(49),e.exports.prototype.name="stb-component-list"},function(e,t,i){"use strict";var n=i(5),s=i(50),o=i(12),a=new n;a.data={root:[]},a.advanced=!1,a.addOptions=function(e){var t,i;for(t=0;t<e.length;t++)i=e[t].parent||"root",e[t]=new o(e[t]),this.data[i].push(e[t]);a.emit("content:added",{options:e})},a.removeOptions=function(e){var t,i,n=-1;for(t=0;t<e.length;t++)i=e[t].parent||"root",n=this.data[i].indexOf(e[t]),this.data[i].splice(n,1);a.emit("content:removed",{options:e})},a.addSections=function(e){var t,i;for(t=0;t<e.length;t++)i=e[t].parent||"root",e[t]=new s(e[t]),this.data[i].push(e[t]),this.data[e[t].id]=[];a.emit("content:added",{sections:e})},a.removeSections=function(e){var t,i,n;for(t=0;t<e.length;t++)i=e[t].parent||"root",n=this.data[i].indexOf(e[t]),this.data[i][n]=null,this.data[i].splice(n,1)},a.addContent=function(e){var t=this;e.forEach(function(e){"section"!==e.type?"option"!==e.type||t.addOptions([e]):t.addSections([e])})},a.removeContent=function(e){var t=this;e.forEach(function(e){"section"!==e.type?"option"!==e.type||t.removeOptions([e]):t.removeSections([e])})},a.getContent=function(e,t){var i=[],n=0,s=0;if(this.data[e])if(s=this.data[e].length,"function"==typeof t)for(i=[];n<s;)t(this.data[e][n])&&i.push(this.data[e][n]),++n;else i=this.data[e];return i},a.clearSection=function(e){var t=this;this.data[e].forEach(function(e){t.data[e.id]&&t.clearSection(e.id)}),this.data[e]=[]},e.exports=a},function(e,t,i){"use strict";var n=i(61);e.exports={prepare:function(e){this.instance=new n({visible:!1,parent:e})},instance:null}},function(e,t,i){"use strict";var n,s=i(4),o=i(0),a=i(9),c=i(10),d=new a({title:gettext("Actions"),visible:!1,events:{show:function(){s.activePanelSet.blur(),this.children[0].focus()},hide:function(){setTimeout(function(){s.activePanelSet.focus()},0)}}});n=[{className:"theme-icon theme-icon-rc-f1"},{className:"title",value:gettext("Save new settings")}],d.add(new c({className:"padded",size:1,focusIndex:0,data:[{items:n,click:function(){i(8).save(),d.hide()}}],events:{keydown:function(e){c.prototype.defaultEvents.keydown.call(this,e),e.code===o.back&&(e.stop=!0,d.hide())}}})),e.exports=d},function(e,t,i){"use strict";var n=i(4);i(0);n.once("load",function(){i(36).load({name:core.environment.language},function(){n.pages={main:i(38)},n.activePanelSet=null,core.plugins.settings.init(i(14),function(e,t){e?n.route(n.pages.main,[]):n.route(n.pages.main,t),n.ready(),core.once("exit",function(){var e=i(14).actions;e.saveSettings&&e.saveSettings()})})})})},function(e,t,i){"use strict";var n=i(6),s=i(17);window.core=window.parent.getCoreInstance(window,n),i(31),i(32),i(18)("sdk"),i(34),i(18)("app"),n.platform="mag",n.ready=function(){window.core.call("app:ready")},n.exit=function(){n.events["exit"]&&n.emit("exit"),core.call("exit")},s.load=function(e){document.body.setAttribute("platform",n.platform),core.ready?n.events["load"]&&n.emit("load",{}):core.once("load",function(){n.events[e.type]&&n.emit(e.type,e)})},s.contextmenu=function(e){e.preventDefault()},Object.keys(s).forEach(function(e){window.addEventListener(e,s[e])}),e.exports=n},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";if(!document.documentElement.classList){var n=Array.prototype,s=n.indexOf,o=n.slice,a=n.push,c=n.splice,d=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)a.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(a.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==s.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=s.call(this,e);-1!==t&&(c.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return d.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var n=i(6),s=i(33);n.metrics=s[n.query.screenHeight]||s[screen.height]||s[720],n.metrics.availHeight=n.metrics.height-(n.metrics.availTop+n.metrics.availBottom),n.metrics.availWidth=n.metrics.width-(n.metrics.availLeft+n.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(e,t,i){"use strict";var n,s=i(6);(n=document.createElement("link")).rel="stylesheet",n.href=window.core.theme.path+s.metrics.height+".css",document.head.appendChild(n),e.exports=n},function(e,t,i){"use strict";var n={timer:0,pressed:!1,fired:!1},s=600;e.exports=function(e,t){var i=t.code,o=t.emitCode;function a(t,i){var n,s,o=e.activePage,a={code:t.keyCode,stop:!1};n=(i=i||{}).type||t.type,t.ctrlKey&&(a.code+="c"),t.altKey&&(a.code+="a"),t.shiftKey&&(a.code+="s"),i.code&&(a.code=i.code),(s=o.activeComponent)&&s!==o&&(s.events[n]&&s.emit(n,a,t),!a.stop&&s.propagate&&s.parent&&s.parent.events[t.type]&&s.parent.emit(n,a,t)),a.stop||(o.events[n]&&o.emit(n,a,t),t.stop||e.events[n]&&e.emit(n,a,t))}window.addEventListener("keydown",function(t){e.activePage,t.keyCode!==i||n.pressed?t.keyCode!==i&&a(t):(n.fired&&(n.fired=!1),n.pressed=!0,clearTimeout(n.timer),n.timer=setTimeout(function(){a(t,{code:o}),n.fired=!0},s))}),window.addEventListener("keyup",function(e){e.keyCode===i&&(!n.fired&&n.pressed&&(clearTimeout(n.timer),a(e,{type:"keydown"})),n.pressed=!1)})}},function(e,t,i){"use strict";var n=i(5),s=i(37),o=new n;function a(e){var t=new s(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}o.defaultLanguage="en",o.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===o.defaultLanguage?(a(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{a(JSON.parse(i.responseText)),t(null),o.events["load"]&&o.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){a(),t(e),o.events["error"]&&o.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=o},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var n=i(4),s=i(0),o=i(39),a=i(41),c=i(20),d=i(8),r=i(16),l=i(25),h=i(22),u=new o({$node:window.pageMain}),p=new a({$node:window.panelSetMain,visible:!0,focusIndex:0,panels:[c,d,r],parent:u}),m=i(26),f=null;u.addListener("keydown",function(e){switch(e.code){case s.back:if(1===p.focusIndex&&d.back())return;null===f?(p.blur(),core.call("stop")):(f.close(),f=null)}}),u.once("show",function(e){l.prepare(u),u.add(m),d.focus(),d.setData(e.data,function(){})}),u.addListener("show",function(){n.activePanelSet=p}),h.addListener("hide",function(){n.activePage===u&&p.focus()}),core.addListener("intent",function(e,t){"setup"===e.action&&(d.reset(),f=e,t(!1,{}))}),e.exports=u},function(e,t,i){"use strict";e.exports=i(40),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var n=i(3);function s(e){e=e||{},this.active=!1,this.activeComponent=null,n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-page",e.exports=s},function(e,t,i){"use strict";var n=i(7),s=i(0);function o(e){var t,i=this;function o(e){switch(e.code){case s.left:i.focusIndex>0&&i.panels[i.focusIndex-1].focus();break;case s.right:i.focusIndex<i.panels.length-1&&i.panels[i.focusIndex+1].focus()}}for((e=e||{}).focusable=e.focusable||!1,n.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),t=0;t<this.panels.length;t++)this.panels[t].addListeners({keydown:o}),this.panels[t].index=t}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-panel-set",o.prototype.focus=function(){n.prototype.focus.call(this),this.panels[this.focusIndex].focus()},o.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=o},function(e,t,i){"use strict";var n=i(7),s=i(0);function o(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.init(e)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-list",o.prototype.TYPE_VERTICAL=1,o.prototype.TYPE_HORIZONTAL=2,o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?s.up:s.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?s.left:s.right)},keydown:function(e){switch(e.code){case s.up:case s.down:case s.right:case s.left:case s.pageUp:case s.pageDown:case s.home:case s.end:this.move(e.code);break;case s.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){n.events[t]=null,n.addListener(t,e.events[t])}),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e),n.scroll&&n.scroll.init({realSize:n.provider.maxCount,viewSize:n.provider.size,value:n.provider.head+n.provider.pos})),n.events["data:get"]&&n.emit("data:get"))})}else e.data&&this.setData(e)},o.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},o.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},o.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case s.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case s.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case s.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case s.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},o.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";var n=i(3);function s(e){(e=e||{}).focusable=e.focusable||!1,e.visible=e.visible||!1,n.call(this,e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-widget",e.exports=s},function(e,t,i){"use strict";e.exports=i(45),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var n=i(3);function s(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-modal",e.exports=s},function(e,t,i){"use strict";e.exports=function(e,t){var i;return function(){var n=this,s=arguments;clearTimeout(i),i=setTimeout(function(){i=null,e.apply(n,s)},t)}}},function(e,t,i){"use strict";var n=i(3);function s(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-scrollbar",s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},s.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=s},function(e,t,i){"use strict";var n=i(23),s=i(12),o=i(2);function a(e){var t=document.createElement("div"),i=document.createElement("div");this.renderCount=0,e.$node=document.createElement("div"),e.$node.className="body",e.$body=document.createElement("div"),e.$body.className="body",e.$node.appendChild(e.$body),e.cycle=!0,this.itemIndex=null,this.empty=!0,t.className="panelHint",i.className="hint",i.innerText=gettext("Settings not found"),t.appendChild(i),this.$emptyLabel=document.createElement("div"),this.$emptyLabel.appendChild(t),this.$emptyLabel.className="noData hidden",this.navigationDisabled=!0,this.unsavedOptions={},this.unsavedOptionsCounter=0,this.onRenderEnd=null,n.call(this,e),this.$node.appendChild(this.$emptyLabel)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-layout-list",a.prototype.move=function(e){this.navigationDisabled||n.prototype.move.call(this,e)},a.prototype.renderItem=function(e,t){var i=this;e.listInstance=this,e.onclick=null,e.render=t.render,o.data[t.id]=e,t.refresh=t.get=t.enable=t.disable=t.set=function(){0},t instanceof s?t.getter?null===t.cached?t.getter.call(t,function(e,n){e?i.onRenderItem():"function"==typeof t.prepareForRender?t.prepareForRender.call(t,n,function(e){t.cached=e,t.render.call(t,e,function(){i.onRenderItem()})}):(t.cached=n,t.render.call(t,n,function(){i.onRenderItem()}))}):t.render.call(t,t.cached,function(){i.onRenderItem()}):t.render.call(t,null,function(){i.onRenderItem()}):t.render({},function(){i.onRenderItem()})},a.prototype.$nodeChange=function(e,t,i){e?(this.unsavedOptions[t.id]={option:t,value:i},++this.unsavedOptionsCounter):this.unsavedOptionsCounter>0&&(this.unsavedOptions[t.id]=null,--this.unsavedOptionsCounter),this.emit("change",0!==this.unsavedOptionsCounter)},a.prototype.save=function(e){var t=this,i={};0!==this.unsavedOptionsCounter&&Object.keys(this.unsavedOptions).forEach(function(n){var s;null!==t.unsavedOptions[n]&&("function"==typeof(s=t.unsavedOptions[n]).option.prepareForSave?(s.option.section.onsave&&(i[s.option.section.id]=s.option.section),s.option.prepareForSave.call(s.option,s.value,function(o,a){o||"function"!=typeof s.option.saver?(t.unsavedOptions[n].option.emit("saved",t.unsavedOptions[n].value),t.unsavedOptions[n]=null,--t.unsavedOptionsCounter,0===t.unsavedOptionsCounter&&(t.emit("change",!1),Object.keys(i).forEach(function(e){i[e].onsave()}),e())):s.option.saver.call(s.option,function(o,c){o||(t.unsavedOptions[n].option.emit("saved",t.unsavedOptions[n].value),t.unsavedOptions[n]=null,--t.unsavedOptionsCounter,0===t.unsavedOptionsCounter&&(t.emit("change",!1),Object.keys(i).forEach(function(e){i[e].onsave()}),e()),"function"==typeof a&&a.call(s.option)),"function"==typeof c&&c.call(s.option,o)})})):(s.option.section.onsave&&(i[s.option.section.id]=s.option.section),s.option.saver.call(s.option,function(o,a){o||(t.unsavedOptions[n]=null,--t.unsavedOptionsCounter,0===t.unsavedOptionsCounter&&(t.emit("change",!1),Object.keys(i).forEach(function(e){i[e].onsave()}),e())),"function"==typeof a&&a.call(s.option,o)})))})},a.prototype.getSaveRequirements=function(){var e,t=this,i={reload:!1};return 0!==this.unsavedOptionsCounter&&Object.keys(this.unsavedOptions).forEach(function(n){null!==t.unsavedOptions[n]&&((e=t.unsavedOptions[n]).option.requirePortalReboot&&(i.reload=i.reload||{},i.reload.portal=!0),e.option.requireDeviceReboot&&(i.reload=i.reload||{},i.reload.device=!0))}),i},a.prototype.onRenderItem=function(){--this.renderCount,0===this.renderCount&&(null!==this.onRenderEnd&&(this.onRenderEnd(),this.onRenderEnd=null),null===this.itemIndex||isNaN(this.itemIndex)||this.focusIndex(this.itemIndex))},a.prototype.renderView=function(e){var t;this.$focusItem&&(t=this.$focusItem.index),this.blurItem(this.$focusItem),-1===this.viewIndex||null===this.viewIndex?(o.data={},this.itemIndex=null,this.data.forEach(function(e){e.cached=null})):(this.itemIndex=this.viewIndex<e?t+1:t-1,0===e?this.itemIndex=0:this.data.length===e+this.size&&this.viewIndex<=this.size?this.itemIndex=this.data.length-1:this.viewIndex),this.renderCount=this.data.length<this.size?this.data.length:this.size,0===this.renderCount?(this.renderCount=this.size,this.data=new Array(this.size),this.$body.classList.add("hidden"),this.$emptyLabel.classList.remove("hidden"),this.navigationDisabled=!0,this.empty=!0,n.prototype.renderView.call(this,e)):(this.empty&&(this.$body.classList.remove("hidden"),this.$emptyLabel.classList.add("hidden"),this.navigationDisabled=!1,this.empty=!1),n.prototype.renderView.call(this,e))},a.prototype.render=function(e,t){this.viewIndex=-1,this.data=e,t&&(this.onRenderEnd=t),this.renderView(0)},a.prototype.refresh=function(){var e=this,t=e.viewIndex;e.$focusItem&&(t=e.$focusItem.index),e.render(e.data,function(){e.focusIndex(t)})},a.prototype.initialize=function(e,t){var i=this,n=i.viewIndex;n=t.focusIndex?t.focusIndex:i.$focusItem.index,t.data&&(i.data=t.data),null!==e&&i.data.unshift(e),i.render(i.data,function(){t.viewIndex?i.renderView(t.viewIndex):i.data[n]?i.focusIndex(n):i.focusIndex(0)})},e.exports=a},function(e,t,i){"use strict";var n=i(3),s=i(19);function o(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.init(e)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="spa-component-list",o.prototype.TYPE_VERTICAL=1,o.prototype.TYPE_HORIZONTAL=2,o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?s.up:s.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?s.left:s.right)},keydown:function(e){switch(e.code){case s.up:case s.down:case s.right:case s.left:case s.pageUp:case s.pageDown:case s.home:case s.end:this.move(e.code);break;case s.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);this.provider?this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e),n.scroll&&n.scroll.init({realSize:n.provider.maxCount,viewSize:n.provider.size,value:n.provider.head+n.provider.pos})),n.events["data:get"]&&n.emit("data:get"))}):e.data&&this.setData(e)},o.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},o.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},o.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case s.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.up:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})}):(this.cycle&&this.move(s.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case s.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.down:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})}):(this.cycle&&this.move(s.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case s.pageUp:if(this.provider)return void this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case s.pageDown:if(this.provider){this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case s.home:if(this.provider){this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case s.end:if(this.provider){this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},o.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";var n=i(5);function s(e){for(var t,s=Object.keys(e),o=s.length,a=0,c=e.events;a<o;)this[s[a]]=e[s[a]],++a;for(t in this.events={},n.call(this,e),c)this.addListener(t,c[t]);this.render=i(1),this.type="section",this.advanced=!!e.advanced}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var n,s=i(4),o=i(0),a=i(9),c=i(23),d=i(11),r=i(2),l=i(1),h=new d,u=new c({size:5,data:[1],$node:document.createElement("div"),$body:document.createElement("div"),scroll:h,render:function(e,t){if(!e.$layout){for(e.innerText="";e.firstChild;)e.removeChild(e.firstChild);e.$layout=e.appendChild(document.createElement("div")),e.$layout.className="mag-component-layout",e.$text=document.createElement("div"),e.$layout.appendChild(e.$text)}e.$text.innerText=t.name||t.value},events:{keydown:function(e){c.prototype.defaultEvents.keydown.call(this,e),e.code===o.back&&(e.stop=!0,p.hide())},"click:item":function(e){var t=this;e.$item.data.selected?(n.saveImmediate||(r.data[n.id].listInstance.$nodeChange(e.$item.value!==r.data[n.id].initialValue,n,e.$item.data.value),n.emit("select:item",e.$item.data)),setTimeout(function(){p.hide()},0)):(n.saveImmediate?"function"==typeof n.prepareForSave?n.prepareForSave.call(n,e.$item.data.value,function(i,s){i||n.saver.call(n,function(i,o){i||(r.data[n.id].initialValue=e.$item.data.value,t.data.forEach(function(e){e.selected=!1}),e.$item.data.selected=!0,"function"==typeof s&&s.call(n)),"function"==typeof o&&o.call(n,i)})}):n.saver.call(n,function(i,s){i||(t.data.forEach(function(e){e.selected=!1}),e.$item.data.selected=!0,r.data[n.id].initialValue=e.$item.data.value),"function"==typeof s&&s.call(n,i)}):(r.data[n.id].listInstance.$nodeChange(e.$item.data.value!==r.data[n.id].initialValue,n,e.$item.data.value),n.emit("select:item",e.$item.data)),setTimeout(function(){p.hide()},0))},"focus:item":function(e){n&&n.emit("focus:item",e.$curr.data)},focus:function(){}}}),p=new a({title:"Choose",children:[u,h],events:{show:function(){s.activePanelSet.blur(),setTimeout(function(){u.$node.style.zIndex=9999,u.focus()},0)},hide:function(){u.$node.style.zIndex="",s.activePanelSet.focus()},click:function(){s.activePage.activeComponent===u&&u.emit("click:item",{$item:u.$focusItem})}}});function m(e){this.list=e}p.$node.classList.add("select-list"),u.$node.className="mag-component-layout-list padded",u.$node.appendChild(u.$body),u.$body.className="body",u.$body.title="",p.$counter=p.$text.parentNode.appendChild(document.createElement("div")),p.$counter.className="theme-counter",p.$counter.appendChild(document.createElement("div")),p.$counter.firstChild.className="",window.top.stbEvent&&window.top.stbEvent.addListener("message",self.onDeviceStorageListChange=function(e){p.visible&&"deviceStorageListChange"===n.refreshEvent&&(!e.broadcast||"storage.mount"!==e.message&&"storage.unmount"!==e.message||n.getter.call(n,function(e){n.prepareForRender(e,function(e){var t=0;e.forEach(function(e,i){e.selected&&(t=i)}),u.init({focusIndex:t,data:e,size:e.length>5?5:e.length})})}))}),e.exports=function(e,t){var i=this;i.focusIndex=0,i.events["saved"]=[function(e){i.list.forEach(function(t){t.selected=t.value===e}),r.data[n.id].initialValue=e}],e.forEach(function(e,t){e.selected&&(i.focusIndex=t)}),i.list=e,i.refresh=m,l.call(this,null,function(){r.data[i.id].onclick=function(){(n=i).list.forEach(function(e,t){e.selected&&(n.focusIndex=t)}),p.$text.innerText=i.title||gettext("Choose option"),p.$counter.firstChild.innerText=n.list.length,p.parent?s.activePage!==p.parent&&(p.parent.remove(p),s.activePage.add(p)):s.activePage.add(p),u.init({focusIndex:n.focusIndex,data:n.list,size:n.list.length>5?5:n.list.length}),setTimeout(function(){p.show()},0)},t()})}},function(e,t,i){"use strict";var n,s=i(4),o=i(0),a=i(9),c=i(10),d=i(11),r=i(2),l=i(1),h=new d({}),u=new c({propagate:!0,size:7,focusIndex:0,scroll:h,noData:"No channels",events:{keydown:function(e){switch(e.code){case o.back:e.stop=!0,p.hide();break;default:this.highlightFocus?c.prototype.defaultEvents.keydown.call(this,e):e.code===o.down?this.move(o.pageDown):e.code===o.up?this.move(o.pageUp):this.move(e.code)}},"focus:item":function(e){this.highlightFocus||e.$curr.classList.remove("focus")},"move:view":function(){p.$counter.firstChild.innerText=this.data.length}}}),p=new a({title:"Choose",children:[u,h],events:{show:function(){s.activePanelSet.blur(),u.focus(),u.focusIndex(0)},hide:function(){s.activePanelSet.focus()}}});function m(e,t){n=e,p.$text.innerText=self.title||gettext("Choose option"),p.$counter.firstChild.innerText=t.length,p.parent?s.activePage!==p.parent&&(p.parent.remove(p),s.activePage.add(p)):s.activePage.add(p),u.init({size:t.length>5?5:t.length,data:t}),n.events.click&&n.events.click.length>0&&n.events.click[0].call(u),u.highlightFocus=n.config.focusable,setTimeout(function(){p.show()},0)}p.$node.classList.add("select-list"),p.$counter=p.$text.parentNode.appendChild(document.createElement("div")),p.$counter.className="theme-counter",p.$counter.appendChild(document.createElement("div")),p.$counter.firstChild.className="",u.$node.className="mag-component-layout-list padded table-like",e.exports=function(e,t){var n=this;this.config||(this.config={focusable:!0}),l.call(this,null,function(){r.data[n.id].onclick=function(){n.warningText?i(15)(n.warningText,function(t){t&&m(n,e)}):m(n,e)},t()})}},function(e,t,i){"use strict";var n=i(4),s=i(0),o=i(9),a=i(54),c=i(2),d=i(1),r=new a({focusable:!0,events:{keydown:function(e){switch(e.code){case s.right:this.set(this.value+p.config.step);break;case s.left:this.set(this.value-p.config.step);break;case s.back:e.stop=!0,l.hide();break;case s.ok:p.saveImmediate?"function"==typeof p.prepareForSave?p.prepareForSave.call(p,r.value,function(e,t){e||p.saver.call(p,function(e,i){e||(p.config.value=r.value,"function"==typeof t&&t.call(p)),"function"==typeof i&&i.call(p,e)})}):p.saver.call(p,function(e,t){e||(p.config.value=r.value),"function"==typeof t&&t.call(p,e)}):c.data[p.id].listInstance.$nodeChange(p.config.value!==r.value,p,r.value),e.stop=!0,l.hide()}}}}),l=new o({title:"Choose",children:[r],events:{show:function(){n.activePanelSet.blur(),r.focus()},hide:function(){n.activePanelSet.focus()}}}),h=document.createElement("div"),u=document.createElement("div"),p=null;u.className="range-input",r.$value.classList.add("osdFocusItem"),u.appendChild(r.$node),u.appendChild(h),l.$body.appendChild(u),h.className="textValue",r.addListener("change",function(e){h.innerText=e.curr}),e.exports=function(e,t){var i=this;i.config.value=+e,d.call(this,null,function(){c.data[i.id].onclick=function(){l.$text.innerText=i.name,l.parent?n.activePage!==l.parent&&(l.parent.remove(l),n.activePage.add(l)):n.activePage.add(l),p=i,r.init({min:i.config.min,max:i.config.max,value:i.config.value}),p.config.step=i.config.step||1,h.innerText=i.config.value,setTimeout(function(){l.show()},0)},t()})}},function(e,t,i){"use strict";var n=i(3);function s(e){e=e||{},this.max=100,this.min=0,this.value=0,this.step=1,e.focusable=e.focusable||!1,n.call(this,e),this.$value=this.$body.appendChild(document.createElement("div")),this.$value.className="value",this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-progress-bar",s.prototype.set=function(e){var t=this.value;return this.value!==e&&e<=this.max&&e>=this.min&&(this.value=e,100===(e=Math.abs(this.value-this.min)/this.step)&&this.events["done"]&&this.emit("done"),this.$value.style.width=e+"%",this.events["change"]&&this.emit("change",{curr:this.value,prev:t}),!0)},s.prototype.init=function(e){void 0!==e.max&&(this.max=e.max),void 0!==e.min&&(this.min=e.min),void 0!==e.value&&(this.value=e.value),this.step=Math.abs(this.max-this.min)/100,this.$value.style.width=Math.abs(this.min-this.value)/this.step+"%"},e.exports=s},function(e,t,i){"use strict";(function(t){var n=i(2);e.exports=function(e,i){var s=this,o=n.data[this.id],a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),r=document.createElement("div"),l=!!e;for(null!==s.cached&&(l=s.cached),s.events["saved"]=[function(){l=s.cached,s.cached=null}];o.firstChild;)o.removeChild(o.firstChild);r.innerText=this.name,c.className="theme-icon "+this.icon,r.className="wrappedText",d.className="theme-icon theme-icon-checkbox"+(l?"-active":""),a.className="mag-component-layout",a.appendChild(c),a.appendChild(r),a.appendChild(d),o.appendChild(a),o.onclick=function(e){if(!0===e)if(s.saveImmediate){if("function"!=typeof s.prepareForSave)throw Error(t+" saveImmediate: true for toggle render must use prepareForSave method");s.prepareForSave.call(s,!l,function(e,t){e||s.saver.call(s,function(e,i){e||(l=!l,s.cached=null,d.className="theme-icon theme-icon-checkbox"+(l?"-active":""),"function"==typeof t&&t.call(s)),"function"==typeof i&&i.call(s,e)})})}else null===s.cached&&(s.cached=l),s.cached=!s.cached,d.className="theme-icon theme-icon-checkbox"+(s.cached?"-active":""),n.data[s.id].listInstance.$nodeChange(s.cached!==l,s,s.cached)},i()}}).call(this,"/index.js")},function(e,t,i){"use strict";var n=i(2),s=i(1);e.exports=function(e,t){var o=this;s.call(this,null,function(){n.data[o.id].onclick=function(){i(15)(o.confirmation.title,function(e){o.confirmation.callback.call(o,e)})}}),t()}},function(e,t,i){"use strict";var n=i(2),s=i(1);e.exports=function(e,t){var i=this;n.data[i.id].value=e,s.call(this,null,function(){n.data[i.id].onclick=function(){i.config.value=n.data[i.id].value,window.core.intent({action:"keyboard",data:i.config,events:{done:function(e){i.saveImmediate?"function"==typeof i.prepareForSave?i.prepareForSave.call(i,e.value,function(t,s){t||i.saver.call(i,function(t,o){t||(n.data[i.id].value=e.value,"function"==typeof s&&s.call(i,t)),"function"==typeof o&&o.call(i,t)})}):i.saver.call(i,function(t,s){t||(n.data[i.id].value=e.value),"function"==typeof s&&s.call(i,t)}):n.data[i.id].listInstance.$nodeChange(e.value!==i.value,i,e.value)}}},function(e){})}}),t()}},function(e,t,i){"use strict";var n=i(2),s={name:"",list:[],active:null};e.exports=function(e,t){for(var i=this,o=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div");n.data[this.id].firstChild;)n.data[this.id].removeChild(n.data[this.id].firstChild);c.innerText=this.name,a.className="theme-icon "+this.icon,c.className="",o.className="mag-component-layout",o.appendChild(a),o.appendChild(c),this.config&&this.config.group&&(s.name!==this.config.group&&(s.name=this.config.group,s.list.splice(0),s.active=null),a=document.createElement("div"),o.appendChild(a),s.list.push(this),this.config.enabled&&(s.active=this,a.className="theme-icon theme-icon theme-icon-ok")),n.data[this.id].appendChild(o),n.data[this.id].onclick=function(){i.config.group?s.active!==i&&i.emit("check",function(e){e&&(s.active.config.enabled=!!s.active.config.enabled,n.data[s.active.id].firstChild.lastChild.className="theme-icon theme-icon",s.active=i,i.config.enabled=!!i.config.enabled,a.className="theme-icon theme-icon theme-icon-ok")}):i.emit("check",function(e){e&&(i.config.enabled?a.className="theme-icon theme-icon theme-icon-ok":a.className="theme-icon theme-icon",i.config.enabled=!!i.config.enabled)})},t()}},function(e,t,i){"use strict";var n=new(i(5)),s=0,o={},a=!1;function c(e){"error"===e.type?(this.group,this.src):a&&(this.group,this.src,this.width,this.height),s--,o[this.group]--,n.events["link"]&&n.emit("link",{url:this.src,group:this.group}),0===o[this.group]&&(this.group,n.events["group"]&&n.emit("group",{name:this.group})),0===s&&n.events["done"]&&n.emit("done")}n.add=function(e){e.forEach(function(e){var t=new Image,i=e.url||e,n=e.group||"";s++,o[n]=void 0===o[n]?1:o[n]+1,t.src=i,t.group=n,t.onload=t.onerror=t.ontimeout=c})},e.exports=n},function(e,t,i){"use strict";var n=i(3),s=i(0);function o(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,n.call(this,e),this.$node.appendChild(this.$body),this.init(e)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-scroll-area",o.prototype.defaultEvents={keydown:function(e){switch(e.code){case s.up:case s.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?s.up:s.down)}},o.prototype.move=function(e){var t=screen.height,i=this.viewHeight-this.realHeight;if(i<0)switch(e){case s.down:if(this.topPosition-this.step*t/100<i)return this.scroll.scrollTo(-i),this.$body.style.top=i+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case s.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},o.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=o},function(e,t,i){"use strict";var n=i(7),s=i(0),o={};function a(e){var t,i=0,s=this;(e=e||{}).focusable=!1,e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.tabs=[{codes:{}},{codes:{}},{codes:{}},{codes:{}}],this.tab=0,this.$table=this.$node.appendChild(document.createElement("table")),this.$table.insertRow(),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$left=this.$table.rows[0].cells[0].appendChild(document.createElement("div")),this.$left.className="theme-icon",this.$table.rows[0].cells[1].className="central",(t=this.tabs[i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",this.$right=this.$table.rows[0].cells[2].appendChild(document.createElement("div")),this.$right.className="theme-icon",this.init(e.data),this.parent.addListener("keydown",function(e){var t=s.tabs[s.tab];s.visible&&t.codes[e.code]&&"function"==typeof t.codes[e.code].action&&t.codes[e.code].action()})}o[s.f1]="theme-icon-rc-f1",o[s.f2]="theme-icon-rc-f2",o[s.f3]="theme-icon-rc-f3",o[s.f4]="theme-icon-rc-f4",o[s.menu]="theme-icon-rc-menu",o[s.ok]="theme-icon-rc-ok",o[s.info]="theme-icon-rc-info",o[s.playPause]="theme-icon-rc-play-pause",o[s.back]="theme-icon-rc-back",o[s.exit]="theme-icon-rc-home",o[s.keyboard]="theme-icon-rc-vk",o[s.refresh]="theme-icon-rc-refresh",o[s.frame]="theme-icon-rc-aspect",a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-footer",a.prototype.init=function(e){var t,i,n;function s(t){return function(){"function"==typeof e.middle[t].action&&e.middle[t].action()}}if(e=e||{},this.tabs[this.tab].$body.classList.add("hidden"),this.tab=e.middle&&e.middle.length?e.middle.length-1:0,(i=this.tabs[this.tab]).codes={},e.left?(this.$left.className=e.left.className||"theme-icon "+(o[e.left.code]||"theme-icon-warning"),e.left.disabled?this.$left.classList.add("disabled"):(i.codes[e.left.code]={action:e.left.action},this.$left.style.visibility="inherit",this.$left.onclick=function(){"function"==typeof e.left.action&&e.left.action()})):"hidden"!==this.$left.style.visibility&&(this.$left.style.visibility="hidden"),e.right?(this.$right.className=e.right.className||"theme-icon "+(o[e.right.code]||"theme-icon-warning"),e.right.disabled?this.$right.classList.add("disabled"):(i.codes[e.right.code]={action:e.right.action},this.$right.style.visibility="inherit",this.$right.onclick=function(){"function"==typeof e.right.action&&e.right.action()})):"hidden"!==this.$right.style.visibility&&(this.$right.style.visibility="hidden"),e.middle&&e.middle.length){for(t=0;t<e.middle.length;t++)i.codes[e.middle[t].code]={action:e.middle[t].action},e.middle[t].disabled?i.$body.children[t].classList.add("disabled"):(i.$body.children[t].classList.remove("disabled"),i.$body.children[t].onclick=s(t)),(n=i.$body.children[t].children)[0].className="iconImg "+(e.middle[t].className||"theme-icon "+(o[e.middle[t].code]||"theme-icon-warning")),n[1].innerText=e.middle[t].title||"";i.$body.classList.remove("hidden")}},e.exports=a}]);
//# sourceMappingURL=main.js.map