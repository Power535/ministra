!function(t){var e={};function l(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=t,l.c=e,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(n,s,function(e){return t[e]}.bind(null,s));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=6)}([function(t,e,l){"use strict";var n=l(2),s=l(8).parse,i=new n;i.query=s(document.location.search.substring(1)),i.config=l(9),i.activePage=null,i.route=function(t,e){var l,n=i.activePage;return!(!t||t.active)&&(t.name,t.id,t.name,t.id,(l=i.activePage)&&l.active&&(l.$node.classList.remove("active"),l.active=!1,i.activePage=null,l.name,l.id,l.name,l.id,l.events["hide"]&&l.emit("hide")),function(t,e){!t||t.active||(t.$node.classList.add("active"),t.active=!0,i.activePage=t,t.name,t.id,t.name,t.id,t.events["show"]&&t.emit("show",{data:e}))}(t,e),this.events["route"]&&this.emit("route",{from:n,to:t}),!0)},t.exports=i},function(t,e,l){"use strict";var n=l(7);t.exports=n},function(t,e,l){"use strict";function n(){this.events={}}n.prototype={addListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},once:function(t,e){var l=this;this.events[t]=this.events[t]||[],this.events[t].push(function n(){l.removeListener(t,n),e.apply(l,arguments)})},addListeners:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.addListener(e,t[e])},removeListener:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}),0===this.events[t].length&&(this.events[t]=void 0))},emit:function(t){var e,l=this.events[t];if(l)for(e=0;e<l.length;e++)l[e].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,t.exports=n},function(t,e,l){"use strict";var n=l(0);t.exports=function(t){var e=document.createElement("link");e.rel="stylesheet",e.href="css/"+t+"."+n.metrics.height+".css",document.head.appendChild(e)}},function(t,e,l){"use strict";t.exports=l(16),t.exports.prototype.name="stb-component-page"},function(t,e,l){"use strict";t.exports={keysBlock:!1,gs:{"account":0,"layers":{"bg":null,"context":null,"pointer":null},"size":{480:{"scr":{"w":360,"h":360},"cll":{"w":40,"h":40}},576:{"scr":{"w":450,"h":450},"cll":{"w":50,"h":50}},720:{"scr":{"w":495,"h":495},"cll":{"w":55,"h":55}},1080:{"scr":{"w":765,"h":765},"cll":{"w":85,"h":85}}},"cells":{"x":9,"y":9},"position":{"old":{"x":0,"y":0},"current":{"x":0,"y":0}},"move":{"selected":!1,"readyToCheck":!1,"start":{"x":-1,"y":-1},"finish":{"x":-1,"y":-1}},"coeff":1,"balls":null,"colors":["red","blue","green","orange","violet","black","white"],"nextBalls":[]}}},function(t,e,l){"use strict";var n=l(1);n.once("load",function(){n.pages={init:l(15),main:l(18)},n.ready(),n.route(n.pages.main),window._=function(t){return t}})},function(t,e,l){"use strict";var n=l(0),s=l(10);window.core=window.parent.getCoreInstance(window,n),l(11),l(12),l(3)("sdk"),l(14),l(3)("app"),n.platform="mag",n.ready=function(){window.core.call("app:ready")},n.exit=function(){n.events["exit"]&&n.emit("exit"),core.call("exit")},s.load=function(t){document.body.setAttribute("platform",n.platform),core.ready?n.events["load"]&&n.emit("load",{}):core.once("load",function(){n.events[t.type]&&n.emit(t.type,t)})},s.contextmenu=function(t){t.preventDefault()},Object.keys(s).forEach(function(t){window.addEventListener(t,s[t])}),t.exports=n},function(t,e,l){"use strict";t.exports={parse:function(t){var e={};return t.split("&").forEach(function(t){2===(t=t.split("=")).length&&(e[t[0]]=decodeURIComponent(t[1]))}),e},stringify:function(t){var e=[];return Object.keys(t).forEach(function(l){e.push(l+"="+encodeURIComponent(t[l]))}),e.join("&")}}},function(t,e,l){"use strict";t.exports={}},function(t,e,l){"use strict";var n=l(0);t.exports={DOMContentLoaded:function(t){n.events["dom"]&&n.emit("dom",t)},load:function(t){n.events[t.type]&&n.emit(t.type,t)},unload:function(t){n.events[t.type]&&n.emit(t.type,t)},error:function(t){},keydown:function(t){var e,l=n.activePage,s={code:t.keyCode,stop:!1};t.ctrlKey&&(s.code+="c"),t.altKey&&(s.code+="a"),t.shiftKey&&(s.code+="s"),(e=l.activeComponent)&&e!==l&&(e.events[t.type]&&e.emit(t.type,s,t),!s.stop&&e.propagate&&e.parent&&e.parent.events[t.type]&&e.parent.emit(t.type,s,t)),s.stop||(l.events[t.type]&&l.emit(t.type,s,t),t.stop||n.events[t.type]&&n.emit(t.type,s,t))},keypress:function(t){var e=n.activePage;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t)},mousewheel:function(t){var e=n.activePage;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t),t.stop||e.events[t.type]&&e.emit(t.type,t)}}},function(t,e,l){"use strict";if(!document.documentElement.classList){var n=Array.prototype,s=n.indexOf,i=n.slice,r=n.push,o=n.splice,a=n.join;window.DOMTokenList=function(t){if(this._element=t,t.className!==this._classCache){if(this._classCache=t.className,!this._classCache)return;var e,l=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(e=0;e<l.length;e++)r.call(this,l[e])}},window.DOMTokenList.prototype={add:function(t){this.contains(t)||(r.call(this,t),this._element.className=i.call(this,0).join(" "))},contains:function(t){return-1!==s.call(this,t)},item:function(t){return this[t]||null},remove:function(t){var e=s.call(this,t);-1!==e&&(o.call(this,e,1),this._element.className=i.call(this,0).join(" "))},toString:function(){return a.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(t,e,l){"use strict";var n=l(0),s=l(13);n.metrics=s[n.query.screenHeight]||s[screen.height]||s[720],n.metrics.availHeight=n.metrics.height-(n.metrics.availTop+n.metrics.availBottom),n.metrics.availWidth=n.metrics.width-(n.metrics.availLeft+n.metrics.availRight)},function(t,e,l){"use strict";t.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(t,e,l){"use strict";var n,s=l(0);(n=document.createElement("link")).rel="stylesheet",n.href=window.core.theme.path+s.metrics.height+".css",document.head.appendChild(n),t.exports=n},function(t,e,l){"use strict";var n=new(l(4))({$node:document.getElementById("pageInit")});t.exports=n},function(t,e,l){"use strict";var n=l(17);function s(t){t=t||{},this.active=!1,this.activeComponent=null,n.call(this,t),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-page",t.exports=s},function(t,e,l){"use strict";var n=l(0),s=l(2),i=0;function r(t){var e,l=this;if(t=t||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!t.propagate,s.call(this),this.$node=t.$node||document.createElement("div"),this.$body=t.$body||this.$node,this.$node.className=this.name+" "+(t.className||""),this.id=t.id||this.$node.id||"cid"+i++,t.parent&&t.parent.add(this),!1===t.visible&&this.hide(),!1===t.focusable&&(this.focusable=!1),this.defaultEvents)for(e in t.events=t.events||{},this.defaultEvents)t.events[e]=t.events[e]||this.defaultEvents[e];t.events&&Object.keys(t.events).forEach(function(e){l.addListener(e,t.events[e])}),t.children&&this.add.apply(this,t.children),this.$node.addEventListener("click",function(t){l.focus(),l.events["click"]&&l.emit("click",t),t.stopPropagation()}),this.name,this.id,this.name,this.id}r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.defaultEvents=null,r.prototype.add=function(t){var e;for(e=0;e<arguments.length;e++)t=arguments[e],this.children.push(t),t.parent=this,t.$node&&null===t.$node.parentNode&&this.$body.appendChild(t.$node),t.name,t.id,this.name,this.id,this.name,this.id,t.name,t.id,this.events["add"]&&this.emit("add",{item:t})},r.prototype.remove=function(){this.parent&&(n.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(t){t.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},r.prototype.focus=function(t){var e=n.activePage,l=e.activeComponent;return!(!this.focusable||this===l)&&(l&&l.blur(),e.activeComponent=l=this,l.$node.classList.add("focus"),this.name,this.id,this.name,this.id,l.events["focus"]&&l.emit("focus",t),!0)},r.prototype.blur=function(){var t=n.activePage,e=t.activeComponent;return this.$node.classList.remove("focus"),this===e?(t.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},r.prototype.show=function(t,e){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",t),"function"==typeof e&&setTimeout(e),!0)},r.prototype.hide=function(t){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof t&&setTimeout(t),!0)},t.exports=r},function(t,e,l){"use strict";var n=new(l(4))({$node:document.getElementById("pageMain")}),s=l(1),i=l(19),r=s.metrics.height,o="./img/"+r,a=l(5).keysBlock,c=l(5).gs;function h(){if(c.layers.context=document.getElementById("game").getContext("2d"),c.layers.context&&c.layers.context.drawImage){document.getElementById("game").width=c.size[r].scr.w,document.getElementById("game").height=c.size[r].scr.h,document.getElementById("cursorBox").style.width=c.size[r].scr.w+"px",document.getElementById("cursorBox").style.height=c.size[r].scr.h+"px",window.moveTo(0,0),c.balls=[];for(var t=0;t<c.cells.y;t++){c.balls[t]=[];for(var e=0;e<c.cells.x;e++)c.balls[t][e]=null}m.generateNextBalls(),m.showBall(),m.item()}}function u(t){return Math.floor(Math.random()*(parseInt(t,10)+1))}n.addListener("show",h);var m={"sizeScr":"","ball":null,"bgImg_1":"","bgImg_2":"","stopAddBalls":!1,"isEndGame":!1,"item":function(){document.getElementById("cursor").style.marginLeft=c.position.current.x*c.size[r].cll.w+"px",document.getElementById("cursor").style.marginTop=c.position.current.y*c.size[r].cll.h+"px"},"createBall":function(t,e,l){var n=new Image,s=t||c.colors[u(c.colors.length-1)],i=this;n.src=o+"/"+s+".png",n.addEventListener("load",function(){var n=i.findeFreePlace(),o=t&&-1!=e?e:n[0],a=t&&-1!=l?l:n[1];if(0!=n){c.balls[a][o]={"x":o,"y":a,"color":s,"scale":.1,"img":this,"siObj":null,"_f":function(t,e){this.scale<1?(this.scale+=.2,c.layers.context.globalCompositeOperation="source-over",c.layers.context.drawImage(this.img,t*c.size[r].cll.w+c.size[r].cll.w/2-c.size[r].cll.w*c.balls[e][t].scale/2,e*c.size[r].cll.h+c.size[r].cll.h/2-c.size[r].cll.h*c.balls[e][t].scale/2,c.size[r].cll.w*this.scale,c.size[r].cll.h*this.scale)):(clearInterval(this.siObj),this.siObj=null)}},c.balls[a][o].scale=.4,c.layers.context.drawImage(this,o*c.size[r].cll.w+c.size[r].cll.w/2-c.size[r].cll.w*c.balls[a][o].scale/2,a*c.size[r].cll.h+c.size[r].cll.h/2-c.size[r].cll.h*c.balls[a][o].scale/2,c.size[r].cll.w*c.balls[a][o].scale,c.size[r].cll.h*c.balls[a][o].scale),c.balls[a][o].siObj=setInterval(function(){c.balls[a][o]._f(o,a)},25)}else m.showfinish()},!1)},"showfinish":function(){a=!0,c.account<50?document.getElementById("errorFinish").style.display="block":document.getElementById("errorFinish2").style.display="block"},"showBall":function(){if(0==this.isEndGame){for(var t=0;t<c.nextBalls.length;t++)this.createBall(c.nextBalls[t],-1,-1);var e=0;for(t=0;t<c.balls.length;t++)for(var l=0;l<c.balls[t].length;l++)null!=c.balls[t][l]&&e++;if(e+3>=c.balls.length*c.balls[0].length)return void this.showfinish();this.generateNextBalls();var n=this;setTimeout(function(){n.checkLines(!1)},250)}else this.stopAddBalls=!1},"jumpBallTimer":null,"jumpBallScale":.6,"jumpBallScaleD":.1,"jumpBall":function(t){var e=this;9==t&&(this.jumpBallTimer=setInterval(function(){e.jumpBallStartJumping()},60))},"jumpBallStartJumping":function(){this.jumpBallScale>=.75&&(this.jumpBallScaleD=-.05),this.jumpBallScale<=.55&&(this.jumpBallScaleD=.05),this.jumpBallScale+=this.jumpBallScaleD,c.layers.context.clearRect(c.move.start.x*c.size[r].cll.w,c.move.start.y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h),c.layers.context.drawImage(c.balls[c.move.start.y][c.move.start.x].img,c.move.start.x*c.size[r].cll.w,c.move.start.y*c.size[r].cll.h+c.size[r].cll.h/3-c.size[r].cll.h*this.jumpBallScale/2,c.size[r].cll.w,c.size[r].cll.h)},"findeFreePlace":function(){try{var t=u(c.cells.x-1),e=u(c.cells.y-1);return null!=c.balls[e][t]?this.findeFreePlace():[t,e]}catch(t){return this.isEndGame=!0,this.showfinish(),!1}},"jumpBallStop":function(){clearInterval(this.jumpBallTimer),c.move.selected=!1},"ballMoveStart":function(){if(null!=c.balls[c.position.current.y][c.position.current.x]){c.move.readyToCheck=!1,c.move.selected=!0,c.move.start.x=c.position.current.x,c.move.start.y=c.position.current.y;var t=this;this.jumpBallTimer=setInterval(function(){t.jumpBallStartJumping()},60)}},"PressOK":function(){1==c.move.selected?c.move.start.x==c.position.current.x&&c.move.start.y==c.position.current.y?(m.jumpBallStop(),c.move.start.x=-1,c.move.start.y=-1):(null!=c.balls[c.position.current.y][c.position.current.x]&&(m.jumpBallStop(),c.move.readyToCheck=!1,c.move.selected=!0,c.move.start.x=c.position.current.x,c.move.start.y=c.position.current.y,this.ballMoveStart()),c.move.finish.x=c.position.current.x,c.move.finish.y=c.position.current.y,this.checkWay()):-1==c.move.start.x&&-1==c.move.start.y&&null!=c.balls[c.position.current.y][c.position.current.x]&&(c.move.readyToCheck=!1,c.move.selected=!0,c.move.start.x=c.position.current.x,c.move.start.y=c.position.current.y,this.ballMoveStart())},"arr":[],"checkWay":function(){if(null==c.balls[c.move.finish.y][c.move.finish.x]){this.currentNum=0,this.arr=[];for(var t=0;t<c.cells.y;t++){this.arr[t]=[];for(var e=0;e<c.cells.x;e++)null!=c.balls[t][e]?this.arr[t][e]="#":this.arr[t][e]="_"}this.arr[c.move.start.y][c.move.start.x]="S",this.arr[c.move.finish.y][c.move.finish.x]="F";var l=this.findPath(c.move.start.x,c.move.start.y);0!=l?this.drawWay(l):(document.getElementById("errorBadPath").style.display="block",setTimeout(function(){document.getElementById("errorBadPath").style.display="none"},1500))}},"showArr":function(){for(var t="\n",e=0;e<c.cells.x;e++){for(var l="",n=0;n<c.cells.x;n++)l+=this.arr[e][n]+" ";t+=l+"\n"}return t},"currentNum":0,"findPath":function(t,e){if(t<0||t>this.arr.length-1||e<0||e>this.arr[0].length-1)return!1;if("F"==this.arr[e][t])return!0;if("_"!=this.arr[e][t]&&"S"!=this.arr[e][t])return!1;this.arr[e][t]=this.currentNum++;for(var l=0;l<this.arr.length*this.arr[0].length;l++)for(var n=0;n<this.arr.length;n++)for(var s=0;s<this.arr[n].length;s++)this.arr[n][s]==l&&this.setNums(s,n,l+1);return this.getWay()},"setNums":function(t,e,l){t<0||t>this.arr.length-1||e-1<0||e-1>this.arr[0].length-1||"_"!=this.arr[e-1][t]||(this.arr[e-1][t]=l),t<0||t>this.arr.length-1||e+1<0||e+1>this.arr[0].length-1||"_"!=this.arr[e+1][t]||(this.arr[e+1][t]=l),t-1<0||t-1>this.arr.length-1||e<0||e>this.arr[0].length-1||"_"!=this.arr[e][t-1]||(this.arr[e][t-1]=l),t+1<0||t+1>this.arr.length-1||e<0||e>this.arr[0].length-1||"_"!=this.arr[e][t+1]||(this.arr[e][t+1]=l)},"getMinFrom":function(t,e){var l=[],n=[];t<0||t>this.arr.length-1||e-1<0||e-1>this.arr[0].length-1||"_"==this.arr[e-1][t]||"#"==this.arr[e-1][t]||(l[l.length]=this.arr[e-1][t],n[n.length]={"x":t,"y":e-1}),t<0||t>this.arr.length-1||e+1<0||e+1>this.arr[0].length-1||"_"==this.arr[e+1][t]||"#"==this.arr[e+1][t]||(l[l.length]=this.arr[e+1][t],n[n.length]={"x":t,"y":e+1}),t-1<0||t-1>this.arr.length-1||e<0||e>this.arr[0].length-1||"_"==this.arr[e][t-1]||"#"==this.arr[e][t-1]||(l[l.length]=this.arr[e][t-1],n[n.length]={"x":t-1,"y":e}),t+1<0||t+1>this.arr.length-1||e<0||e>this.arr[0].length-1||"_"==this.arr[e][t+1]||"#"==this.arr[e][t+1]||(l[l.length]=this.arr[e][t+1],n[n.length]={"x":t+1,"y":e});for(var s=999,i=0,r=0;r<l.length;r++)s>l[r]&&(s=l[r],i=r);return!!n&&{"obj":n[i],"num":l[i]}},"getMinAtThe":function(t,e,l){var n=[],s=[];return t<0||t>this.arr.length-1||e-1<0||e-1>this.arr[0].length-1||this.arr[e-1][t]!=l||(s[s.length]={"x":t,"y":e-1}),t<0||t>this.arr.length-1||e+1<0||e+1>this.arr[0].length-1||this.arr[e+1][t]!=l||(n[n.length]=this.arr[e+1][t],s[s.length]={"x":t,"y":e+1}),t-1<0||t-1>this.arr.length-1||e<0||e>this.arr[0].length-1||this.arr[e][t-1]!=l||(n[n.length]=this.arr[e][t-1],s[s.length]={"x":t-1,"y":e}),t+1<0||t+1>this.arr.length-1||e<0||e>this.arr[0].length-1||this.arr[e][t+1]!=l||(n[n.length]=this.arr[e][t+1],s[s.length]={"x":t+1,"y":e}),s[0]},"getWay":function(){var t=this.getMinFrom(c.move.finish.x,c.move.finish.y);if(0==t)return!1;for(var e=t.num,l=[t.obj],n=0;n<this.arr.length*this.arr[0].length;n++){try{l.unshift(this.getMinAtThe(l[0].x,l[0].y,--e))}catch(t){}try{if(l[0].x==c.move.start.x&&l[0].y==c.move.start.y)break}catch(t){}}return l.shift(),l},"drawWay":function(t){1==t.length&&c.move.start.x==t[0].x&&c.move.start.y==t[0].y&&(t=[]);for(var e=0;e<t.length;e++)c.layers.context.drawImage(c.balls[c.move.start.y][c.move.start.x].img,t[e].x*c.size[r].cll.w+c.size[r].cll.w/2-.4*c.size[r].cll.w/2,t[e].y*c.size[r].cll.h+c.size[r].cll.h/2-.4*c.size[r].cll.h/2,.4*c.size[r].cll.w,.4*c.size[r].cll.h);this.createBall(c.balls[c.move.start.y][c.move.start.x].color,c.move.finish.x,c.move.finish.y);var l=this;setTimeout(function(){c.layers.context.clearRect(c.move.start.x*c.size[r].cll.w,c.move.start.y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h),c.balls[c.move.start.y][c.move.start.x]=null;for(var e=0;e<t.length;e++)c.layers.context.clearRect(t[e].x*c.size[r].cll.w,t[e].y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h);c.move.start.x=-1,c.move.start.y=-1,c.move.finish.x=-1,c.move.finish.y=-1,l.checkLines(!0),l.jumpBallStop()},500)},"checkLines":function(t){for(var e=!1,l=[],n=0;n<c.balls.length;n++){l[n]=[];for(var s=0;s<c.balls[0].length;s++)0==l[n].length&&null!=c.balls[n][s]?l[n][l[n].length]={"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y,"del":!1}:null!=c.balls[n][s]&&l[n][l[n].length-1].color==c.balls[n][s].color?l[n][l[n].length]={"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y}:l[n].length<5&&(l[n]=null!=c.balls[n][s]?new Array({"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y}):[]);if(l[n].length>=5){for(var i=[],o=l[n][0].x,a=0;a<l[n].length;a++){if(l[n][a].x.toString(),l[n][a].x==o||l[n][a].x-1==o)i.push(l[n][a]),i[i.length-1].y,i[i.length-1].x;else{if(i.length,!(i.length<5))break;i=[]}o=l[n][a].x}l[n]=i}}for(var h=0;h<l.length;h++)if(l[h].length<5)l[h]=[];else{for(var u=0;u<l[h].length;u++)null==c.balls[l[h][u].y][l[h][u].x]&&(l[h]=[]);if(l[h].length<5)break;for(u=0;u<l[h].length;u++)l[h][u].y,l[h][u].x,c.balls[l[h][u].y][l[h][u].x]=null,c.layers.context.clearRect(l[h][u].x*c.size[r].cll.w,l[h][u].y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h);c.account+=l[h].length*c.coeff,e=!0}l=[];for(s=0;s<c.balls[0].length;s++){l[s]=[];for(n=0;n<c.balls.length;n++)0==l[s].length&&null!=c.balls[n][s]?l[s][l[s].length]={"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y}:null!=c.balls[n][s]&&l[s][l[s].length-1].color==c.balls[n][s].color?l[s][l[s].length]={"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y}:l[s].length<5&&(l[s]=null!=c.balls[n][s]?new Array({"color":c.balls[n][s].color,"x":c.balls[n][s].x,"y":c.balls[n][s].y}):[]);if(l[s].length>=5){i=[];var m=0|l[s][0].y;for(a=0;a<l[s].length;a++){if(l[s][a].y.toString(),l[s][a].y==m||l[s][a].y-1==m)i.push(l[s][a]),i[i.length-1].y,i[i.length-1].x;else{if(i.length,!(i.length<5))break;i=[]}m=l[s][a].y}l[s]=i}}for(h=0;h<l.length;h++)if(l[h].length<5)l[h]=[];else{for(u=0;u<l[h].length;u++)null==c.balls[l[h][u].y][l[h][u].x]&&(l[h]=[]);if(l[h].length<5)break;for(u=0;u<l[h].length;u++)l[h][u].y,l[h][u].x,c.balls[l[h][u].y][l[h][u].x]=null,c.layers.context.clearRect(l[h][u].x*c.size[r].cll.w,l[h][u].y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h);c.account+=l[h].length*c.coeff,e=!0}var d=0;l=[];for(s=0;s<c.balls[0].length;s++){n=0;l[d]=[];for(var p=0;p<c.balls.length;p++)if(s+p<c.balls[0].length&&n+p<c.balls.length)if(0==l[d].length&&null!=c.balls[n+p][s+p])l[d][l[d].length]={"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y};else if(null!=c.balls[n+p][s+p]&&l[d][l[d].length-1].color==c.balls[n+p][s+p].color)l[d][l[d].length]={"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y};else{if(!(l[d].length<5))continue;null==c.balls[n+p][s+p]?l[d]=[]:l[d]=new Array({"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y})}d++}for(n=1;n<c.balls.length;n++){s=0;l[d]=[];for(p=0;p<c.balls.length;p++)if(s+p<c.balls[0].length&&n+p<c.balls.length)if(0==l[d].length&&null!=c.balls[n+p][s+p])l[d][l[d].length]={"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y};else if(null!=c.balls[n+p][s+p]&&l[d][l[d].length-1].color==c.balls[n+p][s+p].color)l[d][l[d].length]={"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y};else{if(!(l[d].length<5))continue;null==c.balls[n+p][s+p]?l[d]=[]:l[d]=new Array({"color":c.balls[n+p][s+p].color,"x":c.balls[n+p][s+p].x,"y":c.balls[n+p][s+p].y})}l[d].length<5&&(l[d]=[]),d++}for(h=0;h<l.length;h++)if(!(l[h].length<5)){for(u=0;u<l[h].length;u++)c.balls[l[h][u].y][l[h][u].x]=null,c.layers.context.clearRect(l[h][u].x*c.size[r].cll.w,l[h][u].y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h);c.account+=l[h].length*c.coeff,e=!0}d=0;l=[];for(s=c.balls[0].length-1;s>=0;s--){n=0;l[d]=[];for(p=0;p<c.balls.length;p++)if(s-p>=0&&n+p<c.balls.length)if(0==l[d].length&&null!=c.balls[n+p][s-p])l[d][l[d].length]={"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y};else if(null!=c.balls[n+p][s-p]&&l[d][l[d].length-1].color==c.balls[n+p][s-p].color)l[d][l[d].length]={"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y};else{if(!(l[d].length<5))continue;null==c.balls[n+p][s-p]?l[d]=[]:l[d]=new Array({"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y})}l[d].length<5&&(l[d]=[]),d++}for(n=1;n<c.balls.length;n++){s=c.balls[0].length-1;l[d]=[];for(p=0;p<c.balls.length;p++)if(s-p<c.balls[0].length&&n+p<c.balls.length)if(0==l[d].length&&null!=c.balls[n+p][s-p])l[d][l[d].length]={"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y};else if(null!=c.balls[n+p][s-p]&&l[d][l[d].length-1].color==c.balls[n+p][s-p].color)l[d][l[d].length]={"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y};else{if(!(l[d].length<5))continue;null==c.balls[n+p][s-p]?l[d]=[]:l[d]=new Array({"color":c.balls[n+p][s-p].color,"x":c.balls[n+p][s-p].x,"y":c.balls[n+p][s-p].y})}l[d].length<5&&(l[d]=[]),d++}for(h=0;h<l.length;h++)if(!(l[h].length<5)){for(u=0;u<l[h].length;u++)c.balls[l[h][u].y][l[h][u].x]=null,c.layers.context.clearRect(l[h][u].x*c.size[r].cll.w,l[h][u].y*c.size[r].cll.h,c.size[r].cll.w,c.size[r].cll.h);c.account+=l[h].length*c.coeff,e=!0}var f=document.getElementById("account").getElementsByTagName("li");switch(f[0].innerHTML="0",f[1].innerHTML="0",f[2].innerHTML="0",f[3].innerHTML="0",c.account.toString().length){case 4:f[0].innerHTML=c.account.toString().substr(0,1),f[1].innerHTML=c.account.toString().substr(1,1),f[2].innerHTML=c.account.toString().substr(2,1),f[3].innerHTML=c.account.toString().substr(3,1);break;case 3:f[1].innerHTML=c.account.toString().substr(0,1),f[2].innerHTML=c.account.toString().substr(1,1),f[3].innerHTML=c.account.toString().substr(2,1);break;case 2:f[2].innerHTML=c.account.toString().substr(0,1),f[3].innerHTML=c.account.toString().substr(1,1);break;case 1:f[3].innerHTML=c.account.toString().substr(0,1)}1==e?this.stopAddBalls=!0:1==t&&this.showBall()},"generateNextBalls":function(){c.nextBalls=new Array(c.colors[u(c.colors.length-1)],c.colors[u(c.colors.length-1)],c.colors[u(c.colors.length-1)]);for(var t=document.getElementById("nextBalls").getElementsByTagName("li"),e=0;e<c.nextBalls.length;e++)t[e].style.backgroundImage="url("+o+"/"+c.nextBalls[e]+".png)"}};n.addListener("keydown",function(t){switch(t.code){case i.right:c.position.old.y=c.position.current.y,c.position.old.x=c.position.current.x,c.position.current.x+1<=c.cells.x-1?c.position.current.x++:c.position.current.x=c.cells.x-1,m.item();break;case i.left:c.position.old.y=c.position.current.y,c.position.old.x=c.position.current.x,c.position.current.x-1>=0?c.position.current.x--:c.position.current.x=0,m.item();break;case i.down:c.position.old.y=c.position.current.y,c.position.old.x=c.position.current.x,c.position.current.y+1<=c.cells.y-1?c.position.current.y++:c.position.current.y=c.cells.y-1,m.item();break;case i.up:c.position.old.y=c.position.current.y,c.position.old.x=c.position.current.x,c.position.current.y-1>=0?c.position.current.y--:c.position.current.y=0,m.item();break;case i.ok:if(1==a)return void h();m.PressOK();break;case i.f2:m.jumpBallStop();break;case i.f1:m.showArr();break;case i.record:m.showBall();break;case i.refresh:h();break;case i.back:core.notify({title:"Do you want to exit?",icon:"alert",type:"",buttons:[{value:"Exit",click:function(){core.call("exit")}},{value:"Cancel",click:function(){}}],timeout:5e3})}}),t.exports=n},function(t,e,l){"use strict";var n=l(20);n.back=n.backspace,n.channelNext=n.tab,n.channelPrev=n.tab+"s",n.ok=n.enter,n.exit=n.escape,n.volumeUp=107,n.volumeDown=109,n.f1="112c",n.f2="113c",n.f3="114c",n.f4="115c",n.refresh="116c",n.frame="117c",n.phone="119c",n.set="120c",n.tv="121c",n.menu="122c",n.app="123c",n.rewind="66a",n.forward="70a",n.audio="71a",n.standby="74a",n.keyboard="76a",n.usbMounted="80a",n.usbUnmounted="81a",n.playPause="82a",n.play=-1,n.pause=-1,n.stop="83a",n.power="85a",n.record="87a",n.info="89a",n.mute="192a",n.digit0=48,n.digit1=49,n.digit2=50,n.digit3=51,n.digit4=52,n.digit5=53,n.digit6=54,n.digit7=55,n.digit8=56,n.digit9=57,t.exports=n},function(t,e,l){"use strict";t.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}}]);
//# sourceMappingURL=main.js.map