!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=21)}([function(e,t,i){"use strict";var n=i(29);n.back=n.backspace,n.channelNext=n.tab,n.channelPrev=n.tab+"s",n.ok=n.enter,n.exit=n.escape,n.volumeUp=107,n.volumeDown=109,n.f1="112c",n.f2="113c",n.f3="114c",n.f4="115c",n.refresh="116c",n.frame="117c",n.phone="119c",n.set="120c",n.tv="121c",n.menu="122c",n.app="123c",n.rewind="66a",n.forward="70a",n.audio="71a",n.standby="74a",n.keyboard="76a",n.usbMounted="80a",n.usbUnmounted="81a",n.playPause="82a",n.play=-1,n.pause=-1,n.stop="83a",n.power="85a",n.record="87a",n.info="89a",n.mute="192a",n.digit0=48,n.digit1=49,n.digit2=50,n.digit3=51,n.digit4=52,n.digit5=53,n.digit6=54,n.digit7=55,n.digit8=56,n.digit9=57,e.exports=n},function(e,t,i){"use strict";var n=i(22);e.exports=n},function(e,t,i){"use strict";var n=i(9),s=i(23).parse,o=new n;o.query=s(document.location.search.substring(1)),o.config=i(24),o.activePage=null,o.route=function(e,t){var i,n=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=o.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,o.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:n,to:e}),!0)},e.exports=o},function(e,t,i){"use strict";e.exports=i(6)},function(e,t,i){"use strict";var n=i(8),s=i(38);function o(e){var t=this;e=e||{},this.handlers={},this.links={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",n.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout-list",o.prototype.renderItemDefault=function(e,t){var i,n,o,a,c;if(e.ready&&this.fixedData)for(c=0;c<t.items.length;c++)"string"!=typeof(a=t.items[c]).value&&void 0!==a.value||((o=e.layout.$node.childNodes[c]).innerText=a.value||"",o.className=a.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);n={focusable:!1,data:t.items},t.className&&(n.className=t.className),i=new s(n),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},o.prototype.setData=function(e){this.links={},n.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.init=function(e){var t;n.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t){e.exports={RC_F1:"theme-icon theme-icon-rc-f1",RC_F2:"theme-icon theme-icon-rc-f2",RC_F3:"theme-icon theme-icon-rc-f3",RC_F4:"theme-icon theme-icon-rc-f4",PLAY:"theme-icon theme-icon-play",PAUSE:"theme-icon theme-icon-pause",PREVIOUS:"theme-icon theme-icon-previous",NEXT:"theme-icon theme-icon-next",REWIND:"theme-icon theme-icon-rewind",FORWARD:"theme-icon theme-icon-forward",EXIT:"theme-icon theme-icon-exit",CHANNEL_MINUS:"theme-icon theme-icon-channel-minus",CHANNEL_PLUS:"theme-icon theme-icon-channel-plus",VOLUME:"theme-icon theme-icon-volume",MUTE:"theme-icon theme-icon-mute",FAVORITE_ACTIVE:"theme-icon theme-icon-favorite-active",FAVORITE:"theme-icon theme-icon-favorite",TIMESHIFT:"theme-icon theme-icon-timeshift",DISPLAY:"theme-icon theme-icon-display",SOUND:"theme-icon theme-icon-sound",PIP:"theme-icon theme-icon-pip",ASPECT:"theme-icon theme-icon-aspect",MENU:"theme-icon theme-icon-menu",CATEGORIES:"theme-icon theme-icon-categories",EQUALIZER:"theme-icon theme-icon-equalizer",SORT_AZ:"theme-icon theme-icon-sort-az",SEARCH:"theme-icon theme-icon-search",SETTINGS:"theme-icon theme-icon-settings",LOCK:"theme-icon theme-icon-lock",DVB_POWER_ON:"theme-icon theme-icon-dvb-power-on",CHECKBOX:"theme-icon theme-icon-checkbox",CHECKBOX_ACTIVE:"theme-icon theme-icon-checkbox-active",RC_OK:"theme-icon theme-icon-rc-ok",RC_INFO:"theme-icon theme-icon-rc-info",RC_MENU:"theme-icon theme-icon-rc-menu",RC_PLAY_PAUSE:"theme-icon theme-icon-rc-play-pause",RADIO:"theme-icon theme-icon-radio",RADIO_ACTIVE:"theme-icon theme-icon-radio-active",RC_BACK:"theme-icon theme-icon-rc-back",RC_HOME:"theme-icon theme-icon-rc-home",RC_STOP:"theme-icon theme-icon-rc-stop",RC_PREVIOUS:"theme-icon theme-icon-rc-previous",RC_NEXT:"theme-icon theme-icon-rc-next",RC_REWIND:"theme-icon theme-icon-rc-rewind",RC_FORWARD:"theme-icon theme-icon-rc-forward",RC_SETTINGS:"theme-icon theme-icon-rc-settings",RC_VOLUME_UP:"theme-icon theme-icon-rc-volume-up",RC_VOLUME_DOWN:"theme-icon theme-icon-rc-volume-down",RC_MUTE:"theme-icon theme-icon-rc-mute",SUN:"theme-icon theme-icon-sun",MOON:"theme-icon theme-icon-moon",CLOUD_SUN:"theme-icon theme-icon-cloud-sun",CLOUD_MOON:"theme-icon theme-icon-cloud-moon",RAIN:"theme-icon theme-icon-rain",HEAVY_RAIN:"theme-icon theme-icon-heavy-rain",SNOW:"theme-icon theme-icon-snow",CLOUD:"theme-icon theme-icon-cloud",CLOUD_SUN_2:"theme-icon theme-icon-cloud-sun-2",RC_ASPECT:"theme-icon theme-icon-rc-aspect",RC_POWER:"theme-icon theme-icon-rc-power",RC_APP:"theme-icon theme-icon-rc-app",RC_TV:"theme-icon theme-icon-rc-tv",EQUALIZER_0:"theme-icon theme-icon-equalizer-0",EQUALIZER_1:"theme-icon theme-icon-equalizer-1",EQUALIZER_2:"theme-icon theme-icon-equalizer-2",EQUALIZER_3:"theme-icon theme-icon-equalizer-3",EQUALIZER_4:"theme-icon theme-icon-equalizer-4",STOP:"theme-icon theme-icon-stop",UP:"theme-icon theme-icon-up",DOWN:"theme-icon theme-icon-down",WARNING:"theme-icon theme-icon-warning",FILTER:"theme-icon theme-icon-filter",CLOCK:"theme-icon theme-icon-clock",OK:"theme-icon theme-icon-ok",CANCEL:"theme-icon theme-icon-cancel",GENRES:"theme-icon theme-icon-genres",TELETEXT:"theme-icon theme-icon-teletext",SUBTITLES:"theme-icon theme-icon-subtitles",RC_VK:"theme-icon theme-icon-rc-vk",RC_REFRESH:"theme-icon theme-icon-rc-refresh",SELECT_ALL:"theme-icon theme-icon-select-all",MOVE:"theme-icon theme-icon-move",EDIT:"theme-icon theme-icon-edit",MORE:"theme-icon theme-icon-more",NOT_ALLOWED:"theme-icon theme-icon-not-allowed",TOGGLE:"theme-icon theme-icon-toggle",TOGGLE_ACTIVE:"theme-icon theme-icon-toggle-active",TELETEXT_RATIO:"theme-icon theme-icon-teletext-ratio",HOME:"theme-icon theme-icon-home",RESET:"theme-icon theme-icon-reset",INTERNET:"theme-icon theme-icon-internet",LAN:"theme-icon theme-icon-lan",SCALE:"theme-icon theme-icon-scale",VIRTUAL_MOUSE:"theme-icon theme-icon-virtual-mouse",REFRESH:"theme-icon theme-icon-refresh",NAVIGATE:"theme-icon theme-icon-navigate",DOWNLOAD:"theme-icon theme-icon-download",AVATAR:"theme-icon theme-icon-avatar",MONITOR:"theme-icon theme-icon-monitor",SUPPORT:"theme-icon theme-icon-support",SLIDESHOW:"theme-icon theme-icon-slideshow",SHUFFLE:"theme-icon theme-icon-shuffle",REPEAT:"theme-icon theme-icon-repeat",ROTATE:"theme-icon theme-icon-rotate",ROTATE_BACK:"theme-icon theme-icon-rotate-back",ZOOM_IN:"theme-icon theme-icon-zoom-in",COLOR:"theme-icon theme-icon-color",CLEAR:"theme-icon theme-icon-clear",OPACITY:"theme-icon theme-icon-opacity",HDMI:"theme-icon theme-icon-hdmi",DVB:"theme-icon theme-icon-DVB",NTP_SERVER:"theme-icon theme-icon-ntp-server",SCREENSAVER:"theme-icon theme-icon-screensaver",INTERFACE:"theme-icon theme-icon-interface",RC:"theme-icon theme-icon-rc",CATEGORIES_ROTATE:"theme-icon theme-icon-categories-rotate",STANDBY:"theme-icon theme-icon-standby",LANGUAGES:"theme-icon theme-icon-languages",BRIGHTNESS:"theme-icon theme-icon-brightness",BRIGHTNESS_STANDBY:"theme-icon theme-icon-brightness-standby",CLOCK_ON_PLAYBACK:"theme-icon theme-icon-clock-on-playback",PORTAL:"theme-icon theme-icon-portal",SCREENSAVER_INTERVAL:"theme-icon theme-icon-screensaver-interval",TIMEZONE:"theme-icon theme-icon-timezone",REBOOT:"theme-icon theme-icon-reboot",LINKED:"theme-icon theme-icon-linked",WIFI:"theme-icon theme-icon-wifi",ETHERNET:"theme-icon theme-icon-ethernet",MULTICAST:"theme-icon theme-icon-multicast",GLOBE:"theme-icon theme-icon-globe",RELOAD:"theme-icon theme-icon-reload",SAND_CLOCK:"theme-icon theme-icon-sand-clock",FONT_SIZE:"theme-icon theme-icon-font-size",BACK:"theme-icon theme-icon-back",SD_CARD:"theme-icon theme-icon-sd-card",HDD:"theme-icon theme-icon-hdd",USB:"theme-icon theme-icon-usb",NETWORK:"theme-icon theme-icon-network",UPNP:"theme-icon theme-icon-upnp",FILE:"theme-icon theme-icon-file",FOLDER:"theme-icon theme-icon-folder",WORKGROUP:"theme-icon theme-icon-workgroup",SERVER:"theme-icon theme-icon-server",SHARED_FOLDER:"theme-icon theme-icon-shared-folder",SHORTCUT:"theme-icon theme-icon-shortcut",CREATE_FOLDER:"theme-icon theme-icon-create-folder",BETA:"theme-icon theme-icon-beta",UPDATE:"theme-icon theme-icon-update",ALARM_CLOCK:"theme-icon theme-icon-alarm-clock",PLUS:"theme-icon theme-icon-plus",AUDIO:"theme-icon theme-icon-audio",IMAGE:"theme-icon theme-icon-image",VIDEO:"theme-icon theme-icon-video",TEXT:"theme-icon theme-icon-text",STREAM:"theme-icon theme-icon-stream",RECORD:"theme-icon theme-icon-record",ISO:"theme-icon theme-icon-iso",CUE:"theme-icon theme-icon-cue",PLAYLIST:"theme-icon theme-icon-playlist",_date:1510737340160}},function(e,t,i){"use strict";var n=i(2),s=i(9),o=0;function a(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.defaultEvents=null,a.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},a.prototype.remove=function(){this.parent&&(n.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},a.prototype.focus=function(e){var t=n.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},a.prototype.blur=function(){var e=n.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},a.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},a.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=a},function(e,t,i){"use strict";var n=i(36),s=i(3),o=i(0);function a(e){var t,i,s,a=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){a.hide()},s=e.events.keydown,e.events.keydown=function(e){s&&s.call(this,e),e.code!==o.back&&e.code!==o.menu||(e.stop=!0,a.hide())},n.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-modal",a.prototype.focus=function(){this.$node.classList.add("active"),n.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof s&&this.children[0].focus()},a.prototype.blur=function(){this.$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=a},function(e,t,i){"use strict";var n=i(3),s=i(0);function o(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.init(e)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-list",o.prototype.TYPE_VERTICAL=1,o.prototype.TYPE_HORIZONTAL=2,o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?s.up:s.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?s.left:s.right)},keydown:function(e){switch(e.code){case s.up:case s.down:case s.right:case s.left:case s.pageUp:case s.pageDown:case s.home:case s.end:this.move(e.code);break;case s.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},o.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){n.events[t]=null,n.addListener(t,e.events[t])}),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e),n.scroll&&n.scroll.init({realSize:n.provider.maxCount,viewSize:n.provider.size,value:n.provider.head+n.provider.pos})),n.events["data:get"]&&n.emit("data:get"))})}else e.data&&this.setData(e)},o.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},o.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},o.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case s.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case s.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(s.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case s.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case s.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case s.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case s.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var s;e?t.events["data:error"]&&t.emit("data:error",e):i&&(s=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:s}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},o.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},o.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},o.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=o},function(e,t,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function n(){i.removeListener(e,n),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";e.exports=i(35),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var n={tag:function(e,t,i){var n,s,o=null;if(e){if(o=document.createElement(e),t&&"object"==typeof t)for(s in t)o[s]=t[s];for(n=2;n<arguments.length;n++)arguments[n]&&o.appendChild("object"==typeof arguments[n]?arguments[n]:document.createTextNode(arguments[n]))}return o},fragment:function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)(e=arguments[t])&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},add:function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},remove:function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},clear:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}};e.exports=n},function(e,t,i){"use strict";var n=i(3),s=i(0),o={};function a(e){var t,i=0,s=this;(e=e||{}).focusable=!1,e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.tabs=[{codes:{}},{codes:{}},{codes:{}},{codes:{}}],this.tab=0,this.$table=this.$node.appendChild(document.createElement("table")),this.$table.insertRow(),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$left=this.$table.rows[0].cells[0].appendChild(document.createElement("div")),this.$left.className="theme-icon",this.$table.rows[0].cells[1].className="central",(t=this.tabs[i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",this.$right=this.$table.rows[0].cells[2].appendChild(document.createElement("div")),this.$right.className="theme-icon",this.init(e.data),this.parent.addListener("keydown",function(e){var t=s.tabs[s.tab];s.visible&&t.codes[e.code]&&"function"==typeof t.codes[e.code].action&&t.codes[e.code].action()})}o[s.f1]="theme-icon-rc-f1",o[s.f2]="theme-icon-rc-f2",o[s.f3]="theme-icon-rc-f3",o[s.f4]="theme-icon-rc-f4",o[s.menu]="theme-icon-rc-menu",o[s.ok]="theme-icon-rc-ok",o[s.info]="theme-icon-rc-info",o[s.playPause]="theme-icon-rc-play-pause",o[s.back]="theme-icon-rc-back",o[s.exit]="theme-icon-rc-home",o[s.keyboard]="theme-icon-rc-vk",o[s.refresh]="theme-icon-rc-refresh",o[s.frame]="theme-icon-rc-aspect",a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-footer",a.prototype.init=function(e){var t,i,n;function s(t){return function(){"function"==typeof e.middle[t].action&&e.middle[t].action()}}if(e=e||{},this.tabs[this.tab].$body.classList.add("hidden"),this.tab=e.middle&&e.middle.length?e.middle.length-1:0,(i=this.tabs[this.tab]).codes={},e.left?(this.$left.className=e.left.className||"theme-icon "+(o[e.left.code]||"theme-icon-warning"),e.left.disabled?this.$left.classList.add("disabled"):(i.codes[e.left.code]={action:e.left.action},this.$left.style.visibility="inherit",this.$left.onclick=function(){"function"==typeof e.left.action&&e.left.action()})):"hidden"!==this.$left.style.visibility&&(this.$left.style.visibility="hidden"),e.right?(this.$right.className=e.right.className||"theme-icon "+(o[e.right.code]||"theme-icon-warning"),e.right.disabled?this.$right.classList.add("disabled"):(i.codes[e.right.code]={action:e.right.action},this.$right.style.visibility="inherit",this.$right.onclick=function(){"function"==typeof e.right.action&&e.right.action()})):"hidden"!==this.$right.style.visibility&&(this.$right.style.visibility="hidden"),e.middle&&e.middle.length){for(t=0;t<e.middle.length;t++)i.codes[e.middle[t].code]={action:e.middle[t].action},e.middle[t].disabled?i.$body.children[t].classList.add("disabled"):(i.$body.children[t].classList.remove("disabled"),i.$body.children[t].onclick=s(t)),(n=i.$body.children[t].children)[0].className="iconImg "+(e.middle[t].className||"theme-icon "+(o[e.middle[t].code]||"theme-icon-warning")),n[1].innerText=e.middle[t].title||"";i.$body.classList.remove("hidden")}},e.exports=a},function(e,t,i){"use strict";e.exports=i(39),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";var n;e.exports={notifyError:function(e,t){t=1e3*t||3e3,core.notify({title:e,icon:"alert",type:"warning",timeout:t})},setChannelAsLast:function(e){clearTimeout(n),n=setTimeout(function(){e.setLast()},3e3)},sendOsdInputIntent:function(e,t){void 0===t&&(t={}),core.intent({action:"osd-input",data:{type:"numbers",length:4,startChar:e},events:{done:function(e){return t.callback&&t.callback(e)}}})},sendSearchIntent:function(e,t){window.core.intent({action:"keyboard",data:{type:"text",mode:"qwerty",title:gettext("Search"),description:"",value:e||""},events:{done:function(e){e=e||{},t&&t(e.value)}}},function(e){})},sendRecordIntent:function(e){e&&(e.pvr||e.local_pvr)&&core.intent({action:"record",data:{uri:e.url,name:e.name,id:e.id,pvr:{server:e.pvr,local:e.local_pvr}}})},isCensored:function(e){return e.censored||e.genre&&e.genre.censored},sendOsdTvIntent:function(e,t){return core.intent({action:"osd-tv",data:{name:e.name,number:e.number,favorite:e.favorite,pvr:e.local_pvr||e.pvr,timeshift:e.local_timeshift,censored:e.censored||e.genre&&e.genre.censored,attach:t}},function(){})}}},function(e,t,i){"use strict";var n=i(2);e.exports={DOMContentLoaded:function(e){n.events["dom"]&&n.emit("dom",e)},load:function(e){n.events[e.type]&&n.emit(e.type,e)},unload:function(e){n.events[e.type]&&n.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=n.activePage,s={code:e.keyCode,stop:!1};e.ctrlKey&&(s.code+="c"),e.altKey&&(s.code+="a"),e.shiftKey&&(s.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,s,e),!s.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,s,e)),s.stop||(i.events[e.type]&&i.emit(e.type,s,e),e.stop||n.events[e.type]&&n.emit(e.type,s,e))},keypress:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";var n=i(2);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+n.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";var n=i(3),s=i(0);function o(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},n.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case s.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case s.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case s.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout",o.prototype.init=function(e){for(var t,i,s,o=this,a=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof n||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){o.focusIndex=this.index}for(this.data=a,s=0;s<a.length;s++)"string"==typeof(t=a[s]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof n?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=o},function(e,t,i){"use strict";e.exports={480:{epgGrid:6,scheduleWidth:372,timeStep:5400,countOfSteps:3,timeLineMargin:250,itemHeight:38,timeLineTop:2},576:{epgGrid:9,scheduleWidth:372,timeStep:5400,countOfSteps:3,timeLineMargin:250,itemHeight:38,timeLineTop:2},720:{epgGrid:9,scheduleWidth:830,timeStep:9e3,countOfSteps:5,timeLineMargin:350,itemHeight:48,timeLineTop:2},1080:{epgGrid:9,scheduleWidth:1245,timeStep:9e3,countOfSteps:5,timeLineMargin:525,itemHeight:72,timeLineTop:2}}[screen.height]},function(e,t,i){"use strict";e.exports=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,i){return void 0===t[i]?e:t[i]})}},function(e,t,i){"use strict";e.exports={PLAYER_SET_FULLSCREEN:"set:fullscreen",PLAYER_SET_VIEWPORT:"set:viewport",PLAYER_SEND_EXIT:"exit",CORE_EVENT_HIDE:"hide",CORE_EVENT_SHOW:"show",CORE_EVENT_EXIT:"exit",CORE_EVENT_PLAY_CHANNEL:"play:channel",RIGHT_ARROW_CLICK:"right:arrow:click",LEFT_ARROW_CLICK:"left:arrow:click"}},function(e,t,i){"use strict";var n=i(1);i(0);i(31),n.once("load",function(){i(32).load({name:core.environment.language||"en"},function(){var e=new(i(34))({apiProvider:core.plugins.tvBackend});n.tvBack=core.plugins.tvBackend,n.ui=i(41),n.pages={main:i(43),details:i(49),epg:e},core.addListener("intent",function(e){return e(!1,{})}),n.pages.main.addEpgListeners(e),n.route(n.pages.main)})})},function(e,t,i){"use strict";var n=i(2),s=i(15);window.core=window.parent.getCoreInstance(window,n),i(25),i(26),i(16)("sdk"),i(28),i(16)("app"),n.platform="mag",n.ready=function(){window.core.call("app:ready")},n.exit=function(){n.events["exit"]&&n.emit("exit"),core.call("exit")},s.load=function(e){document.body.setAttribute("platform",n.platform),core.ready?n.events["load"]&&n.emit("load",{}):core.once("load",function(){n.events[e.type]&&n.emit(e.type,e)})},s.contextmenu=function(e){e.preventDefault()},Object.keys(s).forEach(function(e){window.addEventListener(e,s[e])}),e.exports=n},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";if(!document.documentElement.classList){var n=Array.prototype,s=n.indexOf,o=n.slice,a=n.push,c=n.splice,d=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)a.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(a.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==s.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=s.call(this,e);-1!==t&&(c.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return d.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var n=i(2),s=i(27);n.metrics=s[n.query.screenHeight]||s[screen.height]||s[720],n.metrics.availHeight=n.metrics.height-(n.metrics.availTop+n.metrics.availBottom),n.metrics.availWidth=n.metrics.width-(n.metrics.availLeft+n.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,canvasPosition:{x:360,y:68,width:310,height:174},channelListSize:10,scheduleListSize:8,floatingPanelStep:35,floatingPanelStepPadding:3},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,canvasPosition:{x:360,y:68,width:310,height:174},channelListSize:13,scheduleListSize:10,floatingPanelStep:35,floatingPanelStepPadding:3},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,canvasPosition:{x:600,y:68,width:620,height:348},floatingPanelStep:40,floatingPanelStepPadding:4,channelListSize:14,scheduleListSize:10},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,canvasPosition:{x:900,y:102,width:930,height:522},channelListSize:14,scheduleListSize:10,floatingPanelStep:59,floatingPanelStepPadding:6}}},function(e,t,i){"use strict";var n,s=i(2);(n=document.createElement("link")).rel="stylesheet",n.href=window.core.theme.path+s.metrics.height+".css",document.head.appendChild(n),e.exports=n},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var n={timer:0,pressed:!1,fired:!1},s=600;e.exports=function(e,t){var i=t.code,o=t.emitCode;function a(t,i){var n,s,o=e.activePage,a={code:t.keyCode,stop:!1};n=(i=i||{}).type||t.type,t.ctrlKey&&(a.code+="c"),t.altKey&&(a.code+="a"),t.shiftKey&&(a.code+="s"),i.code&&(a.code=i.code),(s=o.activeComponent)&&s!==o&&(s.events[n]&&s.emit(n,a,t),!a.stop&&s.propagate&&s.parent&&s.parent.events[t.type]&&s.parent.emit(n,a,t)),a.stop||(o.events[n]&&o.emit(n,a,t),t.stop||e.events[n]&&e.emit(n,a,t))}window.addEventListener("keydown",function(t){e.activePage,t.keyCode!==i||n.pressed?t.keyCode!==i&&a(t):(n.fired&&(n.fired=!1),n.pressed=!0,clearTimeout(n.timer),n.timer=setTimeout(function(){a(t,{code:o}),n.fired=!0},s))}),window.addEventListener("keyup",function(e){e.keyCode===i&&(!n.fired&&n.pressed&&(clearTimeout(n.timer),a(e,{type:"keydown"})),n.pressed=!1)})}},function(e,t,i){"use strict";Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=this.length,i=0;i<t;){if(e(this[i],i,this))return i;++i}return-1})},function(e,t,i){"use strict";var n=i(9),s=i(33),o=new n;function a(e){var t=new s(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}o.defaultLanguage="en",o.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===o.defaultLanguage?(a(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{a(JSON.parse(i.responseText)),t(null),o.events["load"]&&o.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){a(),t(e),o.events["error"]&&o.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=o},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var n,s,o,a,c,d,l,r,h=i(10),m=i(11).tag,u=i(0),p=i(12),f=i(7),v=i(4),g=i(17),y=i(13),I=i(40);function x(e){var t,i,n,s,o,a=[],c=[];for(s=0;s<e.length;s++)o=m("div",{className:"logo"}),e[s].logo&&(o.style.backgroundImage="url("+core.backend.host+e[s].logo+")"),n=e[s].censored||e[s].genre&&e[s].genre.censored,c=[{className:"number",value:e[s].number.toString()},o,{className:"name",value:e[s].name},{className:e[s].archive?"theme-icon theme-icon-timeshift disabled":"theme-icon hidden"},{className:n?"theme-icon theme-icon-lock disabled":"theme-icon hidden"},{className:"arrowLeft theme-epg-grid-arrow-left"},{className:"arrowRight theme-epg-grid-arrow-right"},{className:"theme-epg-grid-timeshift hidden"}],t=new g({focusable:!1,data:c,className:"channel theme-epg-grid-main",events:{click:function(){this.parent.emit("click")}}}),i=new g({focusable:!1,className:"schedule",data:[],events:{click:function(){this.parent.emit("click")}}}),t.listIndex=s,i.listIndex=s,a.push({value:e[s],items:[t,i],censored:n});return a}function $(){var e,t=d.$focusItem.data.value;d.epgLastFocused&&(e=d.epgLastFocused.data),core.intent({action:"record",data:{uri:t.url,name:t.name,epgName:t.name,startTime:e?e.start:d.time,endTime:e?e.end:d.time+d.timeStep,id:t.id,pvr:{server:t.pvr,local:t.local_pvr}}},function(){})}function w(e){var t=this;e.className="magcore-page-epg"+(e.className?" "+e.className:""),h.call(this,e),this.addListener("show",function(e){d.focusIndex(e.data.index),d.focus(),d.startCheck()}),this.addListener("keydown",function(e){switch(e.code){case u.back:d.stopCheck(),t.emit("back",d.$focusItem)}}),a=new g({focusable:!1,data:[{name:"$title",className:"title",value:gettext("TV Guide")},{name:"$current",className:"current"},{name:"$description",className:"description"}],className:"header-layout theme-epg-grid-main"}),this.add(a),c=new g({focusable:!1,data:[{className:"time"},{name:"$timeline",className:"timeline theme-epg-grid-timeline"}],className:"content"}),this.add(c),d=new I({className:"epg-list",size:i(18).epgGrid,events:{"click:item":function(e){var i=e.$item;i.data.value.epgItems.length?i.data.value.epgItems[i.data.value.epgFocus]&&(i.data.value.archive&&i.data.value.epgItems[i.data.value.epgFocus].data.archive?t.emit("epg:click",{channelIndex:i.index,epg:i.data.value.epgItems[i.data.value.epgFocus].data}):t.emit("channel:click",{channelIndex:i.index})):t.emit("channel:click",{channelIndex:i.index})},"focus:item":function(e){var t=e.$curr,i=[];e={left:{},middle:[],label:{code:u.menu,title:gettext("Hold OK button to open Options menu"),action:function(){s.show(),s.focus()}}},(t.data.value.pvr||t.data.value.local_pvr)&&(e.middle.push({code:u.f1,title:gettext("Record"),action:$}),i.push({items:[{className:r.record},{className:"title",value:gettext("Record")}],click:function(){s.hide(),$()}})),i.push({items:[{className:r.realtime},{className:"title",value:gettext("To real time")}],click:function(){s.hide(),d.goToRealTime()}}),e.middle.push({code:u.f3,title:gettext("To real time"),action:function(){d.goToRealTime()}}),e.left={code:u.menu,action:function(){s.show(),s.focus()}},n.init(e),o.init({data:i,size:i.length,focusIndex:0})}},noData:gettext("No Channels"),apiProvider:e.apiProvider,focusIndex:0,scroll:l=new y,$timeBlock:c.$node.children[0],$programDescription:a.links.$description,$programName:a.links.$current,$timeLine:c.links.$timeline}),c.add(d),c.add(l),(n=new p({visible:!1,parent:this})).init({left:{code:u.menu,action:function(){s.show(),s.focus()}},middle:[{code:u.f1,title:gettext("Record"),action:$},{code:u.f3,title:gettext("To real time"),action:function(){d.goToRealTime()}}],label:{code:u.menu,title:gettext("Hold OK button to open Options menu"),action:function(){s.show(),s.focus()}}}),n.show(),this.add(s=new f({title:gettext("Actions"),className:"width2x",events:{show:function(){n.hide(),this.children[0].focus()},hide:function(){n.show(),d.focus()}},children:[o=new v({size:2,focusIndex:0,cycle:!0,data:[{items:[{className:r.record},{className:"title",value:gettext("Record")}],click:function(){s.hide(),$()}},{items:[{className:r.realtime},{className:"title",value:gettext("To real time")}],click:function(){s.hide(),d.goToRealTime()}}],events:{keydown:function(e){switch(v.prototype.defaultEvents.keydown.call(this,e),e.code){case u.menu:case u.back:s.hide(),e.stop=!0}}}})]}))}r={realtime:"theme-icon theme-icon-rc-f3",record:"theme-icon theme-icon-rc-f1"},w.prototype=Object.create(h.prototype),w.prototype.constructor=w,w.prototype.setChannels=function(e){d.setData({data:x(e),focusIndex:0}),d.updateEpg()},e.exports=w},function(e,t,i){"use strict";var n=i(6);function s(e){e=e||{},this.active=!1,this.activeComponent=null,n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-page",e.exports=s},function(e,t,i){"use strict";e.exports=i(37),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var n=i(6);function s(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-modal",e.exports=s},function(e,t,i){"use strict";var n=i(3),s=i(0);function o(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},n.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case s.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case s.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case s.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-layout",o.prototype.init=function(e){for(var t,i,s,o=this,a=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof n||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){o.focusIndex=this.index}for(this.data=a,s=0;s<a.length;s++)"string"==typeof(t=a[s]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof n?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=o},function(e,t,i){"use strict";var n=i(6);function s(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-scrollbar",s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},s.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=s},function(e,t,i){"use strict";var n=i(11),s=i(0),o=i(17),a=i(4),c=i(18),d=[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")],l=[gettext("Sunday "),gettext("Monday "),gettext("Tuesday "),gettext("Wednesday "),gettext("Thursday "),gettext("Friday "),gettext("Saturday ")];function r(e){this.scheduleWidth=c.scheduleWidth,this.time=null,this.day=0,this.timeStep=c.timeStep,this.countOfSteps=c.countOfSteps,this.scheduleBlock=this.scheduleWidth/this.timeStep,this.step=this.timeStep/this.countOfSteps,this.timeLineMargin=c.timeLineMargin,this.itemHeight=c.itemHeight,this.timeLineTop=c.timeLineTop,this.$timeBlock=e.$timeBlock,this.$programDescription=e.$programDescription,this.$programName=e.$programName,this.$timeLine=e.$timeLine,this.$timeLine.appendChild(n.tag("div",{className:"timemark theme-epg-grid-timemark"})),this.timers={},this.internal={},this.epgMode=0,this.epgFocusTime=null,this.epgLastFocused=null,e.events||(e.events={}),e.events.keydown||(e.events.keydown=function(e){switch(e.code){case s.right:case s.left:this.moveEpg(e.code);break;case s.up:case s.down:case s.pageUp:case s.pageDown:case s.home:case s.end:this.move(e.code);break;case s.enter:e.stop=!0,this.pressOk()}}),this.apiProvider=e.apiProvider,a.call(this,e)}r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.prototype.renderItem=function(e,t){for(var i,n,s,a=this;e.firstChild;)e.removeChild(e.firstChild);s={focusable:!1,data:t.items},t.className&&(s.className=t.className),t.events?s.events=t.events:s.events={click:function(){a.focusItem(e),a.pressOk()}},i=new o(s),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,n=t.items[0].value.$node.children,e.censored=t.censored,e.domLinks={$number:n[0],$icon:n[1],$title:n[2],$archiveIcon:n[3],$lockIcon:n[4],$archiveLine:n[7]},t.click&&(this.handlers[e.index]=t.click),e.ready=!0,e.value=t.value||{},t.value.archive?(t.value.$archiveLine=e.domLinks.$archiveLine,e.domLinks.$archiveLine.classList.remove("hidden")):(t.value.$archiveLine=null,e.domLinks.$archiveLine.classList.add("hidden")),t&&this.fillItem(e,t)},r.prototype.setData=function(e){a.prototype.setData.call(this,e),this.data.length<this.size?this.$timeLine.style.height=this.itemHeight*this.data.length+this.timeLineTop+"px":this.$timeLine.style.height=this.itemHeight*this.size+this.timeLineTop+"px"},r.prototype.moveEpg=function(e){switch(e){case s.left:this.subPrev();break;case s.right:this.subNext()}},r.prototype.pressOk=function(){this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:event})},r.prototype.onFocus=function(e){var t,i,n=this,s=0;this.repositionTimeLine(),this.timers.onFocus&&clearTimeout(this.timers.onFocus),this.epgMode&&(this.timers.onFocus=setTimeout(function(){if((i=e.$curr.data).value.epgItems.length){for(t=0;t<i.value.epgItems.length;t++)if(n.epgFocusTime>=i.value.epgItems[t].data.start&&n.epgFocusTime<i.value.epgItems[t].data.end){s=t;break}i.value.epgFocus=s,n.focusEpg(i.value.epgItems[i.value.epgFocus],!0)}else n.epgLastFocused&&(n.epgLastFocused.classList.remove("theme-epg-grid-focused"),n.epgLastFocused.focused=!1),n.epgLastFocused=null},core.environment.onFocusDebounceTimeout))},r.prototype.onOverflow=function(){var e=this;this.timers.onOverflow&&clearTimeout(this.timers.onOverflow),this.timers.onOverflow=setTimeout(function(){e.updateEpg()},core.environment.onFocusDebounceTimeout)},r.prototype.init=function(e){a.prototype.init.call(this,e),this.addListener("focus:item",this.onFocus),this.addListener("move:view",this.onOverflow)},r.prototype.startCheck=function(){this.checkingTime()},r.prototype.stopCheck=function(){var e;for(e in this.internal)clearInterval(this.internal[e]);for(e in this.timers)clearTimeout(this.timers[e])},r.prototype.fillItem=function(e,t){var i,s,o,a=0,c=[],d=this.time;if(n.clear(t.items[1].value.$node),(!e.censored||core.accessControl.state)&&t.value.epgGrid&&t.value.epgGrid.length){for(s=0;s<t.value.epgGrid.length&&!((o=t.value.epgGrid[s]).start>=this.time+this.timeStep-60);s++)o.end>this.time&&(o.start>=d+60&&(i=n.tag("div",{className:"program theme-epg-grid-noData"},n.tag("div",{className:"text",data:{focusable:!1}},gettext("No data"))),a=(o.start-d)*this.scheduleBlock,a=Math.floor(a)-2,i.children[0].style.width=a+"px",n.add(t.items[1].value.$node,i),d=o.start),o.focusable=!0,i=n.tag("div",{className:"program theme-epg-grid-default"},n.tag("div",{className:"text",data:o},o.title)),a=o.end<this.time+this.timeStep?(o.end-d)*this.scheduleBlock:(this.time+this.timeStep-d)*this.scheduleBlock,a=Math.floor(a)-2,d=o.end,i.children[0].style.width=a+"px",i.data=o,n.add(t.items[1].value.$node,i),c.push(i)),t.value.epgItems=c;d<this.time+this.timeStep&&(a=(this.time+this.timeStep-d)*this.scheduleBlock)>4&&(i=n.tag("div",{className:"program theme-epg-grid-noData"},n.tag("div",{className:"text",data:{focusable:!1}},gettext("No data"))),a=Math.floor(a)-2,i.children[0].style.width=a+"px",n.add(t.items[1].value.$node,i))}else(i=n.tag("div",{className:"program theme-epg-grid-noData"},n.tag("div",{className:"text",data:{focusable:!1}},gettext("No data")))).children[0].style.width=this.scheduleWidth-2+"px",n.add(t.items[1].value.$node,i),t.value.epgItems=[]},r.prototype.checkCurrent=function(){var e,t,i,n,s=this,o=this.$focusItem,a=Date.now()/1e3;function c(e,i){t&&e.data&&a>e.data.start&&a<e.data.end?(e.classList.add("theme-epg-grid-current"),t=!1,s.epgMode||n!==o||(s.focusEpg(e,!0),o.data.value.epgFocus=i)):(e.classList.remove("theme-epg-grid-current"),s.epgMode||s.$body.children[i]!==o||e.classList.remove("theme-epg-grid-focused"))}for(i=0;i<this.$body.children.length;i++)t=!0,(n=this.$body.children[i]).data&&n.data.value.epgItems&&n.data.value.epgItems.length&&n.data.value.epgItems.forEach(c);o&&o.data.value.$archiveLine&&(o.data.value.epgGrid&&o.data.value.epgGrid.length?this.time+this.timeStep>a?a>=this.time?(e=Math.ceil((a-this.time)*this.scheduleBlock),o.data.value.$archiveLine.style.width=e+"px",o.data.value.$archiveLine.style.display=""):o.data.value.$archiveLine.style.display="none":o.data.value.$archiveLine.style.width=this.scheduleWidth+"px":o.data.value.$archiveLine.style.display="none")},r.prototype.setCurrentProgram=function(){this.epgLastFocused&&this.epgLastFocused.data?(this.$programDescription.innerText=this.epgLastFocused.data.description||"",this.$programName.innerText=this.epgLastFocused.data.title||""):(this.$programDescription.innerText="",this.$programName.innerText="")},r.prototype.repositionTimeLine=function(){var e=new Date,t=0,i=Math.ceil(e.getTime()/1e3);i>=this.time&&this.time+this.timeStep>i?(t=Math.ceil((i-this.time)/this.timeStep*this.scheduleWidth),t+=this.timeLineMargin,this.$timeLine.style.display="block",this.$timeLine.style.left=t+"px"):this.$timeLine.style.display="none",this.checkCurrent()},r.prototype.epgModeChange=function(e){var t=this;this.epgMode=!!e,this.timers.epgModeChange&&clearTimeout(this.timers.epgModeChange),this.epgMode&&(this.timers.epgModeChange=setTimeout(function(){t.goToRealTime()},18e4))},r.prototype.checkingTime=function(){var e=this.getStartTime(),t=this;this.internal.checkingTime&&clearInterval(this.internal.checkingTime),this.epgMode||(this.time!==e&&(this.time=e),this.initTimeBlock(),this.internal.checkingTime=setInterval(function(){t.epgMode||(e=t.getStartTime(),t.time!==e&&(t.time=e,t.initTimeBlock())),t.repositionTimeLine()},6e4))},r.prototype.initTimeBlock=function(e,t){var i,s,o,a,c,r,h,m;for(null===this.time&&(this.time=this.getStartTime()),r=this.time-this.step/2,i=new Date(1e3*r),s=l[i.getDay()],o=i.getMinutes(),a=i.getHours(),c=i.getMonth()+1,h=s+", "+i.getDate()+" "+d[c-1],n.clear(this.$timeBlock),n.add(this.$timeBlock,n.tag("div",{className:"date theme-epg-grid-date"},h)),m=2;m<=2*this.countOfSteps;m+=2)i.setTime(1e3*(r+m*this.step/2)),o=i.getMinutes(),a=i.getHours(),n.add(this.$timeBlock,n.tag("div",{className:"hours theme-epg-grid-date "+(30===o?"halfhour":"hour")},(a<10?"0"+a:a)+":"+(o<10?"0"+o:o),n.tag("div",{className:"hourmark theme-epg-grid-hourmark"})));this.updateEpg(e,t)},r.prototype.getStartTime=function(){var e,t,i=new Date;return t=Math.floor(i.getTime()/1e3),(e=60*i.getMinutes()%(2*this.step))<this.step?t-e-this.step/2:t-e+this.step/2},r.prototype.updateEpg=function(e,t){var i,s,o,a=[],c={},d=this;for(i=0;i<this.$body.children.length;i++)this.$body.children[i].data&&a.push(this.$body.children[i].data.value);if(0!==a.length){for(c.channels=a,this.time||(this.time=this.getStartTime()),c.from=1e3*this.time,c.to=c.from+1e3*this.timeStep,this.request&&this.request.abort(),s=this.$body.children.length,o=this.data.length,i=0;i<s&&this.$body.children[i].index<o;i++)n.clear(this.data[this.$body.children[i].index].items[1].value.$node);this.request=this.apiProvider.getChannelsEpg(c,function(n,s){if(!n)for(i=0;i<a.length;i++)s[a[i].id]?a[i].epgGrid=s[a[i].id]:a[i].epgGrid=null;for(i=0;i<d.$body.children.length;i++)d.$body.children[i].data&&d.fillItem(d.$body.children[i],d.data[d.$body.children[i].index]);if(d.checkCurrent(),d.epgMode)if((s=d.$focusItem.data).value.epgItems.length){if(e)s.value.epgFocus=s.value.epgItems.length-1;else if(t)s.value.epgFocus=0;else for(s.value.epgFocus=0,i=0;i<s.value.epgItems.length;i++)if(d.epgFocusTime>=s.value.epgItems[i].data.start&&d.epgFocusTime<s.value.epgItems[i].data.end){s.value.epgFocus=i;break}d.focusEpg(s.value.epgItems[s.value.epgFocus],!0)}else d.focusEpg(d.epgLastFocused,!1)}),this.repositionTimeLine()}},r.prototype.focusEpg=function(e,t){t=!!t,e.focused!==t&&(t?(this.epgLastFocused&&(this.epgLastFocused.classList.remove("theme-epg-grid-focused"),this.epgLastFocused.focused=!1),e.classList.add("theme-epg-grid-focused"),e.focused=!0,this.epgLastFocused=e,this.epgFocusTime=e.data.start,this.setCurrentProgram()):(e.classList.remove("theme-epg-grid-focused"),e.focused=!1,this.epgLastFocused===e&&(this.epgLastFocused=null,this.epgFocusTime=this.time,this.setCurrentProgram())))},r.prototype.subNext=function(){var e=this.$focusItem.data;this.epgModeChange(!0),e.value.epgItems.length&&e.value.epgFocus+1<e.value.epgItems.length?(e.value.epgFocus++,this.focusEpg(e.value.epgItems[e.value.epgFocus],!0)):(this.time+=this.timeStep-this.step,this.initTimeBlock(!1,!0))},r.prototype.subPrev=function(){var e=this.$focusItem.data;this.epgModeChange(!0),e.value.epgItems.length>0&&e.value.epgFocus>0?(e.value.epgFocus--,this.focusEpg(e.value.epgItems[e.value.epgFocus],!0)):(this.time-=this.timeStep-this.step,this.initTimeBlock(!0))},r.prototype.goToRealTime=function(){var e=this.getStartTime();this.epgMode&&(this.epgModeChange(!1),this.time!==e&&(this.time=e,this.initTimeBlock()))},e.exports=r},function(e,t,i){"use strict";var n,s=i(1),o=i(5),a=i(19),c=document.createElement("img"),d=document.getElementById("pageMain"),l=document.getElementById("pageMainCanvas"),r=document.getElementById("previewCensoredPlaceholder"),h=document.getElementById("channelListTitle"),m=document.getElementById("channelsCount"),u=document.getElementById("pageMainCurrentChannelEpg"),p=u.children[0],f=u.children[1],v=document.getElementById("channelListNoDataWrapper"),g=l.getContext("2d"),y=s.metrics.canvasPosition,I=document.createElement("div"),x=document.createElement("style"),$=document.createElement("div"),w=document.createElement("div"),C=document.createElement("span"),b=i(20),L=b.RIGHT_ARROW_CLICK,E=b.LEFT_ARROW_CLICK;function k(e){return e.replace('url("',"").replace('")',"").replace("url","").replace("(","").replace(")","")}I.className="theme-styled-text",document.body.appendChild(I),n=window.getComputedStyle(I).color,x.innerText=".classic-tv-special-bg {background-color:"+n+"}\n#pageDetails .mag-component-list.right-side .item.focus div .container {background-color: "+n+";}\n#pageDetails .mag-component-list.right-side.focus .item.focus div .text {color: "+n+";}",document.head.appendChild(x),v.children[0].innerText=gettext("No channels"),$.className="container-arrow-right",$.innerText="\\\n/",w.className="container-arrow-left",w.innerText="/\n\\",d.appendChild($),d.appendChild(w),$.addEventListener("click",function(){s.emit(L)}),w.addEventListener("click",function(){s.emit(E)}),l.width=s.metrics.width,l.height=s.metrics.height,r.className+=" "+o.LOCK,C.className=o.LOCK,f.appendChild(C),f.innerHTML+=gettext("Channel is censored"),function t(i){c.onload=function(){var t;g.drawImage(c,0,0),g.clearRect(y.x,y.y,y.width,y.height),l.toDataURL&&core.device&&core.device.name&&["emulator","emulator_stb","AndroidAPP","AndroidSTB"].indexOf(core.device.name)>-1&&(t=l.toDataURL(),g.clearRect(0,0,s.metrics.width,s.metrics.height),l.style.backgroundImage="url("+t+")"),l.appendChild(c),e.exports.canvasLoaded=!0,s.emit("background:load")},c.onerror=function(){for(var e=function(e){for(var t,i,n,s=document.styleSheets,o=document.styleSheets.length,a=e.nodeName.toLowerCase(),c=[],d=0;d<o;){for(i=0,n=(t=s[d].rules||s[d].cssRules).length;i<n;)-1!==a.indexOf(t[i].selectorText)&&c.push(t[i].style),++i;++d}return c}(document.body),i=0;i<e.length;){if(e[i].backgroundImage){t(k(e[i].backgroundImage));break}++i}},c.src=i}(k(window.getComputedStyle(document.body).backgroundImage)),e.exports={preview:!0,showPreview:function(e){e?(document.body.classList.add("background-off"),d.classList.remove("page-full-list")):(document.body.classList.remove("background-off"),d.classList.add("page-full-list")),this.preview=!!e},showCensoredPlaceholder:function(){r.classList.remove("hidden"),u.classList.add("censored")},hideCensoredPlaceholder:function(){r.classList.add("hidden"),u.classList.remove("censored")},colors:{SPECIAL_BACKGROUND:n},updateFloatingPanel:i(42)({specialColor:n}),hideFloatingPanel:function(){window.floatingPanel.classList.add("hidden")},showFloatingPanel:function(){window.floatingPanel.classList.remove("hidden")},updateChannelsListTitle:function(e,t){var i;e.genre||e.search?e.genre&&e.search?(i=t.filter(function(t){return t.id===e.genre})[0].name||"",h.innerText=gettext("Search")+" "+gettext("in")+" "+i+" "+gettext("by")+' "'+e.search+'"'):e.genre?(i=t.filter(function(t){return t.id===e.genre})[0].name||"",h.innerText=i):e.search&&(h.innerText=gettext("Search")+" "+gettext("by")+' "'+e.search+'"'):h.innerText=gettext("Channel list")},updateChannelsListCount:function(e){var t=window.ngettext("{0} channel","{0} channels",e);m.innerText=a(t||"{0} channels",e),e?(v.classList.remove("visible"),this.preview&&document.body.classList.add("background-off")):(v.classList.add("visible"),this.preview&&document.body.classList.remove("background-off"))},updateCurrentChannelEpg:function(e){e=e||[],p.innerText=e.filter(function(e){var t=new Date,i=new Date(1e3*e.start),n=new Date(1e3*e.end);return i>t||i<t&&n>t}).slice(0,5).map(function(e){return new Date(1e3*e.start).toTimeString().replace(/.*(\d{2}:\d{2})(:\d{2}).*/,"$1")+" - "+e.title}).join("\n")},canvasLoaded:!1}},function(e,t,i){"use strict";var n=i(1).metrics,s=i(5),o=i(14),a=window.floatingPanel,c=window.floatingPanelNumber,d=window.floatingPanelLogo,l=window.floatingPanelTitleWrapper,r=window.floatingPanelTitle,h=window.floatingPanelEpg,m=window.floatingPanelFavorite,u=window.floatingPanelTS,p=window.floatingPanelLock;r.className+=" theme-styled-text",h.className+=" theme-styled-text",m.className=s.FAVORITE_ACTIVE+" active",u.className=s.TIMESHIFT+" theme-styled-text",p.className+=s.LOCK+" theme-styled-text",e.exports=function(e){return c.style.backgroundColor=e.specialColor,function(e,t){var i=0;if(e){if(void 0!==t&&(a.style.top=t*n.floatingPanelStep-n.floatingPanelStepPadding+"px"),c.innerText=e.number||"",e.logo?d.style.backgroundImage="url("+core.backend.host+e.logo+")":d.style.backgroundImage="",r.innerText=e.name||"",e.currentEpg){var s=new Date(1e3*e.currentEpg.start),f=s.getHours(),v=s.getMinutes();v<10&&(v="0"+v),h.innerText=f+":"+v+" "+(e.currentEpg.title||""),r.classList.remove("no-epg")}else h.innerText="",r.classList.add("no-epg");e.favorite?(m.classList.add("visible"),i++):m.classList.remove("visible"),o.isCensored(e)?(p.classList.add("visible"),i++):p.classList.remove("visible"),e.local_timeshift||e.archive&&e.archive_range?(u.classList.add("visible"),i++):u.classList.remove("visible"),l.className="title-wrapper icons-"+i}}}},function(e,t,i){"use strict";var n,s,o,a,c,d,l,r,h,m=i(1),u=i(10),p=i(19),f=i(0),v=i(5),g=i(12),y=i(8),I=i(44),x=i(7),$=i(45),w=i(4),C=i(13),b=new u({$node:window.pageMain,focusable:!1}),L=i(14),E=i(46)(b),k=i(47),T=9e5,N=7e3,S={favorite:!1,byName:!1,genre:!1,genreName:gettext("All categories"),search:!1},R={},O=[],A=!1,D={list:[],currentIndex:0},_=i(20),P=_.CORE_EVENT_SHOW,z=_.CORE_EVENT_HIDE,F=_.LEFT_ARROW_CLICK,M=_.RIGHT_ARROW_CLICK,V=_.PLAYER_SET_VIEWPORT,B=_.PLAYER_SET_FULLSCREEN,H=_.PLAYER_SEND_EXIT,U=_.CORE_EVENT_EXIT,Y=_.CORE_EVENT_PLAY_CHANNEL;function G(e){var t,i,n,o=O.length,a=!core.applicationState.visible;for(e=Number(e),t=0;t<o;t++)O[t].number===e&&(i=t);void 0===i?L.notifyError(gettext("No such channel number")):(n=O[i]).id===d.$focusItem.data.id||(m.ui.preview&&!L.isCensored(n)?(d.focusIndex(i),W(i,{showOsd:a})):m.ui.preview||L.isCensored(n)?core.accessControl.request(function(e){e||(d.$focusItem.data.unlocked=!0,m.ui.hideCensoredPlaceholder(),n.unlocked=!0,m.ui.preview?(d.focusIndex(i),clearTimeout(s),W(i)):W(i,{fullscreen:!0,showOsd:a}))}):(d.focusIndex(i),W(i,{fullscreen:!0,showOsd:a})))}function W(e,t){var i,s=O[e];function o(o,a){m.lastIntent=core.intent({action:"play",mime:"content/video",context:h,silent:t.silent,data:{uri:o,title:s.name,tvChannel:s,solution:a,persistent:!0,headless:!0,viewport:i,mediaId:s.id,extra:s.extra,retryOnError:!0,stream:!0,controls:{pip:!1},volumeCorrection:s["volume_correction"]},events:{nextChannel:j,prevChannel:K,onInfoPress:function(){n=L.sendOsdTvIntent(s,!0)},close:function(){h=null,n&&n.close()},onNumberPress:function(e){L.sendOsdInputIntent(e.number,{callback:G})},start:function(){L.setChannelAsLast(s),core.applicationState.visible||m.lastIntent.emit(B)},onPip:function(){h=null,m.lastIntent=null}}},function(e,t){h=t}),m.activeChannel=s,r=e,t.fullscreen&&m.lastIntent.show(m.lastIntent.receiver)}t=t||{},m.ui.preview&&core.applicationState.visible&&(i=m.metrics.canvasPosition),t.forceFullscreen&&(i=!1,t.silent=!1),s&&(s.url?o(s.url,s.solution):s.getUrl(function(e,t){e?L.notifyError(gettext("Error getting channel link")):o(t.url,t.solution)}),t.showOsd&&(n=L.sendOsdTvIntent(s)))}function j(){var e=++r;e>O.length-1&&(e=0,r=0),L.isCensored(O[e])?j():(W(e),n=L.sendOsdTvIntent(O[e],!1))}function K(){var e=--r;e<0&&(e=r=O.length-1),L.isCensored(O[e])?K():(W(e),n=L.sendOsdTvIntent(O[e],!1))}function Z(){d.$focusItem&&(m.ui.showPreview(!m.ui.preview),m.ui.preview?d.$focusItem&&!L.isCensored(O[d.$focusItem.index])?W(d.$focusItem.index):m.ui.showCensoredPlaceholder():(clearTimeout(s),m.ui.hideCensoredPlaceholder(),m.ui.updateFloatingPanel(d.$focusItem.data,d.$focusItem.index-d.viewIndex),m.lastIntent&&(m.lastIntent.emit(H),m.activeChannel=null)))}function q(){!L.isCensored(d.$focusItem.data)||core.accessControl.state||d.$focusItem.data.unlocked?(document.body.classList.add("background-off"),m.route(m.pages.epg,d.$focusItem),m.ui.preview&&m.lastIntent&&m.lastIntent.emit(B)):L.notifyError(gettext("Channel is censored"))}function X(){var e;d.$focusItem&&(!L.isCensored(d.$focusItem.data)||core.accessControl.state||d.$focusItem.data.unlocked?(e=d.$focusItem.data.id,d.$focusItem.data.getEpg([],function(t,i){e===d.$focusItem.data.id&&(i&&i.length?(document.body.classList.remove("background-off"),m.route(m.pages.details,{list:i,channelIndex:d.$focusItem.index})):L.notifyError(gettext("This channel don't have epg")))})):L.notifyError(gettext("Channel is censored")))}function J(){d.$focusItem&&d.$focusItem.data&&d.$focusItem.data.getEpg([],function(e,t){m.ui.updateCurrentChannelEpg(t)}),a&&clearInterval(a),a=setInterval(J,T)}function Q(){var e,t;e=[{items:[{className:k.view},{value:gettext("View")}],click:function(){b.modalActions.hide(),Z()}}],d.$focusItem&&d.$focusItem.data&&(t=d.$focusItem.data,e.splice(2,0,{items:[{className:t.favorite?k.favoriteActive:k.favorite},{value:t.favorite?gettext("Remove from Favorites"):gettext("Add to favorite")}],click:function(){d.$focusItem&&(d.$focusItem.data.favorite?d.$focusItem.$favorite.classList.add("hide"):d.$focusItem.$favorite.classList.remove("hide"),d.$focusItem.data.toggleFavorite(function(){m.ui.updateFloatingPanel(d.$focusItem.data)})),b.modalActions.hide()}}),e.splice(3,0,{items:[{className:k.tvGuide},{value:gettext("TV guide")}],click:function(){b.modalActions.hide(),q()}}),(t.pvr||t.local_pvr)&&e.splice(4,0,{items:[{className:k.record},{value:gettext("Record")}],click:function(){b.modalActions.hide(),L.sendRecordIntent(t)}})),b.modalActionsList.init({data:e,size:e.length,focusIndex:0}),setTimeout(function(){b.modalActions.show()},10)}function ee(){var e=[{items:[{className:v.SEARCH+(S.search?" active":"")},{value:S.search||gettext("Search")}],click:function(){b.leftMenu.hide(),L.sendSearchIntent(S.search||"",function(e){S.search=e,te()})}},{items:[{className:S.favorite?v.FAVORITE_ACTIVE+" active":v.FAVORITE},{value:gettext("Favorite list")}],click:function(){S.favorite=!S.favorite,b.leftMenu.hide(),te()}},{items:[{className:v.CATEGORIES+(S.genre?" active":"")},{value:S.genreName}],click:function(){b.leftMenu.hide(),b.modalFilter.show()},className:"theme-item-more"},{items:[{className:v.SORT_AZ},{value:S.byName?gettext("By name"):gettext("By number")}],click:function(){b.leftMenu.hide(),b.modalSort.show()},className:"theme-item-more"},{items:[{className:"theme-icon theme-icon-reset-filters"},{value:gettext("Reset filters")}],click:function(){b.leftMenu.hide(),setTimeout(function(){b.modalFilter.children[0].init({data:b.modalFilter.children[0].data,focusIndex:0})},10),S.favorite=!1,S.genre=!1,S.genreName=gettext("All categories"),S.search=!1,te()}}];b.leftMenuList.setData({data:e,focusIndex:0}),setTimeout(function(){b.leftMenu.show()})}function te(e,t){var i,n=0;e=e||{},m.ui.hideCensoredPlaceholder(),m.tvBack.updateChannelsList(function(){O=[],m.tvBack.getChannels(S,function(s,o){if(setTimeout(function(){m.pages.epg.setChannels(o)}),O=o,b.dataBuffer=O,o.length?m.ui.showFloatingPanel():m.ui.hideFloatingPanel(),void 0!==e.focusId)for(i=0;i<O.length;i++)O[i].id===Number(e.focusId)&&(n=i);else n=void 0!==e.focusIndex?e.focusIndex:d.$focusItem&&d.$focusItem.index<O.length?d.$focusItem.index:0;r=n,m.ui.updateChannelsListTitle(S,l),m.ui.updateChannelsListCount(O.length),function(){var e={left:{code:f.menu,action:Q},label:{code:f.menu,title:gettext("Hold OK button to open Options menu"),action:Q},middle:[{code:f.f1,title:gettext("View"),action:Z},{code:f.f2,title:gettext("Sorting"),action:function(){b.modalActions.hide(),b.modalSort.show()}}]};O.length&&(e.middle=e.middle.concat([{code:f.f3,title:gettext("Favorite"),action:function(){d.$focusItem&&(d.$focusItem.data.favorite?d.$focusItem.$favorite.classList.add("hide"):d.$focusItem.$favorite.classList.remove("hide"),d.$focusItem.data.toggleFavorite(function(){m.ui.updateFloatingPanel(d.$focusItem.data)}))}},{code:f.f4,title:gettext("TV guide"),action:q}])),b.footer.init(e)}(),d.hide(),d.init({data:O,focusIndex:n,cycle:!0}),setTimeout(function(){d.show(),t&&t()},5)})})}function ie(){te()}function ne(e){core.notify({title:p(window.ngettext("{0} channel was deleted","{0} channels were deleted",e.data.length),e.data.length),icon:"alert",type:"warning",timeout:N}),ie()}function se(e){e.data.length>1?core.notify({title:p(gettext("{0} channels were added"),e.data.length),icon:"info",type:"success",timeout:N}):1===e.data.length&&core.notify({title:p(gettext("Channel {0} was added"),e.data[0].name),icon:"info",type:"success",timeout:N}),ie()}function oe(){core.notify({title:gettext("Channels were updated"),icon:"info",type:"success",timeout:N}),ie()}function ae(){core.applicationState.visible&&core.notify({title:gettext("Channels were updated"),icon:"info",type:"success",timeout:2500}),ie()}m.sendPlayEpgIntent=function e(t,i){var s=O[i];s.getEpg(null,function(o,a){var c,d;if(!o&&a&&a.length){for(D.list=a,c=0;c<a.length;c++)a[c].id===t.id&&(d=c);D.currentIndex=d,d?a[d].getLink(function(t,s){var o,c;!t&&s&&s.url?(D.list[D.currentIndex-1]&&D.list[D.currentIndex-1].archive&&(o=function(){e(D.list[--D.currentIndex],i)}),D.list[D.currentIndex+1]&&D.list[D.currentIndex+1].archive&&(c=function(){e(D.list[++D.currentIndex],i)}),m.lastIntent=null,core.intent({action:"play",mime:"content/video",context:null,data:{uri:s.url,solution:s.solution,title:a[d].title,mediaId:a[d].id,resource:"tv-archive",controls:{pip:!1}},events:{close:function(){n&&n.close(),m.ui.preview},next:c,prev:o,nextChannel:j,prevChannel:K,stop:function(){W(i,{fullscreen:!0})},end:function(){c?c():this.close()}}},function(){})):L.notifyError(gettext("Error getting epg link"))}):L.notifyError(gettext("Error getting epg link"))}else L.notifyError(gettext("Error getting EPG for ")+s.name)})},m.ui.showPreview(!0),b.footer=new g({parent:b,visible:!0,data:{left:{code:f.menu,action:Q},middle:[{code:f.f1,title:gettext("View"),action:Z},{code:f.f2,title:gettext("Sorting"),action:function(){b.modalSort.show()}},{code:f.f3,title:gettext("Favorite"),action:function(){d.$focusItem&&(d.$focusItem.data.favorite?(d.$focusItem.$favorite.classList.add("hide"),R.$favorite.classList.add("hide")):(d.$focusItem.$favorite.classList.remove("hide"),R.$favorite.classList.remove("hide")),d.$focusItem.data.toggleFavorite())}},{code:f.f4,title:gettext("TV guide"),action:q}]},label:{code:f.menu,title:gettext("Hold OK button to open Options menu"),action:Q}}),b.add(d=new I({className:"mag-component-chanel-list",size:m.metrics.channelListSize,focusIndex:0,$node:window.channelListNode,$body:window.channelListBody,data:O,cycle:!0,visible:!0,events:{"select:item":function(e){var t,i=this;e.$item&&this.$focusItem&&m.loaded?(m.ui.updateFloatingPanel(e.$item.data,i.$focusItem.index-i.viewIndex),m.ui.preview&&(clearTimeout(s),s=setTimeout(function(){L.isCensored(O[i.$focusItem.index])?(O[i.$focusItem.index].unlocked=!1,m.lastIntent&&m.lastIntent.emit(H),m.ui.showCensoredPlaceholder(),m.activeChannel=null):(O[i.$focusItem.index].unlocked=!0,m.ui.hideCensoredPlaceholder(),A||(A=t=!0),core.applicationState.visible&&W(i.$focusItem.index,{silent:!0,forceFullscreen:t})),m.ui.updateCurrentChannelEpg(),J()},800))):(m.ui.updateCurrentChannelEpg(),m.lastIntent&&m.lastIntent.emit(H))},keydown:function(e){switch(y.prototype.defaultEvents.keydown.call(this,e),e.code){case f.right:X();break;case f.left:ee();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:L.sendOsdInputIntent(String.fromCharCode(e.code),{callback:G});break;case f.back:E();break;case f.channelNext:this.emit("keydown",{code:f.down});break;case f.channelPrev:this.emit("keydown",{code:f.up})}},"click:item":function(e){var t=e.$item.data;L.isCensored(t)?m.activeChannel&&m.activeChannel.id===t.id?(m.lastIntent.emit(B),m.lastIntent.show(m.lastIntent.receiver)):core.accessControl.request(function(t){t||(m.ui.hideCensoredPlaceholder(),e.$item.data.unlocked=!0,m.ui.preview?W(e.$item.index,{silent:!0}):W(e.$item.index,{fullscreen:!0}))}):m.ui.preview&&m.lastIntent?(m.lastIntent.emit(B),m.lastIntent.show(m.lastIntent.receiver)):W(d.$focusItem.index,{fullscreen:!0})},"move:view":function(){function e(){var e,t,i=[],n=d.$body.children.length;for(t=0;t<n;t++)d.$body.children[t].data&&i.push(d.$body.children[t].data);i.length&&m.tvBack.getChannelsEpg({channels:i},function(i,s){var o;if(!i&&s){for(t=0;t<n;t++)o=d.$body.children[t],(!(e=L.isCensored(o.data))||e&&core.accessControl.state)&&s[o.data.id]&&s[o.data.id][0]&&(o.$epg.innerText=s[o.data.id][0].title,d.data[o.index].currentEpg=s[o.data.id][0]);m.ui.updateFloatingPanel(d.$focusItem.data)}})}clearTimeout(c),c=setTimeout(e,core.environment.onFocusDebounceTimeout||400),clearInterval(o),o=setInterval(e,T)}},render:i(48)})),b.channelList=d,b.modalActionsScroll=new C({realSize:6,viewSize:7}),b.modalActions=new x({visible:!1,className:"width2x",title:gettext("Menu"),events:{show:function(){b.footer.hide(),this.focus()},hide:function(){b.footer.show(),d.focus()}},children:[b.modalActionsList=new w({cycle:!0,focusIndex:0,size:4,scroll:b.modalActionsScroll,data:[]}),b.modalActionsScroll]}),b.add(b.modalActions),b.leftMenu=new x({visible:!1,className:"left-side",title:gettext("Menu"),events:{show:function(){b.footer.hide(),b.leftMenu.focus()},hide:function(){b.footer.show(),d.focus()}},children:[b.leftMenuList=new w({cycle:!0,focusIndex:0,data:[],events:{keydown:function(e){w.prototype.defaultEvents.keydown.call(this,e),e.code===f.right&&b.leftMenu.hide()}}})]}),b.leftMenu.$closeIcon=document.createElement("div"),b.leftMenu.$closeIcon.className=v.CANCEL+" closeIcon",b.leftMenu.$body.parentElement.appendChild(b.leftMenu.$closeIcon),b.add(b.leftMenu),b.modalSort=new x({visible:!1,title:gettext("sort"),events:{show:function(){b.footer.hide(),this.focus()},hide:function(){b.footer.show(),d.focus()}},children:[new $({cycle:!0,focusIndex:0,propagate:!0,size:2,data:[{state:!1,title:gettext("By name"),value:0},{state:!0,title:gettext("By number"),value:1}],events:{"click:item":function(e){S.byName=!e.$item.data.value,b.modalSort.hide(),te()}}})]}),b.add(b.modalSort),b.modalFilter=new x({visible:!1,title:gettext("Categories"),events:{show:function(){b.footer.hide(),this.focus()},hide:function(){b.footer.show(),d.focus()}},children:[new w({cycle:!0,data:[],className:"padded",events:{"click:item":function(e){S.genre=e.$item.data.value.id,S.genreName=e.$item.data.value.name,b.modalFilter.hide(),te()}}})]}),b.add(b.modalFilter),m.tvBack.getCategories(function(e,t){var i=[{items:[{value:gettext("All categories"),className:"title"}],value:{id:!1,name:gettext("All categories")}}];e||(l=t,t.forEach(function(e){i.push({items:[{value:e.name,className:"title"}],value:e})})),b.modalFilter.children[0].init({data:i,focusIndex:0})}),b.addListener("show",function(e){m.ui.preview?document.body.classList.add("background-off"):document.body.classList.remove("background-off"),d.focus(),e&&e.data&&d.focusIndex(e.data.index),core.applicationState.visible&&!m.lastIntent&&r&&W(r)}),m.tvBack.getLastChannelId(function(e,t){function i(){m.tvBack.startBackgroundCheck&&m.tvBack.startBackgroundCheck(),m.loaded=!0,m.emit("ready"),setTimeout(function(){m.ready()},50)}te({focusIndex:0,focusId:!e&&t?t:void 0},function(){m.ui.canvasLoaded?i():m.once("background:load",i),J()})}),b.addEpgListeners=function(e){e.addListener("back",function(e){m.route(m.pages.main,e),m.ui.preview&&m.lastIntent?m.lastIntent.emit(V,m.metrics.canvasPosition):!m.ui.preview&&m.lastIntent&&m.lastIntent.emit(H)}),e.addListener("channel:click",function(e){O[e.channelIndex]&&L.isCensored(O[e.channelIndex])?core.accessControl.request(function(t){t||(W(e.channelIndex),m.lastIntent.emit(B))}):O[e.channelIndex]&&(W(e.channelIndex),m.lastIntent.emit(B))}),e.addListener("epg:click",function(e){})},m.addListener(M,X),m.addListener(F,ee),m.tvBack.addListener("channels:delete",ne),m.tvBack.addListener("channels:add",se),m.tvBack.addListener("channels:modified",oe),m.tvBack.addListener("update",ae),core.addListener(P,function(e){var t;n&&n.close(),e.source===core.SOURCES.INTENT&&e.data&&e.data.intent&&"play"===e.data.intent.action&&e.data.config.reasonToggleView?(m.ui.preview?m.lastIntent.emit(V,m.metrics.canvasPosition):m.lastIntent.emit(H),d.focusIndex(r),n&&n.close()):e.source===core.SOURCES.INTENT&&e.data&&e.data.intent&&"play"===e.data.intent.action&&e.data.config.reasonPip?n&&n.close():e.source!==core.SOURCES.SYSTEM&&m.ui.preview&&d.$focusItem&&!L.isCensored(d.$focusItem.data)&&m.loaded?(A||(A=t=!0),W(r,{forceFullscreen:t})):e.source===core.SOURCES.SYSTEM&&e.data&&e.data.intent&&"record"===e.data.intent.action&&m.ui.preview&&W(r,{silent:!0})}),core.addListener(z,function(e){e.source===core.SOURCES.INTENT&&e.data&&e.data.intent&&"play"===e.data.intent.action?m.ui.preview:(m.lastIntent.emit(H),h=null)}),core.addListener(U,function(){m.lastIntent&&m.lastIntent.emit(H),n&&n.close(),m.tvBack.removeListener("channels:delete",ne),m.tvBack.removeListener("channels:add",se),m.tvBack.removeListener("channels:modified",oe),m.tvBack.removeListener("update",ae),m.tvBack.stopBackgroundCheck(),m.tvBack.destroy&&m.tvBack.destroy()}),core.addListener(Y,function(e){var t,i;function n(e){for(t=0;t<O.length;t++)if(O[t].number===e){i=t;break}void 0!==i&&(O[i].censored||!O[i].genre||O[i].censored||(d.focusIndex(i),W(i,{fullscreen:!0})))}function s(e){m.loaded?n(e):m.once("ready",function(){n(e)})}S.favorite||S.byName||S.genre||S.search?(S.favorite=!1,S.genre=!1,S.genreName=gettext("All categories"),S.search=!1,te(null,function(){s(e.number)})):s(e.number)}),e.exports=b},function(e,t,i){"use strict";var n=i(1),s=i(3),o=i(0);n.metrics.floatingPanelStep;function a(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.$floating=e.$floating,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),e.className=e.className||"",this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-list",a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.renderItemDefault=function(e,t){e.innerText=t.value},a.prototype.renderItem=a.prototype.renderItemDefault,a.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?o.up:o.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?o.left:o.right)},keydown:function(e){switch(e.code){case o.up:case o.down:case o.right:case o.left:case o.pageUp:case o.pageDown:case o.home:case o.end:this.move(e.code);break;case o.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},a.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){n.events[t]=null,n.addListener(t,e.events[t])}),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);this.setData(e)},a.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0}),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},a.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.viewIndex),!0}return!1},a.prototype.move=function(e){var t=!1;if(this.data.length)switch(e){case o.left:if(this.type!==this.TYPE_HORIZONTAL)break;t=!0;case o.up:(t||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?(this.viewIndex-this.size>=0?this.renderView(this.viewIndex-this.size):this.viewIndex-this.size==0?this.renderView(0):this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$focusItem.previousSibling):(this.cycle&&this.move(o.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case o.right:if(this.type!==this.TYPE_HORIZONTAL)break;t=!0;case o.down:(t||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?(this.renderView(this.viewIndex+this.size),this.focusItem(this.$body.firstChild)):this.focusItem(this.$focusItem.nextSibling):(this.cycle&&this.move(o.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case o.pageUp:this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case o.pageDown:this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case o.home:this.renderView(0),this.focusItem(this.$body.firstChild);break;case o.end:this.data.length>this.size?this.data.length%this.size?(this.renderView(this.data.length-this.data.length%this.size),this.focusItem(this.$body.children[this.data.length%this.size-1])):(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},a.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},a.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},a.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(parseInt(e/this.size)*this.size),this.focusItem(this.$body.children[e%this.size])):e<t?(e=e>0?e:0,this.renderView(parseInt(e/this.size)*this.size),this.focusItem(this.$body.children[e%this.size])):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},a.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=a},function(e,t,i){"use strict";var n=i(8),s="theme-icon theme-icon-radio",o="theme-icon theme-icon-radio-active";function a(e){var t=this;e.classIcon&&(s=e.classIcon),e.classIconActive&&(o=e.classIconActive),e.classChecked&&(s=e.classChecked),this.checkedData=null,this.checkedIndex=null,n.call(this,e),this.addListener("click:item",function(e){var i=e.$item,n=t.checkedData;t.checkIndex(i.index),n!==i.data&&t.emit("select",i)})}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="mag-component-radio-list",a.prototype.init=function(e){e=e||{},n.prototype.init.call(this,e)},a.prototype.setData=function(e){n.prototype.setData.call(this,e),this.defaultCheckedIndex=this.checkedIndex,this.$focusItem?this.defaultFocusIndex=this.$focusItem.index:this.defaultFocusIndex=0},a.prototype.resetData=function(){this.checkIndex(this.defaultCheckedIndex),this.focusIndex(this.defaultFocusIndex)},a.prototype.clearChecked=function(e){for(var t=0;t<this.data.length;t++)this.data[t].state=!1;e||0===e||(e=this.$focusItem?this.$focusItem.index:0),this.setData({data:this.data,focusIndex:e})},a.prototype.renderItemDefault=function(e,t){var i,n,a,c;e.ready?(e.$title.innerText=t.title||"",t.state?(e.classList.add("checked"),e.checkBox.className=o):(e.classList.remove("checked"),e.checkBox.className=s),e.state=t.state,e.value=t.value):(e.innerHTML="",i=document.createElement("table"),n=document.createElement("tr"),a=document.createElement("td"),c=document.createElement("div"),t.state?(e.classList.add("checked"),c.className=o):(e.classList.remove("checked"),c.className=s),i.appendChild(n),a.appendChild(c),a.className="checkBoxWrapper",n.appendChild(a),(a=document.createElement("td")).className="title",a.innerText=t.title||"",n.appendChild(a),e.checkBox=c,e.state=t.state,e.value=t.value,e.$title=a,e.appendChild(i),t.state&&(this.checkedData=t,this.checkedIndex=e.index),e.ready=!0)},a.prototype.checkIndex=function(e){var t;e!==this.checkedIndex&&(null!==this.checkedIndex&&this.$node.children.length&&(this.data[this.checkedIndex].state=!1,(t=this.getItemNodeByIndex(this.checkedIndex))&&(t.checkBox.className=s,t.classList.remove("checked"))),(t=this.getItemNodeByIndex(e))&&(t.checkBox.className=o,t.classList.add("checked"),t.state=!0),this.data[e].state=!0,this.checkedData=this.data[e],this.checkedIndex=e)},a.prototype.getItemNodeByIndex=function(e){var t=this.$node.children;return(e-=this.viewIndex)<this.size&&e>=0?t[e]:null},a.prototype.renderItem=a.prototype.renderItemDefault,e.exports=a},function(e,t,i){"use strict";var n=i(1),s=i(0),o=i(4),a=new(i(7))({title:gettext("Exit"),events:{show:function(){this.lastFocus=n.activePage.activeComponent,this.children[0].focus()},hide:function(){this.lastFocus.focus()}},children:[new o({className:"padded",size:2,focusIndex:0,cycle:!0,data:[{items:[{value:gettext("Exit")}],click:function(){core.call("exit")}},{items:[{value:gettext("Cancel")}],click:function(){a.hide()}}],events:{keydown:function(e){o.prototype.defaultEvents.keydown.call(this,e),e.code===s.back&&(e.stop=!0,a.hide())}}})]});e.exports=function(e){return e.add(a),function(){a.show()}}},function(e,t,i){"use strict";var n=i(5);e.exports={view:n.RC_F1,favorite:n.RC_F3,favoriteActive:n.RC_F3,record:n.PLAY,tvGuide:n.RC_F4}},function(e,t,i){"use strict";var n=i(5),s=i(14);e.exports=function(e,t){var i,o,a,c;e.ready||(e.lastChild&&e.removeChild(e.lastChild),(o=document.createElement("div")).className="left-column-wrapper",(i=document.createElement("div")).className="left-column theme-styled-background theme-styled-text",(a=document.createElement("div")).className="right-column",e.$number=document.createElement("div"),e.$number.className="number classic-tv-special-bg theme-styled-text",i.appendChild(e.$number),e.$logo=document.createElement("div"),c=document.createElement("div"),e.$logo.className="logo",c.className="logo-wrapper",c.appendChild(e.$logo),i.appendChild(c),e.$title=document.createElement("div"),e.$title.className="title",i.appendChild(e.$title),document.createElement("div").className="icon-wrapper",e.$lockIcon=document.createElement("div"),e.$lockIcon.className=n.LOCK+" theme-styled-text",i.appendChild(e.$lockIcon),e.$timeShiftIcon=document.createElement("div"),e.$timeShiftIcon.className=n.TIMESHIFT+" theme-styled-text",i.appendChild(e.$timeShiftIcon),e.$favorite=document.createElement("div"),e.$favorite.className=n.FAVORITE_ACTIVE+" active",i.appendChild(e.$favorite),e.$epg=document.createElement("div"),e.$epg.className="epg theme-styled-background theme-styled-text",a.appendChild(e.$epg),o.appendChild(i),e.appendChild(o),e.appendChild(a),e.ready=!0),e.$number.innerText=t.number,e.$title.innerText=t.name,t.logo?(e.$logo.classList.remove("hide"),e.$logo.style.backgroundImage="url("+core.backend.host+t.logo+")"):(e.$logo.classList.add("hide"),e.$logo.style.backgroundImage=null),s.isCensored(t)?e.$lockIcon.classList.remove("hide"):e.$lockIcon.classList.add("hide"),t.local_timeshift||t.archive&&t.archive_range?e.$timeShiftIcon.classList.remove("hide"):e.$timeShiftIcon.classList.add("hide"),t.favorite?e.$favorite.classList.remove("hide"):e.$favorite.classList.add("hide"),t.currentEpg&&t.currentEpg.title&&!s.isCensored(t)?e.$epg.innerText=t.currentEpg.title||"":e.$epg.innerText=""}},function(e,t,i){"use strict";var n,s,o,a,c,d,l=i(1),r=i(10),h=i(11),m=i(0),u=i(8),p=i(12),f=i(7),v=i(13),g=i(4),y=new r({$node:window.pageDetails,focusable:!1}),I=!0,x=new v,$=new v;function w(e){var t=new Date(1e3*e).toDateString().split(" ");return{Sun:gettext("Sun"),Mon:gettext("Mon"),Tue:gettext("Tue"),Wed:gettext("Wed"),Thu:gettext("Thu"),Fri:gettext("Fri"),Sat:gettext("Sat")}[t[0]]+" "+t[2]+" "+{Jan:gettext("January"),Feb:gettext("February"),Mar:gettext("March"),Apr:gettext("April"),May:gettext("May"),Jun:gettext("June"),Jul:gettext("July"),Aug:gettext("August"),Sep:gettext("September"),Oct:gettext("October"),Nov:gettext("November"),Dec:gettext("December")}[t[1]]}function C(e){window.core.intent({action:"record",data:{uri:s.channel.url||e,name:s.title,id:s.channel.id,pvr:{local:s.channel.local_pvr,server:s.channel.pvr},startTime:s.start,endTime:s.end}})}y.$node.classList.add("active-week"),y.$node.classList.add("mag-component-schedule-list"),y.list=[],y.footer=new p({visible:!1,parent:y}),c={items:[{className:"theme-icon theme-icon-rc-f1"},{value:gettext("Record")}],click:function(){y.modalActions.hide(),s&&(s.channel.local_pvr&&!s.channel.url?s.channel.getUrl(function(e,t){C(t?t.url:"")}):C())}},d={items:[{className:"theme-icon theme-icon-rc-f2"},{value:gettext("Play")}],click:function(){l.sendPlayEpgIntent(s,a),y.modalActions.hide()}},y.modalActions=new f({visible:!1,title:gettext("Menu"),events:{show:function(){y.footer.hide(),y.modalActions.previousActiveComponent=y.activeComponent,this.focus()},hide:function(){y.footer.show(),y.modalActions.previousActiveComponent.focus()}},children:[y.modalActionsList=new g({cycle:!0,focusIndex:0,size:1,scroll:y.modalActionsScroll,data:[c]})]}),y.add(y.modalActions),y.$headerLeft=y.$body.appendChild(h.tag("div",{className:"container-title-left"},gettext("TV guide")+" / ... ")),y.$buttonArrowLeft=y.$body.appendChild(h.tag("div",{className:"container-arrow-left"},"/\n\\")),y.$buttonArrowLeft.addEventListener("click",function(){l.route(l.pages.main)}),o=y.$body.appendChild(h.tag("div",{className:"detail-text-container"},y.$textTitle=h.tag("div",{className:"text-title"},"text title"),y.$textDescription=h.tag("div",{className:"text-description"},"text Description"))),y.weekList=new u({$node:window.weekListNode,$body:window.weekListBody,scroll:$,className:"left-side",size:l.metrics.scheduleListSize,focusIndex:0,data:[{label:""}],render:function(e,t){e.ready||(e.lastChild&&e.removeChild(e.lastChild),e.classList.add("theme-styled-background"),e.$title=e.appendChild(document.createElement("div")),e.$title.classList.add("text"),e.ready=!0),e.$title.innerText=t.label,t.label===w((new Date).getTime()/1e3)?e.$title.classList.add("now"):e.$title.classList.remove("now")},events:{"select:item":function(){var e=[],t="";if(y.list.length>0&&(y.weekList.$focusItem&&y.list[y.weekList.$focusItem.index]&&(e=y.list[y.weekList.$focusItem.index].list,y.dayList.$focusItem&&(t=y.list[y.weekList.$focusItem.index].list[y.dayList.$focusItem.index])),y.dayList.setData({focusIndex:0,data:e}),y.updateTitle(t),y.weekList.$focusItem&&y.weekList.$focusItem.data&&y.weekList.$focusItem.data.label===w(Date.now()/1e3))){var i,n=Date.now();(i=y.dayList.data.findIndex(function(e){return 1e3*e.epg.start<n&&1e3*e.epg.end>n}))>-1&&y.dayList.focusIndex(i)}},keydown:function(e){I?e.code===m.left||e.code===m.right?(e.code===m.left&&(y.$node.classList.add("active-week"),y.$node.classList.remove("active-day"),I||(y.weekList.$body.style.display="",y.dayList.$body.style.display="",o.classList.remove("full"),I=!0),l.route(l.pages.main)),e.code===m.right&&y.list.length&&(y.$node.classList.add("active-day"),y.$node.classList.remove("active-week"),y.dayList.focus())):u.prototype.defaultEvents.keydown.call(this,e):e.code===m.left&&(y.weekList.$body.style.display="",y.dayList.$body.style.display="",o.classList.remove("full"),I=!0)}}}),y.add(y.weekList),y.weekList.$node.appendChild($.$node),y.dayList=new u({className:"right-side",$node:window.dayListNode,$body:window.dayListBody,scroll:x,size:l.metrics.scheduleListSize,focusIndex:0,data:[{time:{from:"",to:""},title:"",description:""}],render:function(e,t){e.ready||(e.lastChild&&e.removeChild(e.lastChild),e.classList.add("theme-styled-background"),e.appendChild(document.createElement("div")),e.$time=e.lastChild.appendChild(document.createElement("div")),e.$time.classList.add("container"),e.$title=e.lastChild.appendChild(document.createElement("div")),e.$title.classList.add("text"),e.$iconNow=e.lastChild.appendChild(document.createElement("div")),e.$iconNow.appendChild(document.createElement("div")),e.$iconNow.className="current-program",e.ready=!0),e.$time.innerText=t.time.from,e.$title.innerText=t.title,t.epg&&(t.epg.archive||new Date(1e3*t.epg.start)>new Date)?e.classList.remove("is-not-archive"):e.classList.add("is-not-archive"),t.epg&&new Date(1e3*t.epg.start)<new Date&&new Date(1e3*t.epg.end)>new Date?(e.$title.style.fontWeight="bold",e.$iconNow.classList.add("theme-equalizer-animated")):(e.$title.style.fontWeight=null,e.$iconNow.classList.remove("theme-equalizer-animated"))},events:{keydown:function(e){I?(y.list.length&&u.prototype.defaultEvents.keydown.call(this,e),e.code===m.left&&(y.list.length?(y.$node.classList.add("active-week"),y.$node.classList.remove("active-day"),y.weekList.focus()):(y.$node.classList.add("active-week"),y.$node.classList.remove("active-day"),l.route(l.pages.main)))):(e.code===m.ok&&u.prototype.defaultEvents.keydown.call(this,e),e.code===m.left&&(y.weekList.$body.style.display="",y.dayList.$body.style.display="",o.classList.remove("full"),I=!0))},"select:item":function(){var e="",t={};y.list.length>0&&(y.dayList.$focusItem&&y.weekList.$focusItem&&y.list[y.weekList.$focusItem.index]&&(e=y.list[y.weekList.$focusItem.index].list[y.dayList.$focusItem.index]),y.updateTitle(e),s&&s.channel?(t.right={code:m.info,action:function(){I?(y.weekList.$body.style.display="none",y.dayList.$body.style.display="none",o.classList.add("full")):(y.weekList.$body.style.display="",y.dayList.$body.style.display="",o.classList.remove("full")),I=!I}},new Date(1e3*s.start)>Date.now()&&(s.channel.local_pvr||s.channel.pvr)?(t.left={code:m.menu,action:function(){y.modalActionsList.setData({data:[c],focusIndex:0}),setTimeout(function(){y.modalActions.show()})}},t.middle=[{code:m.f1,title:gettext("Record"),action:function(){s.channel.local_pvr&&!s.channel.url?s.channel.getUrl(function(e,t){C(t?t.url:"")}):C()}}]):s.archive&&(t.left={code:m.menu,action:function(){y.modalActionsList.setData({data:[d],focusIndex:0}),setTimeout(function(){y.modalActions.show()})}},t.middle=[{code:m.f2,title:gettext("Play"),action:function(){l.sendPlayEpgIntent(s,a)}}]),t.middle&&(t.label={code:m.menu,title:gettext("Hold OK button to open Options menu"),action:function(){y.modalActionsList.setData({data:[d],focusIndex:0}),setTimeout(function(){y.modalActions.show()})}}),y.footer.init(t),y.footer.show()):y.footer.visible&&y.footer.hide())},"click:item":function(e){var t;I&&e.$item&&(t=e.$item.data.epg).archive&&t.channel&&t.channel.archive&&t.channel["archive_range"]&&l.sendPlayEpgIntent(t,a)}}}),y.add(y.dayList),y.dayList.$node.appendChild(x.$node),y.setData=function(e){var t,i,n,s=0,o=0;for(this.list=e||[],i=0;i<e.length;i++)if(e[i].label===w((new Date).getTime()/1e3))for(s=i,t=0;t<e[i].list.length;t++)if((n=e[i].list[t]).epg&&new Date(1e3*n.epg.start)<new Date&&new Date(1e3*n.epg.end)>new Date){o=t;break}this.weekList.setData({focusIndex:s,data:this.list,size:Math.min(this.list.length,l.metrics.scheduleListSize)}),this.dayList.setData({focusIndex:o,data:this.list[s]?this.list[s].list:[{time:{from:"",to:""},title:""}],size:Math.min(this.list[s],l.metrics.scheduleListSize)}),y.updateTitle(this.list[0]?this.list[0].list[0]:{error:!0})},y.updateTitle=function(e){if(!e||e.error)return s=null,y.$textTitle.innerText="",void(y.$textDescription.innerText="");s=e.epg,y.$textTitle.innerText=e.title,y.$textDescription.innerText=e.description},y.addListener("keydown",function(e){e.code===m.back&&(I?l.route(l.pages.main):(y.weekList.$body.style.display="",y.dayList.$body.style.display="",o.classList.remove("full"),I=!0))}),y.addListener("show",function(e){var t,i,s=/.*(\d{2}:\d{2})(:\d{2}).*/;e&&e.data&&e.data.list&&e.data.list.length?(y.weekList.$body.style.display="",y.dayList.$body.style.display="",n=[],a=e.data.channelIndex,e.data.list.forEach(function(e){t={time:{from:new Date(1e3*e.start).toTimeString().replace(s,"$1"),to:new Date(1e3*e.end).toTimeString().replace(s,"$1")},epg:e,title:e.title||"",description:e.description||""},n[n.length-1]&&n[n.length-1].label===w(e.start)?n[n.length-1].list.push(t):n.push({label:w(e.start),list:[t]})}),y.setData(n),l.pages.main.channelList.$focusItem&&(i=l.pages.main.channelList.$focusItem.data.name||""),y.$headerLeft.innerText=gettext("TV guide")+" / "+i,y.activeComponent||y.weekList.focus(),y.dayList.emit("select:item")):(y.weekList.$body.style.display="none",y.dayList.$body.style.display="none",y.setData([]))}),e.exports=y}]);
//# sourceMappingURL=main.js.map