!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t,i){"use strict";var s=i(2),n=i(8).parse,o=new s;o.query=n(document.location.search.substring(1)),o.config=i(9),o.activePage=null,o.route=function(e,t){var i,s=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=o.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,o.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:s,to:e}),!0)},e.exports=o},function(e,t,i){"use strict";var s=i(7);e.exports=s},function(e,t,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function s(){i.removeListener(e,s),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s=i(0);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+s.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";e.exports=i(16),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";e.exports={VKBlock:!0,gs:{"layers":{"context":null},"size":{480:{"scr":{"w":500,"h":400},"cll":{"w":100,"h":100}},576:{"scr":{"w":550,"h":440},"cll":{"w":110,"h":110}},720:{"scr":{"w":650,"h":520},"cll":{"w":130,"h":130}},1080:{"scr":{"w":900,"h":720},"cll":{"w":180,"h":180}}},"iItems":{"x":5,"y":4},"imgs":[{"num":0,"img":new Image,"url":"0.png"},{"num":1,"img":new Image,"url":"1.png"},{"num":2,"img":new Image,"url":"2.png"},{"num":3,"img":new Image,"url":"3.png"},{"num":4,"img":new Image,"url":"4.png"},{"num":5,"img":new Image,"url":"5.png"},{"num":6,"img":new Image,"url":"6.png"},{"num":7,"img":new Image,"url":"7.png"},{"num":8,"img":new Image,"url":"8.png"},{"num":9,"img":new Image,"url":"9.png"}],"arr":[],"position":{"old":{"x":0,"y":0},"current":{"x":0,"y":0}}}}},function(e,t,i){"use strict";var s=i(1);s.once("load",function(){s.pages={init:i(15),main:i(18)},s.ready(),s.route(s.pages.main)})},function(e,t,i){"use strict";var s=i(0),n=i(10);window.core=window.parent.getCoreInstance(window,s),i(11),i(12),i(3)("sdk"),i(14),i(3)("app"),s.platform="mag",s.ready=function(){window.core.call("app:ready")},s.exit=function(){s.events["exit"]&&s.emit("exit"),core.call("exit")},n.load=function(e){document.body.setAttribute("platform",s.platform),core.ready?s.events["load"]&&s.emit("load",{}):core.once("load",function(){s.events[e.type]&&s.emit(e.type,e)})},n.contextmenu=function(e){e.preventDefault()},Object.keys(n).forEach(function(e){window.addEventListener(e,n[e])}),e.exports=s},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";var s=i(0);e.exports={DOMContentLoaded:function(e){s.events["dom"]&&s.emit("dom",e)},load:function(e){s.events[e.type]&&s.emit(e.type,e)},unload:function(e){s.events[e.type]&&s.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=s.activePage,n={code:e.keyCode,stop:!1};e.ctrlKey&&(n.code+="c"),e.altKey&&(n.code+="a"),e.shiftKey&&(n.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,n,e),!n.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,n,e)),n.stop||(i.events[e.type]&&i.emit(e.type,n,e),e.stop||s.events[e.type]&&s.emit(e.type,n,e))},keypress:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var s=Array.prototype,n=s.indexOf,o=s.slice,r=s.push,a=s.splice,c=s.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)r.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(r.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==n.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=n.call(this,e);-1!==t&&(a.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var s=i(0),n=i(13);s.metrics=n[s.query.screenHeight]||n[screen.height]||n[720],s.metrics.availHeight=s.metrics.height-(s.metrics.availTop+s.metrics.availBottom),s.metrics.availWidth=s.metrics.width-(s.metrics.availLeft+s.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(e,t,i){"use strict";var s,n=i(0);(s=document.createElement("link")).rel="stylesheet",s.href=window.core.theme.path+n.metrics.height+".css",document.head.appendChild(s),e.exports=s},function(e,t,i){"use strict";var s=new(i(4))({$node:document.getElementById("pageInit")});e.exports=s},function(e,t,i){"use strict";var s=i(17);function n(e){e=e||{},this.active=!1,this.activeComponent=null,s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-page",e.exports=n},function(e,t,i){"use strict";var s=i(0),n=i(2),o=0;function r(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,n.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.defaultEvents=null,r.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},r.prototype.remove=function(){this.parent&&(s.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},r.prototype.focus=function(e){var t=s.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},r.prototype.blur=function(){var e=s.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},r.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},r.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=r},function(e,t,i){"use strict";var s=new(i(4))({$node:document.getElementById("pageMain")}),n=i(1),o=i(19),r=i(5).gs,a=(i(5).VKBlock,n.metrics.height),c=(n.metrics.width,"./img/"+a+"/");function l(){if(!0,r.layers.game=document.getElementById("game").getContext("2d"),r.layers.game&&r.layers.game.drawImage){document.getElementById("game").width=r.size[a].scr.w,document.getElementById("game").height=r.size[a].scr.h,window.moveTo(0,0),r.items=[];for(var e=0;e<r.iItems.y;e++){r.items[e]=[];for(var t=0;t<r.iItems.x;t++)r.items[e][t]=null}for(var i=0,s=0;i<r.imgs.length;i++,s+=2)r.imgs[i].img.src=c+r.imgs[i].url,r.arr[s]=r.imgs[i].num,r.arr[s+1]=r.imgs[i].num;r.arr=r.arr.shuffle(),u.bg=new Image,u.bg.src=c+"back.png",u.bg.onload=function(){u.dBg()},document.getElementById("pageInit").style.display="none"}}s.addListener("show",l);var u={"vars":{"model":"MAG200","started":!1,"selected":!1,"selectedObj":{"x":0,"y":0,"num":0},"gameTime":0,"timer":null,"openOne":!1,"counterSteps":0,"counterGoodSteps":0},"mode":null,"bg":{},"dBg":function(){for(var e=0;e<r.iItems.y;e++)for(var t=0;t<r.iItems.x;t++)r.layers.game.clearRect(r.size[a].cll.w*t,r.size[a].cll.h*e,r.size[a].cll.w,r.size[a].cll.h),r.layers.game.drawImage(this.bg,r.size[a].cll.w*t,r.size[a].cll.h*e,r.size[a].cll.w,r.size[a].cll.h)},"start":function(){for(var e=0,t=0;t<r.iItems.y;t++)for(var i=0;i<r.iItems.x;i++){var s=this;r.items[t][i]={"x":i,"y":t,"status":"free","selected":!1,"img":r.arr[e++],"timer":{"obj":null,"interval":50,"_scale":1,"cond":"stop","func":function(e,t,i){var n;i?("from"==this.cond&&(n=s.bg),"to"==this.cond&&(n=r.imgs[r.items[t][e].img].img)):("from"==this.cond&&(n=r.imgs[r.items[t][e].img].img),"to"==this.cond&&(n=s.bg)),"from"==this.cond&&(this._scale=this._scale-.2,this._scale<=.2&&(this.cond="to")),"to"==this.cond&&(this._scale<.2?this._scale=.2:(this._scale=this._scale+.2,this._scale>=.8&&(this._scale=1,clearInterval(this.obj),this.obj=null,this.cond="stop"))),r.layers.game.clearRect(r.size[a].cll.w*e,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h),r.layers.game.drawImage(n,r.size[a].cll.w*e+(1-this._scale)*r.size[a].cll.w/2,r.size[a].cll.h*t,r.size[a].cll.w*this._scale,r.size[a].cll.h)}}},r.layers.game.clearRect(r.size[a].cll.w*i,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h),r.layers.game.drawImage(r.imgs[r.arr[e-1]].img,r.size[a].cll.w*i,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h)}s=this;setTimeout(function(){s.dBg(),s.item(),s.vars.started=!0,!1,null!=s.vars.timer&&clearInterval(s.vars.timer),s.vars.timer=null,s.vars.timer=setInterval(function(){s.vars.gameTime++;var e=Math.floor(s.vars.gameTime/60),t=s.vars.gameTime-60*e;document.getElementById("counter_time").getElementsByClassName("cover")[0].innerHTML=(e<10?"0"+e:e)+" "+(t<10?"0"+t:t),s.vars.gameTime>3600&&(document.getElementById("errorFinish").style.display="block",null!=s.vars.timer&&clearInterval(s.vars.timer),s.vars.timer=null,!0,s.vars.started=!1)},999)},5e3)},"item":function(){document.getElementById("cursor").style.display="block",document.getElementById("cursor").style.marginLeft=r.position.current.x*r.size[a].cll.w+"px",document.getElementById("cursor").style.marginTop=r.position.current.y*r.size[a].cll.h+"px"},"rotateCell":function(e,t,i){r.layers.game.clearRect(r.size[a].cll.w*e,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h),i?r.layers.game.drawImage(this.bg,r.size[a].cll.w*e,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h):r.layers.game.drawImage(r.imgs[r.items[t][e].img].img,r.size[a].cll.w*e,r.size[a].cll.h*t,r.size[a].cll.w,r.size[a].cll.h)},"PressOK":function(){if(0!=this.vars.started||"block"!=document.getElementById("errorFinish").style.display)if(0==this.vars.started)document.getElementById("errorFinish").style.display="none",document.getElementById("Begin").style.display="none",this.start();else{if("ready"==r.items[r.position.current.y][r.position.current.x].status)return;if(this.vars.counter++,this.vars.counterSteps++,document.getElementById("counter_steps").getElementsByClassName("cover")[0].innerHTML=this.vars.counterSteps<100?this.vars.counterSteps<10?"00"+this.vars.counterSteps:"0"+this.vars.counterSteps:this.vars.counterSteps,0==this.vars.selected)this.vars.selectedObj.x=r.position.current.x,this.vars.selectedObj.y=r.position.current.y,this.vars.selectedObj.num=r.items[r.position.current.y][r.position.current.x].img,this.rotateCell(r.position.current.x,r.position.current.y),this.vars.selected=!0;else{if(this.vars.selectedObj.x==r.position.current.x&&this.vars.selectedObj.y==r.position.current.y)return;if(this.rotateCell(r.position.current.x,r.position.current.y),this.vars.selectedObj.num==r.items[r.position.current.y][r.position.current.x].img)r.items[r.position.current.y][r.position.current.x].status="ready",r.items[this.vars.selectedObj.y][this.vars.selectedObj.x].status="ready",this.vars.counterGoodSteps++;else{var e=this,t={"x1":r.position.current.x,"y1":r.position.current.y,"x2":this.vars.selectedObj.x,"y2":this.vars.selectedObj.y};this.rotateCell(t.x1,t.y1),setTimeout(function(){e.rotateCell(t.x1,t.y1,!0),e.rotateCell(t.x2,t.y2,!0)},1e3)}this.vars.selected=!1,this.vars.counterGoodSteps>=r.iItems.x*r.iItems.y/2&&(document.getElementById("errorFinish").style.display="block",null!=this.vars.timer&&clearInterval(this.vars.timer),this.vars.timer=null,!0,this.vars.started=!1)}}else location.reload()}};s.addListener("keydown",function(e){switch(e.code){case o.right:r.position.old.y=r.position.current.y,r.position.old.x=r.position.current.x,r.position.current.x+1<=r.iItems.x-1?r.position.current.x++:r.position.current.x=r.iItems.x-1,u.item();break;case o.left:r.position.old.y=r.position.current.y,r.position.old.x=r.position.current.x,r.position.current.x-1>=0?r.position.current.x--:r.position.current.x=0,u.item();break;case o.down:r.position.old.y=r.position.current.y,r.position.old.x=r.position.current.x,r.position.current.y+1<=r.iItems.y-1?r.position.current.y++:r.position.current.y=r.iItems.y-1,u.item();break;case o.up:r.position.old.y=r.position.current.y,r.position.old.x=r.position.current.x,r.position.current.y-1>=0?r.position.current.y--:r.position.current.y=0,u.item();break;case o.ok:u.PressOK();break;case o.refresh:l();break;case o.back:core.notify({title:"Do you want to exit?",icon:"alert",type:"",buttons:[{value:"Exit",click:function(){core.call("exit")}},{value:"Cancel",click:function(){}}],timeout:5e3})}}),Array.prototype.shuffle=function(){for(var e,t,i=this.length;i--;)t=this[e=Math.floor(i*Math.random())],this[e]=this[i],this[i]=t;return this},e.exports=s},function(e,t,i){"use strict";var s=i(20);s.back=s.backspace,s.channelNext=s.tab,s.channelPrev=s.tab+"s",s.ok=s.enter,s.exit=s.escape,s.volumeUp=107,s.volumeDown=109,s.f1="112c",s.f2="113c",s.f3="114c",s.f4="115c",s.refresh="116c",s.frame="117c",s.phone="119c",s.set="120c",s.tv="121c",s.menu="122c",s.app="123c",s.rewind="66a",s.forward="70a",s.audio="71a",s.standby="74a",s.keyboard="76a",s.usbMounted="80a",s.usbUnmounted="81a",s.playPause="82a",s.play=-1,s.pause=-1,s.stop="83a",s.power="85a",s.record="87a",s.info="89a",s.mute="192a",s.digit0=48,s.digit1=49,s.digit2=50,s.digit3=51,s.digit4=52,s.digit5=53,s.digit6=54,s.digit7=55,s.digit8=56,s.digit9=57,e.exports=s},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}}]);
//# sourceMappingURL=main.js.map