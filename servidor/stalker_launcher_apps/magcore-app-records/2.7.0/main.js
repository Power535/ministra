!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=24)}([function(e,t,i){"use strict";var n=i(17);n.back=n.backspace,n.channelNext=n.tab,n.channelPrev=n.tab+"s",n.ok=n.enter,n.exit=n.escape,n.volumeUp=107,n.volumeDown=109,n.f1="112c",n.f2="113c",n.f3="114c",n.f4="115c",n.refresh="116c",n.frame="117c",n.phone="119c",n.set="120c",n.tv="121c",n.menu="122c",n.app="123c",n.rewind="66a",n.forward="70a",n.audio="71a",n.standby="74a",n.keyboard="76a",n.usbMounted="80a",n.usbUnmounted="81a",n.playPause="82a",n.play=-1,n.pause=-1,n.stop="83a",n.power="85a",n.record="87a",n.info="89a",n.mute="192a",n.digit0=48,n.digit1=49,n.digit2=50,n.digit3=51,n.digit4=52,n.digit5=53,n.digit6=54,n.digit7=55,n.digit8=56,n.digit9=57,e.exports=n},function(e,t,i){"use strict";e.exports=i(4)},function(e,t,i){"use strict";var n=i(25);e.exports=n},function(e,t,i){"use strict";var n=i(12),a=i(26).parse,s=new n;s.query=a(document.location.search.substring(1)),s.config=i(13),s.activePage=null,s.route=function(e,t){var i,n=s.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=s.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,s.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,s.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:n,to:e}),!0)},e.exports=s},function(e,t,i){"use strict";var n=i(3),a=i(12),s=0;function o(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,a.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+s++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(n.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},o.prototype.focus=function(e){var t=n.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},o.prototype.blur=function(){var e=n.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},o.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},o.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=o},function(e,t,i){"use strict";e.exports=i(35),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var n=i(1),a=i(0);function s(e){var t,i=this;function s(e){switch(e.code){case a.left:i.focusIndex>0&&i.panels[i.focusIndex-1].focus();break;case a.right:i.focusIndex<i.panels.length-1&&i.panels[i.focusIndex+1].focus()}}for((e=e||{}).focusable=e.focusable||!1,n.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),t=0;t<this.panels.length;t++)this.panels[t].addListeners({keydown:s}),this.panels[t].index=t}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-panel-set",s.prototype.focus=function(){n.prototype.focus.call(this),this.panels[this.focusIndex].focus()},s.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=s},function(e,t,i){"use strict";var n=i(1),a=i(18);function s(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),e.title&&(Array.isArray(e.title)||(e.title=[e.title]),this.$title=new a({className:"title",data:e.title,focusable:!1}),this.$node.appendChild(this.$title.$node)),this.$node.appendChild(this.$body),(t=document.createElement("div")).className="overlay",this.$node.appendChild(t)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-panel",s.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},s.prototype.focus=function(){this.focusable&&(this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),n.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand")))},s.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=s},function(e,t,i){"use strict";var n=i(1);function a(e){var t;e=e||{},this.timerId=0,e.render&&(this.render=e.render),e.focusable=!1,e.visible=e.visible||!0,this.value=e.value,this.active=!1,Object.defineProperty(this,"interval",{set:function(e){t=e},get:function(){return t}}),this.interval=e.interval||1e3,n.call(this,e)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-flicker",a.prototype.start=function(){var e=this;this.active||(this.active=!0,function t(){e.render(e.$node,e.value),e.timerId=setTimeout(t,e.interval)}())},a.prototype.stop=function(){this.active&&(this.active=!1,clearTimeout(this.timerId))},a.prototype.defaultRender=function(e,t){e.innerText=t},a.prototype.render=a.prototype.defaultRender,e.exports=a},function(e,t,i){"use strict";var n=i(19),a=i(18);function s(e){var t=this;e=e||{},this.handlers={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",n.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-layout-list",s.prototype.renderItemDefault=function(e,t){var i,n,s,o,l;if(e.ready&&this.fixedData)for(l=0;l<t.items.length;l++)"string"!=typeof(o=t.items[l]).value&&void 0!==o.value||((s=e.layout.$node.childNodes[l]).innerText=o.value||"",s.className=o.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);n={focusable:!1,data:t.items},t.className&&(n.className=t.className),i=new a(n),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},s.prototype.setData=function(e){n.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},s.prototype.init=function(e){var t;n.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},s.prototype.renderItem=s.prototype.renderItemDefault,e.exports=s},function(e,t,i){"use strict";e.exports=i(36),e.exports.prototype.name="stb-component-button"},function(e,t,i){"use strict";e.exports=i(37),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function n(){i.removeListener(e,n),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";e.exports={list:{filterStatus:null,filterSearch:"",sort:0},constants:{sort:{BY_NAME:0,BY_CATEGORY:1,BY_DATE:2}},extensions:{registered:["mpg","mpeg","mkv","avi","3gp","ts","tspinf","m4a","mp3","mp4","ac3","mov","vob","wav","ape","mts","m2t","m2v","ogg","oga","divx","aiff","m2ts","wv","m2p","tp","flv","tta","mod","tod","asf","wma","wmv","flac","ape","cue","m3u","m3u8","jpg","jpeg","png","bmp","tif","tiff","iso","aac","txt","srt","sub","ass","m4v","tts"]}}},function(e,t,i){"use strict";var n;n={session:{token:"Bearer 2173.4591c9d87993c9c3ad60c6018979944c",userId:"2048"},convert:function(e){return!e&&0!==e||e<0?"n/a":e>1073741824?Math.floor(e/1024/1024/1024*100)/100+" "+gettext("GB"):e>1048576?Math.floor(e/1024/1024*100)/100+" "+gettext("MB"):e>1024?Math.floor(e/1024*100)/100+" "+gettext("KB"):e+" "+gettext("B")},parseDate:function(e){var t=[gettext("Jan"),gettext("Feb"),gettext("Mar"),gettext("Apr"),gettext("May"),gettext("Jun"),gettext("Jul"),gettext("Aug"),gettext("Sep"),gettext("Oct"),gettext("Nov"),gettext("Dec")],i=e.getDate(),n=e.getMonth(),a=e.getMinutes(),s=e.getHours();return i+" "+t[n]+" "+(s>9?s:"0"+s)+":"+(a>9?a:"0"+a)},dates:{hours:function(){var e,t=[];for(e=0;e<=23;e++)t.unshift(e<10?"0"+e:String(e));return t}(),minutes:function(){var e,t=[];for(e=0;e<=59;e++)t.unshift(e<10?"0"+e:String(e));return t}(),days:function(){var e,t=[];for(e=1;e<=31;e++)t.unshift(e<10?"0"+e:String(e));return t}(),months:function(){var e,t=[];for(e=1;e<=12;e++)t.unshift(e<10?"0"+e:String(e));return t}(),years:[String((new Date).getFullYear()),String((new Date).getFullYear()+1)]}},e.exports=n},function(e,t,i){"use strict";var n={tag:function(e,t,i){var n,a,s=null;if(e){if(s=document.createElement(e),t&&"object"==typeof t)for(a in t)s[a]=t[a];for(n=2;n<arguments.length;n++)arguments[n]&&s.appendChild("object"==typeof arguments[n]?arguments[n]:document.createTextNode(arguments[n]))}return s},fragment:function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)(e=arguments[t])&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},add:function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},remove:function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},clear:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}};e.exports=n},function(e,t,i){"use strict";var n=i(3);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+n.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var n=i(1),a=i(0);function s(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],n.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case a.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case a.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-layout",s.prototype.init=function(e){for(var t,i,a,s=this,o=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof n||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function l(){s.focusIndex=this.index}for(this.data=o,a=0;a<o.length;a++)"string"==typeof(t=o[a]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof n?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",l),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value)):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i))},e.exports=s},function(e,t,i){"use strict";var n=i(1),a=i(0);function s(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-list",s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.renderItemDefault=function(e,t){e.innerText=t.value},s.prototype.renderItem=s.prototype.renderItemDefault,s.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},s.prototype.init=function(e){var t,i,n=this,a=this.$body.children.length,s=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){n.events[t]=null,n.addListener(t,e.events[t])}),this.size!==a)for(a>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",s),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e),n.scroll&&n.scroll.init({realSize:n.provider.maxCount,viewSize:n.provider.size,value:n.provider.head+n.provider.pos})),n.events["data:get"]&&n.emit("data:get"))})}else e.data&&this.setData(e)},s.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},s.prototype.renderView=function(e){var t,i,n,a,s;if(this.viewIndex!==e){for(a=this.viewIndex,this.viewIndex=s=e,i=0;i<this.size;i++)t=this.$body.children[i],(n=this.data[e])?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:a,currIndex:s}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},s.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(a.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0===n?n:t.$focusItem.index})})}else this.cycle&&this.move(a.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:n||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,n){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=n||0===n?n:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},s.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},s.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},s.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},s.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=s},function(e,t,i){"use strict";var n=i(4),a=i(0);function s(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,n.call(this,e),this.$node.appendChild(this.$body),this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-scroll-area",s.prototype.defaultEvents={keydown:function(e){switch(e.code){case a.up:case a.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?a.up:a.down)}},s.prototype.move=function(e){var t=screen.height,i=this.viewHeight-this.realHeight;if(i<0)switch(e){case a.down:if(this.topPosition-this.step*t/100<i)return this.scroll.scrollTo(-i),this.$body.style.top=i+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case a.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},s.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=s},function(e,t,i){"use strict";var n=i(41),a=i(1),s=i(0);function o(e){var t,i,a,o=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){o.hide()},a=e.events.keydown,e.events.keydown=function(e){a&&a.call(this,e),e.code!==s.back&&e.code!==s.menu||(e.stop=!0,o.hide())},n.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-modal",o.prototype.focus=function(){this.$node.classList.add("active"),n.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof a&&this.children[0].focus()},o.prototype.blur=function(){this.$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=o},function(e,t,i){"use strict";var n=i(19),a="theme-icon theme-icon-radio",s="theme-icon theme-icon-radio-active";function o(e){var t=this;e.classIcon&&(a=e.classIcon),e.classIconActive&&(s=e.classIconActive),e.classChecked&&(a=e.classChecked),this.checkedData=null,this.checkedIndex=null,n.call(this,e),this.addListener("click:item",function(e){var i=e.$item,n=t.checkedData;t.checkIndex(i.index),n!==i.data&&t.emit("select",i)})}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-radio-list",o.prototype.init=function(e){e=e||{},n.prototype.init.call(this,e)},o.prototype.setData=function(e){n.prototype.setData.call(this,e),this.defaultCheckedIndex=this.checkedIndex,this.$focusItem?this.defaultFocusIndex=this.$focusItem.index:this.defaultFocusIndex=0},o.prototype.resetData=function(){this.checkIndex(this.defaultCheckedIndex),this.focusIndex(this.defaultFocusIndex)},o.prototype.clearChecked=function(e){for(var t=0;t<this.data.length;t++)this.data[t].state=!1;e||0===e||(e=this.$focusItem?this.$focusItem.index:0),this.setData({data:this.data,focusIndex:e})},o.prototype.renderItemDefault=function(e,t){var i,n,o,l;e.ready?(e.$title.innerText=t.title||"",t.state?(e.classList.add("checked"),e.checkBox.className=s):(e.classList.remove("checked"),e.checkBox.className=a),e.state=t.state,e.value=t.value):(e.innerHTML="",i=document.createElement("table"),n=document.createElement("tr"),o=document.createElement("td"),l=document.createElement("div"),t.state?(e.classList.add("checked"),l.className=s):(e.classList.remove("checked"),l.className=a),i.appendChild(n),o.appendChild(l),o.className="checkBoxWrapper",n.appendChild(o),(o=document.createElement("td")).className="title",o.innerText=t.title||"",n.appendChild(o),e.checkBox=l,e.state=t.state,e.value=t.value,e.$title=o,e.appendChild(i),t.state&&(this.checkedData=t,this.checkedIndex=e.index),e.ready=!0)},o.prototype.checkIndex=function(e){var t;e!==this.checkedIndex&&(null!==this.checkedIndex&&this.$node.children.length&&(this.data[this.checkedIndex].state=!1,(t=this.getItemNodeByIndex(this.checkedIndex))&&(t.checkBox.className=a,t.classList.remove("checked"))),(t=this.getItemNodeByIndex(e))&&(t.checkBox.className=s,t.classList.add("checked"),t.state=!0),this.data[e].state=!0,this.checkedData=this.data[e],this.checkedIndex=e)},o.prototype.getItemNodeByIndex=function(e){var t=this.$node.children;return(e-=this.viewIndex)<this.size&&e>=0?t[e]:null},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";var n=i(1),a=i(0),s={};function o(e){var t=0,i=this;(e=e||{}).focusable=!1,e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.tabs=[{codes:{}},{codes:{}},{codes:{}},{codes:{}}],this.tab=0,this.$table=this.$node.appendChild(document.createElement("table")),this.$table.insertRow(),this.$table.rows[0].insertCell(-1),this.$left=this.$table.rows[0].cells[0].appendChild(document.createElement("div")),this.$left.className="theme-icon",this.$table.rows[0].insertCell(-1),this.$table.rows[0].cells[1].className="central",this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",++t,this.tabs[t].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div")),this.tabs[t].$body.className="wrapper hidden",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.tabs[t].$body.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.className="button",this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.appendChild(document.createElement("div")),this.tabs[t].$body.lastChild.lastChild.className="title",this.$table.rows[0].insertCell(-1),this.$right=this.$table.rows[0].cells[2].appendChild(document.createElement("div")),this.$right.className="theme-icon",this.init(e.data),this.parent.addListener("keydown",function(e){var t=i.tabs[i.tab];i.visible&&t.codes[e.code]&&"function"==typeof t.codes[e.code].action&&t.codes[e.code].action()})}s[a.f1]="theme-icon-rc-f1",s[a.f2]="theme-icon-rc-f2",s[a.f3]="theme-icon-rc-f3",s[a.f4]="theme-icon-rc-f4",s[a.menu]="theme-icon-rc-menu",s[a.ok]="theme-icon-rc-ok",s[a.info]="theme-icon-rc-info",s[a.playPause]="theme-icon-rc-play-pause",s[a.back]="theme-icon-rc-back",s[a.exit]="theme-icon-rc-home",s[a.keyboard]="theme-icon-rc-vk",s[a.refresh]="theme-icon-rc-refresh",s[a.frame]="theme-icon-rc-aspect",o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-footer",o.prototype.init=function(e){var t,i,n;function a(t){return function(){"function"==typeof e.middle[t].action&&e.middle[t].action()}}if(e=e||{},this.tabs[this.tab].$body.classList.add("hidden"),this.tab=e.middle&&e.middle.length?e.middle.length-1:0,(i=this.tabs[this.tab]).codes={},e.left?(this.$left.className=e.left.className||"theme-icon "+(s[e.left.code]||"theme-icon-warning"),e.left.disabled?this.$left.classList.add("disabled"):(i.codes[e.left.code]={action:e.left.action},this.$left.style.visibility="inherit",this.$left.onclick=function(){"function"==typeof e.left.action&&e.left.action()})):"hidden"!==this.$left.style.visibility&&(this.$left.style.visibility="hidden"),e.right?(this.$right.className=e.right.className||"theme-icon "+(s[e.right.code]||"theme-icon-warning"),e.right.disabled?this.$right.classList.add("disabled"):(i.codes[e.right.code]={action:e.right.action},this.$right.style.visibility="inherit",this.$right.onclick=function(){"function"==typeof e.right.action&&e.right.action()})):"hidden"!==this.$right.style.visibility&&(this.$right.style.visibility="hidden"),e.middle&&e.middle.length){for(t=0;t<e.middle.length;t++)i.codes[e.middle[t].code]={action:e.middle[t].action},e.middle[t].disabled?i.$body.children[t].classList.add("disabled"):(i.$body.children[t].classList.remove("disabled"),i.$body.children[t].onclick=a(t)),(n=i.$body.children[t].children)[0].className="iconImg "+(e.middle[t].className||"theme-icon "+(s[e.middle[t].code]||"theme-icon-warning")),n[1].innerText=e.middle[t].title||"";i.$body.classList.remove("hidden")}},e.exports=o},function(e,t,i){"use strict";var n=i(2),a=i(32);n.once("load",function(){a.load({name:window.core.environment.language},function(e){n.pages={info:i(34),more:i(38),add:i(39),chans:i(43),main:i(44)},n.ready()})})},function(e,t,i){"use strict";var n=i(3),a=i(27);window.core=window.parent.getCoreInstance(window,n),i(28),i(29),i(16)("sdk"),i(31),i(16)("app"),n.platform="mag",n.ready=function(){window.core.call("app:ready")},n.exit=function(){n.events["exit"]&&n.emit("exit"),core.call("exit")},a.load=function(e){document.body.setAttribute("platform",n.platform),core.ready?n.events["load"]&&n.emit("load",{}):core.once("load",function(){n.events[e.type]&&n.emit(e.type,e)})},a.contextmenu=function(e){e.preventDefault()},Object.keys(a).forEach(function(e){window.addEventListener(e,a[e])}),e.exports=n},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";var n=i(3);e.exports={DOMContentLoaded:function(e){n.events["dom"]&&n.emit("dom",e)},load:function(e){n.events[e.type]&&n.emit(e.type,e)},unload:function(e){n.events[e.type]&&n.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=n.activePage,a={code:e.keyCode,stop:!1};e.ctrlKey&&(a.code+="c"),e.altKey&&(a.code+="a"),e.shiftKey&&(a.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,a,e),!a.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,a,e)),a.stop||(i.events[e.type]&&i.emit(e.type,a,e),e.stop||n.events[e.type]&&n.emit(e.type,a,e))},keypress:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=n.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var n=Array.prototype,a=n.indexOf,s=n.slice,o=n.push,l=n.splice,r=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=s.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(l.call(this,t,1),this._element.className=s.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var n=i(3),a=i(30);n.metrics=a[n.query.screenHeight]||a[screen.height]||a[720],n.metrics.availHeight=n.metrics.height-(n.metrics.availTop+n.metrics.availBottom),n.metrics.availWidth=n.metrics.width-(n.metrics.availLeft+n.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,keyboardWidth:558,keyboardHeight:311},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,keyboardWidth:558,keyboardHeight:311},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,keyboardWidth:818,keyboardHeight:311},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,keyboardWidth:1227,keyboardHeight:467}}},function(e,t,i){"use strict";var n,a=i(3);(n=document.createElement("link")).rel="stylesheet",n.href=window.core.theme.path+a.metrics.height+".css",document.head.appendChild(n),e.exports=n},function(e,t,i){"use strict";var n=i(12),a=i(33),s=new n;function o(e){var t=new a(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}s.defaultLanguage="en",s.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===s.defaultLanguage?(o(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{o(JSON.parse(i.responseText)),t(null),s.events["load"]&&s.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){o(),t(e),s.events["error"]&&s.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=s},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var n=i(2),a=new(i(5))({$node:document.getElementById("pageInfo")}),s=i(6),o=i(7),l=i(9),r=i(10),d=i(0),c=i(11),h=i(8),u=i(14);a.clock=new h({className:"clock",interval:1e3,render:function(e){var t=new Date,i=t.getHours(),n=t.getMinutes();e.innerText=(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}}),a.add(a.clock),a.clock.start(),a.panelDetails=new o({title:gettext("About record"),main:!0,visible:!0,className:"panelDetails",children:[]}),a.panelDetails.reset=function(){var e=["",gettext("Waiting"),gettext("Running"),gettext("Error"),gettext("Completed")];a.panelDetails.list.init({focusIndex:0,data:[{items:[{className:"item name theme-subhead-color",value:gettext("Channel:")},{className:"item text",value:a.initData.channel}]},{items:[{className:"item name theme-subhead-color",value:gettext("URL:")},{className:"item text",value:a.initData.url}]},{items:[{className:"item name theme-subhead-color",value:gettext("File name:")},{className:"item text",value:a.initData.name}]},{items:[{className:"item name theme-subhead-color",value:gettext("Start time:")},{className:"item text",value:u.parseDate(new Date(1e3*a.initData.startTime))}]},{items:[{className:"item name theme-subhead-color",value:gettext("End time:")},{className:"item text",value:u.parseDate(new Date(1e3*a.initData.endTime))}]},{items:[{className:"item name theme-subhead-color",value:gettext("Device:")},{className:"item text",value:a.initData.storage?a.initData.storage.label:gettext("Not connected")}]},{items:[{className:"item name theme-subhead-color",value:gettext("Status:")},{className:"item text",value:e[a.initData.state]}]}]}),a.panelDetails.scroll.init({realSize:7,viewSize:6}),a.panelDetails.$node.classList.add("disabled"),a.panelDetails.focus(),a.panelDetails.list.$focusItem&&(a.panelDetails.list.$focusItem.classList.remove("focus"),a.panelDetails.scroll.hide()),a.panelDetails.button.focus()},a.panelDetails.scroll=new c({}),a.panelDetails.add(a.panelDetails.list=new l({focusIndex:0,size:6,scroll:a.panelDetails.scroll,events:{overflow:function(){a.panelDetails.list.$focusItem.classList.remove("focus"),a.panelDetails.scroll.hide(),a.panelDetails.button.focus()},"click:item":function(e){a.panelDetails.list.$focusItem&&n.route(n.pages.more,e)},keydown:function(e){l.prototype.defaultEvents.keydown.call(this,e)}},data:[]}),a.panelDetails.scroll),a.panelDetails.add(a.panelDetails.button=new r({value:gettext("Close"),className:"bottom theme-footer",$node:a.panelDetails.$node.appendChild(document.createElement("div")),events:{click:function(){n.route(n.pages.main)},keydown:function(e){e.code===d.up?(a.panelDetails.list.focus(),a.panelDetails.scroll.show(),a.panelDetails.list.$focusItem.classList.add("focus"),a.panelDetails.list.focusIndex(a.panelDetails.list.data.length-1)):e.code===d.down?(a.panelDetails.list.focus(),a.panelDetails.scroll.show(),a.panelDetails.list.$focusItem.classList.add("focus"),a.panelDetails.list.focusIndex(0)):e.code===d.ok&&a.panelDetails.button.events["click"]&&a.panelDetails.button.emit("click",{event:e})}}})),a.panelSet=new s({visible:!1,$node:document.getElementById("panelSetInfo"),focusIndex:0,panels:[a.panelDetails]}),a.add(a.panelSet),a.addListener("keydown",function(e){switch(e.code){case d.back:n.route(n.pages.main)}}),a.addListener("show",function(e){a.panelSet.show(),e&&e.data&&e.data.data&&(a.initData=e.data.data.items[1].record.data,a.panelDetails.reset())}),e.exports=a},function(e,t,i){"use strict";var n=i(4);function a(e){e=e||{},this.active=!1,this.activeComponent=null,n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-page",e.exports=a},function(e,t,i){"use strict";var n=i(4),a=i(17);function s(e){e=e||{},n.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="spa-component-button",s.prototype.clickDuration=200,s.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===a.enter&&this.events["click"]&&this.emit("click",{event:e})}},e.exports=s},function(e,t,i){"use strict";var n=i(4);function a(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-scrollbar",a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},a.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=a},function(e,t,i){"use strict";var n=i(2),a=new(i(5))({$node:document.getElementById("pageMore")}),s=i(20),o=i(11),l=i(6),r=i(7),d=i(10),c=i(8),h=i(0);window.mpage=a,a.clock=new c({className:"clock",interval:1e3,render:function(e){var t=new Date,i=t.getHours(),n=t.getMinutes();e.innerText=(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}}),a.add(a.clock),a.clock.start(),a.panelDetails=new r({main:!0,visible:!0,className:"panelDetails",children:[],title:"_"}),a.panelDetails.reset=function(e){a.panelDetails.$title.$node.innerText=e.title,a.panelDetails.scroll.init({value:0}),a.panelDetails.area.$body.innerText=e.value,a.panelDetails.area.$body.style.top="0px",a.panelDetails.area.init(),a.panelDetails.focus(),a.panelDetails.scroll.viewSize<a.panelDetails.scroll.realSize?a.panelDetails.area.focus():a.panelDetails.button.focus()},a.panelDetails.button=new d({value:gettext("Close"),className:"bottom theme-footer",$node:a.panelDetails.$node.appendChild(document.createElement("div")),events:{click:function(){n.route(n.pages.info)},keydown:function(e){e.code===h.up&&a.panelDetails.scroll.viewSize<a.panelDetails.scroll.realSize?a.panelDetails.area.focus():e.code===h.ok&&a.panelDetails.button.events["click"]&&a.panelDetails.button.emit("click",{event:e})}}}),a.panelDetails.add(a.panelDetails.button),a.panelDetails.scroll=new o({}),a.panelDetails.area=new s({visible:!0,scroll:a.panelDetails.scroll,events:{overflow:function(e){e.direction===h.down&&(a.panelDetails.area.blur(),a.panelDetails.button.focus())}}}),a.panelDetails.add(a.panelDetails.area,a.panelDetails.scroll),a.panelSet=new l({visible:!1,$node:document.getElementById("panelSetMore"),focusIndex:0,panels:[a.panelDetails]}),a.add(a.panelSet),a.addListener("keydown",function(e){switch(e.code){case h.back:n.route(n.pages.info)}}),a.addListener("show",function(e){a.panelSet.show(),a.panelDetails.reset({title:e.data.$item.data.items[0].value,value:e.data.$item.data.items[1].value})}),e.exports=a},function(e,t,i){"use strict";var n,a,s=i(5),o=i(2),l=i(40),r=new s({$node:document.getElementById("pageAdd")}),d=i(6),c=i(7),h=i(9),u=i(21),p=i(22),m=i(10),f=i(15),v=i(0),g=i(14),y=i(8),x=window.core.plugins.pvr,b={"-1":gettext("Wrong record parameters."),"-2":gettext("Not enough memory."),"-3":gettext("Wrong record range. Record lenth must be less than or equal 24 hours."),"-4":gettext("Task with specified ID was not found."),"-5":gettext("Wrong file name. Folder where you want to save recording must exist."),"-6":gettext("Record with that name already exists."),"-7":gettext("Error opening stream URL."),"-8":gettext("Error opening file."),"-9":gettext("Maximum number of simultaneous recording is exceeded."),"-10":gettext("Records app got a thread exit notification. File record is over."),"-11":gettext("Error writing file. Probably the disk is full or has been disconnected during recording."),"-12":gettext("Wrong record url."),"-13":gettext("Wrong file name."),"-14":gettext("Wrong record start time."),"-15":gettext("Wrong record end time."),"-16":gettext("Bad record.")};function w(e,t){l.prototype.defaultEvents.keydown.call(t,e),e.code===v.ok&&t.parent.emit("click")}function $(e,t){e.children.length>1?e.children[1].innerText=t.current?t.current.value:0:(e.appendChild(f.tag("div",{className:"pointerWrapper"})),e.appendChild(f.tag("div",{className:"text"},t.current?t.current.value:0)),e.appendChild(f.tag("div",{className:"pointerWrapper"},f.tag("div",{className:"dateInputHint"}))))}function I(e,t){return t.indexOf(e<10?"0"+e:""+e)}n=window.core.plugins.spvr,o.spvr=n,a={"-1":gettext("Wrong channel id."),"-2":gettext("Server error."),"-3":gettext("Bad record.")},o.pvr=x,r.clock=new y({className:"clock",interval:1e3,render:function(e){var t=new Date,i=t.getHours(),n=t.getMinutes();e.innerText=(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}}),r.add(r.clock),r.clock.start(),r.modalSelectDevice=new u({title:gettext("devices"),className:"modalSelectDevice",visible:!1,events:{show:function(){var e,t=!o.intent||o.intent.data.pvr.local,i=[],a=0;if((!o.intent||o.intent.data.pvr.server)&&n.enabled&&(i=[{state:!0,title:gettext("Server"),value:"Server"}]),t)for(e=0;e<o.storages.length;e++)i.push({state:!1,title:o.storages[e].label,value:o.storages[e]}),r.currStorage&&r.currStorage.mountPath===o.storages[e].mountPath&&(i[0].state=!1,i[i.length-1].state=!0,a=Number(i.length-1));this.children[0].init({data:i,size:i.length,focusIndex:a}),this.focus()},hide:function(){r.panelSet.focus()}},children:[new p({cycle:!0,focusIndex:0,size:3,data:[],propagate:!0,events:{"click:item":function(e){r.modalSelectDevice.hide(),r.panelSet.reset({storage:e.$item.data.value})}}})]}),r.add(r.modalSelectDevice),r.panelAdd=new c({title:gettext("new record"),main:!0,visible:!0,className:"panelAdd"}),r.panelAdd.add(r.panelAdd.list=new h({focusIndex:0,size:5,events:{overflow:function(){r.panelAdd.list.$focusItem.classList.remove("focus"),r.panelAdd.button.focus()},keydown:function(e){h.prototype.defaultEvents.keydown.call(this,e)}},data:[{items:[{className:"item name theme-subhead-color",value:gettext("Channel:")},{className:"item text",value:""},{className:"item placeholder theme-item-more",value:""}],click:function(){o.route(o.pages.chans)}},{items:[{className:"item name theme-subhead-color",value:gettext("Start time:")},r.panelAdd.startHour=new l({data:g.dates.hours.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:":"},r.panelAdd.startMinute=new l({data:g.dates.minutes.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:" "},r.panelAdd.startDay=new l({data:g.dates.days.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:"/"},r.panelAdd.startMonth=new l({data:g.dates.months.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:"/"},r.panelAdd.startYear=new l({data:g.dates.years.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"lastPadding",value:" "}]},{items:[{className:"item name theme-subhead-color",value:gettext("End time:")},r.panelAdd.endHour=new l({data:g.dates.hours.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:":"},r.panelAdd.endMinute=new l({data:g.dates.minutes.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:" "},r.panelAdd.endDay=new l({data:g.dates.days.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:"/"},r.panelAdd.endMonth=new l({data:g.dates.months.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"separator",value:"/"},r.panelAdd.endYear=new l({data:g.dates.years.slice(),cycle:!0,events:{keydown:function(e){w(e,this)}},render:function(e){$(e,this)}}),{className:"lastPadding",value:" "}]},{items:[{className:"item name theme-subhead-color",value:gettext("Storage:")},{className:"item text",value:gettext("Recording not allowed")},{className:"item placeholder theme-item-more",value:""}],click:function(){var e=!o.intent||o.intent.data.pvr.local,t=!o.intent||o.intent.data.pvr.server;(o.storages.length&&e||t&&n&&n.enabled)&&(r.panelSet.blur(),r.modalSelectDevice.show(),r.panelSet.visible=!1)}},{items:[{className:"item name theme-subhead-color",value:gettext("File name:")},r.panelAdd.input=f.tag("div",{className:"item text"},gettext("Type here")),{className:"item placeholder theme-item-editable",value:""}],click:function(){window.core.intent({action:"keyboard",data:{type:"text",mode:"qwerty",title:gettext("ENTER FILE NAME"),description:gettext("RECORDS"),value:r.panelAdd.input.innerText},events:{done:function(e){r.panelAdd.input.innerText=e.value}}},function(e){})}}]})),r.panelAdd.startHour.$node.children[2].children[0].innerText="hh",r.panelAdd.startMinute.$node.children[2].children[0].innerText="mm",r.panelAdd.startDay.$node.children[2].children[0].innerText="DD",r.panelAdd.startMonth.$node.children[2].children[0].innerText="MM",r.panelAdd.startYear.$node.children[2].children[0].innerText="YYYY",r.panelAdd.endHour.$node.children[2].children[0].innerText="hh",r.panelAdd.endMinute.$node.children[2].children[0].innerText="mm",r.panelAdd.endDay.$node.children[2].children[0].innerText="DD",r.panelAdd.endMonth.$node.children[2].children[0].innerText="MM",r.panelAdd.endYear.$node.children[2].children[0].innerText="YYYY",r.panelAdd.add(r.panelAdd.button=new m({value:gettext("Create"),className:"bottom theme-footer",$node:r.panelAdd.$node.appendChild(document.createElement("div")),events:{click:function(){var e,t=o.intent?o.intent.data.name:"",i=o.intent?o.intent.data.uri:"",s=o.intent?o.intent.data.id:"",l=new Date(r.panelAdd.startYear.current.value,r.panelAdd.startMonth.current.value-1,r.panelAdd.startDay.current.value,r.panelAdd.startHour.current.value,r.panelAdd.startMinute.current.value),d=new Date(r.panelAdd.endYear.current.value,r.panelAdd.endMonth.current.value-1,r.panelAdd.endDay.current.value,r.panelAdd.endHour.current.value,r.panelAdd.endMinute.current.value);l.getMonth()+1===parseInt(r.panelAdd.startMonth.current.value,10)?d.getMonth()+1===parseInt(r.panelAdd.endMonth.current.value,10)?l.getTime()>=d.getTime()?window.core.notify({title:gettext("Wrong record range. Record lenth must be less than or equal 24 hours."),icon:"alert",type:"warning"}):r.currStorage&&0===Number(r.currStorage.freeSize)?window.core.notify({title:gettext("Not enough free space in storage"),icon:"alert",type:"warning"}):r.currStorage&&r.currStorage.label?(e=r.currStorage.mountPath+"/records/"+t+"/",e+=r.panelAdd.startYear.current.value+"-"+r.panelAdd.startMonth.current.value+"-",e+=r.panelAdd.startDay.current.value+"/"+r.panelAdd.input.innerText+".ts",x.add({name:e,channel:i,startTime:Math.ceil(l.getTime()/1e3),endTime:Math.ceil(d.getTime()/1e3)},function(e,t){t?window.core.notify({title:b[t.code],icon:"alert",type:"warning"}):(o.intent&&o.intent.close&&(o.intent.close(),o.intent=null),o.route(o.pages.main))})):"Server"===r.currStorage&&n.enabled?n.add({id:s,startTime:Math.ceil(l.getTime()/1e3),endTime:Math.ceil(d.getTime()/1e3)},function(e){e?a[e.code]?core.notify({title:a[e.code],icon:"alert",type:"warning"}):core.notify({title:e.message,icon:"alert",type:"warning"}):(o.intent&&o.intent.close&&(o.intent.close(),o.intent=null),o.route(o.pages.main))}):null===r.currStorage?window.core.notify({title:gettext("No storage device."),icon:"alert",type:"warning"}):window.core.notify({title:gettext("Recording not allowed"),icon:"alert",type:"warning"}):window.core.notify({title:gettext("Wrong record end time."),icon:"alert",type:"warning"}):window.core.notify({title:gettext("Wrong record start time."),icon:"alert",type:"warning"})},keydown:function(e){e.code===v.up?(r.panelAdd.list.$focusItem.classList.add("focus"),r.panelAdd.list.focus(),r.panelAdd.list.focusIndex(r.panelAdd.list.data.length-1)):e.code===v.down?(r.panelAdd.list.$focusItem.classList.add("focus"),r.panelAdd.list.focus(),r.panelAdd.list.focusIndex(0)):e.code===v.ok&&r.panelAdd.button.events["click"]&&r.panelAdd.button.emit("click",{event:e})}}})),r.panelSet=new d({visible:!0,$node:document.getElementById("panelSetAdd"),focusIndex:0,panels:[r.panelAdd]}),r.panelSet.reset=function(e){var t,i,a,s=r.panelAdd.list.$body.children[3].children[0].children[1],l=!o.intent||o.intent.data.pvr.local,d=!o.intent||o.intent.data.pvr.server;for(e&&e.storage&&e.storage.size&&l?(i=gettext("Free space:")+" "+g.convert(e.storage.freeSize),a=g.convert(e.storage.size),t=f.fragment(f.tag("div",{className:"itemHalf"},e.storage.label),f.tag("div",{className:"itemHalf"},i+gettext(" of ")+a)),r.currStorage=e.storage):d&&n&&n.enabled?(t=document.createTextNode(gettext("Server")),r.currStorage="Server"):l&&o.storages.length?(i=gettext("Free space:")+" "+g.convert(o.storages[0].freeSize),a=g.convert(o.storages[0].size),t=f.fragment(f.tag("div",{className:"itemHalf"},o.storages[0].label),f.tag("div",{className:"itemHalf"},i+gettext(" of ")+a)),r.currStorage=o.storages[0]):l?(t=document.createTextNode(gettext("No storage device.")),r.currStorage=null):(t=document.createTextNode(gettext("Recording not allowed")),r.currStorage=void 0);s.firstChild;)s.removeChild(s.firstChild);s.appendChild(t),r.panelAdd.list.$focusItem.classList.add("focus"),r.panelAdd.list.focus()},r.add(r.panelSet),r.addListener("keydown",function(e){switch(e.code){case v.back:o.intent&&o.intent.close&&(o.intent.close(),o.intent=null),o.route(o.pages.main)}}),r.reset=function(){var e,t=o.intent&&o.intent.data.merge,i=o.intent?o.intent.data.name:gettext("Select channel"),n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23===n.getHours()?0:n.getHours()+1,n.getMinutes()),s=g.dates.minutes.slice(),l=g.dates.hours.slice(),d=g.dates.days.slice(),c=g.dates.months.slice(),h=g.dates.years.slice();o.intent&&o.intent.data.startTime&&(n.setTime(1e3*o.intent.data.startTime),a.setTime(1e3*o.intent.data.endTime)),r.panelAdd.list.$body.children[0].children[0].children[1].innerText=i,t||(r.panelAdd.startMinute.init({data:s.slice(),index:I(n.getMinutes(),s.slice())}),r.panelAdd.startHour.init({data:l.slice(),index:I(n.getHours(),l.slice())}),r.panelAdd.startDay.init({data:d.slice(),index:I(n.getDate(),d.slice())}),r.panelAdd.startMonth.init({data:c.slice(),index:I(n.getMonth()+1,c.slice())}),r.panelAdd.startYear.init({data:h.slice(),index:I(n.getFullYear(),h.slice())}),r.panelAdd.endMinute.init({data:s.slice(),index:I(a.getMinutes(),s.slice())}),r.panelAdd.endHour.init({data:l.slice(),index:I(a.getHours(),l.slice())}),r.panelAdd.endDay.init({data:d.slice(),index:I(a.getDate(),d.slice())}),r.panelAdd.endMonth.init({data:c.slice(),index:I(a.getMonth()+1,c.slice())}),r.panelAdd.endYear.init({data:h.slice(),index:I(a.getFullYear(),h.slice())}),e=r.panelAdd.startHour.current.value+"-"+r.panelAdd.startMinute.current.value+"-",e+=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds(),r.panelAdd.input.innerText=e),r.modalSelectDevice.visible&&(r.modalSelectDevice.hide(),r.panelSet.focus()),r.panelSet.reset(t&&r.currStorage&&r.currStorage.freeSize?{storage:r.currStorage}:null)},r.addListener("show",function(){r.reset(),r.panelSet.focus()}),e.exports=r},function(e,t,i){"use strict";var n=i(1),a=i(0);function s(e){e=e||{},this.data=[],this.currentIndex=0,this.current=null,this.cycle=!1,n.call(this,e),this.init(e)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-value-list",s.prototype.init=function(e){e.cycle&&(this.cycle=e.cycle),e.render&&(this.renderValue=e.render),e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data),e.index&&(this.currentIndex=e.index),this.current=this.data[this.currentIndex],this.updateData())},s.prototype.renderValueDefault=function(e){e.innerText=this.current.value},s.prototype.renderValue=s.prototype.renderValueDefault,s.prototype.updateData=function(){this.renderValue(this.$body),this.emit("data:change",{current:this.current})},s.prototype.defaultEvents={keydown:function(e){switch(e.code){case a.down:case a.up:this.change(e.code)}}},s.prototype.change=function(e){switch(e){case a.down:this.currentIndex+1<this.data.length?(this.currentIndex++,this.current=this.data[this.currentIndex],this.updateData()):(this.cycle&&(this.currentIndex=0,this.current=this.data[0],this.updateData()),this.emit("overflow",{direction:e,cycle:this.cycle}));break;case a.up:this.currentIndex>0?(this.currentIndex--,this.current=this.data[this.currentIndex],this.updateData()):(this.cycle&&(this.currentIndex=this.data.length-1,this.current=this.data[this.currentIndex],this.updateData()),this.emit("overflow",{direction:e,cycle:this.cycle}))}},e.exports=s},function(e,t,i){"use strict";e.exports=i(42),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var n=i(4);function a(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-modal",e.exports=a},function(e,t,i){"use strict";var n=i(2),a=i(13),s=i(5),o=i(11),l=new s({$node:document.getElementById("pageChannels")}),r=i(6),d=i(7),c=i(9),h=i(15),u=i(0),p=i(10),m=i(8),f=i(23);l.clock=new m({className:"clock",interval:1e3,render:function(e){var t=new Date,i=t.getHours(),n=t.getMinutes();e.innerText=(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}}),l.add(l.clock),l.clock.start(),l.footer=new f({visible:!0,parent:l,data:[{code:u.f4,title:gettext("Search"),action:function(){l.panelSelect.list.$focusItem&&l.panelSelect.list.$focusItem.classList.remove("focus"),l.panelSelect.searchHolder.focus()}}]}),l.panelSelect=new d({title:gettext("Select channel"),main:!0,visible:!0,className:"panelSelect"}),l.panelSelect.searchHolder=new p({className:"panelInput",events:{keydown:function(e){switch(e.code){case u.ok:window.core.intent({action:"keyboard",data:{type:"text",mode:"qwerty",title:gettext("ENTER CHANNEL"),description:gettext("RECORDS"),value:l.panelSelect.input.innerText},events:{done:function(e){l.panelSelect.input.innerText=e.value,a.chansSearch=e.value,l.panelSelect.list.$focusItem&&(l.panelSelect.list.$focusItem.index=0),l.panelSet.reset()}}},function(e){});break;case u.up:case u.down:l.panelSelect.list.data.length&&(l.panelSelect.list.focus(),l.panelSelect.list.$focusItem&&l.panelSelect.list.$focusItem.classList.add("focus"))}}}}),l.panelSelect.searchHolder.$body.appendChild(h.tag("div",{className:"theme-icon theme-icon-search"})),l.panelSelect.searchHolder.$body.appendChild(l.panelSelect.input=h.tag("div",{className:"searchInput"})),l.panelSelect.scroll=new o({}),l.panelSelect.list=new c({scroll:l.panelSelect.scroll,noData:gettext("No channels"),focusIndex:0,size:6,data:[],events:{overflow:function(){l.panelSelect.list.$focusItem&&l.panelSelect.list.$focusItem.classList.remove("focus"),l.panelSelect.searchHolder.focus()},"click:item":function(e){function t(e){n.intent={action:"record",data:{uri:e.url,name:e.name,id:e.id,censored:e.censored||e.genre&&e.genre.censored,pvr:{local:e.local_pvr,server:e.pvr},merge:!0}}}window.core.accessControl&&!window.core.accessControl.state&&(e.$item.data.value.censored||e.$item.data.value.genre&&e.$item.data.value.genre.censored)?window.core.accessControl.request(function(i){i||(t(e.$item.data.value),n.route(n.pages.add))}):(t(e.$item.data.value),n.route(n.pages.add))},keydown:function(e){c.prototype.defaultEvents.keydown.call(this,e)},"data:error":function(e){}}}),l.panelSelect.add(l.panelSelect.searchHolder,l.panelSelect.list,l.panelSelect.scroll),l.panelSet=new r({visible:!0,$node:document.getElementById("panelSetChans"),focusIndex:0,panels:[l.panelSelect]}),l.panelSet.reset=function(){window.core.plugins.tvBackend?window.core.plugins.tvBackend.getChannels({search:a.chansSearch,pvr:!0},function(e,t){var i,n=[];if(!t||t.length<1)return l.panelSelect.list.init({data:[]}),l.footer.hide(),void l.panelSelect.scroll.hide();for(i=0;i<t.length;i++)n[i]={items:[{className:"number",value:t[i].number.toString()},{className:"title",value:t[i].name},{className:"placeholder "+(t[i].censored?" theme-icon theme-icon-lock":"")}],value:t[i]};l.panelSelect.list.init({data:n,focusIndex:l.panelSelect.list.$focusItem?l.panelSelect.list.$focusItem.index:0}),l.panelSelect.scroll.init({realSize:t.length,viewSize:6}),l.panelSelect.show(),l.footer.show(),l.panelSelect.list.$focusItem.classList.add("focus"),l.panelSelect.list.focus()}):(l.panelSelect.list.init({data:[],focusIndex:0}),l.panelSelect.scroll.init({realSize:0,viewSize:6}),l.panelSelect.show(),l.footer.show(),l.panelSelect.searchHolder.focus())},l.add(l.panelSet),l.addListener("keydown",function(e){switch(e.code){case u.back:n.route(n.pages.add)}}),l.reset=function(){l.panelSelect.input.innerText=a.chansSearch||"",l.panelSet.reset()},l.addListener("show",function(){l.panelSet.focus(),l.reset()}),e.exports=l},function(e,t,i){"use strict";var n,a,s,o,l=i(5),r=i(2),d=i(13),c=new l({$node:document.getElementById("pageMain")}),h=i(6),u=i(7),p=i(9),m=i(21),f=i(22),v=i(15),g=i(0),y=i(14),x=i(11),b=window.core.plugins.fs,w=r.pvr,$=w.recordStates,I=i(8),C=i(23),k=i(20),S={"-1":gettext("Wrong record parameters."),"-2":gettext("Not enough memory."),"-3":gettext("Wrong record range. Record lenth must be less than or equal 24 hours."),"-4":gettext("Task with specified ID was not found."),"-5":gettext("Wrong file name. Folder where you want to save recording must exist."),"-6":gettext("Record with that name already exists."),"-7":gettext("Error opening stream URL."),"-8":gettext("Error opening file."),"-9":gettext("Maximum number of simultaneous recording is exceeded."),"-10":gettext("Records app got a thread exit notification. File record is over."),"-11":gettext("Error writing file. Probably the disk is full or has been disconnected during recording."),"-12":gettext("Wrong record url."),"-13":gettext("Wrong file name."),"-14":gettext("Wrong record start time."),"-15":gettext("Wrong record end time."),"-16":gettext("Bad record.")},N={};function D(){var e,t,i,n=[],s={0:$.ERROR,1:$.RECORDING,2:$.WAITING,3:$.FINISHED},o=r.records.slice(),l=c.middlePanel.list;function h(){c.middlePanel.list.$focusItem&&(c.panelSet.blur(),c.modalActions.fill({$item:c.middlePanel.list.$focusItem}))}for(t=0;t<o.length;t++)if(!(null!==d.list.filterStatus&&o[t].data.state!==d.list.filterStatus||d.list.filterSearch.trim()&&-1===o[t].data.name.indexOf(d.list.filterSearch)&&-1===o[t].data.url.indexOf(d.list.filterSearch))){if(o[t].data.server)o[t].data.storage={freeSize:0,fsType:0,isReadOnly:0,label:gettext("Server"),mediaType:2,model:"",mountPath:"",partitionNum:0,size:0,sn:"",vendor:""};else for(i=0;i<r.storages.length;i++)if(-1!==o[t].data.path.indexOf(r.storages[i].mountPath)){o[t].data.storage=r.storages[i];break}n.push({items:[{className:"theme-icon "+N[Number(o[t].data.state)],value:""},{value:o[t].data.progress+"% "+o[t].data.name,className:"title",record:r.records[t]}],click:h})}d.list.sort?d.list.sort===d.constants.sort.BY_CATEGORY?n.sort(function(e,t){return s[e.items[1].record.data.state]-s[t.items[1].record.data.state]}):n.sort(function(e,t){return t.items[1].record.data.startTime-e.items[1].record.data.startTime}):n.sort(function(e,t){return e.items[1].record.data.name.toLowerCase().localeCompare(t.items[1].record.data.name.toLowerCase())}),e={data:n},a.innerText=n.length,n.length?(e.focusIndex=l.$focusItem&&l.$focusItem.index<n.length?l.$focusItem.index:0,c.middlePanel.scroll.init({realSize:n.length,viewSize:7}),c.middlePanel.scroll.show()):(c.rightPanel.reset(),c.activeComponent===c.middlePanel.list&&c.footer.hide(),c.middlePanel.scroll.hide()),l.init(e)}N[$.WAITING]="theme-icon-clock theme-color-error",N[$.RECORDING]="theme-icon-play",N[$.ERROR]="theme-icon-warning theme-color-warning",N[$.FINISHED]="theme-icon-ok theme-color-success",s=r.spvr,o={"-1":gettext("Wrong channel id."),"-2":gettext("Server error."),"-3":gettext("Bad record.")},window.core.plugins.tvBackend&&window.core.plugins.tvBackend.updateChannelsList(function(e){}),n=v.tag("div",{className:"amountContainer"},a=v.tag("div",{className:"amount"},"0")),r.storages=b.getMountPoints().concat(b.getHDDInfo()),r.records=[],c.clock=new I({className:"clock",interval:1e3,render:function(e){var t=new Date,i=t.getHours(),n=t.getMinutes();e.innerText=(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}}),c.add(c.clock),c.clock.start(),c.footer=new C({visible:!1,parent:c}),b.onMount=function(e){r.storages=b.getMountPoints().concat(b.getHDDInfo()),r.pages.add.active&&(r.pages.add.modalSelectDevice.visible&&r.pages.add.modalSelectDevice.hide(),r.pages.add.panelSet.reset(),r.pages.add.panelSet.focus())},c.playFocusedFile=function(){var e=c.middlePanel.list.$focusItem.data.items[1].record;e.data.state===e.states.FINISHED&&(e.data.server?s.getFileUrl(e,function(t,i){t?window.core.notify({title:o[t.code],icon:"alert",type:"warning"}):window.core.intent({action:"play",mime:"content/video",data:{uri:i.url,title:e.data.name,mediaId:i.mediaId}},function(e){e&&window.core.notify({title:e.message,icon:"alert",type:"warning"})})}):window.core.intent({action:"play",mime:"content/video",data:{uri:e.data.path,title:e.data.name}},function(e){e&&window.core.notify({title:e.message,icon:"alert",type:"warning"})}))},c.deleteFocusedTask=function(){var e;c.middlePanel.list.$focusItem&&c.middlePanel.list.$focusItem.data&&((e=c.middlePanel.list.$focusItem.data.items[1].record).data.server?s.remove(e,function(e){e&&window.core.notify({title:o[e.code],icon:"alert",type:"warning"}),c.modalActions.hide(),c.middlePanel.focus(),c.middlePanel.reset()}):w.remove(e,{deleteFile:!1},function(e,t){t&&window.core.notify({title:S[t.code],icon:"alert",type:"warning"}),c.modalActions.hide(),c.middlePanel.focus(),c.middlePanel.reset()}))},c.stopFocusedTask=function(){var e;c.middlePanel.list.$focusItem&&c.middlePanel.list.$focusItem.data&&(e=c.middlePanel.list.$focusItem.data.items[1].record).stop(e,function(e){e&&window.core.notify({title:S[e.code],icon:"alert",type:"warning"})})},c.downloadFocusedTask=function(){var e;c.middlePanel.list.$focusItem&&c.middlePanel.list.$focusItem.data&&(e=c.middlePanel.list.$focusItem.data.items[1].record).data.state===e.states.FINISHED&&e.data.server&&s.getFileUrl(e,function(t,i){t?window.core.notify({title:o[t.code],icon:"alert",type:"warning"}):window.core.intent({action:"download",data:{uri:i.url,title:e.data.name}},function(e){e&&window.core.notify({title:e.message,icon:"alert",type:"warning"})})})},c.resetFilters=function(){var e=c.leftPanel.list.$body.children[2].layout.$node.children;d.list.filterSearch="",c.leftPanel.search.innerText=gettext("Search"),c.leftPanel.list.$body.children[1].children[0].children[0].classList.remove("active"),d.list.filterStatus&&(d.list.filterStatus=null,c.modalFilterStatus.children[0].resetData(),e[1].innerText=gettext("All categories"),e[0].classList.remove("active")),c.footer.hide(),c.middlePanel.reset()},c.modalReset=new m({visible:!1,title:gettext("actions"),events:{show:function(){this.focus()},hide:function(){c.leftPanel.focus()}},children:[new p({cycle:!0,size:1,data:[{items:[{className:"theme-icon theme-icon-rc-f1",value:""},{value:gettext("Reset filters")}],click:function(){c.resetFilters(),c.modalReset.hide(),c.panelSet.focus()}}],propagate:!0})]}),c.add(c.modalReset),c.modalActions=new m({visible:!1,title:gettext("actions"),events:{show:function(){this.focus()},hide:function(){c.middlePanel.focus()}},children:[new p({cycle:!0,data:[],propagate:!0})]}),c.modalActions.fill=function(e){setTimeout(function(){var t=e.$item.data.items[1].record.data,i=e.$item.data.items[1].record,n=[{items:[{className:"theme-icon",value:""},{value:gettext("Details")}],click:function(){c.modalActions.hide(),c.panelSet.blur(),r.route(r.pages.info,c.middlePanel.list.$focusItem)}},{items:[{className:"theme-icon theme-icon-rc-f1",value:""},{value:gettext("Delete task")}],click:c.deleteFocusedTask}];t.state===i.states.FINISHED&&(n.unshift({items:[{className:"theme-icon theme-icon-play",value:""},{value:gettext("Play file")}],click:function(){c.modalActions.hide(),c.panelSet.focus(),c.playFocusedFile()}}),t.server&&t.downloadable&&n.unshift({items:[{className:"theme-icon",value:""},{value:gettext("Download file")}],click:function(){c.modalActions.hide(),c.panelSet.focus(),c.downloadFocusedTask()}})),t.state===i.states.RECORDING&&n.unshift({items:[{className:"theme-icon",value:""},{value:gettext("Stop recording")}],click:function(){c.modalActions.hide(),c.panelSet.focus(),c.stopFocusedTask()}}),t.server||n.push({items:[{className:"theme-icon",value:""},{value:gettext("Delete task and file")}],click:function(){var e;c.middlePanel.list.$focusItem&&c.middlePanel.list.$focusItem.data&&(e=c.middlePanel.list.$focusItem.data.items[1].record,w.remove(e,{deleteFile:!0},function(e,t){t&&window.core.notify({title:S[t.code],icon:"alert",type:"warning"}),c.modalActions.hide(),c.middlePanel.focus(),c.middlePanel.reset()}))}}),c.modalActions.children[0].init({data:n,size:n.length,focusIndex:0}),setTimeout(function(){c.modalActions.show()},0)},0)},c.add(c.modalActions),c.modalFilterStatus=new m({visible:!1,title:gettext("categories"),events:{show:function(){this.focus()},hide:function(){c.panelSet.focus()}},children:[new f({cycle:!0,focusIndex:0,size:5,data:[{state:!0,title:gettext("All categories"),value:null},{state:!1,title:gettext("Waiting"),value:1},{state:!1,title:gettext("In progress"),value:2},{state:!1,title:gettext("Error"),value:3},{state:!1,title:gettext("Completed"),value:4}],events:{"click:item":function(e){var t=c.leftPanel.list.$body.children[2].children[0];e.$item.data.value?t.children[0].classList.add("active"):t.children[0].classList.remove("active"),t.children[1].innerText=e.$item.data.title,d.list.filterStatus=e.$item.data.value,c.middlePanel.reset(),c.modalFilterStatus.hide()}},propagate:!0})]}),c.add(c.modalFilterStatus),c.modalSort=new m({visible:!1,title:gettext("sort"),events:{show:function(){this.focus()},hide:function(){c.panelSet.focus()}},children:[new f({cycle:!0,focusIndex:0,size:3,data:[{state:!0,title:gettext("By name"),value:0},{state:!1,title:gettext("By category"),value:1},{state:!1,title:gettext("By date"),value:2}],events:{"click:item":function(e){c.leftPanel.list.$focusItem.layout.$node.children[1].innerText=e.$item.data.title,d.list.sort=e.$item.data.value,c.middlePanel.reset(),c.modalSort.hide()}},propagate:!0})]}),c.add(c.modalSort),c.modalExit=new m({title:gettext("Exit"),className:"modalExit",events:{show:function(){this.children[0].focus()},hide:function(){c.panelSet.focus()}},children:[new p({size:2,focusIndex:0,data:[{items:[{value:gettext("Yes")}],click:function(){c.modalExit.hide(),r.exit()}},{items:[{value:gettext("No")}],click:function(){c.modalExit.hide()}}],propagate:!0})]}),c.add(c.modalExit),c.leftPanel=new u({title:gettext("Menu"),children:[],className:"leftPanel"}),c.leftPanel.add(c.leftPanel.list=new p({cycle:!0,focusIndex:0,size:5,data:[{items:[{className:"theme-icon theme-icon-plus",value:""},{value:gettext("Create")}],click:function(){c.panelSet.blur(),r.route(r.pages.add)}},{items:[{className:"theme-icon theme-icon-search",value:""},c.leftPanel.search=v.tag("div",{className:"searchText"},gettext("Search"))],click:function(){var e=c.leftPanel.search.innerText;window.core.intent({action:"keyboard",data:{type:"text",mode:"qwerty",title:gettext("SEARCH RECORDS"),description:gettext("RECORDS"),value:e===gettext("Search")?"":e},events:{done:function(e){var t=c.leftPanel.list.$body.children[1].children[0].children[0];e.value?t.classList.add("active"):t.classList.remove("active"),c.leftPanel.search.innerText=e.value||gettext("Search"),d.list.filterSearch=e.value,c.middlePanel.reset()}}},function(e){})}},{items:[{className:"theme-icon theme-icon-categories",value:""},{className:"theme-item-more",value:gettext("All categories")}],click:function(){c.panelSet.blur(),c.modalFilterStatus.show()}},{items:[{className:"theme-icon theme-icon-sort-az",value:""},{className:"theme-item-more",value:gettext("By name")}],click:function(){c.panelSet.blur(),c.modalSort.show()}},{items:[{className:"theme-icon theme-icon-exit",value:""},{value:gettext("Exit")}],click:function(){c.panelSet.blur(),c.modalExit.show()}}],events:{"focus:item":function(){d.list.filterSearch||d.list.filterStatus?(c.footer.init({middle:[{code:g.f1,title:gettext("Reset filters"),action:c.resetFilters}],left:{code:g.menu,action:function(){c.panelSet.blur(),c.modalReset.show()}}}),c.footer.show()):c.footer.hide()},focus:function(){d.list.filterSearch||d.list.filterStatus?(c.footer.init({middle:[{code:g.f1,title:gettext("Reset filters"),action:c.resetFilters}],left:{code:g.menu,action:function(){c.panelSet.blur(),c.modalReset.show()}}}),c.footer.show()):c.footer.hide()},blur:function(){c.footer.hide()}}})),c.middlePanel=new u({title:[{value:gettext("Records"),className:"name"},n],main:!0,children:[],className:"middlePanel"}),c.middlePanel.updateDelay=null,c.middlePanel.scroll=new x({}),c.middlePanel.add(c.middlePanel.list=new p({cycle:!0,focusIndex:0,size:7,data:[],scroll:c.middlePanel.scroll,events:{"focus:item":function(e){var t;clearTimeout(c.middlePanel.updateDelay),c.middlePanel.updateDelay=setTimeout(function(){var i;e?(t={middle:[{code:g.f1,title:gettext("Delete task"),action:c.deleteFocusedTask}],left:{code:g.menu,action:function(){c.panelSet.blur(),c.modalActions.fill({$item:c.middlePanel.list.$focusItem})}}},c.rightPanel.reset(e),c.middlePanel.list.$focusItem&&(i=c.middlePanel.list.$focusItem.data.items[1].record).data.state===i.states.FINISHED&&t.middle.push({code:g.f2,title:gettext("Play file"),action:c.playFocusedFile}),c.activeComponent===c.middlePanel.list&&(c.footer.init(t),c.footer.show())):c.activeComponent===c.middlePanel.list&&c.footer.hide()},window.core.environment.onFocusDebounceTimeout)},focus:function(){var e,t={middle:[{code:g.f1,title:gettext("Delete task"),action:c.deleteFocusedTask}],left:{code:g.menu,action:function(){c.panelSet.blur(),c.modalActions.fill({$item:c.middlePanel.list.$focusItem})}}};c.middlePanel.list.$focusItem?((e=c.middlePanel.list.$focusItem.data.items[1].record).data.state===e.states.FINISHED&&t.middle.push({code:g.f2,title:gettext("Play file"),action:c.playFocusedFile}),c.footer.init(t),c.footer.show()):c.footer.hide()},blur:function(){c.footer.hide()}},noData:v.tag("div",{className:"panelHint"},v.tag("div",{className:"hint"},v.tag("div",{className:"hint",innerHTML:gettext("No records")})))}),c.middlePanel.scroll),c.middlePanel.resetTimeOut=null,c.middlePanel.reset=function(){clearTimeout(c.middlePanel.resetTimeOut),c.middlePanel.resetTimeOut=setTimeout(D,300)},c.rightPanel=new u({title:gettext("Details"),className:"rightPanel"}),c.rightPanel.scroll=new x({}),c.rightPanel.textArea=new k({propagate:!0,step:5,scroll:c.rightPanel.scroll}),c.rightPanel.add(c.rightPanel.textArea,c.rightPanel.scroll),c.rightPanel.reset=function(e){var t,i,n,a=c.rightPanel.textArea;a.$channel||a.$body.appendChild(v.fragment(v.tag("div",{className:"title theme-subhead-color"},gettext("Channel:")),a.$channel=v.tag("div",{}),v.tag("div",{className:"title theme-subhead-color"},gettext("Record name:")),a.$name=v.tag("div",{}),v.tag("div",{className:"title theme-subhead-color"},gettext("Record start:")),a.$date=v.tag("div",{}),v.tag("div",{className:"title theme-subhead-color"},gettext("Record length:")),a.$time=v.tag("div",{}),v.tag("div",{className:"title theme-subhead-color"},gettext("Storage:")),a.$storage=v.tag("div",{}),v.tag("div",{className:"title theme-subhead-color"},gettext("Status:")),a.$state=v.tag("div",{}))),e&&e.$curr&&e.$curr.data?(t=e.$curr.data.items[1].record.data,i=y.parseDate(new Date(1e3*t.startTime)),n={hours:Math.floor((t.endTime-t.startTime)/3600),minute:Math.ceil((t.endTime-t.startTime)/60%60)},a.$channel.innerText=t.channel,a.$name.innerText=t.name,a.$date.innerText=i,a.$time.innerText=n.hours?n.hours+" "+gettext("h.")+" "+n.minute+" "+gettext("m."):n.minute+" "+gettext("m."),a.$storage.innerText=t.storage?t.storage.label:gettext("Not connected"),a.$state.innerText=["",gettext("Waiting"),gettext("Running"),gettext("Error"),gettext("Completed")][Number(t.state)],3===Number(t.state)&&!t.server&&S[t.errorCode]&&(a.$state.innerText+=": "+S[t.errorCode]),c.rightPanel.textArea.show(),c.rightPanel.textArea.init()):c.rightPanel.textArea.hide()},c.panelSet=new h({visible:!0,$node:document.getElementById("panelSetMain"),panels:[c.leftPanel,c.middlePanel,c.rightPanel]}),c.panelSet.focusIndex=1,c.add(c.panelSet),c.addListener("keydown",function(e){switch(e.code){case g.back:c.panelSet.blur(),window.core.call("stop")}}),s.events={},s.addListeners({add:function(e){r.records.push(e.item),c.middlePanel.reset()},remove:function(e){r.records.splice(r.records.indexOf(e.item),1),c.middlePanel.reset()},progress:function(){c.middlePanel.reset()},state:function(){c.middlePanel.reset()}}),s.reset(),w.events={},w.addListeners({add:function(e){e.item.data.state===e.item.states.ERROR&&window.core.notify({title:gettext("Error")+(S[e.item.data.errorCode]?": "+S[e.item.data.errorCode]:""),icon:"alert",type:"warning"}),e.item.addListeners({progress:function(){c.middlePanel.reset()},state:function(e){e.curr===e.item.states.ERROR&&window.core.notify({title:gettext("Error")+(S[e.item.data.errorCode]?": "+S[e.item.data.errorCode]:""),icon:"alert",type:"warning"}),c.middlePanel.reset()}}),r.records.push(e.item),c.middlePanel.reset()},remove:function(e){r.records.splice(r.records.indexOf(e.item),1),c.middlePanel.reset()}}),w.list.forEach(function(e){r.records.push(e)}),c.middlePanel.reset(),window.core.addListener("intent",function(e,t){"record"===e.action&&(r.intent=e,r.route(r.pages.add),r.pages.add.reset(),t(!1,{}))}),c.addListener("show",function(){c.panelSet.show(),c.panelSet.focus()}),window.core.addListeners({show:function(){c.clock.start()},hide:function(){c.clock.stop()},exit:function(){w.destroy(),s.destroy()}}),r.route(c),c.show(),e.exports=c}]);
//# sourceMappingURL=main.js.map