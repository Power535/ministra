!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=25)}([function(e,t,i){"use strict";var s=i(14);s.back=s.backspace,s.channelNext=s.tab,s.channelPrev=s.tab+"s",s.ok=s.enter,s.exit=s.escape,s.volumeUp=107,s.volumeDown=109,s.f1="112c",s.f2="113c",s.f3="114c",s.f4="115c",s.refresh="116c",s.frame="117c",s.phone="119c",s.set="120c",s.tv="121c",s.menu="122c",s.app="123c",s.rewind="66a",s.forward="70a",s.audio="71a",s.standby="74a",s.keyboard="76a",s.usbMounted="80a",s.usbUnmounted="81a",s.playPause="82a",s.play=-1,s.pause=-1,s.stop="83a",s.power="85a",s.record="87a",s.info="89a",s.mute="192a",s.digit0=48,s.digit1=49,s.digit2=50,s.digit3=51,s.digit4=52,s.digit5=53,s.digit6=54,s.digit7=55,s.digit8=56,s.digit9=57,e.exports=s},function(e,t,i){"use strict";var s={tag:function(e,t,i){var s,a,n=null;if(e){if(n=document.createElement(e),t&&"object"==typeof t)for(a in t)n[a]=t[a];for(s=2;s<arguments.length;s++)arguments[s]&&n.appendChild("object"==typeof arguments[s]?arguments[s]:document.createTextNode(arguments[s]))}return n},fragment:function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)(e=arguments[t])&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},add:function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},remove:function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},clear:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}};e.exports=s},function(e,t,i){"use strict";var s=i(26);e.exports=s},function(e,t,i){"use strict";var s=i(7),a=i(0);function n(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},s.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case a.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case a.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-layout",n.prototype.init=function(e){for(var t,i,a,n=this,o=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof s||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function r(){n.focusIndex=this.index}for(this.data=o,a=0;a<o.length;a++)"string"==typeof(t=o[a]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof s?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",r),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=n},function(e,t,i){"use strict";var s=i(10),a=i(27).parse,n=new s;n.query=a(document.location.search.substring(1)),n.config=i(28),n.activePage=null,n.route=function(e,t){var i,s=n.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=n.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,n.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,n.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:s,to:e}),!0)},e.exports=n},function(e,t,i){"use strict";var s=i(4),a=i(10),n=0;function o(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,a.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+n++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(s.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},o.prototype.focus=function(e){var t=s.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},o.prototype.blur=function(){var e=s.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},o.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},o.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=o},function(e,t,i){"use strict";e.exports=i(37),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";e.exports=i(5)},function(e,t,i){"use strict";var s=i(7),a=i(0);function n(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-list",n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.renderItemDefault=function(e,t){e.innerText=t.value},n.prototype.renderItem=n.prototype.renderItemDefault,n.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},n.prototype.init=function(e){var t,i,s=this,a=this.$body.children.length,n=function(e){this.data&&(s.focusItem(this),s.events["click:item"]&&s.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){s.events[t]=null,s.addListener(t,e.events[t])}),this.size!==a)for(a>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",n),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?s.events["data:error"]&&s.emit("data:error",t):(i&&(e.data=i,s.setData(e),s.scroll&&s.scroll.init({realSize:s.provider.maxCount,viewSize:s.provider.size,value:s.provider.head+s.provider.pos})),s.events["data:get"]&&s.emit("data:get"))})}else e.data&&this.setData(e)},n.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},n.prototype.renderView=function(e){var t,i,s,a,n;if(this.viewIndex!==e){for(a=this.viewIndex,this.viewIndex=n=e,i=0;i<this.size;i++)t=this.$body.children[i],(s=this.data[e])?(t.data=s,t.index=e,this.renderItem(t,s),s.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:a,currIndex:n}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},n.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})})}else this.cycle&&this.move(a.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0===s?s:t.$focusItem.index})})}else this.cycle&&this.move(a.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:s||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,s){var a;e?t.events["data:error"]&&t.emit("data:error",e):i&&(a=s||0===s?s:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:a}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},n.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},n.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},n.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},n.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=n},function(e,t,i){"use strict";var s=i(2);e.exports=function(e){e.changeFlags({favorite:!e.favorite},function(t){s.emit("change:favorite",{video:e,error:t})})}},function(e,t,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function s(){i.removeListener(e,s),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s=i(3);e.exports=function(e,t){for(var i,a,n,o,r=this;e.firstChild;)e.removeChild(e.firstChild);for(a=0;a<t.items.length;a++)(n=t.items[a])&&n.value instanceof HTMLElement&&(t.items[a]=n.value);o={focusable:!1,data:t.items},t.className&&(o.className=t.className),i=new s(o),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){r.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0,e.value=t.value}},function(e,t,i){"use strict";var s=i(8),a=i(3);function n(e){var t=this;e=e||{},this.handlers={},this.links={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",s.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-layout-list",n.prototype.renderItemDefault=function(e,t){var i,s,n,o,r;if(e.ready&&this.fixedData)for(r=0;r<t.items.length;r++)"string"!=typeof(o=t.items[r]).value&&void 0!==o.value||((n=e.layout.$node.childNodes[r]).innerText=o.value||"",n.className=o.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);s={focusable:!1,data:t.items},t.className&&(s.className=t.className),i=new a(s),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},n.prototype.setData=function(e){this.links={},s.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.init=function(e){var t;s.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.renderItem=n.prototype.renderItemDefault,e.exports=n},function(e,t,i){"use strict";var s=i(41),a=i(7),n=i(0);function o(e){var t,i,a,o=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){o.hide()},a=e.events.keydown,e.events.keydown=function(e){a&&a.call(this,e),e.code!==n.back&&e.code!==n.menu||(e.stop=!0,o.hide())},s.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-modal",o.prototype.focus=function(){this.$node.classList.add("active"),s.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof a&&this.children[0].focus()},o.prototype.blur=function(){this.$node.classList.remove("active"),s.prototype.blur.call(this)},e.exports=o},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var s=i(4);e.exports={DOMContentLoaded:function(e){s.events["dom"]&&s.emit("dom",e)},load:function(e){s.events[e.type]&&s.emit(e.type,e)},unload:function(e){s.events[e.type]&&s.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=s.activePage,a={code:e.keyCode,stop:!1};e.ctrlKey&&(a.code+="c"),e.altKey&&(a.code+="a"),e.shiftKey&&(a.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,a,e),!a.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,a,e)),a.stop||(i.events[e.type]&&i.emit(e.type,a,e),e.stop||s.events[e.type]&&s.emit(e.type,a,e))},keypress:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=s.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";var s=i(4);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+s.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";var s=i(8),a=i(0);function n(e){var t=this;e=e||{},this.bufferSize=3,e.$body=document.createElement("div"),e.$body.className="body",e.type=this.TYPE_VERTICAL,s.call(this,e),e.title&&(e.title instanceof HTMLElement?this.$title=e.title:(this.$title=document.createElement("div"),this.$title.className="title",this.$title.innerText=e.title),this.$node.appendChild(this.$title)),this.$node.appendChild(this.$body),this.inFocus=!1,this.addListener("focus",function(){t.$focusItem&&t.$focusItem.focus(),t.inFocus=!0}),this.addListener("blur",function(){t.inFocus=!1})}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-grid-list",n.prototype.init=function(e){var t=this;this.cycle=e.cycle||!1,e.scroll&&(this.scroll=e.scroll),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.bufferSize&&(this.bufferSize=e.bufferSize),e.events&&Object.keys(e.events).forEach(function(i){t.events[i]=null,t.addListener(i,e.events[i])}),this.focusPosition=e.focusPosition||Math.ceil(this.size/2),this.startIndex=0,this.setData(e)},n.prototype.createItem=function(){var e=this,t=document.createElement("div");return t.className="item hidden",t.addEventListener("click",function(i){t.data&&(e.focusItem(t),e.events["click:item"]&&e.emit("click:item",{$item:t,event:i}))}),t},n.prototype.setData=function(e){e.data&&(this.bufferBefore=[],this.mainList=[],this.bufferAfter=[]),s.prototype.setData.call(this,e)},n.prototype.refreshData=function(){var e={},t=this;this.query&&this.query.getter&&this.query.getter(function(i){0===i.length&&t.parent.removeItem?t.parent.removeItem(t.query):(t.$focusItem&&(e.focusIndex=t.$focusItem.index,i.length<=e.focusIndex&&(e.focusIndex=i.length-1)),e.data=i,t.parent.data&&t.parent.data.length>t.index&&(t.parent.data[t.index].data=e.data),t.setData(e))})},n.prototype.initItem=function(e,t,i){return t&&e?(e.data=t,e.index=i,this.renderItem(e,t)):(e.data=e.index=void 0,e.innerHTML="&nbsp;"),e},n.prototype.checkClassStates=function(){this.data.length>this.size-1?(this.$focusItem.index+1<this.focusPosition?this.$body.classList.remove("noEmptyBefore"):this.$body.classList.add("noEmptyBefore"),this.$focusItem.index===this.data.length-1?this.$body.classList.add("emptyAfter"):this.$body.classList.remove("emptyAfter")):(this.$body.classList.remove("emptyAfter"),this.$body.classList.remove("noEmptyBefore"))},n.prototype.renderView=function(e){var t,i,s,a,n=0;if(this.viewIndex===e)return!0;for(;this.$body.firstChild;)this.$body.removeChild(this.$body.firstChild);for(s=this.viewIndex,this.viewIndex=a=e||0,this.startIndex=this.viewIndex-this.bufferSize,this.startIndex<0&&(n=Math.abs(this.startIndex),this.startIndex=0),e=this.startIndex,this.bufferBefore=[],this.mainList=[],this.bufferAfter=[],n=this.bufferSize-n,i=0;i<n;i++)t=this.createItem(),t=this.initItem(t,this.data[e],e),this.$body.appendChild(t),t.classList.add("hidden"),this.bufferBefore.push(t),e++;for(n+=this.size;i<n&&!(i>=this.data.length);i++)t=this.createItem(),t=this.initItem(t,this.data[e],e),this.$body.appendChild(t),t.classList.remove("hidden"),this.mainList.push(t),e++;for(n=2*this.bufferSize+this.size+this.startIndex,n=this.data.length>n?n:this.data.length;i<n;i++)t=this.createItem(),t=this.initItem(t,this.data[e],e),this.$body.appendChild(t),this.bufferAfter.push(t),t.classList.add("hidden"),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:a}),!1},n.prototype.move=function(e){var t,i,s,n,o;if(this.data.length&&this.$focusItem)switch(e){case a.left:this.$focusItem.index>0?(this.$focusItem.index<this.viewIndex+this.focusPosition&&this.viewIndex>0&&(this.viewIndex--,n=this.bufferBefore[0].index,n--,(t=this.bufferBefore.pop()).classList.remove("hidden"),this.mainList.unshift(t),this.size<this.mainList.length&&(t=this.mainList.pop(),this.bufferAfter.unshift(t),t.classList.add("hidden")),this.bufferAfter.length>this.bufferSize&&(t=this.bufferAfter.pop(),this.$body.removeChild(t)),n>=0&&(t=this.createItem(),t=this.initItem(t,this.data[n],n),this.$body.insertBefore(t,this.$body.firstChild),this.bufferBefore.unshift(t))),this.focusItem(this.$focusItem.previousSibling)):(this.cycle&&this.move(a.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:!1}));break;case a.right:if(this.$focusItem.index<this.data.length-1){if(this.$focusItem.index+1>=this.focusPosition&&this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.classList.remove("hidden"),this.viewIndex++,this.mainList.length>this.size&&((t=this.mainList.shift()).classList.add("hidden"),this.bufferBefore.push(t)),this.bufferBefore.length>this.bufferSize&&(t=this.bufferBefore.shift(),this.$body.removeChild(t)),this.size-this.mainList.length&&this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.classList.remove("hidden")),o=this.bufferAfter.length))for(s=this.bufferSize-o,i=0;i<s&&(t=this.bufferAfter[this.bufferAfter.length-1])&&(n=t.index,!(++n>=this.data.length));i++)t=this.createItem(),this.$body.appendChild(t),t=this.initItem(t,this.data[n],n),this.bufferAfter.push(t);this.focusItem(this.$focusItem.nextSibling)}else this.cycle&&this.move(a.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:!1});break;case a.home:this.focusIndex(0);break;case a.end:this.focusIndex(this.data.length-1)}},n.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.inFocus&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),this.checkClassStates(),!0)},n.prototype.focusIndex=function(e){var t,i=this.viewIndex||0;return e>=this.data.length?(this.renderView(0),void this.focusItem(this.$body.firstChild)):e<this.size?(i=0,this.hasEmptyItems&&e>this.focusPosition&&i++,this.renderView(i),e-=i,void this.focusItem(this.mainList[e])):void(e>=i+this.focusPosition?(i=e-this.focusPosition)+this.size<this.data.length?(this.renderView(i),this.focusItem(this.mainList[this.focusPosition])):(this.data.length>=this.size?(i=this.data.length-this.size,this.hasEmptyItems&&i++,this.renderView(i)):(i=0,this.hasEmptyItems&&i++,this.renderView(i)),t=e-this.viewIndex,this.focusItem(this.mainList[t])):(i=e-this.focusPosition,this.renderView(i),t=e-i,this.focusItem(this.mainList[t])))},e.exports=n},function(e,t,i){"use strict";var s=i(1),a=i(19),n=s.tag;e.exports=function(e){var t,i,s,o,r,c=[];return e.forEach(function(e){e=a(e),i=n("div",{className:"focusWrapper"}),o=n("div",{className:"poster"}),i.appendChild(n("div",{className:"container"},o)),t=n("div",{className:"movieTitle"}),i.appendChild(t),s=n("div",{className:"blurWrapper"}),r=n("div",{className:"poster"}),s.appendChild(r),e.name=e.name||e.original_name,e.poster=e.cover,(e.censored||e.category&&e.category.censored)&&!core.accessControl.state?(o.classList.add("censored"),r.appendChild(n("div",{className:"name"},e.name)),r.classList.add("censored"),e.cover=""):e.cover||r.appendChild(n("div",{className:"name"},e.name)),t.innerText=e.name,o.style.backgroundImage=e.cover,r.style.backgroundImage=e.cover,c.push({items:[i,s],value:e})}),c}},function(e,t,i){"use strict";e.exports=function(e){var t=e.genres.map(function(e){return e.name});return e.genre=t.join(", "),e.cover?e.cover="url("+core.backend.host+e.cover+")":e.cover="",e.prepared=!0,e}},function(e,t,i){"use strict";var s=i(3),a=i(1).tag;function n(){var e="infoPanel hidden";this.$movie=a("div",{className:e},this.$title=a("div",{className:"title"}),this.$rating=a("div",{className:"ratingContainer"},this.$ratingKino=a("div",{className:"ratingKino"}),this.$ratingImdb=a("div",{className:"ratingImdb"}),this.$ageLimit=a("div",{className:"ageLimit"})),a("div",{className:"line"},a("div",{className:"leftPart"},gettext("Country:")),this.$country=a("div",{className:"rightPart"})),a("div",{className:"line"},a("div",{className:"leftPart"},gettext("Year:")),this.$year=a("div",{className:"rightPart"})),a("div",{className:"line"},a("div",{className:"leftPart"},gettext("Genre:")),this.$genre=a("div",{className:"rightPart"})),a("div",{className:"line"},a("div",{className:"leftPart"},gettext("Duration:")),this.$duration=a("div",{className:"rightPart"})),this.$description=a("div",{className:"description"})),this.$info=a("div",{className:"information"}),this.$seeMore=a("div",{className:"seeMoreContainer"},a("div",{className:"textBlock"},gettext("See more"))),this.layout=new s({focusable:!1,data:[this.$movie,this.$info,this.$seeMore],className:"rightPanel"})}n.prototype.constructor=n,n.prototype.fillMovie=function(e){var t=!1;e?(e&&(e.censored||e.category&&e.category.censored)&&!core.accessControl.state?(this.layout.$node.style.backgroundImage="",this.$movie.classList.add("censored")):this.$movie.classList.remove("censored"),this.$title.innerText=e.name,e["rating_imdb"]?(t=!0,this.$ratingImdb.innerText=e.rating_imdb,this.$ratingImdb.style.display=""):this.$ratingImdb.style.display="none",e["rating_kinopoisk"]?(t=!0,this.$ratingKino.innerText=e.rating_kinopoisk,this.$ratingKino.style.display=""):this.$ratingKino.style.display="none",e.age?(t=!0,this.$ageLimit.innerText=e.age,this.$ageLimit.style.display=""):this.$ageLimit.style.display="none",this.$rating.style.display=t?"":"none",this.$genre.innerText=e.genre,this.$country.innerText=e.country,this.$year.innerText=e["year_end"]?e.year+" - "+e["year_end"]:e.year,this.$duration.innerText=e.duration+" "+gettext("minutes"),this.$description.innerText=e.description,e.favorite?this.$movie.classList.add("inFavorite"):this.$movie.classList.remove("inFavorite")):this.layout.$node.style.backgroundImage=""},n.prototype.showInfo=function(){this.$info.classList.remove("hidden"),this.$movie.classList.add("hidden"),this.$seeMore.classList.add("hidden"),this.layout.$node.style.backgroundImage=""},n.prototype.showMovie=function(){this.$info.classList.add("hidden"),this.$movie.classList.remove("hidden"),this.$seeMore.classList.add("hidden")},n.prototype.showSeeMore=function(){this.$info.classList.add("hidden"),this.$movie.classList.add("hidden"),this.$seeMore.classList.remove("hidden")},n.prototype.clearRating=function(){this.$ratingImdb.style.display="none",this.$ratingKino.style.display="none",this.$ageLimit.style.display="none"},e.exports=n},function(e,t,i){"use strict";e.exports=i(45),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";var s=i(8),a="theme-icon theme-icon-radio",n="theme-icon theme-icon-radio-active";function o(e){var t=this;e.classIcon&&(a=e.classIcon),e.classIconActive&&(n=e.classIconActive),e.classChecked&&(a=e.classChecked),this.checkedData=null,this.checkedIndex=null,s.call(this,e),this.addListener("click:item",function(e){var i=e.$item,s=t.checkedData;t.checkIndex(i.index),s!==i.data&&t.emit("select",i)})}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-radio-list",o.prototype.init=function(e){e=e||{},s.prototype.init.call(this,e)},o.prototype.setData=function(e){s.prototype.setData.call(this,e),this.defaultCheckedIndex=this.checkedIndex,this.$focusItem?this.defaultFocusIndex=this.$focusItem.index:this.defaultFocusIndex=0},o.prototype.resetData=function(){this.checkIndex(this.defaultCheckedIndex),this.focusIndex(this.defaultFocusIndex)},o.prototype.clearChecked=function(e){for(var t=0;t<this.data.length;t++)this.data[t].state=!1;e||0===e||(e=this.$focusItem?this.$focusItem.index:0),this.setData({data:this.data,focusIndex:e})},o.prototype.renderItemDefault=function(e,t){var i,s,o,r;e.ready?(e.$title.innerText=t.title||"",t.state?(e.classList.add("checked"),e.checkBox.className=n):(e.classList.remove("checked"),e.checkBox.className=a),e.state=t.state,e.value=t.value):(e.innerHTML="",i=document.createElement("table"),s=document.createElement("tr"),o=document.createElement("td"),r=document.createElement("div"),t.state?(e.classList.add("checked"),r.className=n):(e.classList.remove("checked"),r.className=a),i.appendChild(s),o.appendChild(r),o.className="checkBoxWrapper",s.appendChild(o),(o=document.createElement("td")).className="title",o.innerText=t.title||"",s.appendChild(o),e.checkBox=r,e.state=t.state,e.value=t.value,e.$title=o,e.appendChild(i),t.state&&(this.checkedData=t,this.checkedIndex=e.index),e.ready=!0)},o.prototype.checkIndex=function(e){var t;e!==this.checkedIndex&&(null!==this.checkedIndex&&this.$node.children.length&&(this.data[this.checkedIndex].state=!1,(t=this.getItemNodeByIndex(this.checkedIndex))&&(t.checkBox.className=a,t.classList.remove("checked"))),(t=this.getItemNodeByIndex(e))&&(t.checkBox.className=n,t.classList.add("checked"),t.state=!0),this.data[e].state=!0,this.checkedData=this.data[e],this.checkedIndex=e)},o.prototype.getItemNodeByIndex=function(e){var t=this.$node.children;return(e-=this.viewIndex)<this.size&&e>=0?t[e]:null},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t){e.exports=[{"name":"Abkhaz","local":"Аҧсуа",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{"name":"Afar","local":"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{"name":"Afrikaans","local":"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{"name":"Akan","local":"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{"name":"Albanian","local":"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{"name":"Amharic","local":"አማርኛ",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{"name":"Arabic","local":"العربية",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{"name":"Aragonese","local":"Aragonés",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{"name":"Armenian","local":"Հայերեն",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{"name":"Assamese","local":"অসমীয়া",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{"name":"Avaric","local":"Авар",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{"name":"Avestan","local":"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{"name":"Aymara","local":"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{"name":"Azerbaijani","local":"Azərbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{"name":"Bambara","local":"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{"name":"Bashkir","local":"Башҡортса",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{"name":"Basque","local":"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{"name":"Belarusian","local":"Беларуская",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{"name":"Bengali","local":"বাংলা",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{"name":"Bihari","local":"भोजपुरी",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{"name":"Bislama","local":"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{"name":"Bosnian","local":"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{"name":"Breton","local":"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{"name":"Bulgarian","local":"Български",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{"name":"Burmese","local":"မြန်မာဘာသာ",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{"name":"Catalan","local":"Català",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{"name":"Chamorro","local":"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{"name":"Chechen","local":"Нохчийн",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{"name":"Chichewa","local":"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{"name":"Chinese","local":"中文",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{"name":"Chuvash","local":"Чӑвашла",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{"name":"Cornish","local":"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{"name":"Corsican","local":"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{"name":"Cree","local":"ᓀᐦᐃᔭᐍᐏᐣ",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{"name":"Croatian","local":"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{"name":"Czech","local":"Čeština",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{"name":"Danish","local":"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{"name":"Divehi","local":"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{"name":"Dutch","local":"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{"name":"Dzongkha","local":"རྫོང་ཁ",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{"name":"English","local":"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{"name":"Esperanto","local":"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{"name":"Estonian","local":"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{"name":"Ewe","local":"Eʋegbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{"name":"Faroese","local":"Føroyskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{"name":"Fijian","local":"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{"name":"Finnish","local":"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{"name":"French","local":"Français",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{"name":"Fula","local":"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{"name":"Galician","local":"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{"name":"Georgian","local":"ქართული",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{"name":"German","local":"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{"name":"Greek","local":"Ελληνικά",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{"name":"Guaraní","local":"Avañe'ẽ",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{"name":"Gujarati","local":"ગુજરાતી",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{"name":"Haitian","local":"Kreyòl Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{"name":"Hausa","local":"هَوُسَ",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{"name":"Hebrew","local":"עברית",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{"name":"Herero","local":"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{"name":"Hindi","local":"हिन्दी",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{"name":"Hiri Motu","local":"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{"name":"Hungarian","local":"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{"name":"Interlingua","local":"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{"name":"Indonesian","local":"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{"name":"Interlingue","local":"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{"name":"Irish","local":"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{"name":"Igbo","local":"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{"name":"Inupiaq","local":"Iñupiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{"name":"Ido","local":"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{"name":"Icelandic","local":"Íslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{"name":"Italian","local":"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{"name":"Inuktitut","local":"ᐃᓄᒃᑎᑐᑦ",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{"name":"Japanese","local":"日本語",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{"name":"Javanese","local":"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{"name":"Kalaallisut","local":"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{"name":"Kannada","local":"ಕನ್ನಡ",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{"name":"Kanuri","local":"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{"name":"Kashmiri","local":"كشميري",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{"name":"Kazakh","local":"Қазақша",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{"name":"Khmer","local":"ភាសាខ្មែរ",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{"name":"Kikuyu","local":"Gĩkũyũ",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{"name":"Kinyarwanda","local":"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{"name":"Kyrgyz","local":"Кыргызча",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{"name":"Komi","local":"Коми",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{"name":"Kongo","local":"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{"name":"Korean","local":"한국어",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{"name":"Kurdish","local":"Kurdî",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{"name":"Kwanyama","local":"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{"name":"Latin","local":"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{"name":"Luxembourgish","local":"Lëtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{"name":"Ganda","local":"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{"name":"Limburgish","local":"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{"name":"Lingala","local":"Lingála",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{"name":"Lao","local":"ພາສາລາວ",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{"name":"Lithuanian","local":"Lietuvių",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{"name":"Luba-Katanga","local":"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{"name":"Latvian","local":"Latviešu",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{"name":"Manx","local":"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{"name":"Macedonian","local":"Македонски",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{"name":"Malagasy","local":"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{"name":"Malay","local":"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{"name":"Malayalam","local":"മലയാളം",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{"name":"Maltese","local":"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{"name":"Māori","local":"Māori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{"name":"Marathi","local":"मराठी",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{"name":"Marshallese","local":"Kajin M̧ajeļ",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{"name":"Mongolian","local":"Монгол",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{"name":"Nauru","local":"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{"name":"Navajo","local":"Diné Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{"name":"Northern Ndebele","local":"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{"name":"Nepali","local":"नेपाली",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{"name":"Ndonga","local":"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{"name":"Norwegian Bokmål","local":"Norsk (Bokmål)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{"name":"Norwegian Nynorsk","local":"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{"name":"Norwegian","local":"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{"name":"Nuosu","local":"ꆈꌠ꒿ Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{"name":"Southern Ndebele","local":"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{"name":"Occitan","local":"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{"name":"Ojibwe","local":"ᐊᓂᔑᓈᐯᒧᐎᓐ",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{"name":"Old Church Slavonic","local":"Словѣ́ньскъ",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{"name":"Oromo","local":"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{"name":"Oriya","local":"ଓଡି଼ଆ",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{"name":"Ossetian","local":"Ирон æвзаг",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{"name":"Panjabi","local":"ਪੰਜਾਬੀ",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{"name":"Pāli","local":"पाऴि",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{"name":"Persian","local":"فارسی",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{"name":"Polish","local":"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{"name":"Pashto","local":"پښتو",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{"name":"Portuguese","local":"Português",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{"name":"Quechua","local":"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{"name":"Romansh","local":"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{"name":"Kirundi","local":"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{"name":"Romanian","local":"Română",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{"name":"Russian","local":"Русский",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{"name":"Sanskrit","local":"संस्कृतम्",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{"name":"Sardinian","local":"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{"name":"Sindhi","local":"سنڌي‎",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{"name":"Northern Sami","local":"Sámegiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{"name":"Samoan","local":"Gagana Sāmoa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{"name":"Sango","local":"Sängö",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{"name":"Serbian","local":"Српски",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{"name":"Gaelic","local":"Gàidhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{"name":"Shona","local":"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{"name":"Sinhala","local":"සිංහල",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{"name":"Slovak","local":"Slovenčina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{"name":"Slovene","local":"Slovenščina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{"name":"Somali","local":"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{"name":"Southern Sotho","local":"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{"name":"Spanish","local":"Español",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{"name":"Sundanese","local":"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{"name":"Swahili","local":"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{"name":"Swati","local":"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{"name":"Swedish","local":"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{"name":"Tamil","local":"தமிழ்",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{"name":"Telugu","local":"తెలుగు",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{"name":"Tajik","local":"Тоҷикӣ",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{"name":"Thai","local":"ภาษาไทย",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{"name":"Tigrinya","local":"ትግርኛ",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{"name":"Tibetan Standard","local":"བོད་ཡིག",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{"name":"Turkmen","local":"Türkmençe",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{"name":"Tagalog","local":"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{"name":"Tswana","local":"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{"name":"Tonga","local":"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{"name":"Turkish","local":"Türkçe",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{"name":"Tsonga","local":"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{"name":"Tatar","local":"Татарча",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{"name":"Twi","local":"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{"name":"Tahitian","local":"Reo Mā’ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{"name":"Uyghur","local":"ئۇيغۇرچه",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{"name":"Ukrainian","local":"Українська",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{"name":"Urdu","local":"اردو",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{"name":"Uzbek","local":"O‘zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{"name":"Venda","local":"Tshivenḓa",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{"name":"Vietnamese","local":"Tiếng Việt",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{"name":"Volapük","local":"Volapük",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{"name":"Walloon","local":"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{"name":"Welsh","local":"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{"name":"Wolof","local":"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{"name":"Western Frisian","local":"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{"name":"Xhosa","local":"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{"name":"Yiddish","local":"ייִדיש",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{"name":"Yoruba","local":"Yorùbá",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{"name":"Zhuang","local":"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{"name":"Zulu","local":"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}]},function(e,t,i){"use strict";var s=i(1).tag;e.exports=function(){var e={};return e.$body=s("div",{className:"infoBlock"},e.$title=s("div",{className:"title"}),e.$panel=s("div",{className:"infoContainer"},e.$country=s("div",{className:"country"}),s("div",{className:"ratingContainer"},e.$ratingKino=s("div",{className:"ratingKino"}),e.$ratingImdb=s("div",{className:"ratingImdb"}),e.$censor=s("div",{className:"ageLimit"})),s("div",{className:"info"},s("div",{className:"line"},s("div",{className:"left"},s("span",{},gettext("Director:")+" "),e.$director=s("div"))),s("div",{className:"line double"},s("div",{className:"left"},s("span",{},gettext("Cast:")),e.$actors=s("div")))),e.$description=s("div",{className:"description"})),s("div",{className:"posterContainer"},e.$img=s("div",{className:"poster"}))),e.$info=s("div",{className:"information"}),e}},function(e,t,i){"use strict";i(0);var s=i(2);s.once("load",function(){s.api=core.plugins.videoBackend,i(34).load({name:core.environment.language},function(e){s.pages={main:i(36),movies:i(40),info:i(48),more:i(58)},s.route(s.pages.main)})})},function(e,t,i){"use strict";var s=i(4),a=i(15);window.core=window.parent.getCoreInstance(window,s),i(29),i(30),i(16)("sdk"),i(32),i(16)("app"),s.platform="mag",s.ready=function(){window.core.call("app:ready")},s.exit=function(){s.events["exit"]&&s.emit("exit"),core.call("exit")},a.load=function(e){document.body.setAttribute("platform",s.platform),core.ready?s.events["load"]&&s.emit("load",{}):core.once("load",function(){s.events[e.type]&&s.emit(e.type,e)})},a.contextmenu=function(e){e.preventDefault()},Object.keys(a).forEach(function(e){window.addEventListener(e,a[e])}),e.exports=s},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={types:{file:1,season:2,series:3},delay:{modalShow:100}}},function(e,t,i){"use strict";if(!document.documentElement.classList){var s=Array.prototype,a=s.indexOf,n=s.slice,o=s.push,r=s.splice,c=s.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=n.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(r.call(this,t,1),this._element.className=n.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var s=i(4),a=i(31);s.metrics=a[s.query.screenHeight]||a[screen.height]||a[720],s.metrics.availHeight=s.metrics.height-(s.metrics.availTop+s.metrics.availBottom),s.metrics.availWidth=s.metrics.width-(s.metrics.availLeft+s.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,grid:{lineSize:5,lineCache:3,lineCount:7,size:3,cache:3},moviesGrid:{cache:5,x:5,y:3},modal:{size:9},buttonList:{size:5},seasonsList:{size:5},seriesList:{size:7},screenList:{size:4},infoSroll:{screen:350,season:850}},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,grid:{lineSize:5,lineCache:3,lineCount:7,size:3,cache:3},moviesGrid:{cache:5,x:5,y:3},modal:{size:11},buttonList:{size:5},seasonsList:{size:5},seriesList:{size:7},screenList:{size:4},infoSroll:{screen:350,season:850}},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,grid:{lineSize:5,lineCache:3,lineCount:7,size:3,cache:3},moviesGrid:{cache:5,x:5,y:3},modal:{size:13},buttonList:{size:5},seasonsList:{size:5},seriesList:{size:7},screenList:{size:5},infoSroll:{screen:440,season:960}},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,grid:{lineSize:5,lineCache:3,lineCount:7,size:3,cache:3},moviesGrid:{cache:5,x:5,y:3},modal:{size:13},buttonList:{size:5},seasonsList:{size:5},seriesList:{size:7},screenList:{size:5},infoSroll:{screen:660,season:1440}}}},function(e,t,i){"use strict";var s,a=i(4);(s=document.createElement("link")).rel="stylesheet",s.href=window.core.theme.path+a.metrics.height+".css",document.head.appendChild(s),e.exports=s},function(e,t,i){"use strict";var s={timer:0,pressed:!1,fired:!1},a=600;e.exports=function(e,t){var i=t.code,n=t.emitCode;function o(t,i){var s,a,n=e.activePage,o={code:t.keyCode,stop:!1};s=(i=i||{}).type||t.type,t.ctrlKey&&(o.code+="c"),t.altKey&&(o.code+="a"),t.shiftKey&&(o.code+="s"),i.code&&(o.code=i.code),(a=n.activeComponent)&&a!==n&&(a.events[s]&&a.emit(s,o,t),!o.stop&&a.propagate&&a.parent&&a.parent.events[t.type]&&a.parent.emit(s,o,t)),o.stop||(n.events[s]&&n.emit(s,o,t),t.stop||e.events[s]&&e.emit(s,o,t))}window.addEventListener("keydown",function(t){e.activePage,t.keyCode!==i||s.pressed?t.keyCode!==i&&o(t):(s.fired&&(s.fired=!1),s.pressed=!0,clearTimeout(s.timer),s.timer=setTimeout(function(){o(t,{code:n}),s.fired=!0},a))}),window.addEventListener("keyup",function(e){e.keyCode===i&&(!s.fired&&s.pressed&&(clearTimeout(s.timer),o(e,{type:"keydown"})),s.pressed=!1)})}},function(e,t,i){"use strict";var s=i(10),a=i(35),n=new s;function o(e){var t=new a(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}n.defaultLanguage="en",n.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===n.defaultLanguage?(o(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{o(JSON.parse(i.responseText)),t(null),n.events["load"]&&n.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){o(),t(e),n.events["error"]&&n.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=n},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var s,a,n,o,r,c,l,h,d,u=i(6),f=i(1),m=i(0),p=i(3),v=i(2),g=i(38),y={prepareMainMovies:i(39),prepareMovieData:i(19),toggleFavorite:i(9)},b=i(20),x=i(11),k={},$=new u({$node:document.getElementById("pageMain")});function w(e){var t={},i=e.$item.value;i?(i.censored||i.category&&i.category.censored)&&!core.accessControl.state?core.accessControl.request(function(e){e||v.route(v.pages.info,{info:i,type:"main"})}):v.route(v.pages.info,{info:i,type:"main"}):(t=o.data[o.focusLine.index],v.route(v.pages.movies,t))}function I(){this.emit("focus:item",{$prev:null,$curr:this.$focusItem})}function L(e){clearTimeout(k.info),k.info=setTimeout(function(){e.$curr&&(e.$curr.value?(s.showMovie(),s.fillMovie(e.$curr.data.value)):s.showSeeMore())},core.environment.onFocusDebounceTimeout)}function T(e){var t={},i=this;this.query&&(Object.keys(this.query).forEach(function(e){i.query[e]&&(t[e]=i.query[e])}),this.query.favorite&&(c=this),this.query["not_ended"]&&(l=this)),t.limit=v.metrics.grid.lineCount+v.metrics.grid.lineCache+1,v.api.getList(t,function(t,s){e(t?[]:y.prepareMainMovies(s,i.title))})}function B(){var e=o.focusLine.$focusItem.value;e.favorite?s.$movie.classList.remove("inFavorite"):s.$movie.classList.add("inFavorite"),y.toggleFavorite(e)}function C(e){var t,i={data:[],focusIndex:0};for(e=e.data,r=e.slice(),t=0;t<e.length;t++)e[t].query.search=n,i.data.push({events:{"focus:item":L,"click:item":w,focus:I},title:e[t].name,getter:T,size:v.metrics.grid.lineSize,bufferSize:v.metrics.grid.lineCache,query:e[t].query,hasEmptyItems:!0,render:x,cycle:!0,focusIndex:0});o.setData(i)}s=new b,d=new p({focusable:!0,data:[{className:"theme-icon theme-icon-rc-f3"},{className:"favoriteTitle add",value:gettext("Add to favorites")},{className:"favoriteTitle remove",value:gettext("Remove from favorites")}],className:"favoriteBlock",events:{click:B}}),s.$movie.appendChild(d.$node),a=new p({data:[f.tag("div",{className:"searchFocus"},f.tag("div",{className:"searchIcon"})),{name:"$text",value:gettext("Search for movies, series and TV shows"),className:"searchText noData"}],className:"searchBlock",events:{focus:function(){s.showInfo(),s.$info.innerText=gettext("Find your favorite movies, series and TV shows by title or by genre")},click:function(){core.intent({action:"keyboard",data:{value:n||"",title:gettext("Search for movies, series and TV shows")},events:{done:function(e){e.value?(a.$body.classList.add("searchActive"),a.links.$text.innerText=e.value,a.links.$text.classList.remove("noData"),n=e.value):(a.$body.classList.remove("searchActive"),a.links.$text.innerText=gettext("Search for movies, series and TV shows"),a.links.$text.classList.add("noData"),n=""),C({data:r})}}},function(e){}),event.stop=!0},keydown:function(e){switch(e.code){case m.down:o.focus(),e.stop=!0;break;case m.enter:this.events["click"]&&this.emit("click"),e.stop=!0}}}}),(o=new g({events:{focus:function(){o.data.length?s.showInfo():a.focus()},"focus:line":function(e){0===e.$curr.index?a.show():1===e.$curr.index&&a.hide()},overflow:function(e){e.direction===m.up&&a.focus()},keydown:function(e){switch(e.code){case m.f3:B(),e.stop=!0;break;default:g.prototype.defaultEvents.keydown.call(this,e)}}},size:3,bufferSize:3,focusPosition:1,emptyItems:!0,className:"mainPanel",noData:gettext("No results found.")})).addListener("data:load",function(){o.data.length&&o.focus(),v.ready()}),(h=new p({focusable:!1,data:[a,o],className:"mainPanel"})).$node.appendChild(f.tag("div",{className:"shadow"})),$.add(h),$.add(s.layout),$.once("show",function(){v.api.getSections(function(e,t){e||C(t)}),s.clearRating()}),$.addListeners({keydown:function(e){switch(e.code){case m.back:n?(a.$body.classList.remove("searchActive"),a.links.$text.innerText=gettext("Search for movies, series and TV shows"),a.links.$text.classList.add("noData"),n="",C({data:r})):v.exit()}},"change:watched":function(e){function t(t){t.value.id===e.id&&(t.value["watched_time"]=e["watched_time"],t.value["watched_status"]=e["watched_status"],t.value["last_watched_file_id"]=e["last_watched_file_id"])}l.listLink&&l.listLink.data.length?l.listLink.refreshData():l.getter(function(e){l.data=e,l.data.length?-1===o.data.indexOf(l)&&o.insert(l,-1===o.data.indexOf(c)?o.data.length:o.data.length-1):-1!==o.data.indexOf(l)&&o.removeItem(l)}),o.data.forEach(function(e){e.data.forEach(t)})}}),v.addListener("change:favorite",function(e){var t=e.video;function i(e){e.value.id===t.id&&e.value.favorite!==t.favorite&&(e.value.favorite=t.favorite)}t===o.focusLine.$focusItem.value&&(t.favorite?s.$movie.classList.add("inFavorite"):s.$movie.classList.remove("inFavorite")),e.error||(c.listLink&&c.listLink.data.length?c.listLink.refreshData():c.getter(function(e){c.data=e,c.data.length?-1===o.data.indexOf(c)&&o.insert(c,o.data.length):-1!==o.data.indexOf(c)&&o.removeItem(c)}),o.data.forEach(function(e){e.data.forEach(i)}))}),core.addListener("intent",function(e,t){if("videoClub"===e.action)switch(e.mime){case"info":e.data?(v.pages.info===v.activePage?v.pages.info.emit("show",{data:{info:e.data.prepared?e.data:y.prepareMovieData(e.data),type:"intent",callback:t}}):v.route(v.pages.info,{info:e.data.prepared?e.data:y.prepareMovieData(e.data),type:"intent",callback:t}),t(!1)):t(!0);break;default:v.route(v.pages.main),t(!1)}}),e.exports=$},function(e,t,i){"use strict";var s=i(5);function a(e){e=e||{},this.active=!1,this.activeComponent=null,s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-page",e.exports=a},function(e,t,i){"use strict";var s=i(7),a=i(17),n=i(0);function o(e){var t=this;e=e||{},this.focusLine=null,this.data=[],this.bufferBefore=[],this.mainList=[],this.bufferAfter=[],this.size=3,this.bufferSize=1,this.hasEmptyItems=e.hasEmptyItems||!0,this.dataReady=!1,e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(this.$body),this.$noData=document.createElement("div"),this.$noData.className="noData hidden",this.$node.appendChild(this.$noData),this.init(e),this.inFocus=!1,this.addListener("focus",function(){t.focusLine&&t.focusLine.focus(),t.inFocus=!0}),this.addListener("blur",function(){t.inFocus=!1})}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-grid",o.prototype.insertBefore=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.unshift(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.insertBefore(e.$node,this.$body.firstChild),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.init=function(e){var t=this;e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.bufferSize&&(this.bufferSize=e.bufferSize),e.events&&Object.keys(e.events).forEach(function(i){t.events[i]=null,t.addListener(i,e.events[i])}),this.focusPosition=e.focusPosition||Math.ceil(this.size/2),this.startIndex=0,this.setData(e)},o.prototype.createItem=function(e,t){var i;return e instanceof s?i=e:(e.propagate=!0,i=new a(e),e.listLink=i,i.query=e,i.addListener("remove",function(){e.listLink=null})),i.index=t,i.hide(),i.parent=this,i},o.prototype.getItemData=function(e,t){e.data&&e.data.length?t(e.data):e.getter?e.getter(function(i){e.data=i,t(e.data)}):t()},o.prototype.renderItemDefault=function(e,t){e.innerText=t.value},o.prototype.renderItem=o.prototype.renderItemDefault,o.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaX&&this.move(e.wheelDeltaY>0?n.up:n.down)},keydown:function(e){if(!e.stop)switch(e.code){case n.down:case n.up:e.stop=!0,this.move(e.code);break;case n.enter:e.stop=!0,this.events["click:item"]&&this.focusLine&&this.emit("click:item",{$item:this.focusLine,event:e})}}},o.prototype.insert=function(e,t){var i,s,a,n,o=this;function r(e){var t;for(t=0;t<o.bufferBefore.length;t++)o.bufferBefore[t].index=e,e++;for(t=0;t<o.mainList.length;t++)o.mainList[t].index=e,e++;for(t=0;t<o.bufferAfter.length;t++)o.bufferAfter[t].index=e,e++}if(0!==this.data.length&&0!==this.mainList.length){if(this.focusLine){if(a=this.focusLine,t||(t=0),this.data.length>t&&(t=this.data.length),this.data.splice(t,0,e),i=this.bufferBefore.length?this.bufferBefore[0].index:this.mainList[0].index,this.mainList[0].index>t){if(!this.bufferBefore.length)return s=this.createItem(e,t),this.bufferBefore.unshift(s),this.insertBefore(s),r(0),void this.viewIndex++;if(this.bufferBefore[0].index>=t)return this.viewIndex++,void r(++this.bufferBefore[0].index);if(this.bufferBefore[0].index<t)return s=this.createItem(e,t),n=t-this.bufferBefore[0].index,this.$body.insertBefore(s,this.bufferBefore[n].$node),this.bufferBefore.splice(n,0,s),r(i),this.viewIndex++,void(this.bufferBefore.length>this.bufferSize&&(s=this.bufferBefore.shift()).remove())}if(this.mainList[this.mainList.length-1].index<t&&(this.mainList.length>=this.size||this.hasEmptyItems&&this.mainList.length>=this.size-1)){if(this.bufferAfter.length){if(this.bufferAfter[0].index+this.bufferSize<=t)return;this.bufferAfter[this.bufferAfter.length-1].index>=t?(s=this.createItem(e,t),n=t-this.bufferAfter[this.bufferAfter.length-1].index,this.$body.insertBefore(s,this.bufferAfter[n].$node),this.bufferAfter.splice(n,0,s)):(s=this.createItem(e,t),this.add(s),this.bufferAfter.push(s)),this.bufferAfter.length>this.bufferSize&&(s=this.bufferAfter.pop()).remove()}else s=this.createItem(e,t),this.add(s),this.mainList.length<this.size?(s.show(),this.mainList.push(s)):(s.hide(),this.bufferAfter.push(s));return r(i),void this.checkClassStates()}(s=this.createItem(e,t)).show(),n=t-this.mainList[0].index,this.mainList.length>n?(this.$body.insertBefore(s,this.mainList[n].$node),this.mainList.splice(n,0,s)):(this.add(s),this.mainList.push(s)),t<=a.index?((s=this.mainList.shift()).hide(),this.bufferBefore.push(s),r(i),this.viewIndex++,this.bufferBefore.length>this.bufferSize&&(s=this.bufferBefore.shift()).remove(),this.focusToLine(this.mainList[this.focusPosition])):this.mainList.length>this.size&&((s=this.mainList.pop()).hide(),this.bufferAfter.unshift(s),this.bufferAfter.length>this.bufferSize&&(s=this.bufferAfter.pop()).remove()),r(i),this.checkClassStates()}}else this.setData({data:e})},o.prototype.checkClassStates=function(){this.hasEmptyItems&&(this.focusLine.index<this.focusPosition?this.$node.classList.remove("noEmptyBefore"):this.$node.classList.add("noEmptyBefore"),this.size<=this.mainList.length?this.$node.classList.remove("emptyAfter"):this.$node.classList.add("emptyAfter"))},o.prototype.removeItem=function(e){var t,i,s,a,o,r=this.focusLine===e.listLink,c=e.listLink,l=this,h=0,d=0;function u(e){for(d=0,e||0===e?d=e:l.bufferBefore.length&&(d=l.bufferBefore[0].index),o=0;o<l.bufferBefore.length;o++)l.bufferBefore[o].index=d,d++;for(o=0;o<l.mainList.length;o++)l.mainList[o].index=d,d++;for(o=0;o<l.bufferAfter.length;o++)l.bufferAfter[o].index=d,d++}function f(){for(a=l.bufferSize-l.bufferAfter.length,o=0;o<a&&(c=l.bufferAfter[l.bufferAfter.length-1])&&(h=c.index,!(++h>=l.data.length));o++)c=l.createItem(l.data[h],h),l.add(c),l.bufferAfter.push(c)}if(-1!==(i=this.data.indexOf(e)))if(this.data.splice(i,1),c){if(-1!==(t=this.bufferBefore.indexOf(c)))return h=this.bufferBefore[0].index,this.bufferBefore.splice(t,1),c.remove(),u(),void this.viewIndex--;if(-1!==(t=this.bufferAfter.indexOf(c)))return this.bufferAfter.splice(t,1),c.remove(),f(),u(),void((h=this.bufferBefore.length?this.bufferBefore[0].index:0)>0&&(h--,(s=this.createItem(this.data[h],h)).hide(),this.insertBefore(s),this.bufferBefore.unshift(s)));-1!==(t=this.mainList.indexOf(c))&&(this.mainList.splice(t,1),t<this.focusPosition?(this.bufferBefore.length&&(h=this.bufferBefore.length?this.bufferBefore[0].index:0,s=this.bufferBefore.pop(),this.mainList.unshift(s),s.show()),h>0&&(this.viewIndex--,h--,(s=this.createItem(this.data[h],h)).hide(),this.insertBefore(s),this.bufferBefore.unshift(s))):(this.bufferAfter.length&&(s=this.bufferAfter.shift(),this.mainList.push(s),s.show(),f()),r&&(t<this.mainList.length?this.focusToLine(this.mainList[t]):this.move(n.up))),c.remove(),u(),this.checkClassStates())}else{if(this.bufferBefore.length)d=this.bufferBefore[0].index;else{if(!this.mainList.length)return;d=this.mainList[0].index}d<i&&d>0&&(this.viewIndex--,u(--d),this.checkClassStates())}},o.prototype.setData=function(e){e.data&&(this.data=e.data,this.$node.classList.remove("noEmptyBefore"),this.$node.classList.remove("emptyAfter")),this.viewIndex=null,this.focusLine&&this.blurLine(this.focusLine),e.noData&&(this.$noData.innerText=e.noData),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.initView(0)},o.prototype.initView=function(e,t){var i,s,a=0,n=0,o=0,r=[],c=this;function l(){i=c.createItem(c.data[e],e),c.add(i),r.push(i),e++,s()}if(s=function(){c.data.length<=e||e>=n?function(){var e;for(e=0;e<r.length;e++)a>e?(r[e].hide(),c.bufferBefore.push(r[e])):o>e?(r[e].show(),c.mainList.push(r[e])):(r[e].hide(),c.bufferAfter.push(r[e]));r=[],e<c.data.length?setTimeout(function(){c.getItemData(c.data[e],function t(i){i&&i.length?++e<c.data.length?c.getItemData(c.data[e],t):c.dataReady=!0:(c.data.splice(e,1),e<c.data.length?c.getItemData(c.data[e],t):c.dataReady=!0)})},500):c.dataReady=!0,t&&t(),c.mainList.length?(c.$noData.classList.add("hidden"),c.$body.classList.remove("hidden")):(c.$body.classList.add("hidden"),c.$noData.classList.remove("hidden")),c.emit("data:load")}():c.data[e].data?c.data[e].data.length?l():(c.data.splice(e,1),n=c.data.length>n?n:c.data.length,s()):c.data[e].getter?c.data[e].getter(function(t){c.data[e].data=t,c.data[e].data.length?l():(c.data.splice(e,1),n=c.data.length>n?n:c.data.length,s())}):(c.data.splice(e,1),n=c.data.length>n?n:c.data.length,s())},this.viewIndex===e)return!0;for(;this.bufferBefore.length;)this.bufferBefore[0].remove(),this.bufferBefore.shift();for(;this.mainList.length;)this.mainList[0].remove(),this.mainList.shift();for(;this.bufferAfter.length;)this.bufferAfter[0].remove(),this.bufferAfter.shift();return this.viewIndex=e||0,this.startIndex=this.viewIndex-this.bufferSize,this.startIndex<0&&(o=Math.abs(this.startIndex),this.startIndex=0),e=this.startIndex,a=this.bufferSize-o,o=a+this.size,n=2*this.bufferSize+this.size,n=this.data.length>n?n:this.data.length,0===this.startIndex&&this.hasEmptyItems&&(this.viewIndex>0&&this.data.length>this.size&&this.$node.classList.add("noEmptyBefore"),this.viewIndex+this.size>=this.data.length&&this.$node.classList.add("emptyAfter"),o--),s(),!1},o.prototype.move=function(e){var t,i,s,a,o;if(this.data.length&&this.focusLine)switch(e){case n.up:this.focusLine.index>0?(this.bufferBefore.length&&this.focusLine.index<=this.viewIndex+this.focusPosition?(o=this.bufferBefore[0].index,o--,this.hasEmptyItems&&this.$node.classList.remove("emptyAfter"),this.viewIndex--,t=this.bufferBefore.pop(),this.hasEmptyItems&&1===this.focusLine.index&&this.$node.classList.remove("noEmptyBefore"),t.show(),this.mainList.unshift(t),this.size<this.mainList.length&&(t=this.mainList.pop(),this.bufferAfter.unshift(t),t.hide()),this.bufferAfter.length>this.bufferSize&&(t=this.bufferAfter.pop()).remove(),o>=0&&(t=this.createItem(this.data[o],o),this.insertBefore(t),this.bufferBefore.unshift(t))):this.hasEmptyItems&&this.$node.classList.remove("noEmptyBefore"),a=this.focusLine.index>this.focusPosition?this.focusLine.index-this.viewIndex-1:this.focusLine.index-1,this.focusToLine(this.mainList[a])):this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:!1});break;case n.down:if(!this.dataReady)return;if(this.focusLine.index<this.data.length-1){if(this.hasEmptyItems&&this.focusLine.index===this.focusPosition-1)for(this.$node.classList.add("noEmptyBefore"),this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.show()),s=this.bufferSize-this.bufferAfter.length,i=0;i<s&&(t=this.bufferAfter[this.bufferAfter.length-1])&&(o=t.index,!(++o>=this.data.length));i++)t=this.createItem(this.data[o],o),this.add(t),this.bufferAfter.push(t);else this.focusLine.index>=this.focusPosition&&this.bufferAfter.length>0?(this.hasEmptyItems&&1===this.bufferAfter.length&&this.$node.classList.add("emptyAfter"),this.viewIndex++,(t=this.mainList.shift()).hide(),this.bufferBefore.push(t),this.bufferBefore.length>this.bufferSize&&(t=this.bufferBefore.shift()).remove(),this.size-this.mainList.length&&this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.show()),this.bufferAfter.length&&this.bufferSize>this.bufferAfter.length&&(o=this.bufferAfter[this.bufferAfter.length-1].index,++o<this.data.length&&(t=this.createItem(this.data[o],o),this.add(t),this.bufferAfter.push(t)))):this.hasEmptyItems&&!this.bufferAfter.length&&(this.$node.classList.add("emptyAfter"),this.mainList.length>=this.size&&(this.viewIndex++,(t=this.mainList.shift()).hide(),this.bufferBefore.push(t),this.bufferBefore.length>this.bufferSize&&(t=this.bufferBefore.shift()).remove(),this.size-this.mainList.length&&this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.show())));a=this.mainList[0].index-this.focusLine.index+1,this.focusToLine(this.mainList[a])}else this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:!1})}},o.prototype.focusToLine=function(e){var t=this.focusLine;return!(!e||t===e)&&(null!==t&&(t.blur(),this.events["blur:line"]&&this.emit("blur:line",{$item:t})),this.focusLine=e,this.inFocus&&(e.focus(),this.inFocus=!0,this.events["focus:line"]&&this.emit("focus:line",{$prev:t,$curr:e})),!0)},o.prototype.blurLine=function(e){return!!e&&(e===this.focusLine&&(this.focusLine=null),e.blur(),this.events["blur:line"]&&this.emit("blur:line",{$item:e}),!0)},o.prototype.focusIndex=function(e){var t,i=this.viewIndex||0,s=this;e>=this.data.length?this.initView(0,function(){s.focusToLine(s.$body.firstChild)}):e>=i+this.focusPosition?(i=e-this.focusPosition)+this.size<this.data.length?this.initView(i,function(){s.focusToLine(s.mainList[s.focusPosition])}):(t=this.size-this.data.length+e,i=this.data.length-this.size,this.hasEmptyItems&&(t--,i++),this.initView(i,function(){s.focusToLine(s.mainList[t])})):(t=e-this.focusPosition)<0?this.initView(0,function(){s.focusToLine(s.mainList[e])}):this.initView(t,function(){s.focusToLine(s.mainList[s.focusPosition])})},e.exports=o},function(e,t,i){"use strict";var s=i(1),a=i(2),n=i(18),o=s.tag;e.exports=function(e){var t,i,s,r,c=[];return a.metrics.grid.lineCount<e.length?(r=!0,s=a.metrics.grid.lineCount):s=e.length,e&&e.length&&(c=n(e.slice(0,s)),r&&(t=o("div",{className:"focusWrapper"},o("div",{className:"container"},o("div",{className:"poster seeMore"})),o("div",{className:"movieTitle"},gettext("See more"))),i=o("div",{className:"blurWrapper"},o("div",{className:"poster seeMore"})),c.push({items:[t,i],value:!1}))),c}},function(e,t,i){"use strict";var s,a,n,o,r,c,l,h,d,u,f=i(6),m=i(1),p=i(0),v=i(12),g=i(3),y=i(2),b=i(13),x=i(43),k=i(22),$={initYears:i(46),prepareMovies:i(18),toggleFavorite:i(9)},w=i(20),I=i(47),L=new f({$node:document.getElementById("pageMovies")}),T={},B={},C=!1;function z(e,t){y.api.getList(t,function(t,i,s){e(t,$.prepareMovies(i),s)})}function N(){s.$focusItem.value.favorite?h.$movie.classList.remove("inFavorite"):h.$movie.classList.add("inFavorite"),$.toggleFavorite(s.$focusItem.value)}h=new w,u=new g({focusable:!0,data:[{className:"theme-icon theme-icon-rc-f3"},{className:"favoriteTitle add",value:gettext("Add to favorites")},{className:"favoriteTitle remove",value:gettext("Remove from favorites")}],className:"favoriteBlock",events:{click:N}}),h.$movie.appendChild(u.$node),a=new g({data:[m.tag("div",{className:"searchFocus"},m.tag("div",{className:"searchIcon"})),{name:"$text",value:gettext("Search for movies, series and TV shows"),className:"searchText noData"}],className:"searchBlock",events:{focus:function(){h.showInfo(),h.$info.innerText=gettext("Find your favorite movies, series and TV shows by title or by genre")},click:function(){core.intent({action:"keyboard",data:{value:B.search,title:gettext("Search for movies, series and TV shows")},events:{done:function(e){B.search=e.value,e.value?(a.$body.classList.add("searchActive"),a.links.$text.innerText=e.value,a.links.$text.classList.remove("noData")):(a.$body.classList.remove("searchActive"),a.links.$text.innerText=gettext("Search for movies, series and TV shows"),a.links.$text.classList.add("noData")),s.init({getter:z,request:B})}}},function(e){}),event.stop=!0},keydown:function(e){switch(e.code){case p.down:c.focus(),e.stop=!0;break;case p.enter:this.events["click"]&&this.emit("click"),e.stop=!0}}}}),c=new v({cycle:!1,className:"filtersList",data:[{name:"genres",value:gettext("All genres"),data:gettext("You can choose a movie by genre or year of release. Or you can sort them using other parameters."),click:function(){c.blur(),setTimeout(function(){n.show()},y.config.delay.modalShow)}},{name:"years",value:gettext("All years"),data:gettext("You can choose a movie by genre or year of release. Or you can sort them using other parameters."),click:function(){c.blur(),setTimeout(function(){o.show()},y.config.delay.modalShow)}},{name:"sort",value:gettext("Sort by")+" "+gettext("date"),data:gettext("You can choose a movie by genre or year of release. Or you can sort them using other parameters."),click:function(){c.blur(),setTimeout(function(){r.show()},y.config.delay.modalShow)}}],render:function(e,t){for(var i,s,a,n={};e.firstChild;)e.removeChild(e.firstChild);for(a=m.tag("div",{className:"button"},m.tag("div",{className:"titleWrapper"},n.blured=m.tag("div",{className:"title"},t.value))),s=m.tag("div",{className:"buttonFocus"},m.tag("div",{className:"titleWrapper"},n.focused=m.tag("div",{className:"title"},t.value)));e.firstChild;)e.removeChild(e.firstChild);i=new g({focusable:!1,data:[a,s]}),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),i.title=n,e.title=n,i.parent=this,i.$parentItem=e,e.layout=i,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.value=t.value||{}},fixedData:!0,size:3,focusIndex:0,propagate:!1,type:v.prototype.TYPE_HORIZONTAL,events:{focus:function(){h.showInfo(),a.show(),s.$node.classList.remove("noSearchLine"),this.$focusItem&&(h.$info.innerText=this.$focusItem.data.data)},"focus:item":function(e){h.$info.innerText=e.$curr.data.data},keydown:function(e){switch(e.code){case p.up:e.stop=!0,a.focus();break;case p.down:e.stop=!0,a.hide(),s.$node.classList.add("noSearchLine"),s.focus();break;case p.right:case p.left:this.move(e.code),e.stop=!0;break;case p.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e}),e.stop=!0}}}}),s=new I({getter:function(){return[]},sizeX:y.metrics.moviesGrid.x,sizeY:y.metrics.moviesGrid.y,focusX:0,focusY:0,title:"Movies",noData:gettext("No results found."),bufferSize:y.metrics.moviesGrid.cache,emptyLine:!0,render:i(11),className:"moviesGrid",events:{"click:item":function(e){var t=e.$item.value;t&&((t.censored||t.category&&t.category.censored)&&!core.accessControl.state?core.accessControl.request(function(e){e||y.route(y.pages.info,{info:t,type:"main"})}):y.route(y.pages.info,{info:t,type:"main"}))},focus:function(){this.data.length?h.showMovie():c.focus()},"focus:item":function(e){clearTimeout(T.info),this.focusY>0?c.hide():c.show(),T.info=setTimeout(function(){e.$curr&&e.$curr.value&&h.fillMovie(e.$curr.value)},core.environment.onFocusDebounceTimeout)},overflow:function(e){e.direction===p.up&&c.focus()},keydown:function(e){switch(e.code){case p.f3:N(),e.stop=!0;break;default:I.prototype.defaultEvents.keydown.call(this,e)}}}}),(d=new g({focusable:!1,data:[a,c,s],className:"mainPanel"})).$node.appendChild(m.tag("div",{className:"shadow"})),L.add(d),L.add(h.layout),n=new x({visible:!1,title:gettext("Choose genres"),events:{"checked:change":function(e){var t=c.links.genres.title,i="",a="";e.checkedData.forEach(function(e){i+=(i?", ":"")+e.title,a+=(a?",":"")+e.value}),B.offset=0,B.limit=0,i?(B.genreId=a,t.blured.innerText=i,t.focused.innerText=i):(B.genreId="",t.blured.innerText=gettext("All genres"),t.focused.innerText=gettext("All genres")),C||s.init({getter:z,request:B})},show:function(){this.focus()},hide:function(){c.focus()}},list:{focusIndex:0,size:y.metrics.modal.size,cycle:!1,classIconActive:"theme-icon theme-icon-ok",classIcon:"theme-icon"}}),L.add(n),o=new x({visible:!1,title:gettext("Choose years"),events:{"checked:change":function(e){var t=c.links.years.title,i="",a="",n=0;e.checkedData.forEach(function(e){for(i+=(i?", ":"")+e.title,n=e.value.start;n<=e.value.end;n++)a+=(a?",":"")+n}),B.offset=0,B.limit=0,i?(B.year=a,t.blured.innerText=i,t.focused.innerText=i):(B.year="",t.blured.innerText=gettext("All years"),t.focused.innerText=gettext("All years")),s.init({getter:z,request:B})},show:function(){this.focus()},hide:function(){c.focus()}},list:{focusIndex:0,size:y.metrics.modal.size,cycle:!1,data:$.initYears(),classIconActive:"theme-icon theme-icon-ok",classIcon:"theme-icon"}}),L.add(o),r=new b({visible:!1,title:gettext("Sort by:"),events:{show:function(){this.children[0].focus()}},children:[l=new k({focusIndex:0,size:y.metrics.modal.size,classIconActive:"theme-icon theme-icon-ok",classIcon:"theme-icon",cycle:!0,data:[{state:!0,title:gettext("date"),value:"added"},{state:!1,title:gettext("name"),value:"name"},{state:!1,title:gettext("rating"),value:"rating"}],events:{select:function(e){c.links.sort.title.blured.innerText=gettext("Sort by")+" "+e.data.title,c.links.sort.title.focused.innerText=gettext("Sort by")+" "+e.data.title,B.sortby=e.data.value,s.init({getter:z,request:B})},keydown:function(e){switch(k.prototype.defaultEvents.keydown.call(this,e),e.code){case p.back:r.hide(),c.focus(),e.stop=!0}}}})]}),L.add(r),L.addListeners({show:function(e){var t,i={};if(e.data){for(t in e.data.query)e.data.query[t]&&(i[t]=e.data.query[t]);B=i,C=!0,n.clearChecked(0),o.clearChecked(0),C=!1,B.offset=0,B.limit=0,s.init({title:e.data.title,getter:z,request:B}),c.show(),c.focus(),l.resetData(),c.links.sort.title.blured.innerText=gettext("Sort by")+" "+l.checkedData.title,c.links.sort.title.focused.innerText=gettext("Sort by")+" "+l.checkedData.title,a.$body.classList.remove("searchActive"),a.links.$text.innerText=gettext("Search for movies, series and TV shows"),a.links.$text.classList.add("noData"),h.clearRating()}},keydown:function(e){switch(e.code){case p.back:e.stop=!0,y.route(y.pages.main)}}}),L.once("show",function(){y.api.getGenres(function(e,t){var i=[];(t=e?[]:t.data||[]).forEach(function(e){i.push({state:!1,title:e.name,value:e.ids.join(",")})}),n.list.setData({data:i,focusIndex:0})})}),y.addListener("change:favorite",function(e){var t=e.video;s.$focusItem&&t===s.$focusItem.value&&(t.favorite?h.$movie.classList.add("inFavorite"):h.$movie.classList.remove("inFavorite"))}),e.exports=L},function(e,t,i){"use strict";e.exports=i(42),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var s=i(5);function a(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-modal",e.exports=a},function(e,t,i){"use strict";var s=i(13),a=i(44),n=i(21),o=i(1);function r(e){var t,i,r=this;for((e=e||{}).list=e.list||{},e.list.events=e.list.events||{},e.list.propagate=!1!==e.list.propagate,e.children=e.children||[],this.scroll=new n({}),e.list.scroll=this.scroll,this.list=new a(e.list),t=0;t<this.list.data.length;t++)if(this.list.data[t].unique){this.uniqueItem={data:this.list.data[t],index:t};break}this.uniqueItem&&this.uniqueItem.data.state&&this.list.checkedData.length>1&&(this.list.clearChecked(),this.uniqueItem.index<this.list.$node.children.length+this.list.viewIndex&&this.uniqueItem.index<this.list.viewIndex?this.list.changeState(this.list.$node.children[this.uniqueItem.index-this.list.viewIndex]):(this.uniqueItem.data.state=!0,this.list.checkedData.push(this.uniqueItem.data))),this.checkedData=this.list.checkedData,e.children.push(this.list),e.children.push(this.scroll),s.call(this,e),e.titleCounter&&(this.$header.appendChild(o.tag("div",{className:"theme-icon"},o.tag("div",{className:"theme-counter"},r.$titleCount=o.tag("div",{},this.list.data.length&&r.uniqueItem?this.list.data.length-1:this.list.data.length)))),this.list.setData=function(e){a.prototype.setData.call(r.list,e),r.$titleCount.innerText=e.data.length&&r.uniqueItem?e.data.length-1:e.data.length}),e.list.data&&e.list.data.length?(this.scroll.show(),this.scroll.init({realSize:e.list.data.length,viewSize:e.list.size||5})):this.scroll.hide(),this.addListener("focus",function(){this.list.focus()}),i=this.list.events["click:item"]||[],this.list.events["click:item"]=[],this.list.addListener("click:item",function(e){var s=e.$item,a=s.data;if(r.uniqueItem){if(a.unique&&!a.state)return void this.changeState(s);a.unique?(this.clearChecked(),this.changeState(s)):(r.uniqueItem.data.state&&((t=r.uniqueItem.index-this.viewIndex)<this.$node.children.length&&t>=0?this.changeState(this.$node.children[t]):(r.uniqueItem.data.state=!1,-1!==(t=this.checkedData.indexOf(r.uniqueItem.data))&&this.checkedData.splice(t,1))),this.checkedData.length===this.data.length-1&&(this.clearChecked(),(t=r.uniqueItem.index-this.viewIndex)<this.$node.children.length&&t>=0?this.changeState(this.$node.children[t]):(r.uniqueItem.data.state=!0,this.checkedData.push(r.uniqueItem.data))))}for(t=0;t<i.length;t++)i[t].call(this,e);r.checkedData=this.checkedData,r.emit("checked:change",{checkedData:this.checkedData})})}r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-modal mag-component-modal-check-list",r.prototype.resetData=function(){this.list.resetData(),this.uniqueItem&&this.uniqueItem.data.state&&this.list.checkedData.length>1&&(this.list.clearChecked(),this.uniqueItem.index<this.list.$node.children.length+this.list.viewIndex&&this.uniqueItem.index<this.list.viewIndex?this.list.changeState(this.list.$node.children[this.uniqueItem.index-this.list.viewIndex]):(this.uniqueItem.data.state=!0,this.list.checkedData.push(this.uniqueItem.data))),this.checkedData=this.list.checkedData,this.emit("checked:change",{checkedData:this.checkedData})},r.prototype.clearChecked=function(e){var t=this.uniqueItem&&this.uniqueItem.data.defaultState;this.list.clearChecked(e),t&&(this.uniqueItem.data.defaultState=t,this.uniqueItem.index<this.list.$node.children.length+this.list.viewIndex&&this.uniqueItem.index>=this.list.viewIndex?this.list.changeState(this.list.$node.children[this.uniqueItem.index-this.list.viewIndex]):(this.uniqueItem.data.state=!0,this.list.checkedData.push(this.uniqueItem.data))),this.checkedData=this.list.checkedData,this.emit("checked:change",{checkedData:this.checkedData})},e.exports=r},function(e,t,i){"use strict";var s=i(8),a=i(0),n="theme-icon theme-icon-checkbox",o="theme-icon theme-icon-checkbox-active";function r(e){this.checkedData=[],e.classIcon&&(n=e.classIcon),e.classIconActive&&(o=e.classIconActive),e.classChecked&&(n=e.classChecked),s.call(this,e)}r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-check-list",r.prototype.setData=function(e){var t=0;for(s.prototype.setData.call(this,e),this.checkedData=[];t<this.data.length;t++)this.data[t].defaultState=this.data[t].state,this.data[t].state&&this.checkedData.push(this.data[t]);this.$focusItem?this.defaultFocusIndex=this.$focusItem.index:this.defaultFocusIndex=0},r.prototype.resetData=function(){for(var e=0;e<this.data.length;e++)this.data[e].state=this.data[e].defaultState;this.setData({data:this.data,focusIndex:this.defaultFocusIndex})},r.prototype.clearChecked=function(e){for(var t=0;t<this.data.length;t++)this.data[t].state=!1;e||0===e||(e=this.$focusItem?this.$focusItem.index:0),this.setData({data:this.data,focusIndex:e})},r.prototype.defaultEvents={mousewheel:s.prototype.defaultEvents.mousewheel,keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:e.stop=!0,this.move(e.code);break;case a.enter:this.changeState(this.$focusItem),this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},r.prototype.changeState=function(e){var t=!e.state,i=this.data[e.index],s=-1;e.state=t,i.state=t,t?(e.classList.add("checked"),e.checkBox.className=o):(e.classList.remove("checked"),e.checkBox.className=n),t?this.checkedData.push(i):-1!==(s=this.checkedData.indexOf(i))&&this.checkedData.splice(s,1),this.events["change:item"]&&this.emit("change:item",{$item:e,state:t})},r.prototype.renderItemDefault=function(e,t){var i,s,a,r;t.className&&(e.className="item "+t.className,e===this.$focusItem&&(e.className+=" focus")),e.ready?(e.$title.innerText=t.title||"",t.state?(e.classList.add("checked"),e.checkBox.className=o):(e.classList.remove("checked"),e.checkBox.className=n),e.state=t.state,e.value=t.value):(e.innerHTML="",i=document.createElement("table"),s=document.createElement("tr"),a=document.createElement("td"),r=document.createElement("div"),t.state?(e.classList.add("checked"),r.className=o):(e.classList.remove("checked"),r.className=n),i.appendChild(s),a.appendChild(r),a.className="checkBoxWrapper",s.appendChild(a),(a=document.createElement("td")).className="title",a.innerText=t.title||"",s.appendChild(a),e.checkBox=r,e.state=t.state,e.value=t.value,e.$title=a,e.appendChild(i),e.ready=!0)},r.prototype.renderItem=r.prototype.renderItemDefault,e.exports=r},function(e,t,i){"use strict";var s=i(5);function a(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-scrollbar",a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},a.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=a},function(e,t,i){"use strict";e.exports=function(){var e,t,i=[{state:!1,title:"1960 - 1980",value:{start:1960,end:1980}},{state:!1,title:gettext("Before")+" 1960",value:{start:1885,end:1959}}];for(t=(new Date).getFullYear(),e=1981;e<=t;e++)t-e>10?(i.unshift({state:!1,title:e+" - "+(e+9),value:{start:e,end:e+9}}),e+=9):i.unshift({state:!1,title:e,value:{start:e,end:e}});return i}},function(e,t,i){"use strict";var s=i(5),a=i(14);function n(e){var t=this;e=e||{},this.bufferBefore=[],this.mainList=[],this.bufferAfter=[],this.loadData=!1,this.$focusLine=null,this.$focusItem=null,this.data=[],this.cycleX=!1,this.cycleY=!1,this.emptyLine=!1,this.bufferSize=0,e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),e.title&&(this.$title=document.createElement("div"),this.$title.className="title",this.$node.appendChild(this.$title)),this.$node.appendChild(this.$body),this.$noData=document.createElement("div"),this.$noData.className="noData hidden",this.$node.appendChild(this.$noData),this.init(e),this.inFocus=!1,this.addListener("focus",function(){t.inFocus=!0,t.$focusItem&&t.events["focus:item"]&&t.emit("focus:item",{$prev:null,$curr:t.$focusItem})}),this.addListener("blur",function(){t.inFocus=!1})}function o(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-cache-grid",n.prototype.renderItemDefault=function(e,t){e.innerText=t.value},n.prototype.createLineDefault=function(e,t){var i=document.createElement("div");return i.className="line",i.index=e,i.data=t,i},n.prototype.renderItem=n.prototype.renderItemDefault,n.prototype.createItem=function(e){var t=document.createElement("div");return t.className="item",t.index=e,t},n.prototype.createLine=n.prototype.createLineDefault,n.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:e.stop=!0,this.move(e.code);break;case a.enter:e.stop=!0,this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},n.prototype.init=function(e){var t=this;e.render&&(t.renderItem=e.render),e.createLine&&(t.createLine=e.createLine),void 0!==e.cycleX&&(this.cycleX=e.cycleX),void 0!==e.cycleY&&(this.cycleY=e.cycleY),e.sizeX&&e.sizeY&&(this.sizeX=e.sizeX,this.sizeY=e.sizeY),void 0!==e.bufferSize&&(this.bufferSize=e.bufferSize),void 0!==e.emptyLine&&(this.emptyLine=e.emptyLine),e.events&&Object.keys(e.events).forEach(function(i){t.events[i]=null,t.addListener(i,e.events[i])}),e.translate&&(this.translate=e.translate),void 0!==e.emptyLine&&(this.emptyLine=e.emptyLine),e.noData&&(this.$noData.innerText=e.noData),this.getter=e.getter,this.config=e.request||{},this.size=this.sizeX*this.sizeY,this.viewIndex=null,this.lastViewindex=0,this.maxCount=0,this.focusX=0,this.focusY=0,this.getter&&(this.$title&&e.title&&(this.$title.innerText=e.title),void 0===e.focusIndex?this.initView(0):this.focusIndex(e.focusIndex))},n.prototype.focusIndex=function(e){var t=this.viewIndex||0;this.initView(t)},n.prototype.fillRow=function(e){var t=this,i=e.index*this.sizeX;this.loadData=!0,this.config.offset=i,this.config.limit=this.sizeX,this.getter(function(s,a){var n,r;if(s)return t.events["data:error"]&&t.emit("data:error",s),void(t.loadData=!1);for(a=o(a),r=0;r<t.sizeX;r++)r<a.length&&(n=t.createItem(i+r),t.renderItem(n,a[r]),e.appendChild(n));t.loadData=!1},this.config)},n.prototype.initView=function(e){var t=this,i=0;if(this.viewIndex===e)return!0;for(;this.$body.firstChild;)this.$body.removeChild(this.$body.firstChild);return this.viewIndex=e||0,this.startIndex=this.viewIndex-this.bufferSize,this.startIndex<0?(i=Math.abs(this.startIndex),this.startIndex=0):i=this.bufferSize,this.bufferBefore=[],this.mainList=[],this.bufferAfter=[],this.$node.classList.remove("emptyAfter"),this.$node.classList.remove("noEmptyBefore"),i=this.size+this.sizeX*(i+this.bufferSize),this.config.offset=this.startIndex*this.sizeX,this.config.limit=i,this.getter(function(e,i,s){var a,n,r,c,l=0,h=t.viewIndex-t.startIndex,d=t.sizeY-(t.emptyLine?1:0),u=Math.ceil(i.length/t.sizeX);if(t.data=[],e)return t.events["data:error"]&&t.emit("data:error",e),t.$title.classList.add("hidden"),t.$body.classList.add("hidden"),void t.$noData.classList.remove("hidden");for(i=o(i),t.data=i,t.maxCount=s,t.lastViewindex=Math.ceil(s/t.sizeX)-t.sizeY+(t.emptyLine?1:0),c=0;c<u;c++)for(n=t.createLine(c),t.$body.appendChild(n),c<h?(t.bufferBefore.push(n),n.classList.add("hidden")):c<d?t.mainList.push(n):(t.bufferAfter.push(n),n.classList.add("hidden")),r=0;r<t.sizeX;r++)l<i.length&&(a=t.createItem(t.startIndex+l),n.appendChild(a),t.renderItem(a,i[l])),l++;i.length?(t.focusItem(t.focusX,t.focusY),t.$noData.classList.add("hidden"),t.$title.classList.remove("hidden"),t.$body.classList.remove("hidden")):(t.$title.classList.add("hidden"),t.$body.classList.add("hidden"),t.$noData.classList.remove("hidden")),t.events["data:ready"]&&t.emit("data:ready")},this.config),!1},n.prototype.defaultTranslate=function(e){var t,i,s,a=[];for(t=0;t<this.sizeY;t++){for(s=[],i=0;i<this.sizeX;i++)s[i]=e[t*this.sizeX+i];a[t]=s}return a},n.prototype.translate=n.prototype.defaultTranslate,n.prototype.move=function(e){var t,i,s=!1,n=this.focusX,o=this.focusY;if(this.loadData)return!1;switch(e){case a.up:this.viewIndex>0?this.bufferBefore.length?(this.viewIndex--,i=this.bufferBefore[0].index,i--,this.emptyLine&&this.$node.classList.remove("emptyAfter"),(t=this.bufferBefore.pop()).classList.remove("hidden"),this.mainList.unshift(t),this.mainList.length>this.sizeY&&(t=this.mainList.pop(),this.bufferAfter.unshift(t),t.classList.add("hidden")),this.bufferAfter.length>this.bufferSize&&(t=this.bufferAfter.pop(),this.$body.removeChild(t)),i>=0&&((t=this.createLine(i)).classList.add("hidden"),this.$body.insertBefore(t,this.$body.firstChild),this.bufferBefore.unshift(t),this.fillRow(t)),this.focusItem(n,o),s=!0):(this.emptyLine&&(this.mainList.length>=this.sizeY&&(t=this.mainList.pop(),this.bufferAfter.unshift(t),t.classList.add("hidden")),this.$node.classList.remove("noEmptyBefore")),o>0&&(o--,this.focusItem(n,o),s=!0)):o>0?(this.emptyLine&&(this.$node.classList.remove("noEmptyBefore"),this.mainList.length>=this.sizeY&&(t=this.mainList.pop(),this.bufferAfter.unshift(t),t.classList.add("hidden"))),o--,this.focusItem(n,o),s=!0):(this.cycleY?this.move(a.end):s=!1,this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycleY}));break;case a.down:this.viewIndex<this.lastViewindex-1?(this.$node.classList.add("noEmptyBefore"),this.bufferAfter.length&&(i=this.bufferAfter[this.bufferAfter.length-1].index,i++,t=this.bufferAfter.shift(),this.mainList.push(t),t.classList.remove("hidden")),this.mainList.length>this.sizeY&&(this.viewIndex++,(t=this.mainList.shift()).classList.add("hidden"),this.bufferBefore.push(t)),this.bufferBefore.length>this.bufferSize&&(t=this.bufferBefore.shift(),this.$body.removeChild(t)),i<this.lastViewindex+this.sizeY-1?((t=this.createLine(i)).classList.add("hidden"),this.$body.appendChild(t),this.fillRow(t),this.bufferAfter.push(t)):this.emptyLine&&this.$node.classList.add("emptyAfter"),o<this.mainList.length-2&&o++,s=!0,this.focusItem(n,o)):o<this.mainList.length-1?(this.mainList.length>=this.sizeY?(this.viewIndex++,(t=this.mainList.shift()).classList.add("hidden"),this.bufferBefore.push(t),this.bufferBefore.length>this.bufferSize&&(t=this.bufferBefore.shift(),this.$body.removeChild(t))):(this.bufferAfter.length&&(t=this.bufferAfter.shift(),this.mainList.push(t),t.classList.remove("hidden")),o++,this.$node.classList.add("noEmptyBefore")),s=!0,this.focusItem(n,o)):(this.cycleY?this.move(a.home):s=!1,this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycleY}));break;case a.right:n<this.$focusLine.children.length-1?(n++,this.focusItem(n,o),s=!0):this.cycleX?(n=0,this.focusItem(n,o),s=!0,this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycleX})):(this.focusX=0,(s=this.move(a.down))||(this.focusX=n));break;case a.left:n>0?(n--,this.focusItem(n,o),s=!0):this.cycleX?(n=this.$focusLine.children.length-1,this.focusItem(n,o),s=!0,this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycleX})):(this.focusX=this.sizeX-1,(s=this.move(a.up))||(this.focusX=n))}return s},n.prototype.focusItem=function(e,t){var i,s=this.$focusItem,a=this.$focusLine;return 0!==this.mainList[t].children.length&&(this.$focusLine=this.mainList[t],this.$focusLine&&this.$focusLine!==a&&(a&&a.classList.remove("focus"),this.$focusLine.classList.add("focus"),this.focusY=t,this.$focusLine.children.lenght<=e&&(e=this.$focusLine.children.lenght-1)),this.$focusLine.children.length<=e&&(e=this.$focusLine.children.length-1),!(!(i=this.$focusLine.children[e])||s===i)&&(null!==s&&(s.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:s})),this.focusX=e,this.$focusItem=i,i.classList.add("focus"),this.inFocus&&this.events["focus:item"]&&this.emit("focus:item",{$prev:s,$curr:i}),!0))},n.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=n},function(e,t,i){"use strict";var s,a,n,o,r,c,l,h,d,u,f,m,p,v,g,y,b,x,k,$,w=i(6),I=i(1),L=i(0),T=i(2),B=i(12),C=i(13),z=i(22),N=i(3),S=i(17),D={prepareScreenshots:i(49),prepareSeasons:i(50),sortQuality:i(51),selectFile:i(52),prepareSeries:i(54),prepareFiles:i(55),toggleFavorite:i(9)},E=new w({$node:document.getElementById("pageInfo")}),A={},_={},P=null,q=I.tag;function F(e,t){var i,s,n,o,h,d=e.intent,u=e.context;d.data&&u&&(s=u.metadata.position,n=u.metadata.duration,i=d.data,s>10&&s&&n&&((o=s/n*100)>95||t?h={watched_status:"watched",watched_time:s-10}:o>5&&(h={watched_status:"not_ended",watched_time:s-10}),h.progress=o,i.file["watched_status"]=h["watched_status"],i.file["watched_time"]=h["watched_time"],i.movie["watched_time"]=h["watched_time"],i.movie["last_watched_file_id"]=i.file.id,i.movie.changeWatchedFile(i.file.id,h,function(e,t){var s,n;if(!e&&t&&t.status){if(i.file["watched_status"]=h["watched_status"],i.season&&(i.movie["last_watched_season_id"]=i.season.id,i.season["watched_status"]=t["season_watched_status"]),i.episode){switch(h["watched_status"]){case"watched":s=gettext("Watched"),n=!0;break;case"not_watched":s="",n=!1;break;case"not_ended":s=gettext("Not finished"),n=!1}i.episode["watched_status"]=h["watched_status"],i.movie["last_watched_episode_id"]=i.episode.id,i.episode.status&&(i.episode.status.$focus.innerText=s,i.episode.status.$blur.innerText=s,n?(i.episode.status.$focus.classList.add("disabled"),i.episode.status.$blur.classList.add("disabled")):(i.episode.status.$focus.classList.remove("disabled"),i.episode.status.$blur.classList.remove("disabled")))}T.pages.main.emit("change:watched",P),"not_ended"===P["watched_status"]?P["is_tv_series"]?a.setData({data:l,focusIndex:0}):a.setData({data:c,focusIndex:0}):a.setData({data:r,focusIndex:0})}})))}function O(e,t,i){var s=e,a=P.name,n=null,o=null,r=null;function c(e,t){var s=D.sortQuality(e.files,P);s=D.prepareFiles(s.video),(e=D.selectFile(s,t,n.data.file))?O(e.value,0,i):(d(p.$focusItem.data.value,function(){p.blur(),y.prevFocus=p,setTimeout(function(){y.show()},T.config.delay.modalShow)}),i=null,n.close())}function l(e,l){var h=0;e||(P.is_tv_series&&(a+=" "+x.custName+" "+k.custName,(h=$.indexOf(k))+1<$.length&&(o=function(){var e=i.metadata.audioLang;if(F({intent:n,context:i}),-1===(h=$.indexOf(k)))return i=null,void n.close();p.visible?(p.move(L.down),k=p.$focusItem.value):k=$[++h],c(k,e)}),h>0&&(r=function(){var e=i.metadata.audioLang;if(F({intent:n,context:i}),-1===(h=$.indexOf(k)))return i=null,void n.close();p.visible?(p.move(L.up),k=p.$focusItem.value):k=$[--h],c(k,e)})),n=core.intent({action:"play",mime:"content/video",data:{title:a,uri:l,movie:P,file:s,season:x,episode:k,position:t,subtitles:A.subtitles,mediaId:s.id},events:{end:function(){o?o():(F({intent:n,context:i},!0),i=null,n.close())},error:function(){F({intent:n,context:i}),i=null,n.close()},stop:function(){F({intent:n,context:i}),i=null,n.close()},hide:function(){F({intent:n,context:i}),i=null,n.close()},next:o,prev:r,close:function(){i&&(F({intent:n,context:i}),i=null)}},context:i},function(e,t){i=t}))}s.url?l(!1,s.url):P.getUrl(s.id,l)}function M(e){e=e||{},p.title.innerText=gettext("Seasons"),v.length?p.setData({focusIndex:e.position||0,data:D.prepareSeasons(v,!0)}):p.setData({focusIndex:0,data:[]})}function j(e,t){x=e,_.seasonId=e.id,p.title.innerText=e.custName,P.getSeries(e.id,function(e,i){var s=e?[]:D.prepareSeries(i);$=i,p.setData({focusIndex:0,data:s}),t()})}function R(){P.favorite?a.$node.classList.remove("inFavorite"):a.$node.classList.add("inFavorite"),D.toggleFavorite(P)}function Y(){P.is_tv_series?v.length&&((x=v[0]).custName||(x.custName=x.name?x.name+(x.original_name?" ( "+x.original_name+" )":""):gettext("Season")+" "+x.number),P.getSeries(x.id,function(e,t){!e&&t.length&&(D.prepareSeries(t),$=t,k=t[0],d(k,function(){a.blur(),y.prevFocus=a,setTimeout(function(){y.show()},T.config.delay.modalShow)}))})):d(null,function(){a.blur(),y.prevFocus=a,setTimeout(function(){y.show()},T.config.delay.modalShow)})}function V(){var e,t,i={};function s(i){var s;if((s=(A=D.sortQuality(i,P)).video).length){if(P.last_watched_file_id){for(t=0;t<s.length;t++)if(s[t].id===P.last_watched_file_id){e=s[t];break}}else e=s[0];O(e,P.watched_time)}}if(P.is_tv_series){if(P.last_watched_season_id){for(t=0;t<v.length;t++)if(v[t].id===P.last_watched_season_id){(x=v[t]).custName||(x.custName=x.name?x.name+(x.original_name?" ( "+x.original_name+" )":""):gettext("Season")+" "+x.number),i.season=t;break}P.getSeries(x.id,function(e,i){if(!e&&i.length){if(D.prepareSeries(i),$=i,P.last_watched_episode_id)for(t=0;t<i.length;t++)if(i[t].id===P.last_watched_episode_id){(k=i[t]).custName=k.name?k.name+(k["original_name"]?" ( "+k["original_name"]+" )":""):gettext("Series")+" "+k.number;break}k.files&&k.files.length?s(k.files):P.getEpisode({seasonId:x.id,episodeId:k.id},function(e,t){e||s(t.files)})}})}}else s(P.files)}d=function(e,t){var i=[];if(P.is_tv_series)if(_.episodeId=e.id,k=e,e.files&&e.files.length){if(A=D.sortQuality(e.files,P),(i=D.prepareFiles(A.video)).length>0){if(!(i.length>1))return void O(i[0].value);b.setData({focusIndex:0,data:i})}t()}else P.getEpisode(_,function(e,s){if(e?A={video:[],subtitles:[]}:(A=D.sortQuality(s.files,P),i=D.prepareFiles(A.video)),i.length>0){if(!(i.length>1))return void O(i[0].value);b.setData({focusIndex:0,data:i})}t()});else{if(k=null,x=null,A=D.sortQuality(P.files,P),(i=D.prepareFiles(A.video)).length>0){if(!(i.length>1))return void O(i[0].value);b.setData({focusIndex:0,data:i})}t()}},o={continueWatching:{icon:"theme-icon theme-icon-play",value:[gettext("Continue watching")],click:V},watchAgain:{icon:"theme-icon theme-icon-reset",value:[gettext("Watch again")],click:Y},favorite:{icon:"theme-icon theme-icon-favorite-active",value:[gettext("Add to favorites"),gettext("Remove from favorites")],click:R},play:{icon:"theme-icon theme-icon-play",value:[gettext("Play")],click:Y}},r=[o.play,o.favorite],c=[o.continueWatching,o.watchAgain,o.favorite],l=[o.continueWatching,o.favorite],s=i(24)(),a=new B({cycle:!1,className:"buttonList",render:function(e,t){for(var i,s,a,n;e.firstChild;)e.removeChild(e.firstChild);for(n=q("div",{className:"button"}),a=q("div",{className:t.icon}),n.appendChild(a),s=q("div",{className:"buttonFocus"}),a=q("div",{className:t.icon}),s.appendChild(a);e.firstChild;)e.removeChild(e.firstChild);i=1===t.value.length?new N({focusable:!1,data:[n,{className:"buttonTitle",value:t.value[0]},s]}):new N({focusable:!1,data:[n,{className:"buttonFirstTitle",value:t.value[0]},{className:"buttonSecondTitle",value:t.value[1]},s]}),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0,e.value=t.value||{}},data:[],size:T.metrics.buttonList.size,focusIndex:0,type:B.prototype.TYPE_HORIZONTAL,events:{keydown:function(e){switch(e.code){case L.up:e.stop=!0,n.visible&&n.focus();break;case L.down:e.stop=!0,u.visible?(u.focus(),E.$node.scrollTop=T.metrics.infoSroll.screen):m.visible?(m.focus(),E.$node.scrollTop=T.metrics.infoSroll.season-T.metrics.infoSroll.screen):f.visible&&(f.focus(),E.$node.scrollTop=T.metrics.infoSroll.season-T.metrics.infoSroll.screen);break;case L.right:case L.left:this.move(e.code),e.stop=!0;break;case L.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e}),e.stop=!0}}}}),n=new N({focusable:!0,data:[q("div",{className:"buttonMore"},q("div",{className:"buttonLeft"}),q("div",{className:"buttonRight"},gettext("More")))],className:"buttonMoreContainer",events:{click:function(){T.route(T.pages.more,P)},keydown:function(e){switch(e.code){case L.up:e.stop=!0;break;case L.down:e.stop=!0,a.focus();break;case L.right:case L.left:e.stop=!0;break;case L.back:e.stop=!0,T.route(h);break;case L.enter:this.events["click"]&&this.emit("click"),e.stop=!0}}}}),E.$node.appendChild(s.$body),s.$panel.appendChild(n.$node),s.$panel.appendChild(a.$node),u=new S({title:gettext("Screenshots"),hasEmptyItems:!0,cycle:!0,size:T.metrics.screenList.size,bufferSize:5,render:i(11),data:[],events:{keydown:function(e){switch(e.code){case L.up:e.stop=!0,E.$node.scrollTop=0,a.focus();break;case L.down:e.stop=!0,m.visible?(m.focus(),E.$node.scrollTop=T.metrics.infoSroll.season):f.visible&&(f.focus(),E.$node.scrollTop=T.metrics.infoSroll.season);break;case L.right:case L.left:this.move(e.code),e.stop=!0;break;case L.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e}),e.stop=!0}},focus:function(){this.$focusItem&&this.emit("focus:item",{$curr:this.$focusItem})}}}),E.add(u),f=new B({cycle:!1,className:"seasonsList",data:[],size:T.metrics.seasonsList.size,focusIndex:0,events:{"click:item":function(e){j(e.$item.data.value,function(){p.prevFocus=f,p.show(),p.focus()})},overflow:function(e){e.direction===L.up&&(m.visible?m.focus():u.visible?(u.focus(),E.$node.scrollTop=T.metrics.infoSroll.screen):(a.focus(),E.$node.scrollTop=0))}}}),E.add(f),m=new N({focusable:!0,data:[q("div",{className:"buttonMore"},q("div",{className:"buttonLeft"}),q("div",{className:"buttonRight"},gettext("All seasons")))],className:"buttonMoreContainer",events:{click:function(){p.prevFocus=m,M(),p.show(),p.focus()},keydown:function(e){switch(e.code){case L.up:e.stop=!0,u.visible?(u.focus(),E.$node.scrollTop=T.metrics.infoSroll.screen):(a.focus(),E.$node.scrollTop=0);break;case L.down:e.stop=!0,f.focus();break;case L.right:case L.left:e.stop=!0;break;case L.back:e.stop=!0,T.route(h);break;case L.enter:this.events["click"]&&this.emit("click"),e.stop=!0}}}}),f.$node.insertBefore(m.$node,f.$node.firstChild),f.$node.insertBefore(q("div",{className:"title"},gettext("Seasons")),f.$node.firstChild),p=new B({cycle:!1,className:"seriesList",data:[],size:T.metrics.seriesList.size,focusIndex:0,render:i(57),events:{"click:item":function(e){var t=e.$item.data.value;switch(t.type){case T.config.types.season:this.history.push({data:t,position:e.$item.index}),j(t,function(){p.focus()});break;case T.config.types.series:k=t,d(t,function(){p.blur(),y.prevFocus=p,setTimeout(function(){y.show()},T.config.delay.modalShow)})}},show:function(){g=E.$node.scrollTop,E.$node.scrollTop=0,this.history=[]},hide:function(){this.prevFocus&&(E.$node.scrollTop=g,this.prevFocus.focus(),this.prevFocus=null)},keydown:function(e){switch(e.code){case L.back:this.history.length?(M(this.history.pop()),this.focus()):this.hide(),e.stop=!0;break;case L.up:case L.down:case L.right:case L.left:this.move(e.code),e.stop=!0;break;case L.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e}),e.stop=!0}}}}),E.add(p),p.prevFocus=null,p.$node.insertBefore(p.title=q("div",{className:"title"},gettext("Seasons")),p.$node.firstChild),p.hide(),(y=new C({visible:!1,title:gettext("Available video options"),events:{show:function(){this.children[0].focus()},hide:function(){this.prevFocus&&(this.prevFocus.focus(),this.prevFocus=null)}},children:[b=new z({focusIndex:0,size:T.metrics.modal.size,cycle:!0,data:[],events:{"click:item":function(e){O(e.$item.data.value),y.hide()},keydown:function(e){switch(z.prototype.defaultEvents.keydown.call(this,e),e.code){case L.back:y.hide(),e.stop=!0}}}})]})).prevFocus=null,E.add(y),T.addListener("route",function(e){if(e.to===E)switch(e.from){case T.pages.more:break;default:h=e.from}}),E.addListener("show",function(e){if(e&&e.data){switch(e.data.type){case"start":return void Y();case"continue":return void V();case"back":return void n.focus()}this.$node.scrollTop=0,(P=e.data.info).poster?s.$img.style.backgroundImage=P.poster:s.$img.style.backgroundImage="",s.$title.innerText=P.name,s.$country.innerText=(P.year_end?P.year+" - "+P.year_end:P.year)+", "+P.genre+", "+P.duration+" "+gettext("minutes"),P.rating_kinopoisk?(s.$ratingKino.innerText=P.rating_kinopoisk,s.$ratingKino.style.display=""):s.$ratingKino.style.display="none",P.rating_imdb?(s.$ratingImdb.innerText=P.rating_imdb,s.$ratingImdb.style.display=""):s.$ratingImdb.style.display="none",P.age?(s.$censor.innerText=P.age,s.$censor.style.display=""):s.$censor.style.display="none",s.$director.innerText=P.director,s.$actors.innerText=P.actors,s.$description.innerText=P.description,P.description.length?n.show():n.hide(),"not_ended"===P.watched_status?P.is_tv_series?a.setData({data:l,focusIndex:0}):a.setData({data:c,focusIndex:0}):a.setData({data:r,focusIndex:0}),P.favorite?a.$node.classList.add("inFavorite"):a.$node.classList.remove("inFavorite"),a.focus(),P.screenshots.length>0?(u.setData({data:D.prepareScreenshots(P.screenshots),focusIndex:0}),u.show()):u.hide(),P.is_tv_series?P.getSeasons(function(e,t){!e&&t.length?(v=t,f.setData({focusIndex:0,data:D.prepareSeasons(t)}),f.show(),t.length>f.size?m.show():m.hide()):f.hide()}):(f.hide(),m.hide())}}),E.addListener("keydown",function(e){switch(e.code){case L.back:T.route(h);break;case L.f3:R()}}),T.addListener("change:favorite",function(e){e.video.favorite?a.$node.classList.add("inFavorite"):a.$node.classList.remove("inFavorite")}),e.exports=E},function(e,t,i){"use strict";var s=i(1).tag;e.exports=function(e){var t,i,a,n,o=[];return e.forEach(function(e){t=s("div",{className:"screenshot"}),i=s("div",{className:"screenshot"}),a=s("div",{className:"focusWrapper"},t),n=s("div",{className:"blurWrapper"},i),t.style.backgroundImage="url("+e+")",i.style.backgroundImage="url("+e+")",o.push({items:[a,n],value:e})}),o}},function(e,t,i){"use strict";var s=i(2),a=i(1).tag;e.exports=function(e,t){var i,n,o,r,c,l=0,h=[];if(l=e.length<=s.metrics.seasonsList.size||t?e.length:s.metrics.seasonsList.size,e&&e.length)for(i=0;i<l;i++)e[i].type=s.config.types.season,e[i].custName=gettext("Season")+" "+e[i].number+(e[i].name?" - "+e[i].name:e[i].original_name?" - "+e[i].original_name:""),r=a("div",{className:"itemTitle"},e[i].custName),c=a("div",{className:"container"},r),n=a("div",{className:"focusWrapper"},c),r=a("div",{className:"itemTitle"},e[i].custName),c=a("div",{className:"container"},r),o=a("div",{className:"blurWrapper"},c),h.push({items:[n,o],value:e[i]});return h}},function(e,t,i){"use strict";e.exports=function(e,t){var i={video:[],subtitles:[]};function s(e){this.uri?e(!1,this.uri):t.getUrl(this.id,e)}return e.forEach(function(e){switch(e.type){case"video":i.video.push(e);break;case"sub":i.subtitles.push({id:e.id,title:e.name,lang:e.languages[0]||"",uri:e.url,getUri:s})}}),e.sort(function(e,t){return t.quality?e.quality?t.quality.width-e.quality.width:-1:0}),i}},function(e,t,i){"use strict";var s=i(53);e.exports=function(e,t,i){var a,n=null;if(e&&e.length>0)if(1===e.length)n=e[0];else for(t.length&&""!==t[0]?t=t[0]:i.languages.length&&(t=i.languages[0]),t=s[t],a=0;a<e.length;a++)if(e[a].value&&(-1!==e[a].value.languages.indexOf(t[0])||t[1]&&-1!==e[a].value.languages.indexOf(t[1]))){if(e[a].value.quality.width===i.quality.width){n=e[a];break}if(e[a].value.quality.width>i.quality.width){n={value:e[a].value,index:a};continue}n={value:e[a].value,index:a};break}return n}},function(e,t,i){"use strict";var s,a,n,o=i(23),r={};for(s=0,a=o.length;s<a;s++)r[(n=o[s])["1"]]=r[n["2T"]]=r[n["2B"]]=[n["1"],n["2T"],n["2B"]];o=null,e.exports=r},function(e,t,i){"use strict";var s=i(2),a=i(1).tag;e.exports=function(e){var t,i,n,o,r,c,l=!1,h=[];return e.forEach(function(e){switch(l=!1,e.type=s.config.types.series,e.custName=gettext("Series")+" "+e.number+(e.name?" - "+e.name:e["original_name"]?" - "+e["original_name"]:""),e["watched_status"]){case"watched":r=gettext("Watched"),l=!0;break;case"not_watched":r="";break;case"not_ended":r=gettext("Not finished")}o=a("div",{className:"itemTitle"},e.custName),n=a("div",{className:"itemStatus"+(l?" disabled":"")},r),e.status={},e.status.$focus=n,c=a("div",{className:"container"},o,n),t=a("div",{className:"focusWrapper"},c),o=a("div",{className:"itemTitle"},e.custName),n=a("div",{className:"itemStatus"+(l?" disabled":"")},r),e.status.$blur=n,c=a("div",{className:"container"},o,n),i=a("div",{className:"blurWrapper"},c),h.push({items:[t,i],value:e})}),h}},function(e,t,i){"use strict";var s=i(56);e.exports=function(e){var t,i,a=[],n=[];return e.forEach(function(e){var o,r;i=[],e.subList=a,e.languages.length?(o=e.languages,r=[],o.forEach(function(e){var t=s["1"][e]||s["2B"][e]||s["2T"][e];t?r.push(t[1]):r.push(e||gettext("Unknown language"))}),i=r.join(", ")):i=gettext("Unknown language"),t=e.quality?(e.quality.code?e.quality.code+" (":"(")+(e.quality.name?e.quality.name:gettext("Unknown quality"))+")":"("+gettext("Unknown quality")+")",n.push({state:!1,title:i+" "+t,value:e})}),n}},function(e,t,i){"use strict";var s,a,n,o=i(23),r={1:{},"2T":{},"2B":{}};for(s=0,a=o.length;s<a;s++)n=o[s],r["1"][n["1"]]=r["2T"][n["2T"]]=r["2B"][n["2B"]]=[n.name,n.local];o=null,e.exports=r},function(e,t,i){"use strict";var s=i(3);e.exports=function(e,t){for(var i,a,n,o;e.firstChild;)e.removeChild(e.firstChild);for(a=0;a<t.items.length;a++)(n=t.items[a])&&n.value instanceof HTMLElement&&(t.items[a]=n.value);o={focusable:!1,data:t.items},t.className&&(o.className=t.className),i=new s(o),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,t.click&&(this.handlers[e.index]=t.click),e.ready=!0,e.value=t.value}},function(e,t,i){"use strict";var s,a,n,o,r,c,l,h,d=i(6),u=i(1),f=i(0),m=i(2),p=i(3),v=i(12),g=i(21),y=i(59),b={toggleFavorite:i(9)},x=new d({$node:document.getElementById("pageMore")}),k=new y({propagate:!0,step:5,scroll:h=new g({}),events:{overflow:function(e){e.direction===f.down&&a.focus()}}});function $(){n.favorite?a.$node.classList.remove("inFavorite"):a.$node.classList.add("inFavorite"),b.toggleFavorite(n)}o={continueWatching:{icon:"theme-icon theme-icon-play",value:gettext("Continue watching"),click:function(){m.route(m.pages.info,{info:null,type:"continue"})}},watchAgain:{icon:"theme-icon theme-icon-reset",value:gettext("Watch again"),click:function(){m.route(m.pages.info,{info:null,type:"start"})}},favorite:{icon:"theme-icon theme-icon-favorite-active",value:gettext("Favorite"),click:$},play:{icon:"theme-icon theme-icon-play",value:gettext("Play"),click:function(){m.route(m.pages.info,{info:null,type:"start"})}}},r=[o.play,o.favorite],c=[o.continueWatching,o.watchAgain,o.favorite],l=[o.continueWatching,o.favorite],x.add(k),x.add(h),s=i(24)(),a=new v({cycle:!1,className:"buttonList",render:function(e,t){for(var i,s,a,n;e.firstChild;)e.removeChild(e.firstChild);for(n=u.tag("div",{className:"button"}),a=u.tag("div",{className:t.icon}),n.appendChild(a),s=u.tag("div",{className:"buttonFocus"}),a=u.tag("div",{className:t.icon}),s.appendChild(a);e.firstChild;)e.removeChild(e.firstChild);i=new p({focusable:!1,data:[n,{className:"buttonTitle",value:t.value},s]}),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0,e.value=t.value||{}},data:[],size:m.metrics.buttonList.size,focusIndex:0,propagate:!1,type:v.prototype.TYPE_HORIZONTAL,events:{keydown:function(e){switch(e.code){case f.up:e.stop=!0,k.focus();break;case f.down:e.stop=!0;break;case f.right:case f.left:this.move(e.code),e.stop=!0;break;case f.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e}),e.stop=!0}}}}),k.$body.appendChild(s.$body),s.$panel.appendChild(a.$node),x.addListener("show",function(e){e&&e.data&&((n=e.data).poster?s.$img.style.backgroundImage=n.poster:s.$img.style.backgroundImage="",s.$title.innerText=n.name,s.$country.innerText=(n.year_end?n.year+" - "+n.year_end:n.year)+", "+n.genre+", "+n.duration+" "+gettext("minutes"),n["rating_kinopoisk"]?(s.$ratingKino.innerText=n.rating_kinopoisk,s.$ratingKino.style.display=""):s.$ratingKino.style.display="none",n["rating_imdb"]?(s.$ratingImdb.innerText=n.rating_imdb,s.$ratingImdb.style.display=""):s.$ratingImdb.style.display="none",n.age?(s.$censor.innerText=n.age,s.$censor.style.display=""):s.$censor.style.display="none",s.$director.innerText=n.director,s.$actors.innerText=n.actors,s.$description.innerText=n.description,"not_ended"===n.watched_status?(a.setData({data:c,focusIndex:0}),n["is_tv_series"]&&a.setData({data:l,focusIndex:0})):a.setData({data:r,focusIndex:0}),n.favorite?a.$node.classList.add("inFavorite"):a.$node.classList.remove("inFavorite"),k.init(),k.focus())}),x.addListener("keydown",function(e){switch(e.code){case f.back:m.route(m.pages.info,{type:"back"});break;case f.f3:$()}}),e.exports=x},function(e,t,i){"use strict";var s=i(5),a=i(0);function n(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,s.call(this,e),this.$node.appendChild(this.$body),this.init(e)}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.name="mag-component-scroll-area",n.prototype.defaultEvents={keydown:function(e){switch(e.code){case a.up:case a.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?a.up:a.down)}},n.prototype.move=function(e){var t=screen.height,i=this.viewHeight-this.realHeight;if(i<0)switch(e){case a.down:if(this.topPosition-this.step*t/100<i)return this.scroll.scrollTo(-i),this.$body.style.top=i+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case a.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},n.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=n}]);
//# sourceMappingURL=main.js.map