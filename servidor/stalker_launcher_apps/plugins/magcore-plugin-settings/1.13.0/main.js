module.exports=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";var o,r=t(1),i=t(2),a=t(3).set,c=new r,s=[],u={},f=null;function l(e,n){void 0===u[n.name]&&(u[n.name]=1,s.push(n))}function d(e){return function(n){var t=this,o=core.dependencyManager.getPluginStorage(e);setTimeout(function(){t.data?(Object.keys(t.data).forEach(function(e){t.data[e]=o.getItem(e)||t.data[e]}),n(null,t.data)):n()},0)}}function v(e){return function(n){var t=this,o=core.dependencyManager.getPluginStorage(e);setTimeout(function(){Object.keys(t.data).forEach(function(e){o.setItem(e,t.data[e])}),n()},0)}}function p(e){var n=top.gSTB;e.actions=e.actions||{},e.actions.reload=core.reload,e.actions.reboot=core.reboot,e.actions.loadEmbedPortal=function(){location.href="file:///home/web/services.html"},e.actions.clearUserData=function(){n.ResetUserFs(),n.SetEnv('{"language":"en"}')},e.actions.resetUserFs=function(){n.ServiceControl("local-config","reset")},e.getters=e.getters||{},e.getters.environment=function(e){var t=this,o=Object.keys(t.environment);setTimeout(function(){var r,i=!1,a=[];o.forEach(function(e){void 0===core.environment[e]?a.push(e):core.environment[e]?t.environment[e]=core.environment[e]:core.environment[e]=t.environment[e]}),a.length>0&&n&&(r=JSON.parse(n.GetEnv(JSON.stringify({varList:a}))),o.forEach(function(e){""===r.result[e]?i=!0:core.environment[e]=t.environment[e]=r.result[e]}),i&&n.SetEnv(JSON.stringify(r.result))),e(!1,t.environment)},0)},e.savers=e.savers||{},e.savers.environment=function(e){var t=this;Object.keys(t.environment).forEach(function(e){core.constructor.prototype.environment[e]=t.environment[e]}),setTimeout(function(){n&&n.SetEnv(JSON.stringify(t.environment)),e()},0)},core.backend&&core.backend.session&&core.backend.session.userId?(e.getters.userSettings=function(e){var n=this;setTimeout(function(){var t=core.backend.settings[n.variable.name];n.variable.value=t,e(!1,t)},0)},e.savers.userSettings=function(e){!function(e,n){core.backend.request("users/"+core.backend.session.userId+"/settings",{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"PUT",onload:function(t,o){core.backend.settings[e.name]=e.value,window.extendCorePrototype("backend",core.backend),n(t,o)},onerror:function(){n(!0)},body:e.name+"="+e.value})}({name:this.variable.name,value:this.variable.value},function(n,t){n||!0!==t.data?e(!0):e()})}):(e.getters.userSettings=d("user-settings"),e.savers.userSettings=v("user-settings"))}function g(){core.taskManager.hideAll(),core.intent({action:"setup"},function(e){})}c.once("launcher:ready",function(){core.addListener("keydown:"+a,function(){clearTimeout(o),o=setTimeout(g,core.environment.onFocusDebounceTimeout)})}),e.exports={onAppInit:function(e,n){n(null,{init:function(e,n){var t,o={};core.packages.forEach(function(e){e.tree&&"settingsStructure"===e.name&&(t=e.tree),e.tuner&&(o[e.packageName]=e.version)}),p(e),f=e,s.splice(0),core.dependencyManager.load({dependencies:o,dependencyReady:l,done:function(){!function(e,n){var t,o,r;if(t=[],o={},r=0,Object.keys(e).forEach(function(n){o[n]=r,++r,null!==e[n]&&Array.isArray(e[n])&&e[n].forEach(function(e){o[e]=r,++r})}),r<s.length)for(;r<s.length;)o[s[r].name]||(o[s[r].name]=r,++r);t.length=s.length,s.forEach(function(e){t[o[e.name]]=function(n){e.instance.onSettingsInit({api:f,options:e.options,storage:core.dependencyManager.getPluginStorage(e.name),path:core.packageMap[e.packageName].url+"/../"},function(t,o){var r=null,i=null;o.options&&o.options.forEach(function(n){void 0!==n.data&&(void 0===n.saver&&(null===r&&(r=v(e.name)),n.saver=r),void 0===n.getter&&(null===i&&(i=d(e.name)),n.getter=i))}),o.content&&o.content.forEach(function(n){"option"===n.type&&void 0!==n.data&&(void 0===n.saver&&(null===r&&(r=v(e.name)),n.saver=r),void 0===n.getter&&(null===i&&(i=d(e.name)),n.getter=i))}),n(t,o)})},t[o[e.name]].toString=function(){return e.name}}),t=t.filter(function(e){return!!e}),i(t,n)}(t,function(e,t){u={},n(e,t)})}})}})},onInit:function(e,n){n(null,c)}}},function(e,n,t){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)},once:function(e,n){var t=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){t.removeListener(e,o),n.apply(t,arguments)})},addListeners:function(e){var n;for(n in e)e.hasOwnProperty(n)&&this.addListener(n,e[n])},removeListener:function(e,n){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==n}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var n,t=this.events[e];if(t)for(n=0;n<t.length;n++)t[n].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,n,t){"use strict";e.exports=function(e,n){var t=!1,o=0,r=[];e=Array.isArray(e)?e:[],"function"!=typeof n&&(n=function(){}),0===e.length?n(null,r):function i(a){var c=function(a,c){if(a)return t=!0,void n(a);r[o]=c,++o>=e.length?n(null,r):i(e[o])};t||(0===a.length?c(null,a()):a(c))}(e[0])}},function(e,n,t){"use strict";var o=t(4);o.back=o.backspace,o.channelNext=o.tab,o.channelPrev=o.tab+"s",o.ok=o.enter,o.exit=o.escape,o.volumeUp=107,o.volumeDown=109,o.f1="112c",o.f2="113c",o.f3="114c",o.f4="115c",o.refresh="116c",o.frame="117c",o.phone="119c",o.set="120c",o.tv="121c",o.menu="122c",o.app="123c",o.rewind="66a",o.forward="70a",o.audio="71a",o.standby="74a",o.keyboard="76a",o.usbMounted="80a",o.usbUnmounted="81a",o.playPause="82a",o.play=-1,o.pause=-1,o.stop="83a",o.power="85a",o.record="87a",o.info="89a",o.mute="192a",o.digit0=48,o.digit1=49,o.digit2=50,o.digit3=51,o.digit4=52,o.digit5=53,o.digit6=54,o.digit7=55,o.digit8=56,o.digit9=57,e.exports=o},function(e,n,t){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}}]);
//# sourceMappingURL=main.js.map