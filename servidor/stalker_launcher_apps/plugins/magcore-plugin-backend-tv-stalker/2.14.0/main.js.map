{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/stalker.js","webpack:///./node_modules/cjs-emitter/index.js","webpack:///./src/js/epg.class.js","webpack:///./src/js/data.storage.js","webpack:///./src/js/main.js","webpack:///./src/js/channel.class.js","webpack:///./src/js/daemon.stalker.js","webpack:///./src/js/leanback.js","webpack:///./node_modules/magcore-plugin-content-board/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","LAST_CHANNELS_ADD","LAST_CHANNELS_UPDATE","LAST_CHANNELS_DELETE","totalChannels","Emitter","Channel","Epg","storage","instanceList","request","window","core","backend","INIT_CHANNELS_LIMIT","BACKGROUND_INTERVAL_TO","BACKGROUND_INTERVAL_FROM","EMPTY_INTERVAL_COUNT","emptyCounter","addCount","updateCount","deleteCount","tempChannelsData","intervals","deleteChannelsHandler","length","Date","onload","error","response","timestamp","data","list","filter","ch","indexOf","id","forEach","provider","emit","updateChannelsHandler","index","hash","updated","getChannels","config","callback","url","now","offset","push","paging","total","eventName","update","onerror","Provider","this","backgroungCheckInterval","addListener","message","type","addChannelsInterval","setInterval","map","concat","setTimeout","deleteChannelsInterval","updateChannelsInterval","UPDATE_INTERVALS_DELAY","constructor","reg","result","favorite","channel","genre","byName","sort","itemA","itemB","number","pvr","local_pvr","search","RegExp","matchName","match","matchNumber","toString","updateChannelsList","getCategories","getLastChannelId","cb","method","getEpgLink","channelId","epgId","getChannelsEpg","multiple","channelArray","params","channels","from","to","Math","round","encodeURIComponent","join","keys","targetData","epgData","destroy","splice","startBackgroundCheck","self","getRandomTimeout","seconds","floor","random","previousCount","stopBackgroundCheck","clearTimeout","events","once","onceWrapper","removeListener","apply","arguments","addListeners","callbacks","fn","undefined","event","Array","slice","downloadable","start","end","title","archive","in_archive","getLink","propertyName","findByNumber","prop","element","onAppInit","appPlugin","onInit","onContentBoardInit","dump","done","toggleFavorite","body","JSON","stringify","getUrl","solution","getEpg","getFullYear","getMonth","getDate","setLast","TV_APP_NAME","CLASSIC_TV_APP_NAME","appsConfig","isAppRunning","appName","taskManager","topApp","packageName","hardcodeLoader","TV","packageMap","CLASSIC_TV","appProvider","channelToPlay","targetApp","channelToCheckCensored","msg","locked","censored","runApp","ignoreAccessControl","visible","app","parseInt","getAppProvider","leanback","providerIcons","480","normal","active","576","720","1080","api","ready","imagePath","path","screen","height","query","doneCallback","icons","startData","dataToSend","icon","logo","host","layout","layouts","tvChannel","geometry","horizontal","program","progress","actions","accessControl","onClick","sendIntent","intent","action","mime","uri","headless","mediaId","extra","retryOnError","stream","video","record","static","application","square","vertical","expandItemContent"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/**\n *\n * @author Aleynikov Boris <aleynikov.boris@gmail.com>.\n */\n\n'use strict';\n\nvar Emitter                 = require('cjs-emitter'),\n    Channel                 = require('./channel.class'),\n    Epg                     = require('./epg.class'),\n\n    storage                 = require('./data.storage'),\n\n    instanceList            = [],\n    request                 = window.core.backend.request,\n\n    // count of channels to get per request to init provider\n    INIT_CHANNELS_LIMIT     = 500,\n    // every 3 minutes update channels\n    UPDATE_CHANNELS_TIMEOUT = 60000 * 3,\n    // delay between intervals\n    UPDATE_INTERVALS_DELAY  = 15000,\n\n    BACKGROUND_INTERVAL_TO  = 60,\n    BACKGROUND_INTERVAL_FROM = 30,\n\n    EMPTY_INTERVAL_COUNT    = 10,\n    // LEANBACK_ITEM_COLOR     = '#009bc2',\n\n    emptyCounter            = {\n        addCount: 0,\n        updateCount: 0,\n        deleteCount: 0\n    },\n    tempChannelsData        = [],\n    intervals               = {},\n\n    LAST_CHANNELS_ADD,\n    LAST_CHANNELS_UPDATE,\n    LAST_CHANNELS_DELETE,\n\n\n    // when collecting channels in parts save channels in tmp array\n    totalChannels;\n\nfunction addChannelsHandler () {\n    var url;\n\n    if ( !instanceList.length && emptyCounter.addCount < EMPTY_INTERVAL_COUNT ) {\n        emptyCounter.addCount++;\n\n        return;\n    }\n    url = 'tv-channels/added?from=' + LAST_CHANNELS_ADD + '&t=' + +new Date();\n    emptyCounter.addCount = 0;\n    request(url, {\n        onload: function ( error, response ) {\n            if ( !error && response ) {\n                LAST_CHANNELS_ADD = response.timestamp;\n                if ( response.data.length ) {\n\n                    response.data = response.data.map(function ( object ) {\n                        return new Channel(object);\n                    });\n                    storage.list = storage.list.concat(response.data);\n                    instanceList.forEach(function ( provider ) {\n                        provider.emit('channels:add', {data: response.data});\n                    });\n                }\n            }\n        }\n    });\n}\n\nfunction deleteChannelsHandler () {\n    if ( !instanceList.length && emptyCounter.deleteCount < EMPTY_INTERVAL_COUNT ) {\n        emptyCounter.deleteCount++;\n\n        return;\n    }\n    emptyCounter.deleteCount = 0;\n    request('tv-channels/deleted?from=' + LAST_CHANNELS_DELETE + '&t=' + +new Date(), {\n        onload: function ( error, response ) {\n            if ( !error && response ) {\n                LAST_CHANNELS_DELETE = response.timestamp;\n                if ( response.data.length ) {\n                    storage.list = storage.list.filter(function (ch) {\n                        return (response.data.indexOf(ch.id) < 0);\n                    });\n                    instanceList.forEach(function ( provider ) {\n                        provider.emit('channels:delete', {data: response.data});\n                    });\n                }\n            }\n        }\n    });\n}\n\nfunction updateChannelsHandler () {\n    if ( !instanceList.length && emptyCounter.updateCount < EMPTY_INTERVAL_COUNT ) {\n        emptyCounter.updateCount++;\n\n        return;\n    }\n    emptyCounter.updateCount = 0;\n    request('tv-channels/modified?from=' + LAST_CHANNELS_UPDATE + '&t=' + +new Date(), {\n        onload: function ( error, response ) {\n            var hash = {},\n                index;\n\n            if ( !error && response ) {\n                LAST_CHANNELS_UPDATE = response.timestamp;\n                if ( response.data.length ) {\n\n                    response.data.forEach(function ( updated ) {\n                        hash[updated.id] = new Channel(updated);\n                    });\n\n                    for ( index = 0; index < storage.list.length; index++ ) {\n                        if ( hash[storage.list[index].id] ) {\n                            storage.list[index] = hash[storage.list[index].id];\n                        }\n                    }\n\n                    instanceList.forEach(function ( provider ) {\n                        provider.emit('channels:modified', {data: response.data});\n                    });\n\n                }\n            }\n        }\n    });\n}\n\n/**\n * Start to recursive grab channels\n *\n * @param {Object} [config] - config to grab\n * @param {Function} callback - callback after getting channels\n */\nfunction getChannels ( config, callback ) {\n    var url = 'tv-channels',\n        // add some timestamp to prevent cache request on mag 256\n        timestamp = Date.now() / 1000;\n\n    config = config || {};\n\n\n    url += '?limit=' + INIT_CHANNELS_LIMIT;\n\n    if ( config.offset ) {\n        url += '&offset=' + config.offset;\n    }\n    url += '&t=' + timestamp;\n    request(url, {\n        onload: function ( error, response ) {\n            var index;\n\n            if ( error ) {\n                // do sth\n\n            } else {\n                for ( index = 0; index < response.data.length; index++ ) {\n                    tempChannelsData.push(new Channel(response.data[index]));\n                }\n\n                if ( !totalChannels ) {\n                    totalChannels = response.paging.total;\n                }\n                // save config and set offset\n                if ( tempChannelsData.length < totalChannels ) {\n                    config.offset = tempChannelsData.length;\n                    getChannels(config, callback);\n                } else {\n                    // clear tmp data\n                    storage.list = tempChannelsData;\n                    tempChannelsData = [];\n                    totalChannels = 0;\n\n                    config.eventName = config.eventName || 'ready';\n\n                    if (config.update) {\n                        instanceList.forEach(function ( provider ) {\n                            provider.emit('update');\n                        });\n                    }\n                    if ( callback ) {\n                        callback(false);\n                    }\n                    LAST_CHANNELS_ADD = LAST_CHANNELS_DELETE = LAST_CHANNELS_UPDATE = response.timestamp;\n                }\n\n            }\n        },\n        onerror: function () {\n            callback(true);\n        }\n    });\n}\n\nwindow.core.backend.addListener('message', function ( message ) {\n    switch ( message.type ) {\n        case 'update_subscription':\n            getChannels({update: true});\n            break;\n    }\n});\n\n\nintervals.addChannelsInterval = setInterval(addChannelsHandler, UPDATE_CHANNELS_TIMEOUT);\n\nsetTimeout(function () {\n    intervals.deleteChannelsInterval = setInterval(deleteChannelsHandler, UPDATE_CHANNELS_TIMEOUT);\n}, UPDATE_INTERVALS_DELAY);\n\nsetTimeout(function () {\n    intervals.updateChannelsInterval = setInterval(updateChannelsHandler, UPDATE_CHANNELS_TIMEOUT);\n}, UPDATE_INTERVALS_DELAY * 2);\n\n/**\n * Channel list provider implementation\n *\n * @constructor\n */\nfunction Provider () {\n    Emitter.call(this);\n\n    /**\n     * Id of backround check timeout\n     */\n    this.backgroungCheckInterval = null;\n}\n\n\nProvider.prototype = Object.create(Emitter.prototype);\nProvider.prototype.constructor = Provider;\n\n/**\n * Get channel list\n *\n * @param {Object} config - config to get channels\n * @param {Function} callback - callback after getting data\n */\nProvider.prototype.getChannels = function ( config, callback ) {\n    var result = storage.list,\n        reg;\n\n    if ( config.favorite ) {\n        result = result.filter(function ( channel ) {\n            return !!channel.favorite;\n        });\n    }\n    if ( config.genre ) {\n        result = result.filter( function ( channel ) {\n            return channel.genre.id === config.genre;\n        });\n    }\n    if ( config.byName ) {\n        result = result.sort(function ( itemA, itemB ) {\n            return itemA.name > itemB.name ? 1 : -1;\n        });\n    } else {\n        result = result.sort(function ( itemA, itemB ) {\n            return itemA.number > itemB.number ? 1 : -1;\n        });\n    }\n\n    if ( config.pvr ) {\n        result = result.filter( function ( channel ) {\n            return ( channel.pvr || channel.local_pvr );\n        });\n    }\n\n    if ( config.search ) {\n        reg = new RegExp(config.search, 'i');\n        result = result.filter(function ( channel ) {\n            var matchName = channel.name.match(reg),\n                matchNumber = channel.number.toString().match(reg);\n\n            return ((matchName && matchName.length) || (matchNumber && matchNumber.length));\n        });\n    }\n    callback(false, result);\n};\n\n/**\n * Request full update channels list\n *\n * @param {Function} callback - callback after all done\n */\nProvider.prototype.updateChannelsList = function ( callback ) {\n    getChannels(null, callback);\n};\n\nProvider.prototype.getCategories = function ( callback ) {\n    request('tv-genres', {\n        onload: function ( error, response ) {\n            if ( error ) {\n                if ( callback ) {\n                    callback(true);\n                }\n\n                return;\n            }\n            if ( callback ) {\n                callback(false, response.data);\n            }\n        },\n        onerror: function () {\n            if ( callback ) {\n                callback(true);\n            }\n        }\n    });\n};\n\nProvider.prototype.getLastChannelId = function ( cb ) {\n    request('storage/lastChannel', {\n        method: 'GET',\n        onload: function ( error, response ) {\n            if ( error && cb ) {\n                cb(error, null);\n            } else if (cb && response.data.value ) {\n                cb(false, response.data.value);\n            }\n        },\n        onerror: function () {\n            if ( cb ) {\n                cb(true, null);\n            }\n        }\n    });\n};\n\nProvider.prototype.getEpgLink = function ( config, callback ) {\n    var url = 'tv-channels/' + config.channelId + '/epg/' + config.epgId + '/link';\n\n    request(url, {\n        onload: function ( error, response ) {\n            if ( error ) {\n                callback(true, []);\n            } else {\n                callback(false, response.data);\n            }\n        },\n        onerror: function () {\n            callback(true, []);\n        }\n    });\n};\n\n\nProvider.prototype.getChannelsEpg = function ( config, callback ) {\n    var map = {},\n        multiple,\n        url,\n        channelArray,\n        from,\n        to,\n        params;\n\n    config = config || {};\n\n    channelArray = config.channels;\n    multiple = channelArray.length > 1;\n\n\n    if ( !config.from && !config.to ) {\n        params = 'next=1';\n    } else {\n        from = Math.round(config.from / 1000) || '';\n        to  = Math.round(config.to / 1000) || '';\n        params = 'from=' + from + '&to=' + to;\n    }\n    channelArray.forEach(function ( channel ) {\n        map[channel.id] = channel;\n    });\n\n    url = 'tv-channels/' + encodeURIComponent(channelArray.map(function ( channel ) {\n        return channel.id;\n    }).join(',')) + '/epg?' + params;\n\n    return request(url, {\n        onload: function ( error, response ) {\n            var result = {};\n\n            if ( error && callback ) {\n                callback(true, []);\n            } else {\n                Object.keys(response.data).forEach(function ( key ) {\n                    var channelId = multiple ? key : channelArray[0].id,\n                        targetData = multiple ? response.data[key] : response.data;\n\n                    result[channelId] = [];\n                    targetData.forEach(function ( epgData ) {\n                        epgData.channel = map[channelId];\n                        result[channelId].push(new Epg(epgData));\n                    });\n                });\n                callback(false, result);\n            }\n        },\n        onerror: function () {\n            callback(true, []);\n        }\n    });\n};\n\n// destroy remove this instance from instance list\nProvider.prototype.destroy = function () {\n    var index = instanceList.indexOf(this);\n\n    if ( index ) {\n        instanceList = instanceList.splice(index, 1);\n    }\n};\n\nProvider.prototype.startBackgroundCheck = function () {\n    var self = this;\n\n    function getRandomTimeout () {\n        var seconds = (Math.floor(Math.random() * BACKGROUND_INTERVAL_TO) + BACKGROUND_INTERVAL_FROM ) * 60 * 1000;\n\n        // console.log('channels:updater: get interval ' + seconds);\n\n        if ( seconds / 60000 > 60 ) {\n            seconds = getRandomTimeout();\n        }\n\n        return seconds;\n    }\n\n    function update () {\n        var previousCount = storage.list.length;\n\n        // console.log('channels:updater: was length: ' + previousCount);\n\n        getChannels({}, function ( error ) {\n            if ( error ) {\n                // console.log('channels:updater: error updating channels');\n            }\n\n            // console.log('channels:updater: new length: ' + storage.list.length);\n            if ( previousCount !== storage.list.length ) {\n                self.emit('update');\n            }\n\n            self.backgroungCheckInterval = setTimeout(update, getRandomTimeout());\n        });\n    }\n\n    this.backgroungCheckInterval = setTimeout(update, getRandomTimeout());\n};\n\n\nProvider.prototype.stopBackgroundCheck = function () {\n    clearTimeout(this.backgroungCheckInterval);\n};\n\nfunction getAppProvider ( config, callback ) {\n    var provider = new Provider();\n\n\n    instanceList.push(provider);\n\n    callback(null, provider);\n}\n\nmodule.exports = getAppProvider;\n","/**\n * @license The MIT License (MIT)\n * @author Stanislav Kalashnik <darkpark.main@gmail.com>\n */\n\n/* eslint no-path-concat: 0 */\n\n'use strict';\n\n\n/**\n * Base Events Emitter implementation.\n *\n * @see http://nodejs.org/api/events.html\n * @constructor\n *\n * @example\n * var emitter = new Emitter();\n */\nfunction Emitter () {\n    console.assert(typeof this === 'object', 'must be constructed via new');\n\n    // if ( DEVELOP ) {\n    //     if ( typeof this !== 'object' ) { throw new Error(__filename + ': must be constructed via new'); }\n    // }\n\n    /**\n     * Inner hash table for event names and linked callbacks.\n     * Manual editing should be avoided.\n     *\n     * @member {Object.<string, function[]>}\n     *\n     * @example\n     * {\n     *     click: [\n     *         function click1 () { ... },\n     *         function click2 () { ... }\n     *     ],\n     *     keydown: [\n     *         function () { ... }\n     *     ]\n     * }\n     **/\n    this.events = {};\n}\n\n\nEmitter.prototype = {\n    /**\n     * Bind an event to the given callback function.\n     * The same callback function can be added multiple times for the same event name.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to call on this event\n     *\n     * @example\n     * emitter.addListener('click', function ( data ) { ... });\n     * // one more click handler\n     * emitter.addListener('click', function ( data ) { ... });\n     */\n    addListener: function ( name, callback ) {\n        console.assert(arguments.length === 2, 'wrong arguments number');\n        console.assert(typeof name === 'string', 'wrong name type');\n        console.assert(name.length > 0, 'empty name');\n        console.assert(typeof callback === 'function', 'callback should be a function');\n\n        // if ( DEVELOP ) {\n        //     if ( arguments.length !== 2 ) { throw new Error(__filename + ': wrong arguments number'); }\n        //     if ( typeof name !== 'string' || name.length === 0 ) { throw new Error(__filename + ': wrong or empty name'); }\n        //     if ( typeof callback !== 'function' ) { throw new Error(__filename + ': wrong callback type'); }\n        // }\n\n        // initialization may be required\n        this.events[name] = this.events[name] || [];\n        // append this new event to the list\n        this.events[name].push(callback);\n    },\n\n\n    /**\n     * Add a one time listener for the event.\n     * This listener is invoked only the next time the event is fired, after which it is removed.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to call on this event\n     *\n     * @example\n     * emitter.once('click', function ( data ) { ... });\n     */\n    once: function ( name, callback ) {\n        // current execution context\n        var self = this;\n\n        if ( DEVELOP ) {\n            if ( arguments.length !== 2 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n            if ( typeof callback !== 'function' ) {\n                throw new Error(__filename + ': wrong callback type');\n            }\n        }\n\n        // initialization may be required\n        this.events[name] = this.events[name] || [];\n        // append this new event to the list\n        this.events[name].push(function onceWrapper () {\n            self.removeListener(name, onceWrapper);\n            callback.apply(self, arguments);\n        });\n    },\n\n\n    /**\n     * Apply multiple listeners at once.\n     *\n     * @param {Object} callbacks event names with callbacks\n     *\n     * @example\n     * emitter.addListeners({\n     *     click: function ( data ) {},\n     *     close: function ( data ) {}\n     * });\n     */\n    addListeners: function ( callbacks ) {\n        var name;\n\n        if ( DEVELOP ) {\n            if ( arguments.length !== 1 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof callbacks !== 'object' ) {\n                throw new Error(__filename + ': wrong callbacks type');\n            }\n            if ( Object.keys(callbacks).length === 0 ) {\n                throw new Error(__filename + ': no callbacks given');\n            }\n        }\n\n        for ( name in callbacks ) {\n            if ( callbacks.hasOwnProperty(name) ) {\n                this.addListener(name, callbacks[name]);\n            }\n        }\n    },\n\n\n    /**\n     * Remove all instances of the given callback.\n     *\n     * @param {string} name event identifier\n     * @param {function} callback function to remove\n     *\n     * @example\n     * emitter.removeListener('click', func1);\n     */\n    removeListener: function ( name, callback ) {\n        if ( DEVELOP ) {\n            if ( arguments.length !== 2 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n            if ( typeof callback !== 'function' ) {\n                throw new Error(__filename + ': wrong callback type');\n            }\n            if ( this.events[name] && !Array.isArray(this.events[name]) ) {\n                throw new Error(__filename + ': corrupted inner data');\n            }\n        }\n\n        // the event exists and should have some callbacks\n        if ( this.events[name] ) {\n            // rework the callback list to exclude the given one\n            this.events[name] = this.events[name].filter(function callbacksFilter ( fn ) { return fn !== callback; });\n            // event has no more callbacks so clean it\n            if ( this.events[name].length === 0 ) {\n                // as if there were no listeners at all\n                this.events[name] = undefined;\n            }\n        }\n    },\n\n\n    /**\n     * Remove all callbacks for the given event name.\n     * Without event name clears all events.\n     *\n     * @param {string} [name] event identifier\n     *\n     * @example\n     * emitter.removeAllListeners('click');\n     * emitter.removeAllListeners();\n     *\n     * @deprecated\n     */\n    /*removeAllListeners: function ( name ) {\n        if ( DEVELOP ) {\n            if ( arguments.length !== 0 && (typeof name !== 'string' || name.length === 0) ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n        }\n\n        // check input\n        if ( arguments.length === 0 ) {\n            // no arguments so remove everything\n            this.events = {};\n        } else if ( name ) {\n            if ( DEVELOP ) {\n                if ( this.events[name] ) { throw new Error(__filename + ': event is not removed'); }\n            }\n\n            // only name is given so remove all callbacks for the given event\n            // but object structure modification should be avoided\n            this.events[name] = undefined;\n        }\n    },*/\n\n\n    /**\n     * Execute each of the listeners in the given order with the supplied arguments.\n     *\n     * @param {string} name event identifier\n     *\n     * @example\n     * emitter.emit('init');\n     * emitter.emit('click', {src: panel1, dst: panel2});\n     * emitter.emit('load', error, data);\n     *\n     * // it's a good idea to emit event only when there are some listeners\n     * if ( this.events['click'] ) {\n     *     this.emit('click', {event: event});\n     * }\n     */\n    emit: function ( name ) {\n        var event = this.events[name],\n            index;\n\n        if ( DEVELOP ) {\n            if ( arguments.length < 1 ) {\n                throw new Error(__filename + ': wrong arguments number');\n            }\n            if ( typeof name !== 'string' || name.length === 0 ) {\n                throw new Error(__filename + ': wrong or empty name');\n            }\n        }\n\n        // the event exists and should have some callbacks\n        if ( event ) {\n            if ( DEVELOP ) {\n                if ( !Array.isArray(event) ) {\n                    throw new Error(__filename + ': wrong event type');\n                }\n            }\n\n            for ( index = 0; index < event.length; index++ ) {\n                if ( DEVELOP ) {\n                    if ( typeof event[index] !== 'function' ) {\n                        throw new Error(__filename + ': wrong event callback type');\n                    }\n                }\n\n                // invoke the callback with parameters\n                event[index].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    }\n};\n\n\n// correct constructor name\nEmitter.prototype.constructor = Emitter;\n\n\n// public\nmodule.exports = Emitter;\n","/**\n *\n * @author Aleynikov Boris <aleynikov.boris@gmail.com>.\n */\n\n'use strict';\n\nvar request = window.core.backend.request;\n\n\nfunction Epg ( config ) {\n    config = config || {};\n\n    /**\n     * Is epg can be downloaded\n     */\n    this.downloadable = config.downloadable;\n\n    /**\n     * Start time ms\n     */\n    this.start = config.start;\n\n    /**\n     * End time ms\n     */\n    this.end = config.end;\n\n    /**\n     * Epg title\n     */\n    this.title = config.name;\n\n    /**\n     * Id\n     */\n    this.id = config.id;\n\n    /**\n     * Is epg in archive\n     */\n    this.archive = config.in_archive;\n\n    /**\n     * Link to channel\n     */\n    this.channel = config.channel;\n}\n\n\nEpg.prototype = {};\nEpg.prototype.constructor = Epg;\n\n/**\n * Return link object contains type, id, and url\n *\n * @param {Function} callback - callback after getting link\n */\nEpg.prototype.getLink = function ( callback ) {\n    var url = 'tv-channels/' + this.channel.id + '/epg/' + this.id + '/link';\n\n    request(url, {\n        onload: function ( error, response ) {\n            if ( error ) {\n                callback(true, null);\n            } else {\n                callback(false, response.data);\n            }\n        },\n        onerror: function () {\n            callback(true, null);\n        }\n    });\n};\n\nmodule.exports = Epg;\n","/**\n *\n * @author Aleynikov Boris <aleynikov.boris@gmail.com>.\n */\n\n'use strict';\n\nvar storage;\n\nfunction findByProperty ( propertyName ) {\n\n    return function ( prop ) {\n        var length,\n            index,\n            element;\n\n        length = storage.list.length;\n\n        for ( index = 0; index < length; index++ ) {\n            element = storage.list[index];\n            if (\n                element[propertyName] !== undefined\n                && element[propertyName].toString() === prop.toString()\n            ) {\n\n                return element;\n            }\n        }\n\n        return false;\n    };\n}\n\n\nstorage = {\n\n    list: [],\n\n    findByNumber: findByProperty('number')\n};\n\n\nmodule.exports = storage;\n","/**\n *  Tv - channels plugin or system module implementation\n */\n\n'use strict';\n\nmodule.exports = {\n    onAppInit: function ( config, callback ) {\n        var appPlugin = require('./stalker');\n\n        appPlugin(config, callback);\n    },\n    onInit: require('./daemon.stalker'),\n    onContentBoardInit: function ( dump, done ) {\n        require('./leanback')(dump, done);\n    }\n};\n","/**\n *\n * @author Aleynikov Boris <alynikov.boris@gmail.com>.\n */\n\n'use strict';\n\nvar request = window.core.backend.request,\n    Epg = require('./epg.class');\n\nfunction Channel ( config ) {\n    var prop;\n\n    config = config || {};\n\n    if ( TARGET === 'smart') {\n        config.pvr = config.local_pvr = false; // eslint-disable-line\n    }\n\n    for ( prop in config ) {\n        this[prop] = config[prop];\n    }\n}\n\n\nChannel.prototype = {};\nChannel.prototype.constructor = Channel;\n\n/**\n * Toggle favorite state\n *\n * @param {Function} callback - callback after toggle\n */\nChannel.prototype.toggleFavorite = function ( callback ) {\n    var self = this;\n\n    request('tv-channels/' + this.id, {\n        method: 'PUT',\n        body: JSON.stringify({favorite: !self.favorite}),\n        onload: function ( error ) {\n            if ( error ) {\n                callback(true);\n            } else {\n                self.favorite = !self.favorite;\n                callback(false, self.favorite);\n            }\n        },\n        onerror: function () {\n            callback(true);\n        }\n    });\n};\n\nChannel.prototype.getUrl = function ( callback ) {\n    if ( this.url ) {\n        callback(false, {url: this.url, solution: this.solution});\n    } else {\n        request('tv-channels/' + this.id + '/link', {\n            onload: function ( error, response ) {\n                if ( error ) {\n                    callback(error, null);\n                } else {\n                    callback(false, {url: response.data.url, solution: response.data.solution});\n                }\n            },\n            onerror: function () {\n                callback(true, null);\n            }\n        });\n    }\n};\n\n\nChannel.prototype.getEpg = function ( config, cb ) {\n    var self = this,\n        now = new Date(),\n        url, from, to;\n\n    config = config || {};\n\n    // use 7 days before current and next 7 days to get epg\n    from = +new Date(now.getFullYear(), now.getMonth(), now.getDate() - 7);\n    to =  +new Date(now.getFullYear(), now.getMonth(), now.getDate() + 7);\n    from = Math.round(from / 1000);\n    to  = Math.round(to / 1000);\n\n    from = config.from || from;\n    to = config.to || to;\n\n    url = 'tv-channels/' + this.id + '/epg/?from=' + from + '&to=' + to;\n    request(url, {\n        onload: function ( error, response ) {\n            var result = [];\n\n            if ( error && cb ) {\n                cb(true, []);\n            } else {\n                response.data.forEach(function ( epgData ) {\n                    epgData.channel = self;\n                    result.push(new Epg(epgData));\n                });\n                cb(false, result);\n            }\n        },\n        onerror: function () {\n            cb(true, []);\n        }\n    });\n};\n\nChannel.prototype.setLast = function ( cb ) {\n    request('storage', {\n        body: JSON.stringify({value: this.id, key: 'lastChannel'}),\n        method: 'POST',\n        onload: function ( error ) {\n            if ( error && cb ) {\n                cb(error);\n            } else if ( cb ) {\n                cb(false);\n            }\n        },\n        onerror: function () { if ( cb ) { cb(true, null); } }\n    });\n};\n\n\nmodule.exports = Channel;\n","/**\n *\n * @author Aleynikov Boris <aleynikov.boris@gmail.com>.\n */\n\n'use strict';\n\nvar Emitter               = require('cjs-emitter'),\n    storage               = require('./data.storage'),\n\n    // constants\n    EVENT_BACKEND_LOAD    = 'system:start',\n    EVENT_MESSAGE_RECEIVE = 'play_channel',\n    TV_APP_NAME           = 'magcore-app-tv',\n    CLASSIC_TV_APP_NAME   = 'magcore-app-tv-classic',\n\n    appsConfig            = {\n        /* here will be apps configs */\n    };\n\nfunction isAppRunning ( appName ) {\n\n    return (core.taskManager.topApp && core.taskManager.topApp.config.packageName === appName);\n}\n\n\nfunction sendPlayChannelEvent ( channelToPlay ) {\n    var targetApp,\n        channelToCheckCensored;\n\n    // if we are watching TV Classic app we do not need do checks\n    if ( isAppRunning(CLASSIC_TV_APP_NAME) ) {\n        targetApp = appsConfig.CLASSIC_TV;\n    } else if ( isAppRunning(TV_APP_NAME) ) {\n        // if we are watching TV app we do not need do checks\n        targetApp = appsConfig.TV;\n    } else if ( appsConfig.CLASSIC_TV && !appsConfig.CLASSIC_TV.locked ) {\n        // if classic tv is present and not under parent password\n        targetApp = appsConfig.CLASSIC_TV;\n    } else if ( appsConfig.TV && (!appsConfig.TV.locked || isAppRunning(TV_APP_NAME))) {\n        // if tv app is present and not under parent password\n        targetApp = appsConfig.TV;\n    } else {\n        console.log('we cant send message to tv apps :(');\n    }\n\n    channelToCheckCensored = storage.findByNumber(channelToPlay);\n\n    if (\n        channelToCheckCensored\n        && (channelToCheckCensored.censored || ( channelToCheckCensored.genre && channelToCheckCensored.genre.censored ))\n    ) {\n        // this channel is under parent control and we should do nothing\n        return;\n    }\n\n    core.taskManager.runApp({\n        config: targetApp,\n        ignoreAccessControl: true,\n        visible: true,\n        onload: function ( app ) {\n            setTimeout(function () {\n                app.core.emit('play:channel', {number: parseInt(channelToPlay, 10)});\n            }, 100);\n        }\n    });\n}\n\n\n// window.top.qm = {\n//     START_POINT_TIMESTAMP: +new Date(),\n//     send: function ( n ) {\n//         sendPlayChannelEvent(n);\n//     },\n//     storage: storage\n// };\n\nmodule.exports = function ( config, callback ) {\n    var hardcodeLoader = new Emitter();\n\n\n    hardcodeLoader.once(EVENT_BACKEND_LOAD, function () {\n        // find apps links\n        appsConfig.TV = core.packageMap[TV_APP_NAME];\n        appsConfig.CLASSIC_TV = core.packageMap[CLASSIC_TV_APP_NAME];\n\n        // get app provider to force update channel list\n        require('./stalker')(config, function ( error, appProvider ) {\n            if ( error ) {\n                console.log('error getting provider');\n            }\n            appProvider.updateChannelsList(function () {\n                window.core.backend.addListener('message', function ( message ) {\n                    if ( message && message.type === EVENT_MESSAGE_RECEIVE ) {\n                        // here we have channel id or number to play\n                        sendPlayChannelEvent(message.msg);\n                    }\n                });\n\n            });\n        });\n    });\n\n    if ( callback ) {\n        callback(false, hardcodeLoader);\n    }\n\n};\n","/**\n *\n * @author Aleynikov Boris <aleynikov.boris@gmail.com>.\n */\n\n'use strict';\n\n/* eslint max-len:0*/\n\nvar Emitter        = require('cjs-emitter'),\n    getAppProvider = require('./stalker'),\n    leanback       = require('magcore-plugin-content-board/index'),\n\n    LEANBACK_CHANNELS_COUNT = 10,\n    // LEANBACK_ITEM_COLOR     = '#0193d5',\n    providerIcons = {\n        480: {\n            normal: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAb5JREFUWAntVr1Kw1AUTtKf2KAdYhcHEQdBBHH2ARw6dBQtIu6+hBk6+wq6CQWnPoVPoOAoDjZ0CSSlxCR+B3NKS2/SXHqLDgnc3r9zvu/c7557bzVN0wwUpV+SJBbKte/7O0uAjSoM4iVGUtOe523HcXwFJ9s0TcJ/yAGIyUDZFwTBbqPR6CIAUuCzUqn0l4EXkn88Hu8B8NJ13a0swMlkcoQV36TkbyB/1HXdz7Ln8UIB1Gq1MwAftlqtWwRyzM5ch2F4Wq/Xz9GvYv6l1+v1QR7y/Mo1rRzA3SiKHCpoXwyHw03HcQy02+nYHQUiS6bLOIDsBPZtqLFhGEaA9hfa+6i/0X/Gql9l8MhWKgByGI1GTdu2OyA+oD6+APv/ZFnWx29X7lcn+eRc1FoXSkK1lPNo03sAx8aZn1pvj5X/PwrwepHplFyUZE0eW6XG6fDgP8AJeRfhiBRQRk6E6UI6InIam+YAG/DKVeUE7TVjMsdsLVJgdn7t7TKAUoFSgVKBUoGFt4BeL7q7+b1WcRenL6IQSrQFgzwHIUrOID/HWSYLCqTv9n2Wg+pxkQKqOXLx/v5fMRIuN8J1ThL3DwPnuJXTZYA4AAAAAElFTkSuQmCC',\n            active: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAuJJREFUaAXtmb9rFEEUx3dXEdRAIF2wkYAoCGJjKyKmCNhaHKSLlzKllWjl/5BCC8EuYKNtbL3Kwh8gEiyMqIWCcoEIend+Xnhv3dzuunPH7d6M3MKXeTPzfnzfzpvZu90oiqIjwItrMBgcB5vgoiMhb7hHkD4NXvT7fZrBJzDnmMT01SC7DL4q+W/I16bPypEBZG+B30r+JfKSo+lk1Ai4PI4n7ObAlhBX8lv0T47ja2wbAt7R4I+R510doXsGvFbbHvJtV9uJ6hF4A/xSIjvIlacHOtfBd7X5If2JkhrVGQQugy9KaB/5ZpEPxmNwF6B6cNK8RT5XpNv4GEROgedCTMk9pH/CiCDPgyeZ+acyZvNetBA6BjYzJF/RPwvOg3eZ8Xv0Ey9IF5GA3Br4qSvRRe6qvId8o8jGuzGIXgIfMnf9Pf0LdRCNJUgdjpvy6W8tOt6Bo6aXJElscgitVU7wK1CaAJtOHjxt0AEHJ4ltykm24ltjSKyRqyDdxNkSwtEiZfSI9mqT5RTH8TPirdJ+roprJRTZ3TQDuQtgW8a5dkELSEK1XOJbY+xqzG36lSuR8k4FpYdxO0N+oRbWBU6JuwAsiXaByqGhlHcq6DROOppA65BFAx1itzR2pypcyjsV/iZgj/7ayqaMHAksagLdMh0bN965TSwTopTd1GbUROsaP9VrglSdMUqfA3UGHcU3ZbUC5DQUrORsrZZsYrhv4021w/GFuI2JbDxszPsVMMJlbQgJrPNk/iggifXhRGan0PAdabrvfQnJySObVzE7hZqukMp43pcQGcxOocplnKZCCCX0z/vz/yXAI3tPUubcncofGoltHESuuopW4I0aXakyrmHeYhqH6hD2s9Q0ufPB/6kP6rVK7teorITWfxAvtgoT0CTk5ZJ871oD8pWlli/numGl5h+A+/SdXvdL6aMflSYgkz5flkDRKeQz7xy3dAVyM4EMJL1eLxCqeZrC/Q9bOOZ3iNQcwwAAAABJRU5ErkJggg=='\n        },\n        576: {\n            normal: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAb5JREFUWAntVr1Kw1AUTtKf2KAdYhcHEQdBBHH2ARw6dBQtIu6+hBk6+wq6CQWnPoVPoOAoDjZ0CSSlxCR+B3NKS2/SXHqLDgnc3r9zvu/c7557bzVN0wwUpV+SJBbKte/7O0uAjSoM4iVGUtOe523HcXwFJ9s0TcJ/yAGIyUDZFwTBbqPR6CIAUuCzUqn0l4EXkn88Hu8B8NJ13a0swMlkcoQV36TkbyB/1HXdz7Ln8UIB1Gq1MwAftlqtWwRyzM5ch2F4Wq/Xz9GvYv6l1+v1QR7y/Mo1rRzA3SiKHCpoXwyHw03HcQy02+nYHQUiS6bLOIDsBPZtqLFhGEaA9hfa+6i/0X/Gql9l8MhWKgByGI1GTdu2OyA+oD6+APv/ZFnWx29X7lcn+eRc1FoXSkK1lPNo03sAx8aZn1pvj5X/PwrwepHplFyUZE0eW6XG6fDgP8AJeRfhiBRQRk6E6UI6InIam+YAG/DKVeUE7TVjMsdsLVJgdn7t7TKAUoFSgVKBUoGFt4BeL7q7+b1WcRenL6IQSrQFgzwHIUrOID/HWSYLCqTv9n2Wg+pxkQKqOXLx/v5fMRIuN8J1ThL3DwPnuJXTZYA4AAAAAElFTkSuQmCC',\n            active: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAuJJREFUaAXtmb9rFEEUx3dXEdRAIF2wkYAoCGJjKyKmCNhaHKSLlzKllWjl/5BCC8EuYKNtbL3Kwh8gEiyMqIWCcoEIend+Xnhv3dzuunPH7d6M3MKXeTPzfnzfzpvZu90oiqIjwItrMBgcB5vgoiMhb7hHkD4NXvT7fZrBJzDnmMT01SC7DL4q+W/I16bPypEBZG+B30r+JfKSo+lk1Ai4PI4n7ObAlhBX8lv0T47ja2wbAt7R4I+R510doXsGvFbbHvJtV9uJ6hF4A/xSIjvIlacHOtfBd7X5If2JkhrVGQQugy9KaB/5ZpEPxmNwF6B6cNK8RT5XpNv4GEROgedCTMk9pH/CiCDPgyeZ+acyZvNetBA6BjYzJF/RPwvOg3eZ8Xv0Ey9IF5GA3Br4qSvRRe6qvId8o8jGuzGIXgIfMnf9Pf0LdRCNJUgdjpvy6W8tOt6Bo6aXJElscgitVU7wK1CaAJtOHjxt0AEHJ4ltykm24ltjSKyRqyDdxNkSwtEiZfSI9mqT5RTH8TPirdJ+roprJRTZ3TQDuQtgW8a5dkELSEK1XOJbY+xqzG36lSuR8k4FpYdxO0N+oRbWBU6JuwAsiXaByqGhlHcq6DROOppA65BFAx1itzR2pypcyjsV/iZgj/7ayqaMHAksagLdMh0bN965TSwTopTd1GbUROsaP9VrglSdMUqfA3UGHcU3ZbUC5DQUrORsrZZsYrhv4021w/GFuI2JbDxszPsVMMJlbQgJrPNk/iggifXhRGan0PAdabrvfQnJySObVzE7hZqukMp43pcQGcxOocplnKZCCCX0z/vz/yXAI3tPUubcncofGoltHESuuopW4I0aXakyrmHeYhqH6hD2s9Q0ufPB/6kP6rVK7teorITWfxAvtgoT0CTk5ZJ871oD8pWlli/numGl5h+A+/SdXvdL6aMflSYgkz5flkDRKeQz7xy3dAVyM4EMJL1eLxCqeZrC/Q9bOOZ3iNQcwwAAAABJRU5ErkJggg=='\n        },\n        720: {\n            normal: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA8lJREFUaAXtWctrE0EczsPEqE2LaIW0HlrEB21BiFfBguYkuVStgkel+mf00LNnDz1IL+agRSjioZeIZwsiBiGIPSViUUIfeT/8vnU2LpmUnXQncbd0YDqP/T2+b36/md1OfD6fL4jqitJqtUL1ej25t7cXUwQUDECwoSjcV7FCoXC62Ww+8vv91yKRyMNsNntcwWHDryDUdxGs/AWAvwtHJwKBQKlSqbwCiW8qjv87gVqtdh2gbwIssfzc3d1NjYyM/FYBTxmmkKPC1TuIAaYIdOcB/hb0/WgzqMu9gKdfRxHA6s3C6SyAfA0Gg2+Qv2UVMpA/g5R5ANlR6LewcdOhUOi9im6njKMIAEgZAJoAfgWAnqicHuVy+TJkFwR4pHsldVDwJOMoAjRQKpUmwuHwPXRPgUwdUXmH8Uc+sxaQpa8bAD8r5n8Vi8VUNBrdssr12ndMgA4BbhjNPMCd5xhEPmUymbfT09NVjvE8gmYOzy+JcRYp91o15aizX3GUQqZRANlOp9MvANRYeQC9OjU19Rjjs6jnMF4wwYPch6WlpZc6wNO/lgiYRNgCcBxgb6MbBFgjAhiHMa5hzI3+hXK6inYCBAYS4wB9H12mFksBeyU1NDT04+9Q319/o9FY1Gdu8Ja07IHBw/7n8ZjZxamwaPa90JqZc3gi0Lnq2Ijc4HEwjSM6o+Ik6RRzPOZJBR9b8LEBYxs4pVq9GG2nkFUJ4KMY88UzCYM+tNbHWvtcGPjgqTUOMjPwvYrxjqoTiYBYeQM8DG7D0DrqZi9GVZ1TTizWBLoJLhh8zmFuBf6UItFtD/BFREPb+Xz+OQx97hd4EqBt+qAv+qRvTMf5TKVIBJjzQnF9bGysqGJEh4zwxWj7LBhsTUsEuGGF1qattn4Bw6cFg60HiQBCyO8WI7S22poFzFQ1MaiYlwioKLlJRjqF3ASOWHAiXUSTFLjWEKWs6BuNFyKQREoNs1qItDl4gUAbbLeOFwis8f3ACgJrnSRcvwdEzj/rBG6OvRABE2vX1vURODqFusbNRZNe2ANHp5CLEkaG4oUUklFbZg4fAbyyzRtl/mM/0CL+P+bttoFBxbkUAV5xCMUJFQOaZQyfFgy25iUC4n6GiolcLnfS1oImAeErQXMWDLbWu31KbCCEM/j+nozFYk8R1kFeqwzD93eg5iWXUpEI4OsPmFurMGTcDcHKHVpCWJUM9iqEhWqrCPC82FK6E6KiRICTMLADEisw6M2rRUGCq8CfjFhdW6RN7Fqk+wDz/i801Wq1L7+T7bNgWqeJ/Q+uGajXVAGMsgAAAABJRU5ErkJggg==',\n            active: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA7dJREFUeAHtmj1oFEEUx/dODYKNSvALLW2CmMo+iIXaWAq2gqV2AQt7iSB2SpqATUq7VAaDFtaWIgoaMV0kEEEw3vl7YSf3nN2b29m93Zvd24U/8/bNzHv/92bn7dxHFEXRIRD81e/3z4DX4PIYydYi9oig58G3Xq9H0/8KTo8xCWGbIthbYFeCN+D+PTg6DubdcRgpywZBLmL7Fe0xy8dP7o9YuubcEvAMWDErrlv0z0D4exeSHfAQHPdZGsbPgnc6aJG5/oB7PrYmOhayj2Lin5AvZSHDuDnwReZpoNsGV7PYCGIMZG+CvyYI5F1w20WO/htgx8wxLbqP4KJrbnB9EF4zAegW/ROQ2L/oHoA9PVZkLnnvnwguwFGEIC1F7IUdUBzUOn2zYoP2sGPcc+kf5SvofgK4C37biUAnh5lrYD2lbw/9/aAD8yFHMFfAph1o2j3jdsB1H/u1GEtQp8CbtKCNjv7PYK4WAeUhSXCy35+agHWL/i3Yrwt5bNdqDoHeAb9MApBXwMykgugIkUk5D8Fv0B+GqkhQm4Aqshyyj8RJq9vtdkImXJSbXfPaLVA0o3Wfn9gCdkC8o8+jWwILyGft/qrvO53OFj43wCLy96L+E+cAXQPi4D/QnizqaNzzCX4bm/O+SfCtAUshBi/JjHnJk1noGlUEFwpZL39ycX7mTG5azdnoTEvW14DUhMov8Sv+DRfT+hIx80zrrAEySDtgv13w3XN6flE5TsKmtqNrltYPkxMx2Qpt0NU3zEHZ+qKcEvPLJhy6/VFFMHT+hfm1CSicwpobaJ+Ami9gYfqNegI4J8gvUo/Bjxgiu79wlfeihk6p1tvvTz2uStnFSYK3+0Wn+dn9XidBfUjSRquU7YXQnOJV/+8jOyfXLXDOcEzMNx3T2jaqBrCIL1MWMk03GGbviUFPFLn69LgqZRcnKXiy5+OtIIUwUQTt+Y2qAVkWQhKgxzVtC+jYMsmNSkCWLZDIir0n9ABXnx5XpeziJHve7hed5mf3N6oGEKwUvvYcoFd8lNyoGkCwae/8NN0gL/aeGPS054D9g5BOiD53a32VsiyY9ufLKTFfG5tG2asGUGEn8qOIWZgy/HslACLLZZAwAbra2O+ya0yePuc5AKeJ92oeJ2XNsT/rZ/HjWwM2shid4JjC/EY9AbLnp/f/AfEPofInhFV53Ca40geu48d+FYX3nyMOjCjB+QSocY0RfWtAYwIfFojva3CYndrqE1ugtpHkJD71T0CbgJxPTmOm/QOvtuGpPSrOfQAAAABJRU5ErkJggg=='\n        },\n        1080: {\n            normal: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABZNJREFUeAHtXEtrG1cU1suO8Qu31DW2oU0fXkQOJPE2KsUYL0oppGnT4GUXgf6A/oD8jJYsCl2EQkl2LYUstHEXLdQlFC9cDM2mtqjwwpVd2/JD/b7JHHE9mas7utJYo8wdGJ07576+891zHzNzR5lMJpPHmcP5Uh2NRiN3cnLy4fHx8aKlYeQkX8BPwz8ty0leNpAzdHp6eiebzb6DMwOSMgMDA+U2kZKXDAk6azNjopPv7u6+CoArIGbSB9ooFAr/WYD2HCdrkTGxWQ4ODt4cGhq6e3Z2NkyQuVyufnR09Ai6DVvQLw1B9Xr9OrrRRyCHYyqP2uHh4cORkZHt55d2v31PEMabLAbjJXhLSShAuILwQ3Szf0VnK/t69lpfXx+E4Z8FyPlzc3Pzm26QQ1Jj9yBOswA7sbGx8cP8/HzdtiWD+XZ2dsYnJiZWoJ+WOHjTr/l8/ifU17WJJ1aCSA5a930aAFnd29v7fmxs7B8xyFbu7+/PDA8Pr2C8GfPLaKB8EvOLbZm6fLF2MbQox4BTVg5jJkdHR+9hML2hAxNFj1mpCHI+F3JATB0N8V0c5BBPrB7ECkDSLIy5i+A4r3lA99SmyyHfeyhr6Xkp3m9XZiqlvBeCsXoQa0PL/l2tVr+GcX9J7dBdKxaL92q12uuiayXL5XIB+T9WyYHnVHA+6HQab1Uv42L3IAEAA9kYSzDypuhgIHrH8Y+Dg4O/iy4oK5XKyNTUFBd/b0gc8nGmejQ3N3ckurjkhREkBoCoIoy9hWtO0d4BXWiXo4dh3OJg/IqStuszlZQdJi+cIIKA4Ryw6RWvCSh4xblZDqS9i/g7iL/kp4ltphIMYbInBBEICLiEO+5bGI+uCDDpcrhlGAA5H0Dv4YO+43sqqaNd2TOCBCjGoBII4MykwxL7TCVYwqQOVFja2HTwprdR+KfwGu8uXCoCcV27p5Iy25VZuPn9djOlKX3s66B+J9MRZGhBPnJtHrgTvt+8SHFAHXacBxkcwRFkIOhcFwtLiymYS4EFuN0CuuAkpuLmLUJY+l7quKAEzipwrgHHGhah3qubTjC1JAjk8IHUbZDyFirjM51O6oo9LxsPOPl4ZRZkXQX+x7iudVKxtov5nuOR00kFvcrLRkXdt307rGG08qAFvxKvcLQInw4+wfms01axRtsio+/tl5FkGbi9h3PED9wL0P3WImvLKK0HccyRnCRne3v7KxDzRxLJIU7iIj7i9BvTg6/aIfa0I7UEcUBWCnoyMzNj8/pWKeJigj5Oerp3BOwQdWSpJQjuqc5WzyKXmIyETbwBO9pGpyVILSmp3UrFqIa7iTcSQWrlaQs7ggwt7ghyBBkYMESnzoP4EhLPwZexPvqSJ8PU6XjSRugy9Lu+VCpxQ4X68vImdDSruXZSbUydB4GcayoBDIfpJE3qCBLDo8rUEYSV9dMgOWE6SZM6glZXV8sg5GcQsMeTYeqEkKBM3SC9uLh4AhI4IIcOykGCUudBQQJM144gA0OpI8gtFA0e4RaKBoLCFoVhOikmdV1MDI8qU0dQ2KIwTCcEpo4gt1CUptdIt1DUEGOrTl0Xa5coR5CBMUeQI8jAgCHaeZAjyMCAITqSB/l7bwxFJSe6m3i1BOEGTv0A93JyzI+EpIk3YEekzGoiLUF4qVZVEi5vbW2d+45CiUtU0Me5LKACdog6stQ+k+ZOUdzEzbIkyPHp6ekv4Lp8jts3W/CI3d/xyqDVoSUIpa3BPa+CHG6G9EiC+IRhtApFog7gfAEP8PM7WW4Jtj60XQybkLjH+LFfiXUFvcro4+Y24I72SrfyIG9jJLrVt6jMbSTXtbTfAtxGa72VVld2P+i1XawfwF8ERkeQgWX3SaaBoIJMjxiIDUnTFd3kBf/elIgvn5NIP7n5H+JLUcZN4rwRAAAAAElFTkSuQmCC',\n            active: 'data:image/png;base64,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'\n        }\n    };\n\n\nmodule.exports = function ( api, ready ) {\n    var provider  = new Emitter(),\n        imagePath = api.path + '/img/' + screen.height + '/';\n\n    getAppProvider(null, function ( error, appProvider ) {\n        if ( error ) {\n            console.log('error while try to get provider');\n        }\n\n        appProvider.updateChannelsList(function () {\n\n            provider.search = function ( query, doneCallback ) {\n                // do smth\n                doneCallback(false, []);\n            };\n\n\n            provider.icons = providerIcons;\n\n            appProvider.getChannels({favorite: false}, function ( error, startData ) {\n                var dataToSend = startData.slice(0, LEANBACK_CHANNELS_COUNT).map(function ( channel ) {\n                    var icon = {\n                        normal: imagePath + 'placeholder.png',\n                        active: imagePath + 'placeholder-focus.png'\n                    };\n\n                    if ( error ) {\n                        console.log('error getting channels');\n                    }\n\n                    if ( channel.logo ) {\n                        icon = {\n                            normal: core.backend.host + channel.logo,\n                            active: core.backend.host + channel.logo\n                        };\n                    }\n\n\n                    if ( channel.censored || (channel.genre && channel.genre.censored) ) {\n                        icon = {\n                            normal: imagePath + 'parents-control.png',\n                            active: imagePath + 'parents-control-focus.png'\n                        };\n                    }\n\n                    return {\n                        id: channel.id,\n                        layout: leanback.layouts.tvChannel,\n                        geometry: leanback.geometry.horizontal,\n                        data: {\n                            name: channel.name,\n                            number: channel.number,\n                            program: {\n                                name: '',\n                                // float\n                                progress: 0\n                            },\n                            icon: icon,\n                            censored: channel.censored || (channel.genre && channel.genre.censored),\n                            url:  function ( cb ) {\n                                // error, data => {url:'', solution: 'ffmpeg'}\n                                channel.getUrl(cb);\n                            }\n                        },\n                        update: function () {\n                            var self = this;\n\n                            appProvider.getChannelsEpg({channels: [channel]}, function (error, data) {\n                                if ( !error && data && data[channel.id] && data[channel.id][0] ) {\n                                    self.data.program.name = data[channel.id][0].title;\n                                } else {\n                                    self.data.program.name = '';\n                                }\n                            });\n                        },\n                        actions: [leanback.actions.accessControl, leanback.actions.favorite],\n                        onClick: function () {\n                            // intent to player\n                            function sendIntent () {\n                                channel.getUrl(function ( error, data ) {\n                                    if ( !error && data ) {\n                                        core.intent({\n                                            action: 'play',\n                                            mime: 'content/video',\n                                            data: {\n                                                uri: data.url,\n                                                title: channel.name,\n                                                solution: data.solution || 'auto',\n                                                headless: true,\n                                                mediaId: channel.id,\n                                                tvChannel: channel,\n                                                extra: channel.extra,\n                                                retryOnError: true,\n                                                stream: true\n                                            },\n                                            events: {\n\n                                            }\n                                        }, function ( error ) {\n                                            if ( error ) { debug.log('error'); }\n                                            /* do nothing */\n                                        });\n                                    } else {\n                                        console.log('error getting channel url');\n                                    }\n                                });\n                            }\n\n                            if ( channel.censored || (channel.genre && channel.genre.censored) ) {\n                                core.accessControl.request(function ( error ) {\n                                    if ( !error ) {\n                                        sendIntent();\n                                    }\n                                });\n                            } else {\n                                sendIntent();\n                            }\n                        }\n                    };\n                });\n\n                if ( dataToSend.length ) {\n                    dataToSend.push({\n                        id: -1,\n                        layout: leanback.layouts.tvChannel,\n                        data: {\n                            name: 'See more',\n                            icon: {\n                                normal: imagePath + 'see-more-focus.png',\n                                active: imagePath + 'see-more.png'\n                            }\n                        },\n                        runApp: true\n                    });\n                }\n\n                ready(null, {\n                    provider: provider,\n                    data: dataToSend\n                });\n            });\n        });\n    });\n};\n","'use strict';\n\n\n/** @namespace */\nmodule.exports = {\n    layouts: {\n        tvChannel: 1, // tv channel item with playback and epg now\n        video: 2,  // moview preview with play now item\n        record: 3, // audio preview with play now item\n        static: 4, // static item by default\n        application: 5\n    },\n    geometry: {\n        square: 1,\n        horizontal: 2,\n        vertical: 3,\n        round: 4\n    },\n    actions: { // actions which can be applied to item\n        favorite: 1,\n        accessControl: 2,\n        expandItemContent: 3\n    }\n};\n"],"sourceRoot":""}