!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";var i=n(2),a=n(10).parse,o=new i;o.query=a(document.location.search.substring(1)),o.config=n(11),o.activePage=null,o.route=function(e,t){var n,i=o.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(n=o.activePage)&&n.active&&(n.$node.classList.remove("active"),n.active=!1,o.activePage=null,n.name,n.id,n.name,n.id,n.events["hide"]&&n.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,o.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:i,to:e}),!0)},e.exports=o},function(e,t,n){"use strict";var i=n(22);i.back=i.backspace,i.channelNext=i.tab,i.channelPrev=i.tab+"s",i.ok=i.enter,i.exit=i.escape,i.volumeUp=107,i.volumeDown=109,i.f1="112c",i.f2="113c",i.f3="114c",i.f4="115c",i.refresh="116c",i.frame="117c",i.phone="119c",i.set="120c",i.tv="121c",i.menu="122c",i.app="123c",i.rewind="66a",i.forward="70a",i.audio="71a",i.standby="74a",i.keyboard="76a",i.usbMounted="80a",i.usbUnmounted="81a",i.playPause="82a",i.play=-1,i.pause=-1,i.stop="83a",i.power="85a",i.record="87a",i.info="89a",i.mute="192a",i.digit0=48,i.digit1=49,i.digit2=50,i.digit3=51,i.digit4=52,i.digit5=53,i.digit6=54,i.digit7=55,i.digit8=56,i.digit9=57,e.exports=i},function(e,t,n){"use strict";function i(){this.events={}}i.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function i(){n.removeListener(e,i),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";e.exports=n(6)},function(e,t,n){"use strict";var i=n(9);e.exports=i},function(e,t,n){"use strict";var i=n(0);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+i.metrics.height+".css",document.head.appendChild(t)}},function(e,t,n){"use strict";var i=n(0),a=n(2),o=0;function s(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,a.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events["click"]&&n.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},s.prototype.remove=function(){this.parent&&(i.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},s.prototype.focus=function(e){var t=i.activePage,n=t.activeComponent;return!(!this.focusable||this===n)&&(n&&n.blur(),t.activeComponent=n=this,n.$node.classList.add("focus"),this.name,this.id,this.name,this.id,n.events["focus"]&&n.emit("focus",e),!0)},s.prototype.blur=function(){var e=i.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},s.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},s.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=s},function(e,t,n){"use strict";var i=document.createElement("div");e.exports={square:{render:function(e){e.className="content-item-square-card",e.$shadow=e.appendChild(document.createElement("div")),e.$shadow.className="content-item-square-card-shadow",e.$container=e.appendChild(document.createElement("div")),e.$container.className="content-item-square-card-container",e.$container.style.backgroundColor=this.data.colors.background,this.data.icon?(e.$container.hasImage=!1,e.$container.style.backgroundImage='url("'+this.data.icon.normal+'")'):this.data.image&&(e.$container.hasImage=!0,e.$container.style.backgroundImage='url("'+this.data.image.normal+'")',e.$container.className="content-item-square-card-container content-item-square-card-container--image"),e.$title=e.$container.appendChild(document.createElement("div")),e.$title.className="content-item-square-card-title",e.$title.innerText=this.data.name,this.data.description?(e.$description=e.$container.appendChild(document.createElement("div")),e.$description.className="content-item-square-card-description",e.$description.innerText=this.data.description):e.$description=i},focus:function(e){e.$shadow.className="content-item-square-card-shadow--focus",e.$container.className="content-item-square-card-container--focus"+(e.$container.hasImage?" content-item-square-card-container--image":""),e.$title.className="content-item-square-card-title--focus",e.$description.className="content-item-square-card-description--focus",e.$container.hasImage||(e.$container.style.backgroundImage='url("'+this.data.icon.active+'")')},blur:function(e){e.$shadow.className="content-item-square-card-shadow",e.$container.className="content-item-square-card-container"+(e.$container.hasImage?" content-item-square-card-container--image":""),e.$title.className="content-item-square-card-title",e.$description.className="content-item-square-card-description",e.$container.hasImage||(e.$container.style.backgroundImage='url("'+this.data.icon.normal+'")')}},rectangle:{render:function(e){e.className="content-item-rectangle-card",e.$shadow=e.appendChild(document.createElement("div")),e.$shadow.className="content-item-rectangle-card-shadow",e.$container=e.appendChild(document.createElement("div")),e.$container.className="content-item-rectangle-card-container",e.$container.style.backgroundColor=this.data.colors.background,"string"==typeof this.data.icon?(e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-rectangle-card-icon",e.$icon.style.backgroundImage='url("'+this.data.icon+'")'):this.data.icon.normal&&(e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-rectangle-card-icon",e.$icon.style.backgroundImage='url("'+this.data.icon.normal+'")'),e.$info=e.$container.appendChild(document.createElement("div")),e.$info.className="content-item-rectangle-card-info",e.$name=e.$info.appendChild(document.createElement("div")),e.$name.className="content-item-rectangle-card-name",e.$name.innerText=this.data.name,e.$description=e.appendChild(document.createElement("div")),e.$description.className="content-item-rectangle-card-description",e.$description.innerText=this.data.name},focus:function(e){e.$shadow.className="content-item-rectangle-card-shadow--focus",e.$container.className="content-item-rectangle-card-container--focus",e.$icon.className="content-item-rectangle-card-icon--focus",e.$info.className="content-item-rectangle-card-info--focus",e.$name.className="content-item-rectangle-card-name--focus",e.$description.className="content-item-rectangle-card-description--focus",this.data.icon.active&&(e.$icon.style.backgroundImage='url("'+this.data.icon.active+'")')},blur:function(e){e.$shadow.className="content-item-rectangle-card-shadow",e.$container.className="content-item-rectangle-card-container",e.$icon.className="content-item-rectangle-card-icon",e.$info.className="content-item-rectangle-card-info",e.$name.className="content-item-rectangle-card-name",e.$description.className="content-item-rectangle-card-description","string"==typeof this.data.icon?e.$icon.style.backgroundImage='url("'+this.data.icon+'")':this.data.icon.normal&&(e.$icon.style.backgroundImage='url("'+this.data.icon.normal+'")')}}}},function(e,t,n){"use strict";var i=n(4),a=n(17);i.data={},i.once("load",function(){var e=n(18);a([function(e){n(19).load({name:window.core.environment.language},e)},function(t){i.canvas=new e({width:screen.width,height:screen.height}),i.canvas.loadImageFromBodyBackground(function(n){i.canvas.appendTo(document.getElementById("canvasContainer")),i.canvas=new e({width:screen.width,height:screen.height}),document.body.style.backgroundImage="none",t()})},function(e){var t=window.core.backend.settings.theme;i.data.logo={url:"",position:null},t=window.core.backend.settings.themes[t]&&window.core.backend.settings.themes[t].alias?window.core.backend.settings.themes[t].alias:"default",window.core.backend.request("themes/"+t+"?colorSpace=rgba_hex&screenResolution="+screen.width+"x"+screen.height,{onload:function(t,n){t||(n.data&&n.data.logoFilename&&(i.data.logo.url=n.data.logoFilename.value),n.data&&n.data.logoAlign&&(i.data.logo.position=n.data.logoAlign.value)),e()},onerror:function(){e()},ontimeout:function(){e()}})}],function(){i.pages={main:n(21)},i.route(i.pages.main),i.pages.main.once("ready",function(){i.ready()})})})},function(e,t,n){"use strict";var i=n(0),a=n(12);window.core=window.parent.getCoreInstance(window,i),n(13),n(14),n(5)("sdk"),n(16),n(5)("app"),i.platform="mag",i.ready=function(){window.core.call("app:ready")},i.exit=function(){i.events["exit"]&&i.emit("exit"),core.call("exit")},a.load=function(e){document.body.setAttribute("platform",i.platform),core.ready?i.events["load"]&&i.emit("load",{}):core.once("load",function(){i.events[e.type]&&i.emit(e.type,e)})},a.contextmenu=function(e){e.preventDefault()},Object.keys(a).forEach(function(e){window.addEventListener(e,a[e])}),e.exports=i},function(e,t,n){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var i=n(0);e.exports={DOMContentLoaded:function(e){i.events["dom"]&&i.emit("dom",e)},load:function(e){i.events[e.type]&&i.emit(e.type,e)},unload:function(e){i.events[e.type]&&i.emit(e.type,e)},error:function(e){},keydown:function(e){var t,n=i.activePage,a={code:e.keyCode,stop:!1};e.ctrlKey&&(a.code+="c"),e.altKey&&(a.code+="a"),e.shiftKey&&(a.code+="s"),(t=n.activeComponent)&&t!==n&&(t.events[e.type]&&t.emit(e.type,a,e),!a.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,a,e)),a.stop||(n.events[e.type]&&n.emit(e.type,a,e),e.stop||i.events[e.type]&&i.emit(e.type,a,e))},keypress:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,n){"use strict";if(!document.documentElement.classList){var i=Array.prototype,a=i.indexOf,o=i.slice,s=i.push,c=i.splice,r=i.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)s.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(s.call(this,e),this._element.className=o.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(c.call(this,t,1),this._element.className=o.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";var i=n(0),a=n(15);i.metrics=a[i.query.screenHeight]||a[screen.height]||a[720],i.metrics.availHeight=i.metrics.height-(i.metrics.availTop+i.metrics.availBottom),i.metrics.availWidth=i.metrics.width-(i.metrics.availLeft+i.metrics.availRight)},function(e,t,n){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(e,t,n){"use strict";var i,a=n(0);(i=document.createElement("link")).rel="stylesheet",i.href=window.core.theme.path+a.metrics.height+".css",document.head.appendChild(i),e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1,i=0,a=[];e=Array.isArray(e)?e:[],"function"!=typeof t&&(t=function(){}),0===e.length?t(null,a):e.forEach(function(o,s){var c=function(o,c){if(!n){if(o)return n=!0,void t(o);if(a[s]=c,++i===e.length)t(null,a);else if(i>e.length)throw Error("done callback invoked more than one time in function with "+s+" position in tasks array")}};0===o.length?c(null,o()):o(c)})}},function(e,t,n){"use strict";function i(e){e=e||{},this.$dom=document.createElement("canvas"),e.width&&(this.$dom.width=e.width),e.height&&(this.$dom.height=e.height),this.context=this.$dom.getContext("2d"),this.currentImage=null}i.prototype=Object.create({}),i.prototype.constructor=i,i.prototype.appendTo=function(e){e.appendChild(this.$dom)},i.prototype.drawImageFromUrl=function(e,t){var n=this,i=document.createElement("img");i.src=e,i.onload=function(){n.context.drawImage(i,0,0),n.currentImage=i,t&&t(!1)},i.onerror=function(){t&&t(!0)}},i.prototype.clearRect=function(e){e=e||{},this.context.clearRect(e.x,e.y,e.width,e.height)},i.prototype.restoreImage=function(){return!!this.currentImage&&(this.context.drawImage(this.currentImage,0,0),!0)},i.prototype.getBase64String=function(){return this.$dom.toDataURL()},i.prototype.loadImageFromBodyBackground=function(e){var t;(t=window.getComputedStyle(document.body).backgroundImage.replace('url("',"").replace('")',"").replace("url","").replace("(","").replace(")",""))?this.drawImageFromUrl(t,e):e(!0)},e.exports=i},function(e,t,n){"use strict";var i=n(2),a=n(20),o=new i;function s(e){var t=new a(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}o.defaultLanguage="en",o.load=function(e,t){var n;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===o.defaultLanguage?(s(),t(null),!1):((n=new XMLHttpRequest).onload=function(){try{s(JSON.parse(n.responseText)),t(null),o.events["load"]&&o.emit("load")}catch(e){n.onerror(e)}},n.ontimeout=n.onerror=function(e){s(),t(e),o.events["error"]&&o.emit("error",e)},n.open("GET",e.path+"/"+e.name+"."+e.ext,!0),n.send(null),!0)},e.exports=o},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,n){"use strict";var i=n(4),a=n(1),o=n(23),s=n(25),c=document.getElementById("pmHeader"),r=new o({$node:document.getElementById("pageMain"),focusable:!1}),d=new s({$node:document.getElementById("pmContentBoard"),provider:window.core.plugins.contentBoard,focusable:!0,parent:r,events:{"focus:row":function(e){2===e.focusIndex&&e.direction===a.down?this.$node.scrollIntoView(!1):1===e.focusIndex&&e.direction===a.up&&c.scrollIntoView(!1)},ready:function(){r.emit("ready")}}}),l=n(34),m=n(35),u=[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")];r.addListener("show",function(){d.focus()}),window.pmLogo.style.backgroundImage="url("+i.data.logo.url+")",null!==i.data.logo.position&&(window.pmLogo.className="icon-position--"+i.data.logo.position),i.date=new Date,i.ts=Date.now(),window.pmTime.innerText=m(i.ts),window.pmDate.innerText=l(i.ts,u),setInterval(function(){i.ts=Date.now(),window.pmTime.innerText=m(i.ts),window.pmDate.innerText=l(i.ts,u)},3e4),core.addListener("focus",function(){r.activeComponent.emit("focus")}),i.addListener("unload",function(){c.scrollIntoView(!0)}),e.exports=r},function(e,t,n){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,n){"use strict";e.exports=n(24),e.exports.prototype.name="stb-component-page"},function(e,t,n){"use strict";var i=n(6);function a(e){e=e||{},this.active=!1,this.activeComponent=null,i.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-page",e.exports=a},function(e,t,n){"use strict";var i=n(1),a=n(3),o=n(26),s=n(33);function c(e){var t=0,n=this,o=!1,s=[],c=[],r=[];this.apps=[],this.appInFocus=!1,this.$focusLine=null,this.focusIndex=0,this.move=function(e){var t,a;if(e===i.down){if(!(n.focusIndex<n.apps.length-1))return!1;a=n.focusIndex+1,n.focusIndex>0&&(t=n.apps[n.focusIndex].list.height,n.$node.scrollTop+=t),n.focusIndex=a}else{if(e!==i.up)return!1;n.focusIndex>0&&(a=n.focusIndex-1,t=n.apps[a].list.height,n.$node.scrollTop-=t,n.focusIndex=a)}return n.emit("focus:row",{direction:e,focusIndex:n.focusIndex}),n.$focusLine&&n.$focusLine.classList.remove("focus"),n.$focusLine=n.apps[n.focusIndex].$line,n.$focusLine.classList.add("focus"),!0},this.listKeydown=function(e){o&&(e.stop||(e.code===i.up||e.code===i.down?n.move(e.code)&&n.apps[n.focusIndex].list.focus():e.code===i.left&&n.apps[n.focusIndex].list.$node.firstChild===n.apps[n.focusIndex].list.$focusItem&&n.apps[n.focusIndex].app.focus()))},this.appButtonKeydown=function(e){o&&(e.code===i.up||e.code===i.down?n.move(e.code)&&n.apps[n.focusIndex].app.focus():e.code===i.right&&n.apps[n.focusIndex].list.focus())},e.events.mousewheel=function(t){e.events.keydown(t.wheelDeltaY>0?{code:i.up}:{code:i.down}),t.preventDefault()},a.call(n,e),this.$node.className="container content-board",e.provider.load({offset:t,count:30},function(){for(;t<30;)e.provider.providers[t]&&"magcore-app-records"!==e.provider.providers[t].application.packageName&&(s.push(e.provider.providers[t]),c.push(e.provider.rows[t]),n.addContentList(e.provider.providers[t],e.provider.rows[t])),++t;setTimeout(function(){var e,t,n=[];s.forEach(function(n){var i=n.application.uris.icons;e=new Image,t=new Image,e.src=i.primeLogoNormal,t.src=i.primeLogoActive,r.push(e,t),"Apps"===n.application.name&&(e=new Image,t=new Image,e.src=i.shadowNormal,t.src=i.shadowActive,r.push(e,t))}),c.forEach(function(i,a){var o,s,c;for(s=0;s<i.length;s+=1)o=i[s],(c=a?{normal:o.data.icon?o.data.icon.normal:null,active:o.data.icon?o.data.icon.active:null}:{normal:o.data.icons.primeLogoNormal,active:o.data.icons.primeLogoActive}).normal&&-1===n.indexOf(c.normal)&&(n.push(c.normal),e=new Image,t=new Image,e.src=c.normal,t.src=c.active,r.push(e,t))})},0),setTimeout(function(){n.children[n.focusIndex].focus(),n.$focusLine=n.apps[n.focusIndex].$line,n.$focusLine.classList.add("focus"),n.emit("ready"),o=!0},0)})}c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.name="content-board",c.prototype.addContentList=function(e,t){var n,i,a,c;t&&0!==t.length&&(n=document.createElement("div"),i=new s(e),c=new o(a={data:t,provider:e}),n.className=a.listClass?"content-line-"+a.listClass:"content-line",e.instance&&e.instance.addListener&&(e.instance.addListener("add",function(t){t.data.colors=e.colors,c.addContentItem(t)}),e.instance.addListener("remove",function(e){c.removeContentItem(e)}),e.instance.addListener("update",function(e){})),this.$node.appendChild(n),this.apps.push({$line:n,app:i,list:c}),n.appendChild(i.$node),n.appendChild(c.$node),this.add(c),c.height=c.$node.offsetHeight,c.addListener("keydown",this.listKeydown),i.addListener("keydown",this.appButtonKeydown))},e.exports=c},function(e,t,n){"use strict";var i=n(3),a=n(1),o=n(27);function s(e){var t=this;e.provider.layout&&(e.className="content-list-"+e.provider.layout,e.listClass=e.provider.layout),"magcore-plugin-backend-radio"!==e.provider.packageName&&"magcore-plugin-backend-karaoke"!==e.provider.packageName||(e.className="content-list-static-square",e.listClass="static-square"),t.$focusItem=null,t.viewIndex=null,t.data=[],this.disabledList=[],t.cycle=!1,t.dataToDOM={},i.call(t,e),this.addListener("focus",function(){setTimeout(function(){null===t.$focusItem&&t.$body.firstChild?t.focusItem(t.$body.firstChild):null!==t.$focusItem&&t.focusItem(t.$focusItem)},0)}),this.addListener("blur",function(){t.blurItem(t.$focusItem)}),this.init(e)}function c(e){var t,n,i=0;for(0;i<e.length;)t=e[i],n=o[t.layout],t.geometry&&n[t.geometry]&&(n=n[t.geometry]),t.render=n.render,t.focus=n.focus,t.blur=n.blur,++i;return e}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.name="content-list",s.prototype.defaultEvents={mousewheel:function(e){this.parent.emit("mousewheel",e)},keydown:function(e){var t;e.code===a.left||e.code===a.right?this.move(e.code)&&(e.stop=!0):e.code===a.ok&&(t=this.data[this.$focusItem.tabIndex],this.$focusItem.timeoutId&&clearTimeout(this.$focusItem.timeoutId),t.onClick?this.data[this.$focusItem.tabIndex].onClick():t.data.onClick&&t.data.onClick())}},s.prototype.renderView=function(e){var t,n,i;if(this.viewIndex!==e)for(this.viewIndex=e,n=0;n<this.size;)t=this.$body.children[n],(i=this.data[e])?(t.tabIndex=e,i.render(t)):(t.className="hidden",t.ready=!1),++n,++e},s.prototype.focusItem=function(e){var t=this.$focusItem;null!==t&&this.blurItem(t),this.$focusItem=e,this.data[e.tabIndex].focus(e),this.emit("focus:item",{$prev:t,$item:e})},s.prototype.blurItem=function(e){e&&(this.data[e.tabIndex].blur(e),this.events["blur:item"]&&this.emit("blur:item",{$item:e}))},s.prototype.move=function(e){var t,n;if(!this.data.length)return!1;switch(e){case a.left:return n=this.$focusItem.previousSibling,this.$focusItem&&this.$focusItem.tabIndex>0?(this.focusItem(this.$focusItem.previousSibling),this.disabledList.length&&((t=this.disabledList.pop()).style.display=""),!0):!1;case a.right:return n=this.$focusItem.nextSibling,this.$focusItem&&this.$focusItem.tabIndex<this.data.length-1?(this.focusItem(this.$focusItem.nextSibling),n.offsetWidth*n.tabIndex>this.$node.offsetWidth/2&&(t=this.$node.children[this.disabledList.length],this.disabledList.push(t),t.style.display="none"),!0):!1}return!1},s.prototype.init=function(e){var t,n,i=this,a=this.$body.children.length,o=function(e){this.data&&(i.focusItem(this),i.events["click:item"]&&i.emit("click:item",{$item:this,event:e}))};if(e.data&&(this.data=c(e.data),this.size=this.data.length),void 0!==e.cycle&&(this.cycle=e.cycle),e.size&&(this.size=e.size),this.size!==a)for(a>0&&(this.$body.innerText=null),n=0;n<this.size;n++)(t=document.createElement("div")).tabIndex=n,t.addEventListener("click",o),this.$body.appendChild(t),this.data[n].id&&(this.dataToDOM[this.data[n].id]=t);this.renderView(0),this.$focusItem=i.$body.children[0]},s.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},s.prototype.addContentItem=function(e){var t,n=this,i=document.createElement("div");for(this.dataToDOM[e.id]=i,e=c([e])[0],i.addEventListener("click",function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))}),void 0===e.index?(this.data.splice(this.size-2,0,e),this.$body.insertBefore(i,this.$body.children[this.size-2])):(this.data.splice(e.index,0,e),this.$body.insertBefore(i,this.$body.children[e.index])),this.size+=1,t=0;t<this.size;t+=1)this.$body.children[t].tabIndex=t;e.render(i)},s.prototype.removeContentItem=function(e){var t,n=this.$focusItem,i=n.parentNode;for(this.dataToDOM[e.id]&&(this.$body.removeChild(this.dataToDOM[e.id]),delete this.dataToDOM[e.id]),this.size-=1,this.data.splice(this.data.indexOf(e),1),t=0;t<this.size;t+=1)this.$body.children[t].tabIndex=t;i.classList.contains("focus")&&this.focusIndex(n.tabIndex)},e.exports=s},function(e,t,n){"use strict";var i={},a=n(28),o=n(7);i[void 0]=n(7),i[a.layouts.tvChannel]=n(29),i[a.layouts.video]=n(30),i[a.layouts.static]={},i[a.layouts.static][a.geometry.square]=o.square,i[a.layouts.static][a.geometry.horizontal]=o.rectangle,i[a.layouts.record]=n(31),i[a.layouts.application]=n(32),e.exports=i},function(e,t,n){"use strict";e.exports={layouts:{tvChannel:1,video:2,record:3,static:4,application:5},geometry:{square:1,horizontal:2,vertical:3,round:4},actions:{favorite:1,accessControl:2,expandItemContent:3}}},function(e,t,n){"use strict";var i={timeoutId:-1,intent:null,active:!0};function a(e,t){i.active&&(i.intent=core.intent({action:"play",mime:"content/video",silent:!0,data:{title:e.name,uri:e.url,solution:e.solution,viewport:{x:t.left,y:t.top,width:t.width+2,height:t.height+2},displayOnTop:!0,aspect:0}},function(){}))}function o(){clearTimeout(i.timeoutId),null!==i.intent&&(i.intent.emit("playback:stop"),i.intent=null)}core.addListeners({blur:function(){i.active=!1,o()},focus:function(){i.active=!0}}),e.exports={render:function(e){var t=this.data.number;e.className="content-item-tv",e.$shadow=e.appendChild(document.createElement("div")),e.$shadow.className="content-item-tv-shadow",e.$container=e.appendChild(document.createElement("div")),e.$container.className="content-item-tv-container",e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-tv-icon",e.$icon.style.backgroundImage='url("'+this.data.icon.normal+'")',e.$info=e.$container.appendChild(document.createElement("div")),e.$info.className="content-item-tv-info",e.$index=e.$info.appendChild(document.createElement("div")),e.$index.className="content-item-tv-index",e.$description=e.$info.appendChild(document.createElement("div")),e.$description.className="content-item-tv-description",e.$description.innerText=this.data.name,e.$channelInfo=e.appendChild(document.createElement("div")),e.$channelInfo.className="content-item-tv-channel-info",e.$channelDescription=e.appendChild(document.createElement("div")),e.$channelDescription.className="content-item-tv-channel-description",this.runApp?e.$channelInfo.innerText=this.data.name:(e.$index.innerText=t,e.$channelInfo.innerText=t+". "+this.data.name),this.data.program&&this.data.program.name&&(e.$channelDescription.innerText=this.data.program.name)},focus:function(e){e.$shadow.className="content-item-tv-shadow--focus",e.$container.className="content-item-tv-container--focus",e.$icon.className="content-item-tv-icon--focus",e.$info.className="content-item-tv-info--focus",e.$index.className="content-item-tv-index--focus",e.$description.className="content-item-tv-description--focus",e.$channelInfo.className="content-item-tv-channel-info--focus",e.$channelDescription.className="content-item-tv-channel-description--focus",this.data.censored||function(e,t){var n;i.timeoutId=e.timeoutId=setTimeout(function(){"function"==typeof t.url?t.url(function(i,o){i||t.url&&(n=e.$container.getBoundingClientRect(),a({name:t.name,url:o.url,solution:o.solution},n))}):"string"==typeof t.url&&(n=e.$container.getBoundingClientRect(),a(t,n))},2e3)}(e,this.data)},blur:function(e){e.$shadow.className="content-item-tv-shadow",e.$container.className="content-item-tv-container",e.$icon.className="content-item-tv-icon",e.$info.className="content-item-tv-info",e.$index.className="content-item-tv-index",e.$description.className="content-item-tv-description",e.$channelInfo.className="content-item-tv-channel-info",e.$channelDescription.className="content-item-tv-channel-description",o()}}},function(e,t,n){"use strict";e.exports={render:function(e){e.className="content-item-movie",e.$shadow=e.appendChild(document.createElement("div")),e.$shadow.className="content-item-movie-shadow",e.$container=e.appendChild(document.createElement("div")),this.data.icon?(e.$container.hasImage=!1,e.$container.className="content-item-movie-container","string"==typeof this.data.icon?e.$container.style.backgroundImage="url("+this.data.icon+")":e.$container.style.backgroundImage='url("'+this.data.icon.normal+'")'):this.data.image&&(e.$container.hasImage=!0,e.$container.style.backgroundImage='url("'+this.data.image.normal+'")',e.$container.className="content-item-movie-container content-item-movie-container--image"),e.$container.style.backgroundColor=this.data.colors.background,e.$title=e.$container.appendChild(document.createElement("div")),e.$title.className="content-item-movie-title",e.$title.innerText=this.data.name,e.$description=e.$container.appendChild(document.createElement("div")),e.$description.className="content-item-movie-description",this.data.description&&(e.$description.innerText=this.data.description)},focus:function(e){e.$shadow.className="content-item-movie-shadow--focus",e.$container.className="content-item-movie-container--focus"+(e.$container.hasImage?" content-item-movie-container--image":""),e.$title.className="content-item-movie-title--focus",e.$description.className="content-item-movie-description--focus",e.$container.hasImage||(e.$container.style.backgroundImage='url("'+this.data.icon.active+'")')},blur:function(e){e.$shadow.className="content-item-movie-shadow",e.$container.className="content-item-movie-container"+(e.$container.hasImage?" content-item-movie-container--image":""),e.$title.className="content-item-movie-title",e.$description.className="content-item-movie-description",e.$container.hasImage||(e.$container.style.backgroundImage='url("'+this.data.icon.normal+'")')}}},function(e,t,n){"use strict";var i=document.createElement("div");e.exports={render:function(e){e.className="content-item-record",e.$shadow=e.appendChild(document.createElement("div")),e.$shadow.className="content-item-record-shadow",e.$container=e.appendChild(document.createElement("div")),e.$container.className="content-item-record-container",e.$container.style.backgroundColor=this.data.colors.background,"string"==typeof this.data.icon?(e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-record-card-icon",e.$icon.style.backgroundImage='url("'+this.data.icon+'")'):this.data.icon&&this.data.icon.normal?(e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-record-card-icon",e.$icon.style.backgroundImage='url("'+this.data.icon.normal+'")'):e.$icon=i,e.$name=e.$container.appendChild(document.createElement("div")),e.$name.className="content-item-record-name",e.$nameText=e.$name.appendChild(document.createElement("div")),e.$nameText.className="content-item-record-name-text",e.$nameText.innerText=this.data.name,e.$state=document.createElement("div"),e.$state.className="content-item-record-state",e.$progressBar=document.createElement("div"),e.$progressBar.className="content-item-record-progress-bar",e.$progressLine=e.$progressBar.appendChild(document.createElement("div")),e.$progressLine.className="content-item-record-progress-line",e.$progressPercent=e.$progressBar.appendChild(document.createElement("div")),e.$progressPercent.className="content-item-record-progress-percent",0===this.data.progress?(e.$container.appendChild(e.$state),e.$state.innerText=this.data.state):100===this.data.progress?(e.$container.appendChild(e.$state),e.$state.innerText=this.data.state):(e.$container.appendChild(e.$progressBar),e.$progressBar.className="content-item-record-progress-bar--active",e.$progressLine.style.width=this.data.progress+"%",e.$progressPercent.innerText=this.data.progress+"%")},focus:function(e){e.$shadow.className="content-item-record-shadow--focus",e.$container.className="content-item-record-container--focus",e.$icon.className="content-item-record-icon--focus",e.$name.className="content-item-record-name--focus",e.$nameText.className="content-item-record-name-text--focus",e.$state.className="content-item-record-state--focus",this.data.progress>0&&this.data.progress<100&&(e.$container.appendChild(e.$progressBar),e.$progressBar.className="content-item-record-progress-bar--active-focus",e.$progressLine.className="content-item-record-progress-line--focus",e.$progressPercent.className="content-item-record-progress-percent--focus"),this.data.icon&&this.data.icon.active&&(e.$icon.style.backgroundImage='url("'+this.data.icon.active+'")')},blur:function(e){e.$shadow.className="content-item-record-shadow",e.$container.className="content-item-record-container",e.$icon.className="content-item-record-icon",e.$name.className="content-item-record-name",e.$nameText.className="content-item-record-name-text",e.$state.className="content-item-record-state",this.data.progress>0&&this.data.progress<100&&(e.$container.appendChild(e.$progressBar),e.$progressBar.className="content-item-record-progress-bar--active",e.$progressLine.className="content-item-record-progress-line",e.$progressPercent.className="content-item-record-progress-percent"),"string"==typeof this.data.icon?e.$icon.style.backgroundImage='url("'+this.data.icon+'")':this.data.icon&&this.data.icon.normal&&(e.$icon.style.backgroundImage='url("'+this.data.icon.normal+'")')}}},function(e,t,n){"use strict";e.exports={render:function(e){e.className="content-item-app",e.$container=e.appendChild(document.createElement("div")),e.$container.className="content-item-app-container",e.$container.style.backgroundColor=this.data.colors.splashBackground,e.$overlay=e.$container.appendChild(document.createElement("div")),e.$overlay.className="content-item-app-overlay",e.$icon=e.$container.appendChild(document.createElement("div")),e.$icon.className="content-item-app-icon",e.$icon.style.backgroundImage='url("'+this.data.icons.primeLogoNormal+'")',e.$name=e.$container.appendChild(document.createElement("div")),e.$name.className="content-item-app-name",e.$name.innerText=this.data.name},focus:function(e){e.$container.className="content-item-app-container--focus",e.$overlay.className="content-item-app-overlay--focus",e.$icon.className="content-item-app-icon--focus",e.$name.className="content-item-app-name--focus",e.$icon.style.backgroundImage='url("'+this.data.icons.primeLogoActive+'")'},blur:function(e){e.$container.className="content-item-app-container",e.$overlay.className="content-item-app-overlay",e.$icon.className="content-item-app-icon",e.$name.className="content-item-app-name",e.$icon.style.backgroundImage='url("'+this.data.icons.primeLogoNormal+'")'}}},function(e,t,n){"use strict";var i=n(1),a=n(3);function o(e){var t=this,n=e.application.uris.icons;e.events={click:function(){},keydown:function(t){t.code===i.ok&&e.onClick()},focus:function(){t.$background.className="app-background--focus",t.$name.className="app-name--focus",t.$overlay.className="app-overlay--focus",t.$overlayIcon.className="app-overlay-icon--focus",n.shadowActive&&(t.$overlay.style.backgroundImage="url("+n.shadowActive+")"),t.$overlayIcon.style.backgroundImage="url("+n.primeLogoActive+")"},blur:function(){t.$background.className="app-background",t.$name.className="app-name",t.$overlay.className="app-overlay",t.$overlayIcon.className="app-overlay-icon",n.shadowNormal&&(t.$overlay.style.backgroundImage="url("+n.shadowNormal+")"),t.$overlayIcon.style.backgroundImage="url("+n.primeLogoNormal+")"}},a.call(t,e),t.$body=t.$node.appendChild(document.createElement("div")),t.$body.className="app-body",t.$background=t.$body.appendChild(document.createElement("div")),t.$background.className="app-background",t.$background.style.backgroundColor=e.application.colors.splashBackground,t.$name=t.$body.appendChild(document.createElement("div")),t.$name.className="app-name",t.$name.innerText=e.application.name,t.$overlay=t.$body.appendChild(document.createElement("div")),t.$overlay.className="app-overlay",n.shadowNormal&&(t.$overlay.style.backgroundImage="url("+n.shadowNormal+")"),t.$overlayIcon=t.$body.appendChild(document.createElement("div")),t.$overlayIcon.className="app-overlay-icon",t.$overlayIcon.style.backgroundImage="url("+n.primeLogoNormal+")"}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.name="app-button",e.exports=o},function(e,t,n){"use strict";var i=new Date;e.exports=function(e,t){var n;return n=t[i.getMonth()],i.getDate()+" "+n}},function(e,t,n){"use strict";var i=new Date;e.exports=function(e){var t,n;return i.setTime(e),(t=i.getHours())<10&&(t="0"+t),(n=i.getMinutes())<10&&(n="0"+n),t+":"+n}}]);
//# sourceMappingURL=main.js.map